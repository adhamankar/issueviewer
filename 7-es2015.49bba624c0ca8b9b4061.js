(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(e,t,s){"use strict";s.r(t);var i=s("ofXK"),a=s("kt0X"),n=s("l2bN"),c=s("6NWb"),o=s("tyNb"),r=s("sITn"),l=s("3Pt+"),u=s("jLSX"),b=s("EVgl"),d=s("LPYB"),h=(s("hSFZ"),s("/RsI"));const p={queryContext:null,issuelist:null,timelineView:null,savedSearchlist:null};var g=s("LvDl"),m=s("j9Al");const f={SetQueryContext:Object(m.b)("[SetQueryContext]"),LoadSearchResults:Object(m.b)("[LoadSearchResults]"),LoadSearchResultsFailed:Object(m.b)("[LoadSearchResults] Failed"),LoadSearchResultsSuccess:Object(m.b)("[LoadSearchResults] Success"),LoadSavedSearchlist:Object(m.b)("[LoadSavedSearchlist]"),LoadSavedSearchlistFailed:Object(m.b)("[LoadSavedSearchlist] Failed"),LoadSavedSearchlistSuccess:Object(m.b)("[LoadSavedSearchlist] Success"),PopulateSearchResultTimelineView:Object(m.b)("[PopulateSearchResultTimelineView]"),LoadSearchResultTimelineNode:Object(m.b)("[LoadSearchResultTimelineNode]"),LoadSearchResultTimelineNodeFailed:Object(m.b)("[LoadSearchResultTimelineNode] Failed"),LoadSearchResultTimelineNodeSuccess:Object(m.b)("[LoadSearchResultTimelineNode] Success")};class y{constructor(e){this.payload=e,this.type=f.PopulateSearchResultTimelineView}}class S{constructor(e){this.payload=e,this.type=f.LoadSearchResultTimelineNode}}class v{constructor(e){this.payload=e,this.type=f.LoadSearchResults}}class O{constructor(e){this.payload=e,this.type=f.LoadSavedSearchlist}}var C=s("iPf6"),j=s("krUz"),V=s("uAqM");function k(e,t){switch(t.type){case f.SetQueryContext:return Object.assign(Object.assign({},e),{queryContext:t.payload});case f.LoadSearchResults:return Object.assign(Object.assign({},e),{issuelist:[]});case f.LoadSearchResultsSuccess:return Object.assign(Object.assign({},e),{issuelist:t.payload});case f.LoadSavedSearchlist:return Object.assign(Object.assign({},e),{savedSearchlist:[]});case f.LoadSavedSearchlistSuccess:{const s=g.map(t.payload,e=>g.pick(e,["id","name","jql"]));return Object.assign(Object.assign({},e),{savedSearchlist:s})}case f.PopulateSearchResultTimelineView:{const s=t.payload.startdateField,i=t.payload.results,a=C.a(i,s),n=C.b(i,a.timespan,s,!0);return Object.assign(Object.assign({},e),{timelineView:{metadata:a,records:n}})}case f.LoadSearchResultTimelineNodeSuccess:{const s="created",i=t.payload.issueKey,a=t.payload.payload&&t.payload.payload.issues?g.map(t.payload.payload.issues,e=>Object(j.q)(e)):[],n=C.b(a,e.timelineView.metadata.timespan,s,!1),c="components";return Object.assign(Object.assign({},e),{timelineView:Object.assign(Object.assign({},e.timelineView),{records:e.timelineView.records.map(e=>e&&e.data&&e.data.key===i?Object.assign(Object.assign({},e),{children:n,data:Object.assign(Object.assign({},e.data),{isHeading:n&&n.length>0,statistics:Object(V.d)(Object(V.a)(a,c),a,e.data.label,c)})}):e)})})}default:return e}}var x=s("1kSV"),w=s("itXk"),I=s("pLZG"),L=s("lJxs"),W=s("SYT+"),q=s("fXoL");const R=function(){return["/search/list"]},F=function(e){return{query:e}};function $(e,t){if(1&e&&(q.Wb(0,"div",9),q.Wb(1,"a",10),q.Oc(2),q.Vb(),q.Vb()),2&e){const e=t.$implicit;q.Cb(1),q.qc("routerLink",q.tc(3,R))("queryParams",q.uc(4,F,e.jql)),q.Cb(1),q.Qc(" ",e.name," ")}}function M(e,t){if(1&e&&(q.Wb(0,"div",7),q.Mc(1,$,3,6,"div",8),q.Vb()),2&e){const e=q.kc();q.Cb(1),q.qc("ngForOf",e.searchlist)}}let P=(()=>{class e{constructor(e){this.store$=e,this.close=new q.n}ngOnInit(){this.searchlist$=this.store$.select(e=>e.search.savedSearchlist).pipe(Object(I.a)(e=>e)).subscribe(e=>this.searchlist=e),this.store$.dispatch(new O(null))}ngOnDestroy(){}onClose(){this.close.emit(null)}}return e.\u0275fac=function(t){return new(t||e)(q.Qb(a.h))},e.\u0275cmp=q.Kb({type:e,selectors:[["app-favourite-searches"]],outputs:{close:"close"},decls:10,vars:1,consts:[[1,"pane"],[1,"pane-header"],[1,"pane-body","pl-4","pr-4"],["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"pane-footer","text-right"],[1,"btn","btn-default","btn-sm",3,"click"],["icon","times",1,"mr-1"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted","text-nowrap",3,"routerLink","queryParams"]],template:function(e,t){1&e&&(q.Wb(0,"div",0),q.Wb(1,"div",1),q.Wb(2,"h4"),q.Oc(3,"Favorite"),q.Vb(),q.Vb(),q.Wb(4,"div",2),q.Mc(5,M,2,1,"div",3),q.Vb(),q.Wb(6,"div",4),q.Wb(7,"button",5),q.ic("click",(function(){return t.onClose()})),q.Rb(8,"fa-icon",6),q.Oc(9," Close "),q.Vb(),q.Vb(),q.Vb()),2&e&&(q.Cb(5),q.qc("ngIf",t.searchlist))},directives:[i.m,c.a,i.l,o.f],encapsulation:2}),e})();function N(e,t){if(1&e){const e=q.Xb();q.Wb(0,"div",13),q.Wb(1,"ngb-pagination",14),q.ic("pageChange",(function(t){return q.Fc(e),q.kc().currentPageIndex=t}))("pageChange",(function(){return q.Fc(e),q.kc().onPageChange()})),q.Vb(),q.Vb()}if(2&e){const e=q.kc();q.Cb(1),q.qc("maxSize",3)("page",e.currentPageIndex)("boundaryLinks",!0)("pageSize",e.issuelist.pageSize)("collectionSize",e.issuelist.total)}}function T(e,t){if(1&e&&(q.Wb(0,"div",15),q.Oc(1),q.Wb(2,"b"),q.Oc(3),q.Vb(),q.Vb()),2&e){const e=q.kc();q.Cb(1),q.Rc(" ",e.issuelist.startAt+1," - ",e.issuelist.endAt," / "),q.Cb(2),q.Pc(e.issuelist.total)}}function Q(e,t){1&e&&(q.Wb(0,"div",16),q.Wb(1,"a",17),q.Rb(2,"fa-icon",18),q.Oc(3," List "),q.Vb(),q.Wb(4,"a",19),q.Rb(5,"fa-icon",20),q.Oc(6," Storyboard "),q.Vb(),q.Wb(7,"a",21),q.Rb(8,"fa-icon",22),q.Wb(9,"span",23),q.Oc(10,"Timeline"),q.Vb(),q.Vb(),q.Vb()),2&e&&(q.Cb(2),q.qc("fixedWidth",!0),q.Cb(2),q.qc("routerLinkActive","active"),q.Cb(1),q.qc("fixedWidth",!0),q.Cb(2),q.qc("routerLinkActive","active"))}function z(e,t){1&e&&(q.Wb(0,"h4",24),q.Rb(1,"fa-icon",25),q.Oc(2," No Records found. "),q.Vb())}let E=(()=>{class e{constructor(e,t,s){this.router=e,this.activatedRoute=t,this.store$=s,this.selectedTab=1,this.currentPageIndex=1,this.showSavedSearches=!1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0,this.canExecuteQuery=()=>this.query&&this.query.trim().length>0}ngOnInit(){this.store$.dispatch(new W.m(!0));const e=this.activatedRoute.queryParams.pipe(Object(I.a)(e=>e&&e.query&&e.query.length>0),Object(L.a)(e=>e.query)),t=this.store$.select(e=>e.app.allExtendedFields);this.combined$=Object(w.a)(e,t).subscribe(([e,t])=>{this.query=e,this.allExtendedFields=t,this.executeQuery()}),this.issuelist$=this.store$.select(e=>e.search.issuelist).pipe(Object(I.a)(e=>e)).subscribe(e=>this.issuelist=e)}ngOnDestroy(){this.combined$&&this.combined$.unsubscribe()}parseQueryContext(e,t){if(e)return e.issueType!==j.a.Organization&&t.push({key:e.issueType,value:e.key}),e.parent?this.parseQueryContext(e.parent,t):null}navigateTo(e){this.canNavigate()&&this.router.navigate(["/browse",e.trim()])}executeQuery(){this.canExecuteQuery()&&(this.showSavedSearches=!1,this.store$.dispatch(new v({query:this.query,allExtendedFields:this.allExtendedFields,currentPageIndex:this.currentPageIndex})))}onPageChange(){this.executeQuery()}}return e.\u0275fac=function(t){return new(t||e)(q.Qb(o.d),q.Qb(o.a),q.Qb(a.h))},e.\u0275cmp=q.Kb({type:e,selectors:[["app-result-container"]],decls:14,vars:6,consts:[[1,"main-container"],[1,"bg-light","pb-1","border-bottom"],["class","float-right mb-0 mt-1 mr-3",4,"ngIf"],["class","float-right small mt-2 mr-3",4,"ngIf"],[1,"clearfix"],["title","Show/hide saved searches",1,"btn","btn-link","mr-1",3,"click"],["icon","bars",3,"fixedWidth"],["class","btn-group btn-group-sm mr-2",4,"ngIf"],[1,"body-container"],[1,"w-100"],["class","center-text font-weight-light p-3",4,"ngIf"],["styleClass","ui-sidebar-sm","position","left",3,"visible","visibleChange","onHide"],[3,"close"],[1,"float-right","mb-0","mt-1","mr-3"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"],[1,"float-right","small","mt-2","mr-3"],[1,"btn-group","btn-group-sm","mr-2"],["routerLink","list","routerLinkActive","active","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap"],["icon","list",3,"fixedWidth"],["routerLink","storyboard","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map",3,"fixedWidth"],["routerLink","timeline","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map-signs","size","sm"],[1,"ml-1"],[1,"center-text","font-weight-light","p-3"],["icon","exclamation-triangle","size","xs",1,"mr-2","text-muted"]],template:function(e,t){1&e&&(q.Wb(0,"div",0),q.Wb(1,"div",1),q.Mc(2,N,2,5,"div",2),q.Mc(3,T,4,3,"div",3),q.Wb(4,"div",4),q.Wb(5,"button",5),q.ic("click",(function(){return t.showSavedSearches=!t.showSavedSearches})),q.Rb(6,"fa-icon",6),q.Vb(),q.Mc(7,Q,11,4,"div",7),q.Vb(),q.Vb(),q.Wb(8,"div",8),q.Wb(9,"div",9),q.Rb(10,"router-outlet"),q.Mc(11,z,3,0,"h4",10),q.Vb(),q.Vb(),q.Vb(),q.Wb(12,"p-sidebar",11),q.ic("visibleChange",(function(e){return t.showSavedSearches=e}))("onHide",(function(){return t.showSavedSearches=!1})),q.Wb(13,"app-favourite-searches",12),q.ic("close",(function(){return t.showSavedSearches=!1})),q.Vb(),q.Vb()),2&e&&(q.Cb(2),q.qc("ngIf",t.issuelist&&t.issuelist.total>t.issuelist.pageSize),q.Cb(1),q.qc("ngIf",t.issuelist&&t.issuelist.total),q.Cb(3),q.qc("fixedWidth",!0),q.Cb(1),q.qc("ngIf",t.issuelist&&t.issuelist.results&&t.issuelist.results.length>1),q.Cb(4),q.qc("ngIf",t.issuelist&&0===t.issuelist.total),q.Cb(1),q.qc("visible",t.showSavedSearches))},directives:[i.m,c.a,o.h,u.a,P,x.q,o.f,o.e],encapsulation:2}),e})();var B=s("AQDj"),A=s("qUTn");const D=function(e){return{"issue-resolved":e}},X=function(e,t){return["/browse",e,"purpose",t]};function H(e,t){if(1&e){const e=q.Xb();q.Wb(0,"tr"),q.Wb(1,"td"),q.Rb(2,"i",9),q.Vb(),q.Wb(3,"td"),q.Wb(4,"a",10),q.Oc(5),q.Vb(),q.Vb(),q.Wb(6,"td",11),q.Oc(7),q.Vb(),q.Wb(8,"td",11),q.Oc(9),q.lc(10,"date"),q.Vb(),q.Wb(11,"td",11),q.Oc(12),q.Vb(),q.Wb(13,"td"),q.Wb(14,"a",12),q.ic("click",(function(){q.Fc(e);const s=t.index;return q.kc(2).openIssueAtIndex(s)})),q.Rb(15,"fa-icon",13),q.Vb(),q.Vb(),q.Wb(16,"td"),q.Rb(17,"app-issue-navigation-menu",14),q.Vb(),q.Vb()}if(2&e){const e=t.$implicit;q.Cb(2),q.Fb("",e.icon," text-muted"),q.qc("title",e.issueType),q.Cb(2),q.qc("ngClass",q.uc(15,D,e.resolution))("routerLink",q.vc(17,X,e.key,e.key)),q.Cb(1),q.Qc(" ",e.key," "),q.Cb(2),q.Pc(e.title),q.Cb(2),q.Pc(q.nc(10,12,e.duedate,"MMM dd, yyyy")),q.Cb(3),q.Pc(e.status),q.Cb(2),q.qc("ngClass",q.uc(20,D,e.resolution)),q.Cb(3),q.qc("issueKey",e.key)}}function K(e,t){if(1&e&&(q.Wb(0,"table",3),q.Wb(1,"thead"),q.Wb(2,"tr",4),q.Wb(3,"th",5),q.Oc(4,"\xa0"),q.Vb(),q.Wb(5,"th",6),q.Oc(6,"Key"),q.Vb(),q.Wb(7,"th"),q.Oc(8,"Summary"),q.Vb(),q.Wb(9,"th",7),q.Oc(10,"Duedate"),q.Vb(),q.Wb(11,"th",6),q.Oc(12,"Status"),q.Vb(),q.Wb(13,"th",5),q.Oc(14,"\xa0"),q.Vb(),q.Wb(15,"td",5),q.Oc(16,"\xa0"),q.Vb(),q.Vb(),q.Vb(),q.Mc(17,H,18,22,"tr",8),q.Vb()),2&e){const e=q.kc();q.Cb(17),q.qc("ngForOf",e.issuelist.results)}}function G(e,t){if(1&e){const e=q.Xb();q.Wb(0,"app-issue-details",15),q.ic("close",(function(){return q.Fc(e),q.kc().issueDetailsVisible=!1})),q.Vb()}if(2&e){const e=q.kc();q.qc("list",e.issuelist.results)("currentIndex",e.currentIndex)}}let J=(()=>{class e{constructor(e,t,s){this.router=e,this.activatedRoute=t,this.store$=s,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0,this.issueDetailsVisible=!1}ngOnInit(){this.issuelist$=this.store$.select(e=>e.search.issuelist).pipe(Object(I.a)(e=>e)).subscribe(e=>this.issuelist=e)}ngOnDestroy(){}navigateTo(e){this.canNavigate()&&this.router.navigate(["/browse",e.trim()])}printExtendedValue(e){return console.log(Date.parse(e)),e?isNaN(Date.parse(e))?e:new Date(e).toDateString():""}openIssueAtIndex(e){this.issueDetailsVisible=!0,this.currentIndex=e}}return e.\u0275fac=function(t){return new(t||e)(q.Qb(o.d),q.Qb(o.a),q.Qb(a.h))},e.\u0275cmp=q.Kb({type:e,selectors:[["app-search-listview"]],decls:3,vars:5,consts:[["class","table table-striped table-sm issuelist small",4,"ngIf"],["styleClass","bg-light",3,"visible","fullScreen","showCloseIcon","visibleChange"],[3,"list","currentIndex","close",4,"ngIf"],[1,"table","table-striped","table-sm","issuelist","small"],[2,"background-color","#eee"],["width","1%"],["width","5%"],["width","10%"],[4,"ngFor","ngForOf"],[3,"title"],[1,"text-primary","text-nowrap",3,"ngClass","routerLink"],[1,"text-truncate"],[1,"text-primary","text-nowrap","ml-2",3,"ngClass","click"],["icon","external-link-alt","size","sm"],[1,"mr-2",3,"issueKey"],[3,"list","currentIndex","close"]],template:function(e,t){1&e&&(q.Mc(0,K,18,1,"table",0),q.Wb(1,"p-sidebar",1),q.ic("visibleChange",(function(e){return t.issueDetailsVisible=e})),q.Mc(2,G,1,2,"app-issue-details",2),q.Vb()),2&e&&(q.qc("ngIf",t.issuelist&&t.issuelist.total>0),q.Cb(1),q.qc("visible",t.issueDetailsVisible)("fullScreen",!0)("showCloseIcon",!1),q.Cb(1),q.qc("ngIf",t.issuelist))},directives:[i.m,u.a,i.l,o.f,i.k,c.a,B.a,A.a],pipes:[i.e],encapsulation:2}),e})();var Y=s("Ewkv"),U=s("lVkt"),Z=s("NGyg");const _=function(){return["far","chart-bar"]};function ee(e,t){if(1&e){const e=q.Xb();q.Wb(0,"button",11),q.ic("click",(function(){return q.Fc(e),q.kc(2).showStatistics=!0})),q.Rb(1,"fa-icon",12),q.Vb()}2&e&&(q.Cb(1),q.qc("icon",q.tc(1,_)))}function te(e,t){if(1&e){const e=q.Xb();q.Wb(0,"p-multiSelect",13),q.ic("ngModelChange",(function(t){return q.Fc(e),q.kc(2).selectedStatuses=t}))("onChange",(function(){return q.Fc(e),q.kc(2).onSelectedStatusChange()})),q.Vb()}if(2&e){const e=q.kc(2);q.qc("options",e.statusLookup)("ngModel",e.selectedStatuses)}}function se(e,t){if(1&e){const e=q.Xb();q.Wb(0,"p-dialog",14),q.ic("visibleChange",(function(t){return q.Fc(e),q.kc(2).showStatistics=t})),q.Rb(1,"app-statistics",15),q.Vb()}if(2&e){const e=q.kc(2);q.qc("header",e.storyboardItem.statistics.title)("dismissableMask",!0)("modal",!0)("visible",e.showStatistics),q.Cb(1),q.qc("groupByColumn",e.groupByColumn)("statistics",e.storyboardItem.statistics)}}function ie(e,t){if(1&e){const e=q.Xb();q.Wb(0,"div"),q.Mc(1,ee,2,2,"button",1),q.Wb(2,"div",2),q.Wb(3,"div",3),q.Wb(4,"select",4),q.ic("ngModelChange",(function(t){return q.Fc(e),q.kc().groupByColumn=t}))("change",(function(){return q.Fc(e),q.kc().onGroupByColumnChanged()})),q.Wb(5,"option",5),q.Oc(6,"Components"),q.Vb(),q.Wb(7,"option",6),q.Oc(8,"Labels"),q.Vb(),q.Vb(),q.Vb(),q.Wb(9,"div",7),q.Mc(10,te,1,2,"p-multiSelect",8),q.Vb(),q.Vb(),q.Rb(11,"app-storyboard-renderer",9),q.Mc(12,se,2,6,"p-dialog",10),q.Vb()}if(2&e){const e=q.kc();q.Cb(1),q.qc("ngIf",e.storyboardItem.statistics),q.Cb(3),q.qc("ngModel",e.groupByColumn),q.Cb(6),q.qc("ngIf",e.statusLookup&&e.statusLookup.length>0),q.Cb(1),q.qc("groupByColumn",e.groupByColumn)("storyboardItem",e.storyboardItem),q.Cb(1),q.qc("ngIf",e.storyboardItem.statistics)}}let ae=(()=>{class e{constructor(e,t){this.activatedRoute=e,this.store$=t,this.selectedStatuses=[],this.statusLookup=[],this.showStatistics=!1,this.groupByColumn="components",this.filterByStatus=(e,t)=>t&&t.length>0?g.filter(e,e=>void 0!==g.find(t,t=>t===e.status)):e}ngOnInit(){this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select(e=>e.search.issuelist).pipe(Object(I.a)(e=>e)).subscribe(e=>{this.issuelist=e,this.plotStoryboard()})}ngOnDestroy(){this.issuelist$&&this.issuelist$.unsubscribe()}onGroupByColumnChanged(){this.plotStoryboard()}plotStoryboard(){const e=g.map(this.selectedStatuses,"key");this.storyboardItem.metadata=Object(V.b)(this.groupByColumn),this.storyboardItem.children=this.filterByStatus(this.issuelist.results,e),Object(V.c)(this.storyboardItem.metadata,Object(V.a)(this.storyboardItem.children,this.groupByColumn),this.groupByColumn),this.storyboardItem.statistics=Object(V.d)(this.storyboardItem.metadata,this.storyboardItem.children,"Statistics",this.groupByColumn),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}onSelectedStatusChange(){this.plotStoryboard()}}return e.\u0275fac=function(t){return new(t||e)(q.Qb(o.a),q.Qb(a.h))},e.\u0275cmp=q.Kb({type:e,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],["class","btn btn-link float-right",3,"click",4,"ngIf"],[1,"row","mt-1"],[1,"col-md-2"],[1,"form-control","form-control-sm",2,"width","150px",3,"ngModel","ngModelChange","change"],["value","components"],["value","labels"],[1,"offset-md-8","col-md-2","text-right"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[3,"groupByColumn","storyboardItem"],["position","topright","class","bg-light",3,"header","dismissableMask","modal","visible","visibleChange",4,"ngIf"],[1,"btn","btn-link","float-right",3,"click"],["size","lg",3,"icon"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],["position","topright",1,"bg-light",3,"header","dismissableMask","modal","visible","visibleChange"],[3,"groupByColumn","statistics"]],template:function(e,t){1&e&&q.Mc(0,ie,13,6,"div",0),2&e&&q.qc("ngIf",t.storyboardItem&&t.storyboardItem.children)},directives:[i.m,l.k,l.f,l.i,l.j,l.l,Y.a,c.a,U.a,h.a,Z.a],encapsulation:2}),e})();var ne=s("cdP3"),ce=s("snw9"),oe=s("mrSG"),re=s("eIep"),le=s("JIr8"),ue=s("LRne"),be=s("F2Ol");let de=(()=>{class e{constructor(e,t){this.actions$=e,this.jiraService=t,this.loadSearchlist=this.actions$.pipe(Object(ce.d)(f.LoadSearchResults),Object(re.a)(e=>{const t=e.payload.allExtendedFields&&e.payload.allExtendedFields.length>0?g.map(e.payload.allExtendedFields,"id"):[];return this.jiraService.executeJql(e.payload.query,e.payload.currentPageIndex-1,50,g.union(j.s,t),"issuelist.json").pipe(Object(L.a)(t=>({total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,extendedFields:e.payload.allExtendedFields,results:g.map(t.issues,t=>Object(j.r)(t,e.payload.allExtendedFields))}))).pipe(Object(L.a)(e=>({type:f.LoadSearchResultsSuccess,payload:e})),Object(le.a)(()=>Object(ue.a)({type:f.LoadSearchResultsFailed})))})),this.loadSaveSearchlist=this.actions$.pipe(Object(ce.d)(f.LoadSavedSearchlist),Object(re.a)(()=>this.jiraService.favouriteSearches("favourite-search.json").pipe(Object(L.a)(e=>({type:f.LoadSavedSearchlistSuccess,payload:e})),Object(le.a)(()=>Object(ue.a)({type:f.LoadSavedSearchlistFailed}))))),this.loadSearchResultTimelineNode=this.actions$.pipe(Object(ce.d)(f.LoadSearchResultTimelineNode),Object(re.a)(e=>this.jiraService.loadEpicChildren$(e.payload).pipe(Object(L.a)(t=>({type:f.LoadSearchResultTimelineNodeSuccess,payload:{issueKey:e.payload,payload:t}})),Object(le.a)(()=>Object(ue.a)({type:f.LoadSearchResultTimelineNodeFailed})))))}}return e.\u0275fac=function(t){return new(t||e)(q.ec(ce.a),q.ec(be.b))},e.\u0275prov=q.Mb({token:e,factory:e.\u0275fac}),Object(oe.b)([Object(ce.b)()],e.prototype,"loadSearchlist",void 0),Object(oe.b)([Object(ce.b)()],e.prototype,"loadSaveSearchlist",void 0),Object(oe.b)([Object(ce.b)()],e.prototype,"loadSearchResultTimelineNode",void 0),e})();var he=s("5fYs");const pe=["content"];function ge(e,t){if(1&e){const e=q.Xb();q.Wb(0,"app-timeline-renderer",3),q.ic("nodeExpand",(function(t){return q.Fc(e),q.kc().onNodeExpand(t)})),q.Vb()}if(2&e){const e=q.kc();q.qc("timeline",e.timeline)("contentHeight",e.contentHeight)}}let me=(()=>{class e{constructor(e,t,s){this.cdRef=e,this.activatedRoute=t,this.store$=s,this.containerSize=80,this.contentHeight=0,this.startdateField="created"}ngOnInit(){const e=this.store$.select(e=>e.search.issuelist).pipe(Object(I.a)(e=>e&&e.results),Object(L.a)(e=>e.results)),t=this.store$.select(e=>e.app.projects);this.combined$=Object(w.a)(e,t).subscribe(([e,t])=>{if(console.log("projects",t),t){const e=g.head(t);this.startdateField=e&&e.startdate?e.startdate.id:"created"}this.store$.dispatch(new y({results:e,startdateField:this.startdateField}))}),this.timeline$=this.store$.select(e=>e.search.timelineView).pipe(Object(I.a)(e=>e)).subscribe(e=>this.timeline=e)}ngOnDestroy(){this.combined$&&this.combined$.unsubscribe(),this.timeline$&&this.timeline$.unsubscribe()}ngAfterViewInit(){this.onResize()}onResize(){this.elementView&&(this.contentHeight=this.elementView.nativeElement.offsetParent.clientHeight-this.containerSize,this.cdRef.detectChanges())}onNodeExpand(e){this.store$.dispatch(new S(e))}}return e.\u0275fac=function(t){return new(t||e)(q.Qb(q.h),q.Qb(o.a),q.Qb(a.h))},e.\u0275cmp=q.Kb({type:e,selectors:[["app-timeline-view"]],viewQuery:function(e,t){var s;1&e&&q.Sc(pe,!0),2&e&&q.Cc(s=q.jc())&&(t.elementView=s.first)},hostBindings:function(e,t){1&e&&q.ic("resize",(function(e){return t.onResize(e)}),!1,q.Ec)},decls:3,vars:1,consts:[[1,"issuelist"],["content",""],[3,"timeline","contentHeight","nodeExpand",4,"ngIf"],[3,"timeline","contentHeight","nodeExpand"]],template:function(e,t){1&e&&(q.Wb(0,"div",0,1),q.Mc(2,ge,1,2,"app-timeline-renderer",2),q.Vb()),2&e&&(q.Cb(2),q.qc("ngIf",t.timeline))},directives:[i.m,he.a],encapsulation:2}),e})();s.d(t,"SearchModule",(function(){return ye}));const fe=[{path:"",component:E,children:[{path:"list",component:J},{path:"storyboard",component:ae},{path:"timeline",component:me}]}];let ye=(()=>{class e{}return e.\u0275mod=q.Ob({type:e}),e.\u0275inj=q.Nb({factory:function(t){return new(t||e)},imports:[[i.c,o.g,l.c,n.b,c.c,u.b,b.c,h.b,d.b,U.b,ne.a,x.i,r.a,a.j.forFeature("search",k,{initialState:p}),ce.c.forFeature([de]),o.g.forChild(fe)]]}),e})()}}]);