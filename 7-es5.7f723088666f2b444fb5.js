function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],s=!0,i=!1,n=void 0;try{for(var r,c=e[Symbol.iterator]();!(s=(r=c.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(o){i=!0,n=o}finally{try{s||null==c.return||c.return()}finally{if(i)throw n}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(e,t,a){"use strict";a.r(t);var s=a("ofXK"),i=a("kt0X"),n=a("l2bN"),r=a("6NWb"),c=a("tyNb"),o=a("sITn"),u=a("3Pt+"),l=a("jLSX"),d=a("EVgl"),b=a("LPYB"),h=(a("hSFZ"),a("/RsI")),p={queryContext:null,issuelist:null,roadmapView:null,savedSearchlist:null},f=a("LvDl"),v=a("j9Al"),y={SetQueryContext:Object(v.b)("[SetQueryContext]"),LoadSearchResults:Object(v.b)("[LoadSearchResults]"),LoadSearchResultsFailed:Object(v.b)("[LoadSearchResults] Failed"),LoadSearchResultsSuccess:Object(v.b)("[LoadSearchResults] Success"),LoadSavedSearchlist:Object(v.b)("[LoadSavedSearchlist]"),LoadSavedSearchlistFailed:Object(v.b)("[LoadSavedSearchlist] Failed"),LoadSavedSearchlistSuccess:Object(v.b)("[LoadSavedSearchlist] Success"),PopulateSearchResultRoadmapView:Object(v.b)("[PopulateSearchResultRoadmapView]"),LoadSearchResultRoadmapNode:Object(v.b)("[LoadSearchResultRoadmapNode]"),LoadSearchResultRoadmapNodeFailed:Object(v.b)("[LoadSearchResultRoadmapNode] Failed"),LoadSearchResultRoadmapNodeSuccess:Object(v.b)("[LoadSearchResultRoadmapNode] Success")},m=function e(t){_classCallCheck(this,e),this.payload=t,this.type=y.PopulateSearchResultRoadmapView},g=function e(t){_classCallCheck(this,e),this.payload=t,this.type=y.LoadSearchResultRoadmapNode},S=function e(t){_classCallCheck(this,e),this.payload=t,this.type=y.LoadSearchResults},k=function e(t){_classCallCheck(this,e),this.payload=t,this.type=y.LoadSavedSearchlist},C=a("EYUV"),O=a("krUz"),j=a("uAqM");function w(e,t){switch(t.type){case y.SetQueryContext:return Object.assign(Object.assign({},e),{queryContext:t.payload});case y.LoadSearchResults:return Object.assign(Object.assign({},e),{issuelist:[]});case y.LoadSearchResultsSuccess:return Object.assign(Object.assign({},e),{issuelist:t.payload});case y.LoadSavedSearchlist:return Object.assign(Object.assign({},e),{savedSearchlist:[]});case y.LoadSavedSearchlistSuccess:var a=f.map(t.payload,(function(e){return f.pick(e,["id","name","jql"])}));return Object.assign(Object.assign({},e),{savedSearchlist:a});case y.PopulateSearchResultRoadmapView:var s=t.payload.startdateField,i=t.payload.results,n=C.a(i,s),r=C.b(i,n.timespan,s,!0);return Object.assign(Object.assign({},e),{roadmapView:{metadata:n,records:r}});case y.LoadSearchResultRoadmapNodeSuccess:var c=t.payload.issueKey,o=t.payload.payload&&t.payload.payload.issues?f.map(t.payload.payload.issues,(function(e){return Object(O.p)(e)})):[],u=C.b(o,e.roadmapView.metadata.timespan,"created",!1);return Object.assign(Object.assign({},e),{roadmapView:Object.assign(Object.assign({},e.roadmapView),{records:e.roadmapView.records.map((function(e){return e&&e.data&&e.data.key===c?Object.assign(Object.assign({},e),{children:u,data:Object.assign(Object.assign({},e.data),{isHeading:u&&u.length>0,statistics:Object(j.d)(Object(j.a)(o),o,e.data.label)})}):e}))})});default:return e}}var R=a("1kSV"),V=a("itXk"),L=a("pLZG"),x=a("lJxs"),W=a("SYT+"),I=a("fXoL"),P=function(){return["/search/list"]},$=function(e){return{query:e}};function N(e,t){if(1&e&&(I.Wb(0,"div",9),I.Wb(1,"a",10),I.Pc(2),I.Vb(),I.Vb()),2&e){var a=t.$implicit;I.Cb(1),I.rc("routerLink",I.uc(3,P))("queryParams",I.vc(4,$,a.jql)),I.Cb(1),I.Rc(" ",a.name," ")}}function F(e,t){if(1&e&&(I.Wb(0,"div",7),I.Nc(1,N,3,6,"div",8),I.Vb()),2&e){var a=I.kc();I.Cb(1),I.rc("ngForOf",a.searchlist)}}var _,Q=((_=function(){function e(t){_classCallCheck(this,e),this.store$=t,this.close=new I.n}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchlist$=this.store$.select((function(e){return e.search.savedSearchlist})).pipe(Object(L.a)((function(e){return e}))).subscribe((function(t){return e.searchlist=t})),this.store$.dispatch(new k(null))}},{key:"ngOnDestroy",value:function(){}},{key:"onClose",value:function(){this.close.emit(null)}}]),e}()).\u0275fac=function(e){return new(e||_)(I.Qb(i.h))},_.\u0275cmp=I.Kb({type:_,selectors:[["app-favourite-searches"]],outputs:{close:"close"},decls:10,vars:1,consts:[[1,"pane"],[1,"pane-header"],[1,"pane-body","pl-4","pr-4"],["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"pane-footer","text-right"],[1,"btn","btn-default","btn-sm",3,"click"],["icon","times",1,"mr-1"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted","text-nowrap",3,"routerLink","queryParams"]],template:function(e,t){1&e&&(I.Wb(0,"div",0),I.Wb(1,"div",1),I.Wb(2,"h4"),I.Pc(3,"Favorite"),I.Vb(),I.Vb(),I.Wb(4,"div",2),I.Nc(5,F,2,1,"div",3),I.Vb(),I.Wb(6,"div",4),I.Wb(7,"button",5),I.ic("click",(function(){return t.onClose()})),I.Rb(8,"fa-icon",6),I.Pc(9," Close "),I.Vb(),I.Vb(),I.Vb()),2&e&&(I.Cb(5),I.rc("ngIf",t.searchlist))},directives:[s.m,r.a,s.l,c.f],encapsulation:2}),_);function q(e,t){if(1&e){var a=I.Xb();I.Wb(0,"div",13),I.Wb(1,"ngb-pagination",14),I.ic("pageChange",(function(e){return I.Gc(a),I.kc().currentPageIndex=e}))("pageChange",(function(){return I.Gc(a),I.kc().onPageChange()})),I.Vb(),I.Vb()}if(2&e){var s=I.kc();I.Cb(1),I.rc("maxSize",3)("page",s.currentPageIndex)("boundaryLinks",!0)("pageSize",s.issuelist.pageSize)("collectionSize",s.issuelist.total)}}function E(e,t){if(1&e&&(I.Wb(0,"div",15),I.Pc(1),I.Wb(2,"b"),I.Pc(3),I.Vb(),I.Vb()),2&e){var a=I.kc();I.Cb(1),I.Sc(" ",a.issuelist.startAt+1," - ",a.issuelist.endAt," / "),I.Cb(2),I.Qc(a.issuelist.total)}}function A(e,t){1&e&&(I.Wb(0,"div",16),I.Wb(1,"a",17),I.Rb(2,"fa-icon",18),I.Pc(3," List "),I.Vb(),I.Wb(4,"a",19),I.Rb(5,"fa-icon",20),I.Pc(6," Storyboard "),I.Vb(),I.Wb(7,"a",21),I.Rb(8,"fa-icon",22),I.Wb(9,"span",23),I.Pc(10,"Roadmap"),I.Vb(),I.Vb(),I.Vb()),2&e&&(I.Cb(2),I.rc("fixedWidth",!0),I.Cb(2),I.rc("routerLinkActive","active"),I.Cb(1),I.rc("fixedWidth",!0),I.Cb(2),I.rc("routerLinkActive","active"))}function z(e,t){1&e&&(I.Wb(0,"div",24),I.Pc(1," No Records found. "),I.Vb())}var M,T=((M=function(){function e(t,a,s){var i=this;_classCallCheck(this,e),this.router=t,this.activatedRoute=a,this.store$=s,this.selectedTab=1,this.currentPageIndex=1,this.showSavedSearches=!1,this.canNavigate=function(){return i.issuelist&&i.issuelist.trim().length>0},this.canExecuteQuery=function(){return i.query&&i.query.trim().length>0}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.store$.dispatch(new W.l(!0));var t=this.activatedRoute.queryParams.pipe(Object(L.a)((function(e){return e&&e.query&&e.query.length>0})),Object(x.a)((function(e){return e.query}))),a=this.store$.select((function(e){return e.app.allExtendedFields}));this.combined$=Object(V.a)(t,a).subscribe((function(t){var a=_slicedToArray(t,2),s=a[0],i=a[1];e.query=s,e.allExtendedFields=i,e.executeQuery()})),this.issuelist$=this.store$.select((function(e){return e.search.issuelist})).pipe(Object(L.a)((function(e){return e}))).subscribe((function(t){return e.issuelist=t}))}},{key:"ngOnDestroy",value:function(){this.combined$&&this.combined$.unsubscribe()}},{key:"parseQueryContext",value:function(e,t){if(e)return e.issueType!==O.a.Organization&&t.push({key:e.issueType,value:e.key}),e.parent?this.parseQueryContext(e.parent,t):null}},{key:"navigateTo",value:function(e){this.canNavigate()&&this.router.navigate(["/browse",e.trim()])}},{key:"executeQuery",value:function(){this.canExecuteQuery()&&(this.showSavedSearches=!1,this.store$.dispatch(new S({query:this.query,allExtendedFields:this.allExtendedFields,currentPageIndex:this.currentPageIndex})))}},{key:"onPageChange",value:function(){this.executeQuery()}}]),e}()).\u0275fac=function(e){return new(e||M)(I.Qb(c.d),I.Qb(c.a),I.Qb(i.h))},M.\u0275cmp=I.Kb({type:M,selectors:[["app-result-container"]],decls:14,vars:6,consts:[[1,"main-container"],[1,"bg-light","pb-1","border-bottom"],["class","float-right mb-0 mt-1 mr-3",4,"ngIf"],["class","float-right small mt-2 mr-3",4,"ngIf"],[1,"clearfix"],["title","Show/hide saved searches",1,"btn","btn-link","mr-1",3,"click"],["icon","bars",3,"fixedWidth"],["class","btn-group btn-group-sm mr-2",4,"ngIf"],[1,"body-container"],[1,"w-100"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["styleClass","ui-sidebar-sm","position","left",3,"visible","visibleChange","onHide"],[3,"close"],[1,"float-right","mb-0","mt-1","mr-3"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"],[1,"float-right","small","mt-2","mr-3"],[1,"btn-group","btn-group-sm","mr-2"],["routerLink","list","routerLinkActive","active","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap"],["icon","list",3,"fixedWidth"],["routerLink","storyboard","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map",3,"fixedWidth"],["routerLink","roadmap","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map-signs","size","sm"],[1,"ml-1"],[1,"center-text","custom-shadow","alert-warning","p-4"]],template:function(e,t){1&e&&(I.Wb(0,"div",0),I.Wb(1,"div",1),I.Nc(2,q,2,5,"div",2),I.Nc(3,E,4,3,"div",3),I.Wb(4,"div",4),I.Wb(5,"button",5),I.ic("click",(function(){return t.showSavedSearches=!t.showSavedSearches})),I.Rb(6,"fa-icon",6),I.Vb(),I.Nc(7,A,11,4,"div",7),I.Vb(),I.Vb(),I.Wb(8,"div",8),I.Wb(9,"div",9),I.Rb(10,"router-outlet"),I.Nc(11,z,2,0,"div",10),I.Vb(),I.Vb(),I.Vb(),I.Wb(12,"p-sidebar",11),I.ic("visibleChange",(function(e){return t.showSavedSearches=e}))("onHide",(function(){return t.showSavedSearches=!1})),I.Wb(13,"app-favourite-searches",12),I.ic("close",(function(){return t.showSavedSearches=!1})),I.Vb(),I.Vb()),2&e&&(I.Cb(2),I.rc("ngIf",t.issuelist&&t.issuelist.total>t.issuelist.pageSize),I.Cb(1),I.rc("ngIf",t.issuelist&&t.issuelist.total),I.Cb(3),I.rc("fixedWidth",!0),I.Cb(1),I.rc("ngIf",t.issuelist&&t.issuelist.results&&t.issuelist.results.length>1),I.Cb(4),I.rc("ngIf",t.issuelist&&0===t.issuelist.total),I.Cb(1),I.rc("visible",t.showSavedSearches))},directives:[s.m,r.a,c.h,l.a,Q,R.q,c.f,c.e],encapsulation:2}),M),H=function(e){return{"issue-resolved":e}},D=function(e,t){return["/browse",e,"purpose",t]};function X(e,t){if(1&e&&(I.Wb(0,"tr"),I.Wb(1,"td"),I.Rb(2,"i",6),I.Vb(),I.Wb(3,"td"),I.Wb(4,"a",7),I.Pc(5),I.Vb(),I.Vb(),I.Wb(6,"td",8),I.Pc(7),I.Vb(),I.Wb(8,"td",8),I.Pc(9),I.lc(10,"date"),I.Vb(),I.Wb(11,"td",4),I.Pc(12),I.Vb(),I.Vb()),2&e){var a=t.$implicit;I.Cb(2),I.Eb(a.icon),I.rc("title",a.issueType),I.Cb(2),I.rc("ngClass",I.vc(13,H,a.resolution))("routerLink",I.wc(15,D,a.key,a.key)),I.Cb(1),I.Rc(" ",a.key," "),I.Cb(2),I.Qc(a.title),I.Cb(2),I.Qc(I.nc(10,10,a.duedate,"MMM dd, yyyy")),I.Cb(3),I.Qc(a.status)}}function G(e,t){if(1&e&&(I.Wb(0,"table",1),I.Wb(1,"thead"),I.Wb(2,"tr"),I.Wb(3,"th",2),I.Pc(4,"\xa0"),I.Vb(),I.Wb(5,"th",3),I.Pc(6,"Key"),I.Vb(),I.Wb(7,"th"),I.Pc(8,"Summary"),I.Vb(),I.Wb(9,"th",4),I.Pc(10,"Duedate"),I.Vb(),I.Wb(11,"th",4),I.Pc(12,"Status"),I.Vb(),I.Vb(),I.Vb(),I.Nc(13,X,13,18,"tr",5),I.Vb()),2&e){var a=I.kc();I.Cb(13),I.rc("ngForOf",a.issuelist.results)}}var K,J=((K=function(){function e(t,a,s){var i=this;_classCallCheck(this,e),this.router=t,this.activatedRoute=a,this.store$=s,this.currentPageIndex=1,this.canNavigate=function(){return i.issuelist&&i.issuelist.trim().length>0}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.issuelist$=this.store$.select((function(e){return e.search.issuelist})).pipe(Object(L.a)((function(e){return e}))).subscribe((function(t){return e.issuelist=t}))}},{key:"ngOnDestroy",value:function(){}},{key:"navigateTo",value:function(e){this.canNavigate()&&this.router.navigate(["/browse",e.trim()])}},{key:"printExtendedValue",value:function(e){return console.log(Date.parse(e)),e?isNaN(Date.parse(e))?e:new Date(e).toDateString():""}}]),e}()).\u0275fac=function(e){return new(e||K)(I.Qb(c.d),I.Qb(c.a),I.Qb(i.h))},K.\u0275cmp=I.Kb({type:K,selectors:[["app-search-listview"]],decls:1,vars:1,consts:[["class","table table-striped table-sm issuelist",4,"ngIf"],[1,"table","table-striped","table-sm","issuelist"],["width","1%"],["width","5%"],["width","10%"],[4,"ngFor","ngForOf"],[3,"title"],[1,"text-primary","text-nowrap",3,"ngClass","routerLink"],[1,"text-truncate"]],template:function(e,t){1&e&&I.Nc(0,G,14,1,"table",0),2&e&&I.rc("ngIf",t.issuelist&&t.issuelist.total>0)},directives:[s.m,s.l,c.f,s.k],pipes:[s.e],encapsulation:2}),K),B=a("Ewkv"),Y=a("lVkt"),U=a("NGyg");function Z(e,t){if(1&e){var a=I.Xb();I.Wb(0,"p-multiSelect",8),I.ic("ngModelChange",(function(e){return I.Gc(a),I.kc(2).selectedStatuses=e}))("onChange",(function(){return I.Gc(a),I.kc(2).onSelectedStatusChange()})),I.Vb()}if(2&e){var s=I.kc(2);I.rc("options",s.statusLookup)("ngModel",s.selectedStatuses)}}function ee(e,t){if(1&e){var a=I.Xb();I.Wb(0,"p-dialog",9),I.ic("visibleChange",(function(e){return I.Gc(a),I.kc(2).showStatistics=e})),I.Rb(1,"app-statistics",10),I.Vb()}if(2&e){var s=I.kc(2);I.rc("header",s.storyboardItem.statistics.title)("dismissableMask",!0)("modal",!0)("visible",s.showStatistics),I.Cb(1),I.rc("statistics",s.storyboardItem.statistics)}}var te=function(){return["far","chart-bar"]};function ae(e,t){if(1&e){var a=I.Xb();I.Wb(0,"div"),I.Wb(1,"button",1),I.ic("click",(function(){return I.Gc(a),I.kc().showStatistics=!0})),I.Rb(2,"fa-icon",2),I.Vb(),I.Wb(3,"div",3),I.Wb(4,"div",4),I.Nc(5,Z,1,2,"p-multiSelect",5),I.Vb(),I.Vb(),I.Rb(6,"app-storyboard-renderer",6),I.Nc(7,ee,2,5,"p-dialog",7),I.Vb()}if(2&e){var s=I.kc();I.Cb(2),I.rc("icon",I.uc(4,te)),I.Cb(3),I.rc("ngIf",s.statusLookup&&s.statusLookup.length>0),I.Cb(1),I.rc("storyboardItem",s.storyboardItem),I.Cb(1),I.rc("ngIf",s.storyboardItem.statistics)}}var se,ie,ne=((se=function(){function e(t,a){_classCallCheck(this,e),this.activatedRoute=t,this.store$=a,this.selectedStatuses=[],this.statusLookup=[],this.showStatistics=!1,this.filterByStatus=function(e,t){return t&&t.length>0?f.filter(e,(function(e){return void 0!==f.find(t,(function(t){return t===e.status}))})):e}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select((function(e){return e.search.issuelist})).pipe(Object(L.a)((function(e){return e}))).subscribe((function(t){e.issuelist=t,e.plotStoryboard()}))}},{key:"ngOnDestroy",value:function(){this.issuelist$&&this.issuelist$.unsubscribe()}},{key:"plotStoryboard",value:function(){var e=f.map(this.selectedStatuses,"key");this.storyboardItem.metadata=Object(j.b)(),this.storyboardItem.children=this.filterByStatus(this.issuelist.results,e),Object(j.c)(this.storyboardItem.metadata,Object(j.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(j.d)(this.storyboardItem.metadata,this.storyboardItem.children),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}},{key:"onSelectedStatusChange",value:function(){this.plotStoryboard()}}]),e}()).\u0275fac=function(e){return new(e||se)(I.Qb(c.a),I.Qb(i.h))},se.\u0275cmp=I.Kb({type:se,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"btn","btn-link","float-right",3,"click"],["size","lg",3,"icon"],[1,"row","mt-1"],[1,"offset-md-9","col-md-3"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[3,"storyboardItem"],["position","topright","class","bg-light",3,"header","dismissableMask","modal","visible","visibleChange",4,"ngIf"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],["position","topright",1,"bg-light",3,"header","dismissableMask","modal","visible","visibleChange"],[3,"statistics"]],template:function(e,t){1&e&&I.Nc(0,ae,8,5,"div",0),2&e&&I.rc("ngIf",t.storyboardItem)},directives:[s.m,r.a,B.a,Y.a,u.f,u.i,h.a,U.a],encapsulation:2}),se),re=a("cdP3"),ce=a("snw9"),oe=a("mrSG"),ue=a("eIep"),le=a("JIr8"),de=a("LRne"),be=a("F2Ol"),he=((ie=function e(t,a){var s=this;_classCallCheck(this,e),this.actions$=t,this.jiraService=a,this.loadSearchlist=this.actions$.pipe(Object(ce.d)(y.LoadSearchResults),Object(ue.a)((function(e){var t=e.payload.allExtendedFields&&e.payload.allExtendedFields.length>0?f.map(e.payload.allExtendedFields,"id"):[];return s.jiraService.executeJql(e.payload.query,e.payload.currentPageIndex-1,50,f.union(O.r,t),"issuelist.json").pipe(Object(x.a)((function(t){return{total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,extendedFields:e.payload.allExtendedFields,results:f.map(t.issues,(function(t){return Object(O.q)(t,e.payload.allExtendedFields)}))}}))).pipe(Object(x.a)((function(e){return{type:y.LoadSearchResultsSuccess,payload:e}})),Object(le.a)((function(){return Object(de.a)({type:y.LoadSearchResultsFailed})})))}))),this.loadSaveSearchlist=this.actions$.pipe(Object(ce.d)(y.LoadSavedSearchlist),Object(ue.a)((function(){return s.jiraService.favouriteSearches("favourite-search.json").pipe(Object(x.a)((function(e){return{type:y.LoadSavedSearchlistSuccess,payload:e}})),Object(le.a)((function(){return Object(de.a)({type:y.LoadSavedSearchlistFailed})})))}))),this.loadSearchResultRoadmapNode=this.actions$.pipe(Object(ce.d)(y.LoadSearchResultRoadmapNode),Object(ue.a)((function(e){return s.jiraService.loadEpicChildren$(e.payload).pipe(Object(x.a)((function(t){return{type:y.LoadSearchResultRoadmapNodeSuccess,payload:{issueKey:e.payload,payload:t}}})),Object(le.a)((function(){return Object(de.a)({type:y.LoadSearchResultRoadmapNodeFailed})})))})))}).\u0275fac=function(e){return new(e||ie)(I.ec(ce.a),I.ec(be.b))},ie.\u0275prov=I.Mb({token:ie,factory:ie.\u0275fac}),Object(oe.b)([Object(ce.b)()],ie.prototype,"loadSearchlist",void 0),Object(oe.b)([Object(ce.b)()],ie.prototype,"loadSaveSearchlist",void 0),Object(oe.b)([Object(ce.b)()],ie.prototype,"loadSearchResultRoadmapNode",void 0),ie),pe=a("VMLX"),fe=["content"];function ve(e,t){if(1&e){var a=I.Xb();I.Wb(0,"app-roadmap-renderer",3),I.ic("nodeExpand",(function(e){return I.Gc(a),I.kc().onNodeExpand(e)})),I.Vb()}if(2&e){var s=I.kc();I.rc("roadmap",s.roadmap)("contentHeight",s.contentHeight)}}var ye,me=((ye=function(){function e(t,a,s){_classCallCheck(this,e),this.cdRef=t,this.activatedRoute=a,this.store$=s,this.containerSize=80,this.contentHeight=0,this.startdateField="created"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.store$.select((function(e){return e.search.issuelist})).pipe(Object(L.a)((function(e){return e&&e.results})),Object(x.a)((function(e){return e.results}))),a=this.store$.select((function(e){return e.app.projects}));this.combined$=Object(V.a)(t,a).subscribe((function(t){var a=_slicedToArray(t,2),s=a[0],i=a[1];if(console.log("projects",i),i){var n=f.head(i);e.startdateField=n&&n.startdate?n.startdate.id:"created"}e.store$.dispatch(new m({results:s,startdateField:e.startdateField}))})),this.roadmap$=this.store$.select((function(e){return e.search.roadmapView})).pipe(Object(L.a)((function(e){return e}))).subscribe((function(t){return e.roadmap=t}))}},{key:"ngOnDestroy",value:function(){this.combined$&&this.combined$.unsubscribe(),this.roadmap$&&this.roadmap$.unsubscribe()}},{key:"ngAfterViewInit",value:function(){this.onResize()}},{key:"onResize",value:function(){this.elementView&&(this.contentHeight=this.elementView.nativeElement.offsetParent.clientHeight-this.containerSize,this.cdRef.detectChanges())}},{key:"onNodeExpand",value:function(e){this.store$.dispatch(new g(e))}}]),e}()).\u0275fac=function(e){return new(e||ye)(I.Qb(I.h),I.Qb(c.a),I.Qb(i.h))},ye.\u0275cmp=I.Kb({type:ye,selectors:[["app-roadmap-view"]],viewQuery:function(e,t){var a;1&e&&I.Tc(fe,!0),2&e&&I.Dc(a=I.jc())&&(t.elementView=a.first)},hostBindings:function(e,t){1&e&&I.ic("resize",(function(e){return t.onResize(e)}),!1,I.Fc)},decls:3,vars:1,consts:[[1,"issuelist"],["content",""],[3,"roadmap","contentHeight","nodeExpand",4,"ngIf"],[3,"roadmap","contentHeight","nodeExpand"]],template:function(e,t){1&e&&(I.Wb(0,"div",0,1),I.Nc(2,ve,1,2,"app-roadmap-renderer",2),I.Vb()),2&e&&(I.Cb(2),I.rc("ngIf",t.roadmap))},directives:[s.m,pe.a],encapsulation:2}),ye);a.d(t,"SearchModule",(function(){return ke}));var ge,Se=[{path:"",component:T,children:[{path:"list",component:J},{path:"storyboard",component:ne},{path:"roadmap",component:me}]}],ke=((ge=function e(){_classCallCheck(this,e)}).\u0275mod=I.Ob({type:ge}),ge.\u0275inj=I.Nb({factory:function(e){return new(e||ge)},imports:[[s.c,c.g,u.c,n.b,r.c,l.b,d.c,h.b,b.b,Y.b,re.a,R.i,o.a,i.j.forFeature("search",w,{initialState:p}),ce.c.forFeature([he]),c.g.forChild(Se)]]}),ge)}}]);