(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,s){"use strict";s.r(e);var i=s("ofXK"),a=s("kt0X"),n=s("l2bN"),c=s("6NWb"),r=s("tyNb"),o=s("sITn"),l=s("3Pt+"),u=s("jLSX"),b=s("fXoL"),h=(s("XNiG"),s("YyRF"),s("vxfF")),p=(s("R0Ic"),s("7zfz")),d=(s("t2ka"),s("xlun"));let g=(()=>{let t=class{};return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,p.e,h.d,d.b],p.e,h.d]}),t})(),f=(()=>{let t=class{};return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,g,l.c,p.e],g,l.c,p.e]}),t})(),m=(()=>{let t=class{};return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,f],p.e]}),t})();var y=s("LPYB"),v=(s("hSFZ"),s("/RsI")),S=s("j9Al");const I={LIST:"LIST",STORYBOARD:"STORYBOARD"},w={SwitchViewmode:Object(S.b)("[SwitchViewmode]"),SetQueryContext:Object(S.b)("[SetQueryContext]"),SetIssuelist:Object(S.b)("[SetIssuelist]"),SetSavedSearchlist:Object(S.b)("[SetSavedSearchlist]")};class k{constructor(t){this.payload=t,this.type=w.SwitchViewmode}}class C{constructor(t){this.payload=t,this.type=w.SetIssuelist}}class O{constructor(t){this.payload=t,this.type=w.SetSavedSearchlist}}const V={queryContext:null,issuelist:null,viewmode:I.LIST,savedSearchlist:null};function j(t,e){switch(e.type){case w.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case w.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case w.SetIssuelist:return Object.assign(Object.assign({},t),{issuelist:e.payload});case w.SetSavedSearchlist:return Object.assign(Object.assign({},t),{savedSearchlist:e.payload});default:return t}}var x=s("1kSV"),W=s("LvDl"),L=s("pLZG"),R=s("lJxs"),q=s("krUz"),Q=s("SYT+"),$=s("F2Ol"),T=s("cdP3");const z=function(){return["/search/list"]},P=function(t){return{query:t}};function N(t,e){if(1&t&&(b.Wb(0,"div",3),b.Wb(1,"a",4),b.Kc(2),b.Vb(),b.Vb()),2&t){const t=e.$implicit;b.Cb(1),b.pc("routerLink",b.sc(3,z))("queryParams",b.tc(4,P,t.jql)),b.Cb(1),b.Mc(" ",t.name," ")}}function K(t,e){if(1&t&&(b.Wb(0,"div",1),b.Ic(1,N,3,6,"div",2),b.Vb()),2&t){const t=b.kc();b.Cb(1),b.pc("ngForOf",t.searchlist)}}let B=(()=>{class t{constructor(t,e,s,i){this.router=t,this.activatedRoute=e,this.jiraService=s,this.store$=i}ngOnInit(){this.searchlist$=this.store$.select(t=>t.search.savedSearchlist).pipe(Object(L.a)(t=>t)).subscribe(t=>this.searchlist=t),this.jiraService.favouriteSearches("favourite-search.json").pipe(Object(L.a)(t=>t&&t.length>0),Object(R.a)(t=>W.map(t,t=>W.pick(t,["id","name","jql"])))).subscribe(t=>this.store$.dispatch(new O(t)))}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(r.d),b.Qb(r.a),b.Qb($.b),b.Qb(a.h))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-favourite-searches"]],decls:3,vars:1,consts:[["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(b.Wb(0,"h6"),b.Kc(1,"Favourite"),b.Vb(),b.Ic(2,K,2,1,"div",0)),2&t&&(b.Cb(2),b.pc("ngIf",e.searchlist))},directives:[i.l,i.k,r.f],encapsulation:2}),t})();function F(t,e){1&t&&(b.Wb(0,"div",8),b.Kc(1," No Records found. "),b.Vb())}function A(t,e){1&t&&(b.Wb(0,"a",16),b.Rb(1,"fa-icon",17),b.Kc(2," Storyboard view "),b.Vb()),2&t&&(b.Cb(1),b.pc("fixedWidth",!0))}function X(t,e){1&t&&(b.Wb(0,"a",18),b.Rb(1,"fa-icon",19),b.Kc(2," Back to list view "),b.Vb()),2&t&&(b.Cb(1),b.pc("fixedWidth",!0))}function D(t,e){if(1&t&&(b.Wb(0,"div",13),b.Ic(1,A,3,1,"a",14),b.Ic(2,X,3,1,"a",15),b.Vb()),2&t){const t=b.kc(2);b.Cb(1),b.pc("ngIf",t.searchViewmode===t.localViewmode.LIST),b.Cb(1),b.pc("ngIf",t.searchViewmode===t.localViewmode.STORYBOARD)}}function M(t,e){if(1&t){const t=b.Xb();b.Wb(0,"div",20),b.Wb(1,"ngb-pagination",21),b.ic("pageChange",(function(e){return b.Bc(t),b.kc(2).currentPageIndex=e}))("pageChange",(function(){return b.Bc(t),b.kc(2).onPageChange()})),b.Vb(),b.Vb()}if(2&t){const t=b.kc(2);b.Cb(1),b.pc("maxSize",3)("page",t.currentPageIndex)("boundaryLinks",!0)("pageSize",t.issuelist.pageSize)("collectionSize",t.issuelist.total)}}function Y(t,e){if(1&t&&(b.Wb(0,"div",9),b.Ic(1,D,3,2,"div",10),b.Ic(2,M,2,5,"div",11),b.Wb(3,"div",12),b.Kc(4),b.Wb(5,"b"),b.Kc(6),b.Vb(),b.Vb(),b.Vb()),2&t){const t=b.kc();b.Cb(1),b.pc("ngIf",t.issuelist&&t.issuelist.results&&t.issuelist.results.length>1),b.Cb(1),b.pc("ngIf",t.issuelist.total>t.issuelist.pageSize),b.Cb(2),b.Nc(" ",t.issuelist.startAt+1," - ",t.issuelist.endAt," / "),b.Cb(2),b.Lc(t.issuelist.total)}}let H=(()=>{class t{constructor(t,e,s,i){this.router=t,this.activatedRoute=e,this.jiraService=s,this.store$=i,this.selectedTab=1,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0,this.canExecuteQuery=()=>this.query&&this.query.trim().length>0}ngOnInit(){this.localViewmode=I,this.searchViewmode$=this.store$.select(t=>t.search.viewmode).subscribe(t=>this.searchViewmode=t),this.store$.dispatch(new Q.m(!0)),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(L.a)(t=>t&&t.query&&t.query.length>0),Object(R.a)(t=>t.query)).subscribe(t=>{this.query=t,this.executeQuery()}),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(L.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}parseQueryContext(t,e){if(t)return t.issueType!==q.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}executeQuery(){this.canExecuteQuery()&&this.jiraService.executeJql(this.query,this.currentPageIndex-1,50,["components","labels","fixVersions"],"issuelist.json").pipe(Object(R.a)(t=>({total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:W.map(t.issues,t=>Object(q.q)(t))}))).subscribe(t=>this.store$.dispatch(new C(t)))}onPageChange(){this.executeQuery()}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(r.d),b.Qb(r.a),b.Qb($.b),b.Qb(a.h))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-result-container"]],decls:10,vars:2,consts:[[1,"main-container"],["direction","horizontal"],["size","15",1,"small","pt-2","pl-3"],["size","85"],[1,"body-container"],[1,"container-fluid"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["class","footer-container bg-light",4,"ngIf"],[1,"center-text","custom-shadow","alert-warning","p-4"],[1,"footer-container","bg-light"],["class","float-right pt-1 ml-2",4,"ngIf"],["class","float-right mt-1 mb-0",4,"ngIf"],[1,"pt-2","small","clearfix"],[1,"float-right","pt-1","ml-2"],["class","btn btn-brand btn-sm","routerLink","storyboard","queryParamsHandling","merge",4,"ngIf"],["class","btn btn-secondary btn-sm","routerLink","list","queryParamsHandling","merge",4,"ngIf"],["routerLink","storyboard","queryParamsHandling","merge",1,"btn","btn-brand","btn-sm"],["icon","map",3,"fixedWidth"],["routerLink","list","queryParamsHandling","merge",1,"btn","btn-secondary","btn-sm"],["icon","chevron-left",3,"fixedWidth"],[1,"float-right","mt-1","mb-0"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Wb(1,"as-split",1),b.Wb(2,"as-split-area",2),b.Rb(3,"app-favourite-searches"),b.Vb(),b.Wb(4,"as-split-area",3),b.Wb(5,"div",4),b.Wb(6,"div",5),b.Rb(7,"router-outlet"),b.Ic(8,F,2,0,"div",6),b.Vb(),b.Vb(),b.Ic(9,Y,7,5,"div",7),b.Vb(),b.Vb(),b.Vb()),2&t&&(b.Cb(8),b.pc("ngIf",e.issuelist&&0===e.issuelist.total),b.Cb(1),b.pc("ngIf",e.issuelist&&e.issuelist.total>0))},directives:[T.c,T.b,B,r.h,i.l,r.f,c.a,x.q],encapsulation:2}),t})();const J=function(t,e){return["/browse",t,"purpose",e]};function E(t,e){if(1&t&&(b.Wb(0,"div",4),b.Wb(1,"a",5),b.Wb(2,"sub",6),b.Kc(3),b.Vb(),b.Rb(4,"fa-icon",7),b.Wb(5,"div"),b.Kc(6),b.Wb(7,"span",8),b.Kc(8),b.Vb(),b.Vb(),b.Vb(),b.Vb()),2&t){const t=e.$implicit;b.Cb(1),b.pc("routerLink",b.uc(5,J,t.key,t.key)),b.Cb(2),b.Nc("",t.issueType,": ",t.key,""),b.Cb(3),b.Mc(" ",t.title," "),b.Cb(2),b.Lc(t.status)}}function G(t,e){if(1&t&&(b.Wb(0,"div",2),b.Ic(1,E,9,8,"div",3),b.Vb()),2&t){const t=b.kc();b.Cb(1),b.pc("ngForOf",t.issuelist.results)}}let Z=(()=>{class t{constructor(t,e,s,i){this.router=t,this.activatedRoute=e,this.jiraService=s,this.store$=i,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0}ngOnInit(){this.store$.dispatch(new k(I.LIST)),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(L.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(r.d),b.Qb(r.a),b.Qb($.b),b.Qb(a.h))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-search-listview"]],decls:2,vars:1,consts:[[1,"container"],["class","p-3 bg-white",4,"ngIf"],[1,"p-3","bg-white"],["class","issue-list-item",4,"ngFor","ngForOf"],[1,"issue-list-item"],[1,"btn","btn-link","btn-sm","text-dark","text-left","w-100","pt-0",3,"routerLink"],[1,"text-primary","text-uppercase"],["icon","angle-right",1,"text-muted","float-right","mt-2"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Ic(1,G,2,1,"div",1),b.Vb()),2&t&&(b.Cb(1),b.pc("ngIf",e.issuelist))},directives:[i.l,i.k,r.f,c.a],encapsulation:2}),t})();var U=s("iLqC"),_=s("Ewkv"),tt=s("lVkt"),et=s("NGyg");function st(t,e){if(1&t){const t=b.Xb();b.Wb(0,"p-multiSelect",10),b.ic("ngModelChange",(function(e){return b.Bc(t),b.kc(2).selectedStatuses=e}))("onChange",(function(e){return b.Bc(t),b.kc(2).onSelectedStatusChange(e)})),b.Vb()}if(2&t){const t=b.kc(2);b.pc("options",t.statusLookup)("ngModel",t.selectedStatuses)}}function it(t,e){if(1&t){const t=b.Xb();b.Wb(0,"p-dialog",11),b.ic("visibleChange",(function(e){return b.Bc(t),b.kc(2).showStatistics=e})),b.Rb(1,"app-statistics",12),b.Vb()}if(2&t){const t=b.kc(2);b.pc("visible",t.showStatistics),b.Cb(1),b.pc("statusStats",t.storyboardItem.statistics.status)("issueTypeStats",t.storyboardItem.statistics.issueTypes)("componentStats",t.storyboardItem.statistics.components)}}const at=function(){return["far","chart-bar"]};function nt(t,e){if(1&t){const t=b.Xb();b.Wb(0,"div"),b.Wb(1,"div",1),b.Rb(2,"div",2),b.Wb(3,"div",3),b.Ic(4,st,1,2,"p-multiSelect",4),b.Vb(),b.Wb(5,"div",5),b.Wb(6,"button",6),b.ic("click",(function(){return b.Bc(t),b.kc().showStatistics=!0})),b.Rb(7,"fa-icon",7),b.Vb(),b.Vb(),b.Vb(),b.Rb(8,"app-storyboard-renderer",8),b.Ic(9,it,2,4,"p-dialog",9),b.Vb()}if(2&t){const t=b.kc();b.Cb(4),b.pc("ngIf",t.statusLookup&&t.statusLookup.length>0),b.Cb(3),b.pc("icon",b.sc(4,at)),b.Cb(1),b.pc("storyboardItem",t.storyboardItem),b.Cb(1),b.pc("ngIf",t.storyboardItem.statistics)}}let ct=(()=>{class t{constructor(t,e){this.activatedRoute=t,this.store$=e,this.selectedStatuses=[],this.statusLookup=[],this.showStatistics=!1,this.filterByStatus=(t,e)=>e&&e.length>0?W.filter(t,t=>void 0!==W.find(e,e=>e===t.status)):t}ngOnInit(){this.store$.dispatch(new k(I.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(L.a)(t=>t)).subscribe(t=>{this.issuelist=t,this.plotStoryboard()})}ngOnDestroy(){this.issuelist$&&this.issuelist$.unsubscribe()}plotStoryboard(){const t=W.map(this.selectedStatuses,"key");this.storyboardItem.metadata=Object(U.b)(),this.storyboardItem.children=this.filterByStatus(this.issuelist.results,t),Object(U.c)(this.storyboardItem.metadata,Object(U.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(U.d)(this.storyboardItem),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}onSelectedStatusChange(t){this.plotStoryboard()}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(r.a),b.Qb(a.h))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","mt-2","mb-1"],[1,"col-md-8"],[1,"col-md-3"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1"],[1,"btn","btn-link",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&b.Ic(0,nt,10,5,"div",0),2&t&&b.pc("ngIf",e.storyboardItem)},directives:[i.l,c.a,_.a,tt.a,l.f,l.i,v.a,et.a],encapsulation:2}),t})();s.d(e,"SearchModule",(function(){return ot}));const rt=[{path:"",component:H,children:[{path:"list",component:Z},{path:"storyboard",component:ct}]}];let ot=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,r.g,l.c,n.b,c.c,u.b,m,v.b,y.b,tt.b,T.a,x.i,o.a,a.j.forFeature("search",j,{initialState:V}),r.g.forChild(rt)]]}),t})()}}]);