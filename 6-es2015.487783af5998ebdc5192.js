(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2Jat":function(e,t,s){"use strict";s.r(t);var i=s("ofXK"),c=s("kt0X");const n={primaryIssueKey:"",primaryIssue:null,selectedIssueKey:"",selectedIssue:null,timelineView:null,isSelectedIssueViewCompact:!1,hierarchicalIssue:null,purpose:[],recentlyViewedItems:[],recentmostItem:null,updatedField:null,issueLinkTypes:[]};var a=s("j9Al");const r={LoadPrimaryIssue:Object(a.c)("[LoadPrimaryIssue]"),LoadPrimaryIssueFailed:Object(a.c)("[LoadPrimaryIssue] Failed"),LoadPrimaryIssueSuccess:Object(a.c)("[LoadPrimaryIssue] Success"),LoadPrimaryIssueEpicChildren:Object(a.c)("[LoadPrimaryIssueEpicChildren]"),LoadPrimaryIssueEpicChildrenFailed:Object(a.c)("[LoadPrimaryIssueEpicChildren] Failed"),LoadPrimaryIssueEpicChildrenSuccess:Object(a.c)("[LoadPrimaryIssueEpicChildren] Success"),LoadPrimaryIssueRelatedLinks:Object(a.c)("[LoadPrimaryIssueRelatedLinks]"),LoadPrimaryIssueRelatedLinksFailed:Object(a.c)("[LoadPrimaryIssueRelatedLinks] Failed"),LoadPrimaryIssueRelatedLinksSuccess:Object(a.c)("[LoadPrimaryIssueRelatedLinks] Success"),SetHierarchicalIssue:Object(a.c)("[SetHierarchicalIssue]"),LoadIssueLinkTypes:Object(a.c)("[LoadIssueLinkTypes]"),LoadIssueLinkTypesFailed:Object(a.c)("[LoadIssueLinkTypes] Failed"),LoadIssueLinkTypesSuccess:Object(a.c)("[LoadIssueLinkTypes] Success"),LoadProjectDetails:Object(a.c)("[LoadProjectDetails]"),LoadProjectDetailsFailed:Object(a.c)("[LoadProjectDetails] Failed"),LoadProjectDetailsSuccess:Object(a.c)("[LoadProjectDetails] Success"),LoadSelectedIssue:Object(a.c)("[LoadSelectedIssue]"),LoadSelectedIssueFailed:Object(a.c)("[LoadSelectedIssue] Failed"),LoadSelectedIssueSuccess:Object(a.c)("[LoadSelectedIssue] Success"),ChangeSelectedIssueView:Object(a.c)("[ChangeSelectedIssueView]"),LoadSelectedIssueEpicChildren:Object(a.c)("[LoadSelectedIssueEpicChildren]"),LoadSelectedIssueEpicChildrenFailed:Object(a.c)("[LoadSelectedIssueEpicChildren] Failed"),LoadSelectedIssueEpicChildrenSuccess:Object(a.c)("[LoadSelectedIssueEpicChildren] Success"),LoadSelectedIssueRelatedLinks:Object(a.c)("[LoadSelectedIssueRelatedLinks]"),LoadSelectedIssueRelatedLinksFailed:Object(a.c)("[LoadSelectedIssueRelatedLinks] Failed"),LoadSelectedIssueRelatedLinksSuccess:Object(a.c)("[LoadSelectedIssueRelatedLinks] Success"),SetSelectedIssue:Object(a.c)("[SetSelectedIssue]"),PopulateIssueTimelineView:Object(a.c)("[PopulateIssueTimelineView]"),SetPurpose:Object(a.c)("[SetPurpose]"),UpdateOrganizationPurpose:Object(a.c)("[UpdateOrganizationPurpose]"),SetRecentlyViewed:Object(a.c)("[SetRecentlyViewed]"),UpdateFieldValue:Object(a.c)("[UpdateFieldValue]"),UpdateFieldValueFailed:Object(a.c)("[UpdateFieldValue] Failed"),UpdateFieldValueSuccess:Object(a.c)("[UpdateFieldValue] Success"),UpdateOrganizationTitle:Object(a.c)("[UpdateOrganizationTitle]"),UpdateOrganizationTitleFailed:Object(a.c)("[UpdateOrganizationTitle] Failed"),UpdateOrganizationTitleSuccess:Object(a.c)("[UpdateOrganizationTitle] Success")};class o{constructor(e){this.payload=e,this.type=r.LoadPrimaryIssue}}class l{constructor(e){this.payload=e,this.type=r.LoadPrimaryIssueEpicChildren}}class d{constructor(e){this.payload=e,this.type=r.LoadPrimaryIssueRelatedLinks}}class u{constructor(e){this.payload=e,this.type=r.SetHierarchicalIssue}}class b{constructor(e){this.payload=e,this.type=r.LoadProjectDetails}}class p{constructor(e){this.payload=e,this.type=r.LoadSelectedIssue}}class h{constructor(e){this.payload=e,this.type=r.ChangeSelectedIssueView}}class g{constructor(e){this.payload=e,this.type=r.LoadSelectedIssueEpicChildren}}class m{constructor(e){this.payload=e,this.type=r.LoadSelectedIssueRelatedLinks}}class y{constructor(e){this.payload=e,this.type=r.SetSelectedIssue}}class f{constructor(e){this.payload=e,this.type=r.PopulateIssueTimelineView}}class I{constructor(e){this.payload=e,this.type=r.SetPurpose}}class k{constructor(e){this.payload=e,this.type=r.UpdateOrganizationPurpose}}class C{constructor(e){this.payload=e,this.type=r.UpdateFieldValue}}var O=s("krUz"),j=s("iPf6"),v=s("LvDl");function L(e,t){switch(t.type){case r.LoadPrimaryIssue:return Object.assign(Object.assign({},e),{primaryIssue:null,primaryIssueKey:t.payload.issue});case r.LoadPrimaryIssueSuccess:return Object.assign(Object.assign({},e),{primaryIssue:S(t.payload)});case r.LoadPrimaryIssueEpicChildren:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{epicChildrenLoading:!0,epicChildrenLoaded:!1})});case r.LoadPrimaryIssueEpicChildrenSuccess:{const s=v.map(t.payload.issues,e=>O.t(e));return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{epicChildrenLoading:!1,epicChildrenLoaded:!0,epicChildren:s})})}case r.LoadPrimaryIssueRelatedLinks:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{relatedLinksLoading:!0})});case r.LoadPrimaryIssueRelatedLinksSuccess:{const s=function(e,t){if(!e.primaryIssue)return null;const s=e.primaryIssue.relatedLinks;if(t.payload&&t.payload.issues&&s){const e=v.map(t.payload.issues,e=>v.pick(O.t(e),O.v));s.forEach(t=>{const s=v.find(e,{key:t.key});s&&(t.created=s.created,t.duedate=s.duedate,t.updated=s.updated,t.resolution=s.resolution,t.project=s.project,t.labels=s.labels,t.fixVersions=s.fixVersions,t.components=s.components)})}return s}(e,t);return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{relatedLinksLoading:!1,relatedLinksLoaded:!0,relatedLinks:s})})}case r.SetHierarchicalIssue:return Object.assign(Object.assign({},e),{hierarchicalIssue:t.payload});case r.LoadProjectDetails:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{projectConfigLoading:!0})});case r.LoadProjectDetailsSuccess:{const s=function(e){const t=v.pick(e,["id","key","description","name","customFields","startdate"]);return t.hierarchy=[],t.storyboardFields=[],e.issueTypes&&(t.standardIssueTypes=V(e.issueTypes,!1),t.subTaskIssueTypes=V(e.issueTypes,!0)),t.metadata={},e.components&&(t.metadata.components=v.sortBy(v.map(e.components,e=>v.pick(e,["id","name","description"])),["name"])),e.versions&&(t.metadata.versions=v.sortBy(v.map(e.versions,e=>v.pick(e,["archived","id","name","releaseDate","description"])),["name"])),t}(t.payload);return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{projectConfigLoading:!1,projectConfigLoaded:!0,projectConfig:s})})}case r.LoadSelectedIssue:return Object.assign(Object.assign({},e),{selectedIssue:null,selectedIssueKey:t.payload.issue});case r.LoadSelectedIssueSuccess:return Object.assign(Object.assign({},e),{selectedIssue:S(t.payload)});case r.PopulateIssueTimelineView:{const s=e.selectedIssue.projectConfig.startdate.id||"created",i=j.a(t.payload,s),c=j.b(t.payload,i.timespan,s,!1);return Object.assign(Object.assign({},e),{timelineView:{metadata:i,records:c}})}case r.ChangeSelectedIssueView:return Object.assign(Object.assign({},e),{isSelectedIssueViewCompact:t.payload});case r.LoadSelectedIssueEpicChildren:return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{epicChildrenLoading:!0,epicChildrenLoaded:!1})});case r.LoadSelectedIssueEpicChildrenSuccess:{const s=v.map(t.payload.issues,e=>O.t(e));return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{epicChildrenLoading:!1,epicChildrenLoaded:!0,epicChildren:s})})}case r.LoadSelectedIssueRelatedLinks:return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{relatedLinksLoading:!0,relatedLinksLoaded:!1})});case r.LoadSelectedIssueRelatedLinksSuccess:{const s=v.map(t.payload.issues,e=>O.t(e)),i=e.selectedIssue.relatedLinks;return s.forEach(e=>{const t=v.find(i,{key:e.key});e.linkType=t?t.linkType:"link"}),Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{relatedLinksLoading:!1,relatedLinksLoaded:!0,relatedLinks:s})})}case r.SetSelectedIssue:return Object.assign(Object.assign({},e),{selectedIssue:t.payload});case r.SetPurpose:return Object.assign(Object.assign({},e),{purpose:t.payload});case r.UpdateOrganizationPurpose:{const s=t.payload||{},i=e.hierarchicalIssue,c=O.w(i,O.a.Organization);return c&&(c.label=s.name,c.title=s.name,c.description=s.purpose),Object.assign(Object.assign({},e),{hierarchicalIssue:i,purpose:e.purpose.map(e=>e.issueType===O.a.Organization?Object.assign(Object.assign({},e),{key:s.name,label:s.name,title:s.name,purpose:s.purpose}):e)})}case r.SetRecentlyViewed:return Object.assign(Object.assign({},e),{recentmostItem:t.payload});case r.UpdateFieldValue:return Object.assign(Object.assign({},e),{updatedField:null});case r.UpdateFieldValueSuccess:{const s=t.payload;return Object.assign(Object.assign({},e),{updatedField:s})}case r.UpdateOrganizationTitleSuccess:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{organization:t.payload})});default:return e}}function S(e){const t=e.extendedFields;e.projectConfig&&e.projectConfig.startdate&&v.remove(t,e.projectConfig.startdate);const s=O.u(e.issue,t);return s&&(s.organization=e.organization,s.projectConfig=e.projectConfig,s.projectConfigLoaded=!!e.projectConfig,s.relatedLinks=O.r(e.issue),s.epicChildrenLoading=!1,s.epicChildrenLoaded=!1,s.relatedLinksLoading=!1,s.relatedLinksLoaded=!1),s}function V(e,t){return v.map(v.filter(e,{subtask:t}),e=>({name:e.name,list:[]}))}var w=s("fXoL"),W=s("itXk"),F=s("pLZG"),R=s("cdP3"),x=s("6NWb"),P=s("tyNb"),q=s("g9iH"),$=s("7zfz");const z=function(e,t){return{"small text-muted text-uppercase font-italic":e,"font-weight-bold":t}};function E(e,t){if(1&e&&(w.Wb(0,"div",6),w.Oc(1),w.Vb()),2&e){const e=t.$implicit,s=w.kc(2);w.qc("ngClass",w.vc(3,z,s.checkIfCustomNode(e),e.key===s.issueKey))("title",s.getIssueTitle(e)),w.Cb(1),w.Qc(" ",e.label,"")}}function T(e,t){if(1&e&&(w.Wb(0,"div",7),w.Oc(1),w.Vb()),2&e){const e=t.$implicit,s=w.kc(2);w.qc("title",s.getHeaderTitle(e)),w.Cb(1),w.Qc(" ",e.label," ")}}function M(e,t){1&e&&w.Rb(0,"fa-icon",10)}function N(e,t){if(1&e&&(w.Wb(0,"i",8),w.Oc(1),w.Mc(2,M,1,0,"fa-icon",9),w.Vb()),2&e){const e=t.$implicit;w.Cb(1),w.Qc(" ",e.label," "),w.Cb(1),w.qc("ngIf",e.editable)}}const D=function(e){return[e]};function U(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div",1),w.Wb(1,"p-tree",2),w.ic("selectionChange",(function(t){return w.Fc(e),w.kc().selectedNode=t}))("onNodeSelect",(function(t){return w.Fc(e),w.kc().nodeSelected(t)})),w.Mc(2,E,2,6,"ng-template",3),w.Mc(3,T,2,2,"ng-template",4),w.Mc(4,N,3,2,"ng-template",5),w.Vb(),w.Vb()}if(2&e){const e=w.kc();w.Cb(1),w.qc("value",w.uc(2,D,e.rootNode))("selection",e.selectedNode)}}let A=(()=>{class e{constructor(e,t){this.router=e,this.activatedRoute=t,this.getIssueTitle=e=>Object(O.s)(e)?e.title:`[${e.issueType}] ${e.linkType||""} ${e.key} | ${e.title}`,this.getHeaderTitle=e=>`[${e.issueType}] ${e.title}`,this.checkIfCustomNode=e=>Object(O.s)(e)}nodeSelected(e){if(e.node.editable)e.node.memento={type:e.node.type,selectable:e.node.selectable},e.node.type=O.b.Editing,e.node.selectable=!1;else{let t=function(e,t){const s=e.parseUrl(e.url);return s.root.children[P.c]&&s.root.children[P.c].segments&&5===s.root.children[P.c].segments.length?v.last(s.root.children[P.c].segments).path:"details"}(this.router);this.router.navigate(["../..",e.node.key,t],{relativeTo:this.activatedRoute})}}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(P.d),w.Qb(P.a))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-issue-treeview"]],inputs:{issueKey:"issueKey",rootNode:"rootNode"},decls:1,vars:1,consts:[["class","pb-5",4,"ngIf"],[1,"pb-5"],["selectionMode","single",3,"value","selection","selectionChange","onNodeSelect"],["pTemplate","default"],["pTemplate","Heading"],["pTemplate","Editable"],[2,"font-size","90%",3,"ngClass","title"],[3,"title"],[1,"editable-node"],["size","sm","class","text-muted ml-1","icon","pencil-alt",4,"ngIf"],["size","sm","icon","pencil-alt",1,"text-muted","ml-1"]],template:function(e,t){1&e&&w.Mc(0,U,5,4,"div",0),2&e&&w.qc("ngIf",t.rootNode)},directives:[i.m,q.a,$.d,i.k,x.a],encapsulation:2}),e})();var K=s("l2bN");function Q(e,t){if(1&e&&(w.Wb(0,"div"),w.Rb(1,"app-issue-treeview",15),w.Vb()),2&e){const e=w.kc(2);w.Cb(1),w.qc("rootNode",e.hierarchicalNode)("issueKey",e.selectedIssueKey)}}function H(e,t){if(1&e&&(w.Wb(0,"div",20),w.Wb(1,"h5",21),w.Oc(2),w.Vb(),w.Rb(3,"ngx-md",22),w.Vb()),2&e){const e=w.kc().$implicit;w.Cb(2),w.Qc(" ",e.title," "),w.Cb(1),w.qc("data",e.purpose)}}const B=function(e){return{"float-left":e}};function X(e,t){if(1&e&&(w.Wb(0,"div",16),w.Rb(1,"div",9),w.Wb(2,"div",17),w.Wb(3,"a",6),w.ic("click",(function(){const e=t.$implicit;return e.show=!e.show})),w.Rb(4,"fa-icon",7),w.Wb(5,"span",18),w.Oc(6),w.Vb(),w.Vb(),w.Vb(),w.Mc(7,H,4,2,"div",19),w.Vb()),2&e){const e=t.$implicit;w.qc("ngClass",w.uc(4,B,!e.show)),w.Cb(4),w.qc("icon",e.show?"chevron-down":"chevron-right"),w.Cb(2),w.Qc("",e.issueType," purpose"),w.Cb(1),w.qc("ngIf",e.show)}}function J(e,t){if(1&e){const e=w.Xb();w.Wb(0,"as-split",1),w.ic("gutterDblClick",(function(){return w.Fc(e),w.kc().toggleFullscreen()}))("dragEnd",(function(t){return w.Fc(e),w.kc().dragEnd(t)})),w.Wb(1,"as-split-area",2),w.Mc(2,Q,2,2,"div",3),w.Vb(),w.Wb(3,"as-split-area",2),w.Wb(4,"div",4),w.Wb(5,"div",5),w.Wb(6,"a",6),w.ic("click",(function(){w.Fc(e);const t=w.kc();return t.showHideAllPurposes(!t.showAll)})),w.Rb(7,"fa-icon",7),w.Vb(),w.Vb(),w.Mc(8,X,8,6,"div",8),w.Wb(9,"div",9),w.Oc(10,"\xa0"),w.Vb(),w.Wb(11,"div",10),w.Wb(12,"div",11),w.Wb(13,"a",12),w.Oc(14," Purpose view "),w.Vb(),w.Wb(15,"a",13),w.Oc(16," Detail view "),w.Rb(17,"fa-icon",14),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Vb()}if(2&e){const e=w.kc();w.Cb(1),w.qc("size",e.columns[0].size),w.Cb(1),w.qc("ngIf",e.leftPaneSize>0),w.Cb(1),w.qc("size",e.columns[1].size),w.Cb(4),w.qc("icon",e.showAll?"angle-double-down":"angle-double-right"),w.Cb(1),w.qc("ngForOf",e.purpose)}}let G=(()=>{class e{constructor(e){this.store$=e,this.edit=new w.n,this.showAll=!1,this.hideExtendedFields=!1,this.defaultLeftPaneSize=35,this.leftPaneSize=this.defaultLeftPaneSize,this.columns=[{visible:!0,size:this.defaultLeftPaneSize},{visible:!0,size:100-this.defaultLeftPaneSize}]}ngOnInit(){this.purpose$=this.store$.select(e=>e.issue.purpose).subscribe(e=>this.purpose=e);const e=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(F.a)(e=>e)),t=this.store$.select(e=>e.issue.hierarchicalIssue).pipe(Object(F.a)(e=>e));this.combined$=Object(W.a)(e,t).subscribe(([e,t])=>{this.selectedIssueKey=e.key,this.hierarchicalNode=t,setTimeout(()=>{const s=Object(O.x)(t,e.key);s&&(Object(O.h)(e,s),this.store$.dispatch(new I(this.expandPurpose(s))))},200)})}ngOnDestroy(){this.purpose$&&this.purpose$.unsubscribe(),this.combined$&&this.combined$.unsubscribe()}showHideAllPurposes(e){this.showAll=e,this.purpose&&(this.purpose.forEach(e=>e.show=this.showAll),!this.showAll&&this.purpose.length>0&&(this.purpose[this.purpose.length-1].show=!0))}expandPurpose(e){const t=[];return this.populatePurpose(e,t),v.reverse(t),t.length>0&&(t[t.length-1].show=!0),t}populatePurpose(e,t){e&&(e.issueType!==O.a.EpicChildren&&e.issueType!==O.a.RelatedLink&&t.push({key:e.key,issueType:e.issueType,title:e.title,purpose:e.description,editable:e.editable,hfKey:e.hfKey,show:!1}),e.parent&&this.populatePurpose(e.parent,t))}dragEnd(e){this.adjustPaneSize(e.sizes[0])}adjustPaneSize(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?this.defaultLeftPaneSize:0)}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(c.h))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-purpose"]],outputs:{edit:"edit"},decls:1,vars:1,consts:[["direction","horizontal",3,"gutterDblClick","dragEnd",4,"ngIf"],["direction","horizontal",3,"gutterDblClick","dragEnd"],[3,"size"],[4,"ngIf"],[1,"alert"],[1,"border-0","pb-0","mb-2","float-left"],["title","Show/hide details",1,"btn","btn-light","btn-sm","text-muted","mr-2",3,"click"],["size","fw",3,"icon"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"clearfix"],[1,"proceed-button","text-right"],[1,"btn","btn-group","btn-group-sm"],[1,"btn","btn-sm","btn-default","disabled"],["routerLink","../workbench",1,"btn","btn-sm","btn-primary"],["icon","arrow-circle-right","size","sm",1,"ml-1"],[3,"rootNode","issueKey"],[3,"ngClass"],[1,"text-uppercase","text-muted"],[1,"small"],["class","ml-3 pl-3 pr-3 border-left","style","overflow:auto",4,"ngIf"],[1,"ml-3","pl-3","pr-3","border-left",2,"overflow","auto"],[1,"text-dark","font-weight-normal","mt-1"],[3,"data"]],template:function(e,t){1&e&&w.Mc(0,J,18,5,"as-split",0),2&e&&w.qc("ngIf",t.purpose&&t.purpose.length>0)},directives:[i.m,R.c,R.b,x.a,i.l,P.f,A,i.k,K.a],encapsulation:2}),e})();var Y=s("pl0p"),Z=s("3Pt+"),_=s("jLSX"),ee=s("lJxs");const te=["content"];let se=(()=>{class e{constructor(e,t){this.cdRef=e,this.store$=t,this.containerSize=0,this.expandableSize=57,this.contentHeight=0,this.compactView=!1}init(e){this.containerSize=e,this.isSelectedIssueViewCompact$=this.store$.select(e=>e.issue.isSelectedIssueViewCompact).subscribe(e=>{this.compactView=e,this.containerSize+=e?-1*this.expandableSize:this.expandableSize,this.onResize()})}destroy(){this.isSelectedIssueViewCompact$&&this.isSelectedIssueViewCompact$.unsubscribe()}afterViewInit(){this.onResize()}onResize(){this.elementView&&(this.contentHeight=this.elementView.nativeElement.offsetParent.clientHeight-this.containerSize,this.cdRef.detectChanges())}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(w.h),w.Qb(c.h))},e.\u0275dir=w.Lb({type:e,viewQuery:function(e,t){var s;1&e&&w.Sc(te,!0),2&e&&w.Cc(s=w.jc())&&(t.elementView=s.first)},hostBindings:function(e,t){1&e&&w.ic("resize",(function(e){return t.onResize(e)}),!1,w.Ec)}}),e})();var ie=s("pMU3"),ce=s("AQDj");const ne=function(e){return["/browse",e]};function ae(e,t){if(1&e&&(w.Wb(0,"li",12),w.Wb(1,"a",13),w.Oc(2),w.Vb(),w.Vb()),2&e){const e=w.kc(3);w.Cb(1),w.qc("routerLink",w.uc(3,ne,e.primaryIssue.key)),w.Cb(1),w.Rc(" ",e.primaryIssue.issueType,": ",e.primaryIssue.key," ")}}const re=function(){return["/search/list"]},oe=function(e){return{"issue-resolved":e}},le=function(e,t,s){return{"badge-success":e,"badge-warning":t,"badge-secondary":s}};function de(e,t){if(1&e&&(w.Wb(0,"nav",10),w.Wb(1,"ol",11),w.Wb(2,"li",12),w.Wb(3,"a",13),w.Rb(4,"fa-icon",14),w.Oc(5," Results "),w.Vb(),w.Vb(),w.Mc(6,ae,3,5,"li",15),w.Wb(7,"li",16),w.Wb(8,"span",17),w.Oc(9),w.Vb(),w.Wb(10,"span",18),w.Oc(11),w.Vb(),w.Rb(12,"app-issue-navigation-menu",19),w.Vb(),w.Vb(),w.Vb()),2&e){const e=w.kc(2);w.Cb(3),w.qc("routerLink",w.tc(10,re)),w.Cb(3),w.qc("ngIf",e.primaryIssue&&!e.primaryAndSelectIssueSame),w.Cb(2),w.qc("title",e.selectedIssue.resolution)("ngClass",w.uc(11,oe,e.selectedIssue.resolution)),w.Cb(1),w.Rc(" ",e.selectedIssue.issueType,": ",e.selectedIssue.key," "),w.Cb(1),w.qc("ngClass",w.wc(13,le,e.selectedIssue.resolution,!e.selectedIssue.resolution&&e.selectedIssue.duedateMissing,!e.selectedIssue.resolution&&!e.selectedIssue.duedateMissing)),w.Cb(1),w.Qc(" ",e.selectedIssue.status," "),w.Cb(1),w.qc("issueKey",e.selectedIssue.key)("spread",!0)}}const ue=function(){return["far","map"]};function be(e,t){1&e&&(w.Wb(0,"a",29),w.Rb(1,"fa-icon",30),w.Wb(2,"span",25),w.Oc(3,"Storyboard"),w.Vb(),w.Vb()),2&e&&(w.qc("routerLinkActive","active"),w.Cb(1),w.qc("icon",w.tc(2,ue)))}function pe(e,t){1&e&&(w.Wb(0,"a",31),w.Rb(1,"fa-icon",32),w.Wb(2,"span",25),w.Oc(3,"Timeline"),w.Vb(),w.Vb()),2&e&&w.qc("routerLinkActive","active")}function he(e,t){1&e&&w.Rb(0,"div",33)}const ge=function(){return["details"]};function me(e,t){if(1&e&&(w.Wb(0,"div",20),w.Wb(1,"div",21),w.Wb(2,"div",22),w.Wb(3,"a",23),w.Rb(4,"fa-icon",24),w.Wb(5,"span",25),w.Oc(6,"Purpose"),w.Vb(),w.Vb(),w.Mc(7,be,4,3,"a",26),w.Mc(8,pe,4,1,"a",27),w.Vb(),w.Vb(),w.Mc(9,he,1,0,"div",28),w.Vb()),2&e){const e=w.kc(2);w.Cb(3),w.qc("routerLink",w.tc(5,ge))("routerLinkActive","active"),w.Cb(4),w.qc("ngIf",e.canNavigateToStoryboard),w.Cb(1),w.qc("ngIf",e.canNavigateToStoryboard),w.Cb(1),w.qc("ngIf",!e.selectedIssue.resolution)}}function ye(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div",3),w.Wb(1,"div",4),w.Wb(2,"button",5),w.ic("click",(function(){return w.Fc(e),w.kc().toggleView()})),w.Rb(3,"fa-icon",6),w.Vb(),w.Vb(),w.Mc(4,de,13,17,"nav",7),w.Wb(5,"uicontrols-textbox",8),w.ic("textUpdated",(function(t){return w.Fc(e),w.kc().onTitleUpdated(t)})),w.Vb(),w.Mc(6,me,10,6,"div",9),w.Vb()}if(2&e){const e=w.kc();w.Cb(3),w.qc("icon",e.compactView?"expand-alt":"compress-alt"),w.Cb(1),w.qc("ngIf",!e.compactView),w.Cb(1),w.qc("text",e.selectedIssue.title)("canEdit",!e.selectedIssue.resolution),w.Cb(1),w.qc("ngIf",!e.compactView)}}let fe=(()=>{class e extends se{constructor(e,t,s,i){super(e,i),this.cdRef=e,this.router=t,this.activatedRoute=s,this.store$=i,this.canNavigateToStoryboard=!1,this.primaryAndSelectIssueSame=!1,this.checkIsPrimaryAndSelectIssueSame=()=>this.selectedIssue&&this.selectedIssue.key&&this.primaryIssue&&this.primaryIssue.key&&this.primaryIssue.key.toLowerCase()===this.selectedIssue.key.toLowerCase(),this.showIssueEntry=!1}ngOnInit(){this.init(45),this.localNodeType=O.a,this.updatedField$=this.store$.select(e=>e.issue.updatedField).pipe(Object(F.a)(e=>e&&this.selectedIssue)).subscribe(()=>{this.store$.dispatch(new p({issue:this.selectedIssue.key,extendedFields:this.extendedFields}))}),this.organization$=this.store$.select(e=>e.app.organization).pipe(Object(F.a)(e=>e)).subscribe(e=>this.store$.dispatch(new k(e))),this.selectedIssue$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(F.a)(e=>e)).subscribe(e=>{this.compactView=!1,this.selectedIssue=e,this.primaryAndSelectIssueSame=this.checkIsPrimaryAndSelectIssueSame(),this.canNavigateToStoryboard=this.primaryAndSelectIssueSame,this.primaryIssue&&this.primaryIssue.key&&this.selectedIssue.key.toLowerCase()===this.primaryIssue.key.toLowerCase()||(this.selectedIssue.relatedLinksLoaded||this.selectedIssue.relatedLinksLoading||this.selectedIssue.relatedLinks&&this.selectedIssue.relatedLinks.length>0&&this.store$.dispatch(new m(v.map(this.selectedIssue.relatedLinks,"key"))),this.selectedIssue.issueType!==O.a.Epic||this.selectedIssue.epicChildrenLoaded||this.selectedIssue.epicChildrenLoading||this.store$.dispatch(new g(this.selectedIssue.key)))});const e=this.store$.select(e=>e.issue.primaryIssue).pipe(Object(F.a)(e=>e)),t=this.store$.select(e=>e.issue.hierarchicalIssue).pipe(Object(F.a)(e=>e)),s=this.activatedRoute.params.pipe(Object(F.a)(e=>e&&e.selected&&e.selected.length>0),Object(ee.a)(e=>e.selected));this.combined$=Object(W.a)(e,t,s).subscribe(([e,t,s])=>{if(this.primaryIssue=e,this.primaryIssue.key&&s.toLowerCase()===this.primaryIssue.key.toLowerCase())this.store$.dispatch(new y(e));else if(!this.selectedIssue||this.selectedIssue.key.toLowerCase()!==s.toLowerCase()){const i=Object(O.x)(t,s);this.extendedFields=i?this.populateExtendedFields(e.projectConfig,i.issueType):[],this.store$.dispatch(new p({issue:s,extendedFields:this.extendedFields}))}})}populateExtendedFields(e,t){let s=[];if(e){if(e.standardIssueTypes){const i=v.find(e.standardIssueTypes,{name:t});i&&(s=v.union(s,i.list))}e.startdate&&s.push(e.startdate)}return s}ngOnDestroy(){this.destroy(),this.updatedField$&&this.updatedField$.unsubscribe(),this.organization$&&this.organization$.unsubscribe(),this.combined$&&this.combined$.unsubscribe(),this.selectedIssue$&&this.selectedIssue$.unsubscribe()}onShowIssuelist(){this.router.navigate(["/search/list"])}ngAfterViewInit(){this.afterViewInit()}toggleView(){this.store$.dispatch(new h(!this.compactView))}onCancelIssueEntry(e){this.showIssueEntry=!1}onTitleUpdated(e){this.store$.dispatch(new C({issueKey:this.selectedIssue.key,fieldName:"summary",updatedValue:e.updated})),this.selectedIssue.title=e.updated}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(w.h),w.Qb(P.d),w.Qb(P.a),w.Qb(c.h))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-selected-issue-container"]],features:[w.zb],decls:4,vars:3,consts:[["class","bg-light container-fluid pb-1 border-bottom",4,"ngIf"],[2,"overflow","auto","width","100%"],["content",""],[1,"bg-light","container-fluid","pb-1","border-bottom"],[1,"float-right","btn-group","btn-group-sm"],[1,"btn","btn-sm","btn-link","text-muted",3,"click"],[3,"icon"],["aria-label","breadcrumb",4,"ngIf"],["styleClass","h2 font-weight-light mb-0 text-truncate",3,"text","canEdit","textUpdated"],["class","row",4,"ngIf"],["aria-label","breadcrumb"],[1,"breadcrumb","small","bg-light","p-0","m-0"],[1,"breadcrumb-item"],[1,"text-uppercase",3,"routerLink"],["icon","search",1,"mr-1"],["class","breadcrumb-item",4,"ngIf"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-uppercase","text-dark",3,"title","ngClass"],[1,"badge","text-truncate","ml-2",3,"ngClass"],[1,"ml-3",3,"issueKey","spread"],[1,"row"],[1,"col-md-6"],[1,"btn-group"],["title","View purpose",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLink","routerLinkActive"],["icon","fire","size","sm",1,"text-brand"],[1,"ml-1"],["class","btn btn-default border btn-sm text-nowrap","routerLink","storyboard","title","Storyboard",3,"routerLinkActive",4,"ngIf"],["class","btn btn-default border btn-sm text-nowrap","routerLink","timeline","title","Timeline",3,"routerLinkActive",4,"ngIf"],["class","col-md-6 text-right",4,"ngIf"],["routerLink","storyboard","title","Storyboard",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLinkActive"],["size","sm",3,"icon"],["routerLink","timeline","title","Timeline",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLinkActive"],["icon","map-signs","size","sm"],[1,"col-md-6","text-right"]],template:function(e,t){1&e&&(w.Mc(0,ye,7,5,"div",0),w.Wb(1,"div",1,2),w.Rb(3,"router-outlet"),w.Vb()),2&e&&(w.qc("ngIf",t.selectedIssue),w.Cb(1),w.Lc("height",t.contentHeight,"px"))},directives:[i.m,P.h,x.a,ie.a,P.f,i.k,ce.a,P.e],encapsulation:2}),e})();var Ie=s("1kSV"),ke=s("ulIy"),Ce=s("wQv3"),Oe=s("OTNj"),je=s("29oc"),ve=s("atTx"),Le=s("yWCo"),Se=s("O5Lx");function Ve(e,t){if(1&e&&(w.Wb(0,"div"),w.Rb(1,"app-extended-fields",6),w.Rb(2,"app-attachments",6),w.Vb()),2&e){const e=w.kc(2);w.Cb(1),w.qc("issue",e.issue),w.Cb(1),w.qc("issue",e.issue)}}function we(e,t){if(1&e&&w.Rb(0,"fa-icon",26),2&e){const e=w.kc(3);w.qc("icon",e.allEpicChildrenVisible?"angle-double-down":"angle-double-right")("fixedWidth",!0)}}function We(e,t){1&e&&(w.Wb(0,"div",29),w.Oc(1," There are no issues in this epic "),w.Vb())}function Fe(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div"),w.Wb(1,"app-grouped-issues",30),w.ic("fieldUpdated",(function(t){return w.Fc(e),w.kc(4).onFieldUpdated(t)})),w.Vb(),w.Vb()}if(2&e){const e=w.kc(4);w.Cb(1),w.qc("groupedIssues",e.groupedEpicChildren)("projectConfig",e.issue.projectConfig)}}function Re(e,t){if(1&e&&(w.Wb(0,"div",27),w.Mc(1,We,2,0,"div",28),w.Mc(2,Fe,2,2,"div",7),w.Vb()),2&e){const e=w.kc(3);w.Cb(1),w.qc("ngIf",!e.groupedEpicChildren||0===e.groupedEpicChildren.length),w.Cb(1),w.qc("ngIf",e.groupedEpicChildren&&e.groupedEpicChildren.length>0)}}function xe(e,t){if(1&e){const e=w.Xb();w.Wb(0,"li",19),w.Wb(1,"a",20),w.ic("click",(function(){return w.Fc(e),w.kc(2).toggleAllEpicChildren()})),w.Mc(2,we,1,2,"fa-icon",25),w.Oc(3," Issues in epic "),w.Vb(),w.Mc(4,Re,3,2,"ng-template",22),w.Vb()}if(2&e){const e=w.kc(2);w.qc("ngbNavItem",1),w.Cb(2),w.qc("ngIf",e.groupedEpicChildren&&e.groupedEpicChildren.length>1)}}function Pe(e,t){if(1&e&&w.Rb(0,"fa-icon",26),2&e){const e=w.kc(3);w.qc("icon",e.allRelatedIssuesVisible?"angle-double-down":"angle-double-right")("fixedWidth",!0)}}function qe(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div",27),w.Wb(1,"app-grouped-issues",30),w.ic("fieldUpdated",(function(t){return w.Fc(e),w.kc(3).onFieldUpdated(t)})),w.Vb(),w.Vb()}if(2&e){const e=w.kc(3);w.Cb(1),w.qc("groupedIssues",e.groupedRelatedLinks)("projectConfig",e.issue.projectConfig)}}function $e(e,t){if(1&e){const e=w.Xb();w.Wb(0,"li",19),w.Wb(1,"a",20),w.ic("click",(function(){return w.Fc(e),w.kc(2).toggleAllRelatedIssues()})),w.Mc(2,Pe,1,2,"fa-icon",25),w.Oc(3," Related "),w.Vb(),w.Mc(4,qe,2,2,"ng-template",22),w.Vb()}if(2&e){const e=w.kc(2);w.qc("ngbNavItem",2),w.Cb(2),w.qc("ngIf",e.groupedRelatedLinks.length>1)}}function ze(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div",27),w.Wb(1,"app-task-list",31),w.ic("fieldUpdated",(function(t){return w.Fc(e),w.kc(2).onFieldUpdated(t)})),w.Vb(),w.Vb()}if(2&e){const e=w.kc(2);w.Cb(1),w.qc("issue",e.selectedIssue)("showIssue",!1)}}function Ee(e,t){if(1&e&&(w.Wb(0,"div",32),w.Rb(1,"app-comment-list",33),w.Vb()),2&e){const e=w.kc(2);w.Cb(1),w.qc("issueKey",e.issue.key)}}const Te=function(e){return{small:e}},Me=function(){return["far","comments"]};function Ne(e,t){if(1&e){const e=w.Xb();w.Wb(0,"as-split",1),w.ic("gutterDblClick",(function(){return w.Fc(e),w.kc().toggleFullscreen()}))("dragEnd",(function(t){return w.Fc(e),w.kc().dragEnd(t)})),w.Wb(1,"as-split-area",2),w.Wb(2,"div",3),w.Wb(3,"uicontrols-textarea",4),w.ic("textUpdated",(function(t){return w.Fc(e),w.kc().onDescUpdated(t)})),w.Vb(),w.Wb(4,"div",5),w.Rb(5,"app-issue-metafields",6),w.Vb(),w.Mc(6,Ve,3,2,"div",7),w.Wb(7,"div",8),w.Wb(8,"div",9),w.Wb(9,"a",10),w.Rb(10,"fa-icon",11),w.Oc(11," Purpose view "),w.Vb(),w.Wb(12,"a",12),w.Oc(13," Detail view "),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Wb(14,"as-split-area",13),w.Wb(15,"button",14),w.ic("click",(function(){return w.Fc(e),w.kc().toggleFullscreen()})),w.Rb(16,"fa-icon",15),w.Vb(),w.Wb(17,"ul",16,17),w.ic("activeIdChange",(function(t){return w.Fc(e),w.kc().selectedTab=t})),w.Mc(19,xe,5,2,"li",18),w.Mc(20,$e,5,2,"li",18),w.Wb(21,"li",19),w.Wb(22,"a",20),w.ic("click",(function(){return w.Fc(e),w.kc().reloadSubtasks()})),w.Rb(23,"fa-icon",21),w.Oc(24," Task breakup "),w.Vb(),w.Mc(25,ze,2,2,"ng-template",22),w.Vb(),w.Wb(26,"li",19),w.Wb(27,"a",20),w.ic("click",(function(){return w.Fc(e),w.kc().reloadSubtasks()})),w.Rb(28,"fa-icon",23),w.Oc(29," Comments "),w.Vb(),w.Mc(30,Ee,2,1,"ng-template",22),w.Vb(),w.Vb(),w.Rb(31,"div",24),w.Vb(),w.Vb()}if(2&e){const e=w.Dc(18),t=w.kc();w.Cb(1),w.qc("size",t.columns[0].size),w.Cb(2),w.qc("text",t.issue.description)("forceSave",!0)("canEdit",!t.issue.resolution),w.Cb(2),w.qc("issue",t.issue),w.Cb(1),w.qc("ngIf",t.leftPaneSize>0),w.Cb(8),w.qc("size",t.columns[1].size)("ngClass",w.uc(18,Te,0!==t.columns[0].size)),w.Cb(2),w.qc("icon",0===t.columns[0].size?"compress":"expand")("fixedWidth",!0),w.Cb(1),w.qc("activeId",t.selectedTab)("destroyOnHide",!1),w.Cb(2),w.qc("ngIf",t.issue.issueType===t.localNodeType.Epic),w.Cb(1),w.qc("ngIf",t.groupedRelatedLinks&&t.groupedRelatedLinks.length>0),w.Cb(1),w.qc("ngbNavItem",3),w.Cb(5),w.qc("ngbNavItem",4),w.Cb(2),w.qc("icon",w.tc(20,Me)),w.Cb(3),w.qc("ngbNavOutlet",e)}}let De=(()=>{class e{constructor(e){this.store$=e,this.allRelatedIssuesVisible=!0,this.allEpicChildrenVisible=!0,this.selectedTab=1,this.leftPaneSize=60,this.columns=[{visible:!0,size:60},{visible:!0,size:40}],this.resetSelectedEpicIssue=()=>this.selectedEpicIssue=null,this.localNodeType=O.a}ngOnInit(){this.selectedIssue$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(F.a)(e=>e)).subscribe(e=>{this.issue=e,this.selectedRelatedIssue=null,this.selectedEpicIssue=null,this.issue.relatedLinksLoaded&&!this.groupedRelatedLinks&&(this.groupedRelatedLinks=Object(a.a)(this.issue.relatedLinks,"linkType"),this.issue.relatedLinksCount=this.groupedRelatedLinks.length,this.selectedTab=this.groupedRelatedLinks.length>0?2:3,this.toggleAllRelatedIssues()),this.issue.issueType===O.a.Epic&&this.issue.epicChildrenLoaded&&this.groupEpicChildren("status")})}ngOnDestroy(){this.epicChildrenLoaded$&&this.epicChildrenLoaded$.unsubscribe(),this.selectedIssue$&&this.selectedIssue$.unsubscribe()}dragEnd(e){this.adjustPaneSize(e.sizes[0])}adjustPaneSize(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?60:0)}selectEpicIssue(e){this.selectedEpicIssue=e,this.selectedEpicIssue.projectConfig=this.issue.projectConfig}groupEpicChildren(e){if(this.selectedTab=1,this.issue&&!this.groupedEpicChildren){const t=this.issue.epicChildren;t&&t.length>0&&(this.groupedEpicChildren=Object(a.a)(t,e)),this.toggleAllEpicChildren()}}toggleAllEpicChildren(){this.selectedIssue=null,this.allEpicChildrenVisible=!this.allEpicChildrenVisible,this.groupedEpicChildren&&this.groupedEpicChildren.forEach(e=>e.visible=1===this.groupedEpicChildren.length||this.allEpicChildrenVisible)}toggleAllRelatedIssues(){this.selectedIssue=null,this.allRelatedIssuesVisible=!this.allRelatedIssuesVisible,this.groupedRelatedLinks&&this.groupedRelatedLinks.length>0&&this.groupedRelatedLinks.forEach(e=>e.visible=1===this.groupedRelatedLinks.length||this.allRelatedIssuesVisible)}reloadSubtasks(){this.selectedEpicIssue=null,this.selectedRelatedIssue=null,this.selectedIssue=this.issue}onFieldUpdated(e){this.store$.dispatch(new C(e))}onDescUpdated(e){this.onFieldUpdated({issueKey:this.issue.key,fieldName:"description",updatedValue:e.updated}),this.issue.description=e.updated}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(c.h))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-workbench"]],decls:2,vars:1,consts:[["direction","horizontal",3,"gutterDblClick","dragEnd",4,"ngIf"],["direction","horizontal",3,"gutterDblClick","dragEnd"],[3,"size"],[1,"alert","mr-5",2,"overflow","auto"],["styleClass"," mb-4",3,"text","forceSave","canEdit","textUpdated"],[1,"small","alert","bg-light","mb-4"],[3,"issue"],[4,"ngIf"],[1,"proceed-button","text-right"],[1,"btn","btn-group","btn-group-sm"],["routerLink","../details",1,"btn","btn-sm","btn-primary"],["icon","arrow-circle-left","size","sm",1,"mr-1"],[1,"btn","btn-sm","btn-default","disabled"],[3,"size","ngClass"],["title","expand/collapse pane",1,"btn","btn-sm","btn-link","text-muted","float-right","mt-2",3,"click"],[3,"icon","fixedWidth"],["ngbNav","",1,"nav-tabs","mt-2",3,"activeId","destroyOnHide","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngIf"],[3,"ngbNavItem"],["ngbNavLink","",3,"click"],["icon","list"],["ngbNavContent",""],[3,"icon"],[1,"mt-2",3,"ngbNavOutlet"],["size","sm",3,"icon","fixedWidth",4,"ngIf"],["size","sm",3,"icon","fixedWidth"],[1,"pl-2","pr-2","pb-2"],["class","alert alert-warning",4,"ngIf"],[1,"alert","alert-warning"],[3,"groupedIssues","projectConfig","fieldUpdated"],[3,"issue","showIssue","fieldUpdated"],[1,"pl-2","pr-5","pb-2"],[3,"issueKey"]],template:function(e,t){1&e&&(w.Wb(0,"div"),w.Mc(1,Ne,32,21,"as-split",0),w.Vb()),2&e&&(w.Cb(1),w.qc("ngIf",t.issue))},directives:[i.m,R.c,R.b,ke.a,Ce.a,P.f,x.a,i.k,Ie.j,Ie.l,Ie.m,Ie.k,Ie.o,Oe.a,je.a,ve.a,Le.a,Se.a],encapsulation:2}),e})();var Ue=s("uAqM"),Ae=s("Ewkv"),Ke=s("lVkt"),Qe=s("/RsI"),He=s("NGyg"),Be=s("qUTn");const Xe=function(e){return{"mt-2":e}};function Je(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div",18),w.Wb(1,"input",19),w.ic("ngModelChange",(function(t){return w.Fc(e),w.kc(2).includeEpicChildren=t}))("change",(function(){return w.Fc(e),w.kc(2).plotIssuesOnStoryboard()})),w.Vb(),w.Wb(2,"b",20),w.Oc(3),w.Vb(),w.Oc(4," issues in this epic "),w.Vb()}if(2&e){const e=w.kc(2);w.qc("ngClass",w.uc(3,Xe,!e.storyboardItem.relatedLinks||0===e.storyboardItem.relatedLinks.length)),w.Cb(1),w.qc("ngModel",e.includeEpicChildren),w.Cb(2),w.Pc(e.storyboardItem.epicChildren.length)}}function Ge(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div",18),w.Wb(1,"input",19),w.ic("ngModelChange",(function(t){return w.Fc(e),w.kc(2).includeRelatedIssues=t}))("change",(function(){return w.Fc(e),w.kc(2).plotIssuesOnStoryboard()})),w.Vb(),w.Wb(2,"b",20),w.Oc(3),w.Vb(),w.Oc(4," related issues "),w.Vb()}if(2&e){const e=w.kc(2);w.qc("ngClass",w.uc(3,Xe,!e.storyboardItem.epicChildren||0===e.storyboardItem.epicChildren.length)),w.Cb(1),w.qc("ngModel",e.includeRelatedIssues),w.Cb(2),w.Pc(e.storyboardItem.relatedLinks.length)}}function Ye(e,t){if(1&e&&(w.Wb(0,"div",22),w.Wb(1,"span",23),w.Oc(2),w.Vb(),w.Oc(3," unplanned issues. "),w.Vb()),2&e){const e=w.kc(3);w.qc("ngClass",w.uc(2,Xe,0===e.storyboardItem.metadata.emptyRecordCount)),w.Cb(2),w.Pc(e.storyboardItem.metadata.backlogCount)}}function Ze(e,t){if(1&e&&(w.Wb(0,"div",18),w.Wb(1,"span",23),w.Oc(2),w.Vb(),w.Oc(3),w.Vb()),2&e){const e=w.kc(3);w.qc("ngClass",w.uc(3,Xe,0===e.storyboardItem.metadata.backlogCount)),w.Cb(2),w.Pc(e.storyboardItem.metadata.emptyRecordCount),w.Cb(1),w.Qc(" issues with unassigned ",e.groupByColumn,". ")}}function _e(e,t){if(1&e&&(w.Ub(0),w.Mc(1,Ye,4,4,"div",21),w.Mc(2,Ze,4,5,"div",8),w.Tb()),2&e){const e=w.kc(2);w.Cb(1),w.qc("ngIf",e.storyboardItem.metadata.backlogCount>0),w.Cb(1),w.qc("ngIf",e.storyboardItem.metadata.emptyRecordCount>0)}}function et(e,t){if(1&e){const e=w.Xb();w.Wb(0,"p-multiSelect",24),w.ic("ngModelChange",(function(t){return w.Fc(e),w.kc(2).selectedStatuses=t}))("onChange",(function(t){return w.Fc(e),w.kc(2).onSelectedStatusChange(t)})),w.Vb()}if(2&e){const e=w.kc(2);w.qc("options",e.statusLookup)("ngModel",e.selectedStatuses)}}const tt=function(){return["far","chart-bar"]};function st(e,t){if(1&e){const e=w.Xb();w.Wb(0,"button",25),w.ic("click",(function(){return w.Fc(e),w.kc(2).showStatistics=!0})),w.Rb(1,"fa-icon",26),w.Vb()}2&e&&(w.Cb(1),w.qc("icon",w.tc(1,tt)))}function it(e,t){if(1&e){const e=w.Xb();w.Wb(0,"p-dialog",27),w.ic("visibleChange",(function(t){return w.Fc(e),w.kc(2).showStatistics=t})),w.Rb(1,"app-statistics",28),w.Vb()}if(2&e){const e=w.kc(2);w.qc("header",e.storyboardItem.statistics.title)("dismissableMask",!0)("modal",!0)("visible",e.showStatistics),w.Cb(1),w.qc("groupByColumn",e.groupByColumn)("statistics",e.storyboardItem.statistics)}}function ct(e,t){if(1&e){const e=w.Xb();w.Wb(0,"app-issue-details",29),w.ic("currentIndexChange",(function(t){return w.Fc(e),w.kc(2).currentIndex=t}))("close",(function(){return w.Fc(e),w.kc(2).issueDetailsVisible=!1}))("fieldUpdated",(function(t){return w.Fc(e),w.kc(2).onFieldUpdated(t)})),w.Vb()}if(2&e){const e=w.kc(2);w.qc("list",e.storyboardItem.children)("currentIndex",e.currentIndex)("enableEdits",!0)}}function nt(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div"),w.Wb(1,"div",1),w.Wb(2,"div",2),w.Wb(3,"div",3),w.Wb(4,"select",4),w.ic("ngModelChange",(function(t){return w.Fc(e),w.kc().groupByColumn=t}))("change",(function(){return w.Fc(e),w.kc().onGroupByColumnChanged()})),w.Wb(5,"option",5),w.Oc(6,"Components"),w.Vb(),w.Wb(7,"option",6),w.Oc(8,"Labels"),w.Vb(),w.Vb(),w.Vb(),w.Wb(9,"div",7),w.Mc(10,Je,5,5,"div",8),w.Mc(11,Ge,5,5,"div",8),w.Vb(),w.Wb(12,"div",9),w.Mc(13,_e,3,2,"ng-container",0),w.Vb(),w.Wb(14,"div",10),w.Mc(15,et,1,2,"p-multiSelect",11),w.Vb(),w.Wb(16,"div",12),w.Mc(17,st,2,2,"button",13),w.Vb(),w.Vb(),w.Vb(),w.Wb(18,"app-storyboard-renderer",14),w.ic("itemSelected",(function(t){return w.Fc(e),w.kc().onItemSelected(t)}))("fieldValueChange",(function(t){return w.Fc(e),w.kc().onFieldUpdated(t)})),w.Vb(),w.Mc(19,it,2,6,"p-dialog",15),w.Wb(20,"p-sidebar",16),w.ic("visibleChange",(function(t){return w.Fc(e),w.kc().issueDetailsVisible=t})),w.Mc(21,ct,1,3,"app-issue-details",17),w.Vb(),w.Vb()}if(2&e){const e=w.kc();w.Cb(4),w.qc("ngModel",e.groupByColumn),w.Cb(6),w.qc("ngIf",e.storyboardItem.epicChildren&&e.storyboardItem.epicChildren.length>0),w.Cb(1),w.qc("ngIf",e.storyboardItem.relatedLinks&&e.storyboardItem.relatedLinks.length>0),w.Cb(2),w.qc("ngIf",e.storyboardItem.metadata),w.Cb(2),w.qc("ngIf",e.statusLookup&&e.statusLookup.length>0),w.Cb(2),w.qc("ngIf",e.storyboardItem.epicChildren&&e.storyboardItem.epicChildren.length>0||e.storyboardItem.relatedLinks&&e.storyboardItem.relatedLinks.length>0),w.Cb(1),w.qc("groupByColumn",e.groupByColumn)("storyboardItem",e.storyboardItem),w.Cb(1),w.qc("ngIf",e.storyboardItem&&e.storyboardItem.statistics),w.Cb(1),w.qc("visible",e.issueDetailsVisible)("fullScreen",!0)("showCloseIcon",!1),w.Cb(1),w.qc("ngIf",e.storyboardItem&&e.storyboardItem.children)}}let at=(()=>{class e{constructor(e){this.store$=e,this.selectedStatuses=[],this.statusLookup=[],this.includeRelatedIssues=!1,this.relatedIssuesIncluded=!1,this.includeEpicChildren=!1,this.epicChildrenIncluded=!1,this.showStatistics=!1,this.groupByColumn="components",this.filterByStatus=(e,t)=>t&&t.length>0?v.filter(e,e=>void 0!==v.find(t,t=>t===e.status)):e,this.issueDetailsVisible=!1,this.currentIndex=0}ngOnInit(){this.selectedItem$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(F.a)(e=>e)).subscribe(e=>{this.storyboardItem=v.pick(e,v.union(O.v,["relatedLinks","epicChildren"])),e.issueType===O.a.Epic?this.includeEpicChildren=!0:this.includeRelatedIssues=!0,this.plotIssuesOnStoryboard()})}ngOnDestroy(){this.selectedItem$&&this.selectedItem$.unsubscribe()}onGroupByColumnChanged(){this.plotIssuesOnStoryboard()}plotIssuesOnStoryboard(){this.storyboardItem.children=[],this.storyboardItem.metadata=Object(Ue.b)(this.groupByColumn);const e=v.map(this.selectedStatuses,"key");if(this.includeEpicChildren&&this.storyboardItem.epicChildren&&this.storyboardItem.epicChildren.length>0){this.epicChildrenIncluded=!0;const t=this.filterByStatus(this.storyboardItem.epicChildren,e);this.storyboardItem.children=v.union(this.storyboardItem.children,t),Object(Ue.c)(this.storyboardItem.metadata,Object(Ue.a)(t,this.groupByColumn),this.groupByColumn)}if(this.includeRelatedIssues&&this.storyboardItem.relatedLinks&&this.storyboardItem.relatedLinks.length>0){this.relatedIssuesIncluded=!0;const t=this.filterByStatus(this.storyboardItem.relatedLinks,e);this.storyboardItem.children=v.union(this.storyboardItem.children,t),Object(Ue.c)(this.storyboardItem.metadata,Object(Ue.a)(t,this.groupByColumn),this.groupByColumn)}this.storyboardItem.statistics=Object(Ue.d)(this.storyboardItem.metadata,this.storyboardItem.children,"Statistics",this.groupByColumn),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}onSelectedStatusChange(e){this.plotIssuesOnStoryboard()}openIssueAtIndex(e){this.issueDetailsVisible=!0,this.currentIndex=e}onItemSelected(e){if(this.storyboardItem.children&&e&&e.issueKey){const t=v.findIndex(this.storyboardItem.children,{key:e.issueKey});t>=0&&this.openIssueAtIndex(t)}}onFieldUpdated(e){this.store$.dispatch(new C(e))}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(c.h))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-storyboard"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"pl-3","pt-2","pb-2","pr-2"],[1,"row","small"],[1,"col-md-2","col-lg-2","pt-1"],[1,"form-control","form-control-sm",2,"width","150px",3,"ngModel","ngModelChange","change"],["value","components"],["value","labels"],[1,"col-md-3","offset-lg-1","col-lg-2"],[3,"ngClass",4,"ngIf"],[1,"col-md-3","col-lg-4","text-truncate"],[1,"col-md-3","col-lg-2","pt-1"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1","text-right"],["class","btn btn-link pr-0",3,"click",4,"ngIf"],[3,"groupByColumn","storyboardItem","itemSelected","fieldValueChange"],["position","right","class","bg-light",3,"header","dismissableMask","modal","visible","visibleChange",4,"ngIf"],["styleClass","bg-light",3,"visible","fullScreen","showCloseIcon","visibleChange"],[3,"list","currentIndex","enableEdits","currentIndexChange","close","fieldUpdated",4,"ngIf"],[3,"ngClass"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"badge","badge-success","ml-1"],["class","mr-4",3,"ngClass",4,"ngIf"],[1,"mr-4",3,"ngClass"],[1,"badge","badge-warning"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],[1,"btn","btn-link","pr-0",3,"click"],["size","lg",3,"icon"],["position","right",1,"bg-light",3,"header","dismissableMask","modal","visible","visibleChange"],[3,"groupByColumn","statistics"],[3,"list","currentIndex","enableEdits","currentIndexChange","close","fieldUpdated"]],template:function(e,t){1&e&&w.Mc(0,nt,22,13,"div",0),2&e&&w.qc("ngIf",t.storyboardItem)},directives:[i.m,Z.k,Z.f,Z.i,Z.j,Z.l,Ae.a,_.a,i.k,Z.a,Ke.a,x.a,Qe.a,He.a,Be.a],encapsulation:2}),e})();var rt=s("snw9"),ot=s("mrSG"),lt=s("eIep"),dt=s("JIr8"),ut=s("vkgz"),bt=s("LRne"),pt=s("F2Ol"),ht=s("yVuU");let gt=(()=>{class e{constructor(e,t,s){this.actions$=e,this.jiraService=t,this.cachingService=s,this.loadPrimaryIssue=this.actions$.pipe(Object(rt.d)(r.LoadPrimaryIssue),Object(lt.a)(e=>this.getIssueDetails(e.payload).pipe(Object(ee.a)(e=>({type:r.LoadPrimaryIssueSuccess,payload:e})),Object(dt.a)(()=>Object(bt.a)({type:r.LoadPrimaryIssueFailed}))))),this.loadPrimaryIssueEpicChildren=this.actions$.pipe(Object(rt.d)(r.LoadPrimaryIssueEpicChildren),Object(lt.a)(e=>this.jiraService.loadEpicChildren$(e.payload,0,100,O.m).pipe(Object(ee.a)(e=>({type:r.LoadPrimaryIssueEpicChildrenSuccess,payload:e})),Object(dt.a)(()=>Object(bt.a)({type:r.LoadPrimaryIssueEpicChildrenFailed}))))),this.loadPrimaryIssueRelatedLinks=this.actions$.pipe(Object(rt.d)(r.LoadPrimaryIssueRelatedLinks),Object(lt.a)(e=>this.jiraService.executeJql(`key in (${v.join(e.payload,",")})`,0,100,O.m,"linked-issues.json").pipe(Object(ee.a)(e=>({type:r.LoadPrimaryIssueRelatedLinksSuccess,payload:e})),Object(dt.a)(()=>Object(bt.a)({type:r.LoadPrimaryIssueRelatedLinksFailed}))))),this.loadSelectedIssue=this.actions$.pipe(Object(rt.d)(r.LoadSelectedIssue),Object(lt.a)(e=>this.getIssueDetails(e.payload).pipe(Object(ee.a)(e=>({type:r.LoadSelectedIssueSuccess,payload:e})),Object(dt.a)(()=>Object(bt.a)({type:r.LoadSelectedIssueFailed}))))),this.loadSelectedIssueEpicChildren=this.actions$.pipe(Object(rt.d)(r.LoadSelectedIssueEpicChildren),Object(lt.a)(e=>this.jiraService.executeJql(`'epic Link'=${e.payload} order by duedate`,0,100,O.m,"epic-children.json").pipe(Object(ee.a)(e=>({type:r.LoadSelectedIssueEpicChildrenSuccess,payload:e})),Object(dt.a)(()=>Object(bt.a)({type:r.LoadSelectedIssueEpicChildrenFailed}))))),this.loadSelectedIssueRelatedLinks=this.actions$.pipe(Object(rt.d)(r.LoadSelectedIssueRelatedLinks),Object(lt.a)(e=>this.jiraService.executeJql(`key in (${v.join(e.payload,",")})  order by duedate`,0,100,O.m,"linked-issues.json").pipe(Object(ee.a)(e=>({type:r.LoadSelectedIssueRelatedLinksSuccess,payload:e})),Object(dt.a)(()=>Object(bt.a)({type:r.LoadSelectedIssueRelatedLinksFailed}))))),this.loadIssueLinkTypes=this.actions$.pipe(Object(rt.d)(r.LoadIssueLinkTypes),Object(lt.a)(e=>this.jiraService.getIssueLinkTypes(e.payload).pipe(Object(ee.a)(e=>({type:r.LoadIssueLinkTypesSuccess,payload:e})),Object(dt.a)(()=>Object(bt.a)({type:r.LoadIssueLinkTypesFailed}))))),this.loadProjectConfig=this.actions$.pipe(Object(rt.d)(r.LoadProjectDetails),Object(lt.a)(e=>this.jiraService.getProjectDetails(e.payload).pipe(Object(ee.a)(e=>{let t=null;return e&&e.length>0&&(t=e[0],t.customFields=v.sortBy(v.map(v.filter(e[1],{custom:!0}),e=>v.pick(e,["id","name"])),["name"])),{type:r.LoadProjectDetailsSuccess,payload:t}}),Object(dt.a)(()=>Object(bt.a)({type:r.LoadProjectDetailsFailed}))))),this.updateFieldValue=this.actions$.pipe(Object(rt.d)(r.UpdateFieldValue),Object(lt.a)(e=>this.jiraService.updateFieldValue$(e.payload).pipe(Object(ee.a)(()=>({type:r.UpdateFieldValueSuccess,payload:e.payload})),Object(dt.a)(()=>Object(bt.a)({type:r.UpdateFieldValueFailed}))))),this.updateOrganizationTitle=this.actions$.pipe(Object(rt.d)(r.UpdateOrganizationTitle),Object(ut.a)(e=>this.cachingService.setOrganization(e.payload)),Object(lt.a)(e=>Object(bt.a)({type:r.UpdateOrganizationTitleSuccess,payload:e.payload})))}getIssueDetails(e){return this.jiraService.getIssueDetails(e.issue,v.map(e.extendedFields,"id")).pipe(Object(ee.a)(t=>{const s={issue:t,extendedFields:e.extendedFields,organization:this.cachingService.getOrganization(),projectConfig:null};return t&&t.fields&&t.fields.project&&t.fields.project.key&&t.fields.project.key.length>0&&(s.projectConfig=this.cachingService.getProjectDetails(t.fields.project.key)),s}))}}return e.\u0275fac=function(t){return new(t||e)(w.ec(rt.a),w.ec(pt.b),w.ec(ht.a))},e.\u0275prov=w.Mb({token:e,factory:e.\u0275fac}),Object(ot.b)([Object(rt.b)()],e.prototype,"loadPrimaryIssue",void 0),Object(ot.b)([Object(rt.b)()],e.prototype,"loadPrimaryIssueEpicChildren",void 0),Object(ot.b)([Object(rt.b)()],e.prototype,"loadPrimaryIssueRelatedLinks",void 0),Object(ot.b)([Object(rt.b)()],e.prototype,"loadSelectedIssue",void 0),Object(ot.b)([Object(rt.b)()],e.prototype,"loadSelectedIssueEpicChildren",void 0),Object(ot.b)([Object(rt.b)()],e.prototype,"loadSelectedIssueRelatedLinks",void 0),Object(ot.b)([Object(rt.b)()],e.prototype,"loadIssueLinkTypes",void 0),Object(ot.b)([Object(rt.b)()],e.prototype,"loadProjectConfig",void 0),Object(ot.b)([Object(rt.b)()],e.prototype,"updateFieldValue",void 0),Object(ot.b)([Object(rt.b)()],e.prototype,"updateOrganizationTitle",void 0),e})();var mt=s("AytR"),yt=s("SYT+"),ft=s("LvOF"),It=s("jhN1");let kt=(()=>{class e{constructor(e,t,s,i){this.router=e,this.activatedRoute=t,this.titleService=s,this.store$=i,this.extendedFields=[],this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}ngOnInit(){this.reloadOnChange(),this.store$.select(e=>e.app.organization).pipe(Object(F.a)(e=>e)).subscribe(e=>this.store$.dispatch(new k(e)));const e=this.activatedRoute.params.pipe(Object(F.a)(e=>e&&e.issue&&e.issue.length>0),Object(ee.a)(e=>e.issue)),t=this.store$.select(e=>e.app.projects);this.combined$=Object(W.a)(e,t).subscribe(([e,t])=>{this.titleService.setTitle(`${mt.a.appTitle}: ${e}`),this.extendedFields=t?Object(ft.c)(t):[],this.store$.dispatch(new o({issue:e,extendedFields:this.extendedFields}))}),this.primaryIssue$=this.store$.select(e=>e.issue.primaryIssue).pipe(Object(F.a)(e=>e)).subscribe(e=>{this.primaryIssue=e,this.populateProjectConfig(),this.populateEpicChildren(),this.populateRelatedLinks(),this.buildTree()})}reloadOnChange(){this.currentProject$=this.store$.select(e=>e.app.currentProject).pipe(Object(F.a)(()=>this.primaryIssue)).subscribe(e=>{if(this.primaryIssue&&e){const t=v.find(e.standardIssueTypes,{name:this.primaryIssue.issueType});if(t){const s=v.union(t.list,v.filter(e.customFields,{name:"Epic Link"}));e.startdate&&s.push(e.startdate);const i=[];s.forEach(e=>{!v.find(this.extendedFields,{id:e.id})&&i.push(e)}),i.length>0&&(this.extendedFields=v.clone(s),this.store$.dispatch(new o({issue:this.primaryIssue.key,extendedFields:this.extendedFields})))}}}),this.updatedField$=this.store$.select(e=>e.issue.updatedField).pipe(Object(F.a)(e=>e&&this.primaryIssue)).subscribe(e=>{this.store$.dispatch(new o({issue:this.primaryIssue.key,extendedFields:this.extendedFields}))})}ngOnDestroy(){this.currentProject$&&this.currentProject$.unsubscribe(),this.updatedField$&&this.updatedField$.unsubscribe(),this.combined$&&this.combined$.unsubscribe(),this.primaryIssue$&&this.primaryIssue$.unsubscribe()}buildTree(){if(!0===this.primaryIssue.epicChildrenLoaded&&!0===this.primaryIssue.relatedLinksLoaded&&!0===this.primaryIssue.projectConfigLoaded){const e=Object(O.k)(this.primaryIssue.organization);let t=Object(O.l)(this.primaryIssue.projectConfig),s=this.primaryIssue.projectConfig.hierarchy?this.prepareHierarchyNodes():null;t=Object(O.c)(e,t),s=Object(O.c)(t,s),this.primaryIssue.expanded=!0,this.rootNode=Object(O.c)(s,this.primaryIssue),this.store$.dispatch(new u(this.rootNode))}}prepareHierarchyNodes(){const e={children:[]};if(this.primaryIssue.projectConfig.hierarchy.forEach(t=>{const s=v.find(this.primaryIssue.extendedFields,{id:t.id});s&&s.extendedValue&&s.extendedValue.length>0&&e.children.push(Object(O.j)(s))}),e.children.length>0){const t=e.children[0];return Object(O.g)(e.children,t),t}return null}populateEpicChildren(){this.primaryIssue.issueType===O.a.Epic?this.primaryIssue.epicChildrenLoaded?!v.find(this.primaryIssue.children,{issueType:O.a.EpicChildren})&&this.primaryIssue.epicChildren&&this.primaryIssue.epicChildren.length>0&&(this.primaryIssue.children=this.primaryIssue.children||[],this.primaryIssue.children.unshift(Object(O.i)(this.primaryIssue)),this.primaryIssue.expanded=!0):this.primaryIssue.epicChildrenLoading||this.store$.dispatch(new l(this.primaryIssue.key)):this.primaryIssue.epicChildrenLoaded=!0}populateRelatedLinks(){if(this.primaryIssue&&this.primaryIssue.relatedLinks&&this.primaryIssue.relatedLinks.length>0)if(this.primaryIssue.relatedLinksLoaded){if(0===v.filter(this.primaryIssue.children,{issueType:O.a.RelatedLink}).length){const e=Object(O.f)(this.primaryIssue.relatedLinks,this.primaryIssue.key);e&&(this.primaryIssue.children=this.primaryIssue.children||[],e.forEach(e=>this.primaryIssue.children.push(e)))}}else!this.primaryIssue.relatedLinksLoading&&this.primaryIssue.relatedLinks&&this.primaryIssue.relatedLinks.length>0&&this.store$.dispatch(new d(v.map(this.primaryIssue.relatedLinks,"key")));else this.primaryIssue.relatedLinksLoaded=!0}populateProjectConfig(){this.primaryIssue.projectConfigLoaded?this.primaryIssue.projectConfig&&this.store$.dispatch(new yt.n(this.primaryIssue.projectConfig)):this.primaryIssue.project&&this.primaryIssue.project.key&&this.primaryIssue.project.key.length>0&&!this.primaryIssue.projectConfigLoading&&this.store$.dispatch(new b(this.primaryIssue.project.key))}nodeContextMenuSelect(e){console.log(e)}dragEnd(e){this.adjustPaneSize(e.sizes[0])}adjustPaneSize(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(P.d),w.Qb(P.a),w.Qb(It.c),w.Qb(c.h))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-primary-issue-container"]],decls:2,vars:0,consts:[[1,"main-container"]],template:function(e,t){1&e&&(w.Wb(0,"div",0),w.Rb(1,"router-outlet"),w.Vb())},directives:[P.h],encapsulation:2}),e})();var Ct=s("yNBN"),Ot=s("L6qz");function jt(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div"),w.Wb(1,"div",6),w.Rb(2,"fa-icon",7),w.Oc(3," Connection details are incomplete. "),w.Vb(),w.Wb(4,"a",8),w.ic("click",(function(){return w.Fc(e),w.kc(2).onShowSetup()})),w.Oc(5," Enter credentials "),w.Rb(6,"fa-icon",9),w.Vb(),w.Vb()}}const vt=function(){return["fab","jira"]},Lt=function(){return{mode:"import"}};function St(e,t){if(1&e){const e=w.Xb();w.Wb(0,"div"),w.Wb(1,"div",10),w.Rb(2,"fa-icon",11),w.Oc(3," Please provide Jira connection details "),w.Vb(),w.Wb(4,"a",12),w.ic("click",(function(){return w.Fc(e),w.kc(2).onShowSetup()})),w.Oc(5," Manual setup "),w.Rb(6,"fa-icon",13),w.Vb(),w.Wb(7,"a",14),w.Rb(8,"fa-icon",15),w.Oc(9," Import config file "),w.Vb(),w.Vb()}2&e&&(w.Cb(2),w.qc("icon",w.tc(2,vt)),w.Cb(5),w.qc("queryParams",w.tc(3,Lt)))}function Vt(e,t){if(1&e&&(w.Wb(0,"div",2),w.Wb(1,"div",3),w.Mc(2,jt,7,0,"div",1),w.Mc(3,St,10,4,"div",1),w.Vb(),w.Wb(4,"div",4),w.Wb(5,"ol"),w.Wb(6,"li"),w.Oc(7,"Setup the jira connection details"),w.Vb(),w.Wb(8,"li"),w.Oc(9,"Enter the Jira issue key"),w.Vb(),w.Wb(10,"li"),w.Oc(11,"Track purpose of issue"),w.Vb(),w.Vb(),w.Rb(12,"app-help-link",5),w.Vb(),w.Vb()),2&e){const e=w.kc();w.Cb(2),w.qc("ngIf",e.connectionDetails&&e.connectionDetails.serverUrl&&!e.connectionDetails.verified),w.Cb(1),w.qc("ngIf",!e.connectionDetails||!e.connectionDetails.serverUrl)}}function wt(e,t){1&e&&(w.Wb(0,"div"),w.Rb(1,"router-outlet"),w.Vb())}let Wt=(()=>{class e{constructor(e,t){this.messageService=e,this.store$=t,this.isOnlineMode=!1}ngOnInit(){this.store$.select(e=>e.app.mode).subscribe(e=>this.isOnlineMode=e&&e===yt.e.Online),this.connectionDetailsSubscription=this.store$.select(e=>e.app.connectionDetails).subscribe(e=>this.connectionDetails=e)}ngOnDestroy(){this.connectionDetailsSubscription&&this.connectionDetailsSubscription.unsubscribe()}onShowSetup(){this.store$.dispatch(new yt.k(!0))}}return e.\u0275fac=function(t){return new(t||e)(w.Qb($.c),w.Qb(c.h))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-issue-home"]],decls:2,vars:2,consts:[["class","center-text custom-shadow p-3 bg-light",4,"ngIf"],[4,"ngIf"],[1,"center-text","custom-shadow","p-3","bg-light"],[1,"alert","bg-white"],[1,"text-left"],["tag","setup",1,"float-right"],[1,"mb-2"],["icon","exclamation-triangle",1,"text-warning"],[1,"btn","btn-sm","btn-primary","text-white","mt-2",3,"click"],["icon","chevron-right"],[1,"mb-3","alert-warning","p-2","rounded"],[1,"text-primary",3,"icon"],[1,"btn","btn-primary","btn-sm","text-white","mr-2",3,"click"],["icon","angle-right"],["routerLink","../configurations",1,"btn","btn-light","border","btn-sm",3,"queryParams"],["icon","file-import",1,"text-muted"]],template:function(e,t){1&e&&(w.Mc(0,Vt,13,2,"div",0),w.Mc(1,wt,2,0,"div",1)),2&e&&(w.qc("ngIf",!(t.connectionDetails&&t.connectionDetails.verified)&&t.isOnlineMode),w.Cb(1),w.qc("ngIf",t.connectionDetails&&t.connectionDetails.verified||!1===t.isOnlineMode))},directives:[i.m,Ot.a,x.a,P.f,P.h],encapsulation:2}),e})();var Ft=s("sfS8");function Rt(e,t){1&e&&(w.Wb(0,"div",13),w.Oc(1," StoryPurpose is a set of visualization tools for agile teams that help ensure every story's purpose aligns with that of the organization "),w.Wb(2,"div",14),w.Wb(3,"a",15),w.Oc(4,"Learn more... "),w.Rb(5,"fa-icon",16),w.Vb(),w.Vb(),w.Vb())}function xt(e,t){if(1&e){const e=w.Xb();w.Oc(0," Proceed by entering Jira issue key "),w.Wb(1,"div",17),w.Wb(2,"input",18),w.ic("ngModelChange",(function(t){return w.Fc(e),w.kc().key=t}))("keydown.enter",(function(){w.Fc(e);const t=w.kc();return t.navigateToKey(t.key)}))("keydown.escape",(function(){return w.Fc(e),w.kc().key=""})),w.Vb(),w.Wb(3,"div",19),w.Wb(4,"button",20),w.ic("click",(function(){w.Fc(e);const t=w.kc();return t.navigateToKey(t.key)})),w.Rb(5,"fa-icon",21),w.Vb(),w.Vb(),w.Vb(),w.Wb(6,"div",22),w.Wb(7,"ul",23),w.Wb(8,"li"),w.Wb(9,"b"),w.Oc(10,"EpicPurpose: "),w.Vb(),w.Oc(11," Useful for visualizing all EPIC issues and how they span across various components/modules within the application. "),w.Vb(),w.Wb(12,"li",24),w.Wb(13,"b"),w.Oc(14,"StoryPurpose: "),w.Vb(),w.Oc(15," Useful for visualizing a selected story in the context of other linked issues, highlighting dependencies and overall associated feature delivery pipeline. "),w.Vb(),w.Vb(),w.Vb()}if(2&e){const e=w.kc();w.Cb(2),w.qc("ngModel",e.key)("appAutofocus",1===e.selectedTab),w.Cb(2),w.qc("disabled",!e.canNavigateToKey()),w.Cb(1),w.qc("fixedWidth",!0)}}function Pt(e,t){if(1&e){const e=w.Xb();w.Oc(0," Proceed by entering Jira query (JQL) "),w.Wb(1,"div",17),w.Wb(2,"input",25),w.ic("ngModelChange",(function(t){return w.Fc(e),w.kc().query=t}))("keydown.enter",(function(){w.Fc(e);const t=w.kc();return t.navigateJql(t.query)}))("keydown.escape",(function(){return w.Fc(e),w.kc().query=""})),w.Vb(),w.Wb(3,"div",19),w.Wb(4,"button",20),w.ic("click",(function(){w.Fc(e);const t=w.kc();return t.navigateJql(t.query)})),w.Rb(5,"fa-icon",26),w.Vb(),w.Vb(),w.Vb(),w.Wb(6,"div",22),w.Wb(7,"ul",23),w.Wb(8,"li"),w.Wb(9,"b"),w.Oc(10,"Storyboard and timeline for related issues: "),w.Vb(),w.Oc(11," This provides flexibility to choose multiple relevant issues and view on a story map. "),w.Vb(),w.Vb(),w.Vb()}if(2&e){const e=w.kc();w.Cb(2),w.qc("ngModel",e.query)("appAutofocus",2===e.selectedTab),w.Cb(2),w.qc("disabled",!e.canNavigateJql()),w.Cb(1),w.qc("fixedWidth",!0)}}const qt=function(){return["far","question-circle"]};let $t=(()=>{class e{constructor(e){this.router=e,this.selectedTab=1,this.showSingleIssueHelp=!1,this.showJQLHelp=!1,this.showStoryPurposeHelp=!1,this.key="",this.query="",this.navigateToKey=e=>this.router.navigate(["/browse",e.trim()]),this.canNavigateToKey=()=>this.key&&this.key.trim().length>0,this.navigateJql=e=>this.router.navigate(["/search/list"],{queryParams:{query:e}}),this.canNavigateJql=()=>this.query&&this.query.trim().length>0}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(P.d))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-issue-not-entered"]],decls:19,vars:8,consts:[[1,"center-text"],[1,"mb-3","font-weight-light"],["src","/assets/logo.png","height","32pt",1,"mr-1"],[1,"btn","btn-sm","btn-link","text-muted",3,"click"],[3,"icon"],["class","p-3 mb-3 bg-light text-left",4,"ngIf"],[1,"text-left","mt-5"],["ngbNav","",1,"nav-tabs",3,"activeId","destroyOnHide","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"p-3","bg-light","border-left","border-bottom","border-right",3,"ngbNavOutlet"],[1,"p-3","mb-3","bg-light","text-left"],[1,"text-right"],["href","https://www.storypurpose.info","target","_blank",1,"small"],["icon","external-link-alt","size","sm"],[1,"input-group","mt-2"],["type","text","name","key","placeholder","Epic or Story key",1,"form-control",3,"ngModel","appAutofocus","ngModelChange","keydown.enter","keydown.escape"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","border","border-left-0",3,"disabled","click"],["icon","chevron-right",3,"fixedWidth"],[1,"p-3","text-muted","mt-2"],[1,"small","pl-2","mb-0"],[1,"mt-3"],["type","text","name","query","placeholder","JQL",1,"form-control",3,"ngModel","appAutofocus","ngModelChange","keydown.enter","keydown.escape"],["icon","search",3,"fixedWidth"]],template:function(e,t){if(1&e&&(w.Wb(0,"div",0),w.Wb(1,"h4",1),w.Rb(2,"img",2),w.Oc(3," StoryPurpose for Jira "),w.Wb(4,"button",3),w.ic("click",(function(){return t.showStoryPurposeHelp=!t.showStoryPurposeHelp})),w.Rb(5,"fa-icon",4),w.Vb(),w.Vb(),w.Mc(6,Rt,6,0,"div",5),w.Wb(7,"div",6),w.Wb(8,"ul",7,8),w.ic("activeIdChange",(function(e){return t.selectedTab=e})),w.Wb(10,"li",9),w.Wb(11,"a",10),w.Oc(12,"Epic/Story"),w.Vb(),w.Mc(13,xt,16,4,"ng-template",11),w.Vb(),w.Wb(14,"li",9),w.Wb(15,"a",10),w.Oc(16,"Jira query"),w.Vb(),w.Mc(17,Pt,12,4,"ng-template",11),w.Vb(),w.Vb(),w.Rb(18,"div",12),w.Vb(),w.Vb()),2&e){const e=w.Dc(9);w.Cb(5),w.qc("icon",w.tc(7,qt)),w.Cb(1),w.qc("ngIf",t.showStoryPurposeHelp),w.Cb(2),w.qc("activeId",t.selectedTab)("destroyOnHide",!1),w.Cb(2),w.qc("ngbNavItem",1),w.Cb(4),w.qc("ngbNavItem",2),w.Cb(4),w.qc("ngbNavOutlet",e)}},directives:[x.a,i.m,Ie.j,Ie.l,Ie.m,Ie.k,Ie.o,Z.b,Z.f,Z.i,Ft.a],encapsulation:2}),e})(),zt=(()=>{class e{constructor(e,t){this.router=e,this.activatedRoute=t,this.router.events.subscribe(e=>{e instanceof P.b&&this.autoRedirect()})}ngOnInit(){this.autoRedirect()}autoRedirect(){0===this.activatedRoute.children.length&&this.router.navigate([this.activatedRoute.parent.snapshot.params.issue],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(P.d),w.Qb(P.a))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-selected-issue-home"]],decls:1,vars:0,template:function(e,t){1&e&&w.Rb(0,"router-outlet")},directives:[P.h],encapsulation:2}),e})();var Et=s("5fYs");function Tt(e,t){if(1&e&&w.Rb(0,"app-timeline-renderer",3),2&e){const e=w.kc();w.qc("timeline",e.timeline)("contentHeight",e.contentHeight)}}let Mt=(()=>{class e extends se{constructor(e,t){super(e,t),this.cdRef=e,this.store$=t}ngOnInit(){this.init(81),this.selectedIssue$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(F.a)(e=>e)).subscribe(e=>{e.projectConfig&&e.projectConfig.startdate&&!v.find(O.v,e.projectConfig.startdate.id)&&O.v.push(e.projectConfig.startdate.id),this.selectedIssue=v.pick(e,v.union(O.v,["children"])),this.store$.dispatch(new f(this.selectedIssue.children))}),this.timeline$=this.store$.select(e=>e.issue.timelineView).pipe(Object(F.a)(e=>e)).subscribe(e=>this.timeline=e)}ngOnDestroy(){this.destroy(),this.selectedIssue$&&this.selectedIssue$.unsubscribe(),this.timeline$&&this.timeline$.unsubscribe()}ngAfterViewInit(){this.afterViewInit()}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(w.h),w.Qb(c.h))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-timeline"]],features:[w.zb],decls:3,vars:1,consts:[[1,"selectedIssue"],["content",""],[3,"timeline","contentHeight",4,"ngIf"],[3,"timeline","contentHeight"]],template:function(e,t){1&e&&(w.Wb(0,"div",0,1),w.Mc(2,Tt,1,2,"app-timeline-renderer",2),w.Vb()),2&e&&(w.Cb(2),w.qc("ngIf",t.timeline))},directives:[i.m,Et.a],encapsulation:2}),e})();var Nt=s("EVgl"),Dt=s("0kVS"),Ut=s("nRR4");s.d(t,"IssueModule",(function(){return Kt}));const At=[{path:"",component:Wt,children:[{path:":issue",component:kt,children:[{path:"purpose",component:zt,children:[{path:":selected",component:fe,children:[{path:"details",component:G},{path:"workbench",component:De},{path:"storyboard",component:at},{path:"timeline",component:Mt},{path:"",redirectTo:"details",pathMatch:"full"}]}]},{path:"",redirectTo:"purpose",pathMatch:"full"}]},{path:"",component:$t}]}];let Kt=(()=>{class e{}return e.\u0275mod=w.Ob({type:e}),e.\u0275inj=w.Nb({factory:function(t){return new(t||e)},imports:[[i.c,P.g,Z.c,Dt.a,Ut.a,K.b,q.b,Nt.c,Ct.a,Qe.b,_.b,Ke.b,Ie.g,Ie.c,Ie.n,Ie.t,x.c,R.a,Y.a,c.j.forFeature("issue",L,{initialState:n}),rt.c.forFeature([gt]),P.g.forChild(At)]]}),e})()}}]);