(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,s){"use strict";s.r(e);var i=s("ofXK"),a=s("kt0X"),c=s("l2bN"),n=s("6NWb"),r=s("tyNb"),o=s("sITn"),l=s("3Pt+"),u=s("jLSX"),b=s("EVgl"),h=s("LPYB"),d=(s("hSFZ"),s("/RsI")),p=s("j9Al");const g={LIST:"LIST",STORYBOARD:"STORYBOARD",ROADMAP:"ROADMAP"},f={SwitchViewmode:Object(p.b)("[SwitchViewmode]"),SetQueryContext:Object(p.b)("[SetQueryContext]"),LoadSearchResults:Object(p.b)("[LoadSearchResults]"),LoadSearchResultsFailed:Object(p.b)("[LoadSearchResults] Failed"),LoadSearchResultsSuccess:Object(p.b)("[LoadSearchResults] Success"),LoadSavedSearchlist:Object(p.b)("[LoadSavedSearchlist]"),LoadSavedSearchlistFailed:Object(p.b)("[LoadSavedSearchlist] Failed"),LoadSavedSearchlistSuccess:Object(p.b)("[LoadSavedSearchlist] Success")};class m{constructor(t){this.payload=t,this.type=f.SwitchViewmode}}class S{constructor(t){this.payload=t,this.type=f.LoadSearchResults}}class v{constructor(t){this.payload=t,this.type=f.LoadSavedSearchlist}}const y={queryContext:null,issuelist:null,viewmode:g.LIST,savedSearchlist:null};var O=s("LvDl");function w(t,e){switch(e.type){case f.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case f.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case f.LoadSearchResults:return Object.assign(Object.assign({},t),{issuelist:[]});case f.LoadSearchResultsSuccess:return Object.assign(Object.assign({},t),{issuelist:e.payload});case f.LoadSavedSearchlist:return Object.assign(Object.assign({},t),{savedSearchlist:[]});case f.LoadSavedSearchlistSuccess:{const s=O.map(e.payload,t=>O.pick(t,["id","name","jql"]));return Object.assign(Object.assign({},t),{savedSearchlist:s})}default:return t}}var j=s("1kSV"),L=s("pLZG"),V=s("lJxs"),C=s("krUz"),I=s("SYT+"),k=s("fXoL"),q=s("cdP3");const W=function(){return["/search/list"]},R=function(t){return{query:t}};function x(t,e){if(1&t&&(k.Wb(0,"div",3),k.Wb(1,"a",4),k.Mc(2),k.Vb(),k.Vb()),2&t){const t=e.$implicit;k.Cb(1),k.qc("routerLink",k.tc(3,W))("queryParams",k.uc(4,R,t.jql)),k.Cb(1),k.Oc(" ",t.name," ")}}function z(t,e){if(1&t&&(k.Wb(0,"div",1),k.Kc(1,x,3,6,"div",2),k.Vb()),2&t){const t=k.kc();k.Cb(1),k.qc("ngForOf",t.searchlist)}}let $=(()=>{class t{constructor(t){this.store$=t}ngOnInit(){this.searchlist$=this.store$.select(t=>t.search.savedSearchlist).pipe(Object(L.a)(t=>t)).subscribe(t=>this.searchlist=t),this.store$.dispatch(new v(null))}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(k.Qb(a.h))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-favourite-searches"]],decls:3,vars:1,consts:[["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(k.Wb(0,"h6"),k.Mc(1,"Favourite"),k.Vb(),k.Kc(2,z,2,1,"div",0)),2&t&&(k.Cb(2),k.qc("ngIf",e.searchlist))},directives:[i.m,i.l,r.f],encapsulation:2}),t})();function P(t,e){1&t&&(k.Wb(0,"div"),k.Rb(1,"app-favourite-searches"),k.Vb())}function M(t,e){if(1&t){const t=k.Xb();k.Wb(0,"div",16),k.Wb(1,"ngb-pagination",17),k.ic("pageChange",(function(e){return k.Dc(t),k.kc(2).currentPageIndex=e}))("pageChange",(function(){return k.Dc(t),k.kc(2).onPageChange()})),k.Vb(),k.Vb()}if(2&t){const t=k.kc(2);k.Cb(1),k.qc("maxSize",3)("page",t.currentPageIndex)("boundaryLinks",!0)("pageSize",t.issuelist.pageSize)("collectionSize",t.issuelist.total)}}function Q(t,e){1&t&&(k.Wb(0,"div",18),k.Wb(1,"a",19),k.Rb(2,"fa-icon",20),k.Mc(3," List "),k.Vb(),k.Wb(4,"a",21),k.Rb(5,"fa-icon",22),k.Mc(6," Storyboard "),k.Vb(),k.Wb(7,"a",23),k.Rb(8,"fa-icon",24),k.Wb(9,"span",25),k.Mc(10,"Roadmap"),k.Vb(),k.Vb(),k.Vb()),2&t&&(k.Cb(2),k.qc("fixedWidth",!0),k.Cb(2),k.qc("routerLinkActive","active"),k.Cb(1),k.qc("fixedWidth",!0),k.Cb(2),k.qc("routerLinkActive","active"))}function A(t,e){if(1&t){const t=k.Xb();k.Wb(0,"div",9),k.Kc(1,M,2,5,"div",10),k.Wb(2,"div",11),k.Mc(3),k.Wb(4,"b"),k.Mc(5),k.Vb(),k.Vb(),k.Wb(6,"div",12),k.Wb(7,"button",13),k.ic("click",(function(){return k.Dc(t),k.kc().toggleFullscreen()})),k.Rb(8,"fa-icon",14),k.Vb(),k.Kc(9,Q,11,4,"div",15),k.Vb(),k.Vb()}if(2&t){const t=k.kc();k.Cb(1),k.qc("ngIf",t.issuelist.total>t.issuelist.pageSize),k.Cb(2),k.Pc(" ",t.issuelist.startAt+1," - ",t.issuelist.endAt," / "),k.Cb(2),k.Nc(t.issuelist.total),k.Cb(3),k.qc("icon",0===t.columns[0].size?"angle-double-right":"angle-double-left")("fixedWidth",!0),k.Cb(1),k.qc("ngIf",t.issuelist&&t.issuelist.results&&t.issuelist.results.length>1)}}function F(t,e){1&t&&(k.Wb(0,"div",26),k.Mc(1," No Records found. "),k.Vb())}let D=(()=>{class t{constructor(t,e,s){this.router=t,this.activatedRoute=e,this.store$=s,this.selectedTab=1,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0,this.canExecuteQuery=()=>this.query&&this.query.trim().length>0,this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}ngOnInit(){this.localViewmode=g,this.searchViewmode$=this.store$.select(t=>t.search.viewmode).subscribe(t=>this.searchViewmode=t),this.store$.dispatch(new I.l(!0)),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(L.a)(t=>t&&t.query&&t.query.length>0),Object(V.a)(t=>t.query)).subscribe(t=>{this.query=t,this.executeQuery()}),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(L.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}parseQueryContext(t,e){if(t)return t.issueType!==C.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}executeQuery(){this.canExecuteQuery()&&this.store$.dispatch(new S({query:this.query,currentPageIndex:this.currentPageIndex}))}onPageChange(){this.executeQuery()}dragEnd(t){this.adjustPaneSize(t.sizes[0])}adjustPaneSize(t){this.leftPaneSize=t,this.columns[0].size=t,this.columns[1].size=100-t}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}return t.\u0275fac=function(e){return new(e||t)(k.Qb(r.d),k.Qb(r.a),k.Qb(a.h))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-result-container"]],decls:10,vars:5,consts:[[1,"main-container"],["direction","horizontal"],[1,"small","pt-2","pl-3",3,"size"],[4,"ngIf"],[3,"size"],["class","bg-light pb-1 border-bottom",4,"ngIf"],[1,"body-container"],[1,"w-100"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],[1,"bg-light","pb-1","border-bottom"],["class","float-right mb-0 mt-0 mr-3",4,"ngIf"],[1,"float-right","small","mt-2","mr-3"],[1,"clearfix"],["title","expand/collapse pane",1,"btn","btn-link","btn-sm","text-muted","mr-2",3,"click"],[3,"icon","fixedWidth"],["class","btn-group btn-group-sm mr-2",4,"ngIf"],[1,"float-right","mb-0","mt-0","mr-3"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"],[1,"btn-group","btn-group-sm","mr-2"],["routerLink","list","routerLinkActive","active","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap"],["icon","list",3,"fixedWidth"],["routerLink","storyboard","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map",3,"fixedWidth"],["routerLink","roadmap","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map-signs","size","sm"],[1,"ml-1"],[1,"center-text","custom-shadow","alert-warning","p-4"]],template:function(t,e){1&t&&(k.Wb(0,"div",0),k.Wb(1,"as-split",1),k.Wb(2,"as-split-area",2),k.Kc(3,P,2,0,"div",3),k.Vb(),k.Wb(4,"as-split-area",4),k.Kc(5,A,10,7,"div",5),k.Wb(6,"div",6),k.Wb(7,"div",7),k.Rb(8,"router-outlet"),k.Kc(9,F,2,0,"div",8),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Vb()),2&t&&(k.Cb(2),k.qc("size",e.columns[0].size),k.Cb(1),k.qc("ngIf",e.leftPaneSize>0),k.Cb(1),k.qc("size",e.columns[1].size),k.Cb(1),k.qc("ngIf",e.issuelist&&e.issuelist.total>0),k.Cb(4),k.qc("ngIf",e.issuelist&&0===e.issuelist.total))},directives:[q.c,q.b,i.m,r.h,$,n.a,j.q,r.f,r.e],encapsulation:2}),t})();const K=function(t,e){return["/browse",t,"purpose",e]};function T(t,e){if(1&t&&(k.Wb(0,"tr"),k.Wb(1,"td",5),k.Mc(2),k.Vb(),k.Wb(3,"td",2),k.Wb(4,"a",6),k.Mc(5),k.Vb(),k.Vb(),k.Wb(6,"td"),k.Mc(7),k.Vb(),k.Wb(8,"td",3),k.Wb(9,"span",7),k.Mc(10),k.Vb(),k.Vb(),k.Vb()),2&t){const t=e.$implicit;k.Cb(2),k.Nc(t.issueType),k.Cb(2),k.qc("routerLink",k.vc(5,K,t.key,t.key)),k.Cb(1),k.Oc(" ",t.key," "),k.Cb(2),k.Oc(" ",t.title," "),k.Cb(3),k.Nc(t.status)}}function N(t,e){if(1&t&&(k.Wb(0,"table",1),k.Wb(1,"thead"),k.Wb(2,"tr"),k.Wb(3,"th",2),k.Mc(4,"Issue type"),k.Vb(),k.Wb(5,"th",2),k.Mc(6,"Key"),k.Vb(),k.Wb(7,"th"),k.Mc(8,"Summary"),k.Vb(),k.Wb(9,"th",3),k.Mc(10,"Status"),k.Vb(),k.Vb(),k.Vb(),k.Kc(11,T,11,8,"tr",4),k.Vb()),2&t){const t=k.kc();k.Cb(11),k.qc("ngForOf",t.issuelist.results)}}let X=(()=>{class t{constructor(t,e,s){this.router=t,this.activatedRoute=e,this.store$=s,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0}ngOnInit(){this.store$.dispatch(new m(g.LIST)),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(L.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}return t.\u0275fac=function(e){return new(e||t)(k.Qb(r.d),k.Qb(r.a),k.Qb(a.h))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-search-listview"]],decls:1,vars:1,consts:[["class","table table-striped table-sm",4,"ngIf"],[1,"table","table-striped","table-sm"],["width","10%"],["width","10%",1,"text-right"],[4,"ngFor","ngForOf"],[1,"small","text-uppercase"],[1,"text-primary",3,"routerLink"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&k.Kc(0,N,12,1,"table",0),2&t&&k.qc("ngIf",e.issuelist&&e.issuelist.total>0)},directives:[i.m,i.l,r.f],encapsulation:2}),t})();var H=s("iLqC"),B=s("Ewkv"),E=s("lVkt"),Y=s("NGyg");function J(t,e){if(1&t){const t=k.Xb();k.Wb(0,"p-multiSelect",10),k.ic("ngModelChange",(function(e){return k.Dc(t),k.kc(2).selectedStatuses=e}))("onChange",(function(e){return k.Dc(t),k.kc(2).onSelectedStatusChange(e)})),k.Vb()}if(2&t){const t=k.kc(2);k.qc("options",t.statusLookup)("ngModel",t.selectedStatuses)}}function G(t,e){if(1&t){const t=k.Xb();k.Wb(0,"p-dialog",11),k.ic("visibleChange",(function(e){return k.Dc(t),k.kc(2).showStatistics=e})),k.Rb(1,"app-statistics",12),k.Vb()}if(2&t){const t=k.kc(2);k.qc("visible",t.showStatistics),k.Cb(1),k.qc("statusStats",t.storyboardItem.statistics.status)("issueTypeStats",t.storyboardItem.statistics.issueTypes)("componentStats",t.storyboardItem.statistics.components)}}const Z=function(){return["far","chart-bar"]};function U(t,e){if(1&t){const t=k.Xb();k.Wb(0,"div"),k.Wb(1,"div",1),k.Rb(2,"div",2),k.Wb(3,"div",3),k.Kc(4,J,1,2,"p-multiSelect",4),k.Vb(),k.Wb(5,"div",5),k.Wb(6,"button",6),k.ic("click",(function(){return k.Dc(t),k.kc().showStatistics=!0})),k.Rb(7,"fa-icon",7),k.Vb(),k.Vb(),k.Vb(),k.Rb(8,"app-storyboard-renderer",8),k.Kc(9,G,2,4,"p-dialog",9),k.Vb()}if(2&t){const t=k.kc();k.Cb(4),k.qc("ngIf",t.statusLookup&&t.statusLookup.length>0),k.Cb(3),k.qc("icon",k.tc(4,Z)),k.Cb(1),k.qc("storyboardItem",t.storyboardItem),k.Cb(1),k.qc("ngIf",t.storyboardItem.statistics)}}let _=(()=>{class t{constructor(t,e){this.activatedRoute=t,this.store$=e,this.selectedStatuses=[],this.statusLookup=[],this.showStatistics=!1,this.filterByStatus=(t,e)=>e&&e.length>0?O.filter(t,t=>void 0!==O.find(e,e=>e===t.status)):t}ngOnInit(){this.store$.dispatch(new m(g.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(L.a)(t=>t)).subscribe(t=>{this.issuelist=t,this.plotStoryboard()})}ngOnDestroy(){this.issuelist$&&this.issuelist$.unsubscribe()}plotStoryboard(){const t=O.map(this.selectedStatuses,"key");this.storyboardItem.metadata=Object(H.b)(),this.storyboardItem.children=this.filterByStatus(this.issuelist.results,t),Object(H.c)(this.storyboardItem.metadata,Object(H.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(H.d)(this.storyboardItem),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}onSelectedStatusChange(t){this.plotStoryboard()}}return t.\u0275fac=function(e){return new(e||t)(k.Qb(r.a),k.Qb(a.h))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","mt-1","mb-1"],[1,"col-md-8"],[1,"col-md-3"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1"],[1,"btn","btn-link",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&k.Kc(0,U,10,5,"div",0),2&t&&k.qc("ngIf",e.storyboardItem)},directives:[i.m,n.a,B.a,E.a,l.f,l.i,d.a,Y.a],encapsulation:2}),t})();var tt=s("snw9"),et=s("mrSG"),st=s("eIep"),it=s("JIr8"),at=s("LRne"),ct=s("F2Ol");let nt=(()=>{class t{constructor(t,e){this.actions$=t,this.jiraService=e,this.loadSearchlist=this.actions$.pipe(Object(tt.d)(f.LoadSearchResults),Object(st.a)(t=>this.jiraService.executeJql(t.payload.query,t.payload.currentPageIndex-1,50,C.r,"issuelist.json").pipe(Object(V.a)(t=>({total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:O.map(t.issues,t=>Object(C.q)(t))}))).pipe(Object(V.a)(t=>({type:f.LoadSearchResultsSuccess,payload:t})),Object(it.a)(()=>Object(at.a)({type:f.LoadSearchResultsFailed}))))),this.loadSaveSearchlist=this.actions$.pipe(Object(tt.d)(f.LoadSavedSearchlist),Object(st.a)(()=>this.jiraService.favouriteSearches("favourite-search.json").pipe(Object(V.a)(t=>({type:f.LoadSavedSearchlistSuccess,payload:t})),Object(it.a)(()=>Object(at.a)({type:f.LoadSavedSearchlistFailed})))))}}return t.\u0275fac=function(e){return new(e||t)(k.ec(tt.a),k.ec(ct.b))},t.\u0275prov=k.Mb({token:t,factory:t.\u0275fac}),Object(et.b)([Object(tt.b)()],t.prototype,"loadSearchlist",void 0),Object(et.b)([Object(tt.b)()],t.prototype,"loadSaveSearchlist",void 0),t})();var rt=s("VMLX");const ot=["content"];let lt=(()=>{class t{constructor(t,e,s){this.cdRef=t,this.activatedRoute=e,this.store$=s,this.containerSize=80,this.contentHeight=0}ngOnInit(){this.store$.dispatch(new m(g.STORYBOARD)),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(L.a)(t=>t)).subscribe(t=>{this.issuelist=t,console.log(this.issuelist)})}ngOnDestroy(){this.issuelist$&&this.issuelist$.unsubscribe()}ngAfterViewInit(){this.onResize()}onResize(){this.elementView&&(this.contentHeight=this.elementView.nativeElement.offsetParent.clientHeight-this.containerSize,this.cdRef.detectChanges())}}return t.\u0275fac=function(e){return new(e||t)(k.Qb(k.h),k.Qb(r.a),k.Qb(a.h))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-roadmap-view"]],viewQuery:function(t,e){var s;1&t&&k.Qc(ot,!0),2&t&&k.Ac(s=k.jc())&&(e.elementView=s.first)},hostBindings:function(t,e){1&t&&k.ic("resize",(function(t){return e.onResize(t)}),!1,k.Cc)},decls:3,vars:2,consts:[[1,"issuelist"],["content",""],[3,"records","contentHeight"]],template:function(t,e){1&t&&(k.Wb(0,"div",0,1),k.Rb(2,"app-roadmap-renderer",2),k.Vb()),2&t&&(k.Cb(2),k.qc("records",e.issuelist.results)("contentHeight",e.contentHeight))},directives:[rt.a],encapsulation:2}),t})();s.d(e,"SearchModule",(function(){return bt}));const ut=[{path:"",component:D,children:[{path:"list",component:X},{path:"storyboard",component:_},{path:"roadmap",component:lt}]}];let bt=(()=>{class t{}return t.\u0275mod=k.Ob({type:t}),t.\u0275inj=k.Nb({factory:function(e){return new(e||t)},imports:[[i.c,r.g,l.c,c.b,n.c,u.b,b.b,d.b,h.b,E.b,q.a,j.i,o.a,a.j.forFeature("search",w,{initialState:y}),tt.c.forFeature([nt]),r.g.forChild(ut)]]}),t})()}}]);