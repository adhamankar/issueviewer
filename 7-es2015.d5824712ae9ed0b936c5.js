(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,s){"use strict";s.r(e);var i=s("ofXK"),r=s("kt0X"),n=s("l2bN"),a=s("6NWb"),c=s("tyNb"),o=s("sITn"),b=s("3Pt+"),u=s("jLSX"),l=s("fXoL");s("XNiG"),s("YyRF"),s("LRne"),s("HDdC"),s("xgIS"),s("VRyK"),s("3N8a"),s("IjjT"),s("quSY"),s("/uUt"),s("D0XW"),s("l7GE"),s("ZUHj"),s("PqYM");var p=s("pLZG");let h;s("1G5W"),s("JX91"),s("7o/Q"),s("eIep"),s("jtHE");try{h="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(nt){h=!1}let d=(()=>{class t{}return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)}}),t})(),g=(()=>{class t{}return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)}}),t})(),f=(()=>{class t{}return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)},imports:[[g,d],g]}),t})();s("R0Ic");var m=s("7zfz");s("t2ka");let y=(()=>{let t=class{};return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})(),v=(()=>{let t=class{};return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)},imports:[[i.c,m.e,f,y],m.e,f]}),t})(),I=(()=>{let t=class{};return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)},imports:[[i.c,v,b.c,m.e],v,b.c,m.e]}),t})(),w=(()=>{let t=class{};return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)},imports:[[i.c,I],m.e]}),t})();var S=s("LPYB"),O=(s("hSFZ"),s("/RsI")),j=s("6ElM");const k={queryContext:null,issuelist:null,viewmode:j.b.LIST,savedSearchlist:null};function C(t,e){switch(e.type){case j.a.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case j.a.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case j.a.SetIssuelist:return Object.assign(Object.assign({},t),{issuelist:e.payload});case j.a.SetSavedSearchlist:return Object.assign(Object.assign({},t),{savedSearchlist:e.payload});default:return t}}var V=s("1kSV"),x=s("LvDl"),W=s("lJxs"),q=s("krUz"),R=s("SYT+"),$=s("F2Ol"),Q=s("cdP3");const L=function(){return["/search/list"]},N=function(t){return{query:t}};function P(t,e){if(1&t&&(l.Wb(0,"div",3),l.Wb(1,"a",4),l.Kc(2),l.Vb(),l.Vb()),2&t){const t=e.$implicit;l.Cb(1),l.pc("routerLink",l.sc(3,L))("queryParams",l.tc(4,N,t.jql)),l.Cb(1),l.Mc(" ",t.name," ")}}function z(t,e){if(1&t&&(l.Wb(0,"div",1),l.Ic(1,P,3,6,"div",2),l.Vb()),2&t){const t=l.kc();l.Cb(1),l.pc("ngForOf",t.searchlist)}}let T=(()=>{class t{constructor(t,e,s,i){this.router=t,this.activatedRoute=e,this.jiraService=s,this.store$=i}ngOnInit(){this.searchlist$=this.store$.select(t=>t.search.savedSearchlist).pipe(Object(p.a)(t=>t)).subscribe(t=>this.searchlist=t),this.jiraService.favouriteSearches("favourite-search.json").pipe(Object(p.a)(t=>t&&t.length>0),Object(W.a)(t=>x.map(t,t=>x.pick(t,["id","name","jql"])))).subscribe(t=>this.store$.dispatch(new j.e(t)))}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(c.d),l.Qb(c.a),l.Qb($.b),l.Qb(r.h))},t.\u0275cmp=l.Kb({type:t,selectors:[["app-favourite-searches"]],decls:3,vars:1,consts:[["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(l.Wb(0,"h6"),l.Kc(1,"Favourite"),l.Vb(),l.Ic(2,z,2,1,"div",0)),2&t&&(l.Cb(2),l.pc("ngIf",e.searchlist))},directives:[i.l,i.k,c.f],encapsulation:2}),t})();function K(t,e){1&t&&(l.Wb(0,"div",8),l.Kc(1," No Records found. "),l.Vb())}function F(t,e){1&t&&(l.Wb(0,"a",16),l.Rb(1,"fa-icon",17),l.Kc(2," Storyboard view "),l.Vb()),2&t&&(l.Cb(1),l.pc("fixedWidth",!0))}function X(t,e){1&t&&(l.Wb(0,"a",18),l.Rb(1,"fa-icon",19),l.Kc(2," Back to list view "),l.Vb()),2&t&&(l.Cb(1),l.pc("fixedWidth",!0))}function A(t,e){if(1&t&&(l.Wb(0,"div",13),l.Ic(1,F,3,1,"a",14),l.Ic(2,X,3,1,"a",15),l.Vb()),2&t){const t=l.kc(2);l.Cb(1),l.pc("ngIf",t.searchViewmode===t.localViewmode.LIST),l.Cb(1),l.pc("ngIf",t.searchViewmode===t.localViewmode.STORYBOARD)}}function B(t,e){if(1&t){const t=l.Xb();l.Wb(0,"div",20),l.Wb(1,"ngb-pagination",21),l.ic("pageChange",(function(e){return l.Bc(t),l.kc(2).currentPageIndex=e}))("pageChange",(function(){return l.Bc(t),l.kc(2).onPageChange()})),l.Vb(),l.Vb()}if(2&t){const t=l.kc(2);l.Cb(1),l.pc("maxSize",3)("page",t.currentPageIndex)("boundaryLinks",!0)("pageSize",t.issuelist.pageSize)("collectionSize",t.issuelist.total)}}function D(t,e){if(1&t&&(l.Wb(0,"div",9),l.Ic(1,A,3,2,"div",10),l.Ic(2,B,2,5,"div",11),l.Wb(3,"div",12),l.Kc(4),l.Wb(5,"b"),l.Kc(6),l.Vb(),l.Vb(),l.Vb()),2&t){const t=l.kc();l.Cb(1),l.pc("ngIf",t.issuelist&&t.issuelist.results&&t.issuelist.results.length>1),l.Cb(1),l.pc("ngIf",t.issuelist.total>t.issuelist.pageSize),l.Cb(2),l.Nc(" ",t.issuelist.startAt+1," - ",t.issuelist.endAt," / "),l.Cb(2),l.Lc(t.issuelist.total)}}let H=(()=>{class t{constructor(t,e,s,i){this.router=t,this.activatedRoute=e,this.jiraService=s,this.store$=i,this.selectedTab=1,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0,this.canExecuteQuery=()=>this.query&&this.query.trim().length>0}ngOnInit(){this.localViewmode=j.b,this.searchViewmode$=this.store$.select(t=>t.search.viewmode).subscribe(t=>this.searchViewmode=t),this.store$.dispatch(new R.p(!0)),this.query$=this.store$.select(t=>t.app.query).pipe(Object(p.a)(t=>t&&t.length>0)).subscribe(t=>{this.query=t,this.executeQuery()}),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(p.a)(t=>t&&t.query&&t.query.length>0),Object(W.a)(t=>t.query)).subscribe(t=>this.store$.dispatch(new R.n(t))),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(p.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}parseQueryContext(t,e){if(t)return t.issueType!==q.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}executeQuery(){this.canExecuteQuery()&&this.jiraService.executeJql(this.query,this.currentPageIndex-1,50,["components","labels","fixVersions"],"issuelist.json").pipe(Object(W.a)(t=>({total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:x.map(t.issues,t=>Object(q.n)(t))}))).subscribe(t=>this.store$.dispatch(new j.c(t)))}onPageChange(){this.executeQuery()}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(c.d),l.Qb(c.a),l.Qb($.b),l.Qb(r.h))},t.\u0275cmp=l.Kb({type:t,selectors:[["app-result-container"]],decls:10,vars:2,consts:[[1,"main-container"],["direction","horizontal"],["size","15",1,"small","pt-2","pl-3"],["size","85"],[1,"body-container"],[1,"container-fluid"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["class","footer-container bg-light",4,"ngIf"],[1,"center-text","custom-shadow","alert-warning","p-4"],[1,"footer-container","bg-light"],["class","float-right pt-1 ml-2",4,"ngIf"],["class","float-right mt-1 mb-0",4,"ngIf"],[1,"pt-2","small","clearfix"],[1,"float-right","pt-1","ml-2"],["class","btn btn-brand btn-sm","routerLink","storyboard","queryParamsHandling","merge",4,"ngIf"],["class","btn btn-secondary btn-sm","routerLink","list","queryParamsHandling","merge",4,"ngIf"],["routerLink","storyboard","queryParamsHandling","merge",1,"btn","btn-brand","btn-sm"],["icon","map",3,"fixedWidth"],["routerLink","list","queryParamsHandling","merge",1,"btn","btn-secondary","btn-sm"],["icon","chevron-left",3,"fixedWidth"],[1,"float-right","mt-1","mb-0"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"]],template:function(t,e){1&t&&(l.Wb(0,"div",0),l.Wb(1,"as-split",1),l.Wb(2,"as-split-area",2),l.Rb(3,"app-favourite-searches"),l.Vb(),l.Wb(4,"as-split-area",3),l.Wb(5,"div",4),l.Wb(6,"div",5),l.Rb(7,"router-outlet"),l.Ic(8,K,2,0,"div",6),l.Vb(),l.Vb(),l.Ic(9,D,7,5,"div",7),l.Vb(),l.Vb(),l.Vb()),2&t&&(l.Cb(8),l.pc("ngIf",e.issuelist&&0===e.issuelist.total),l.Cb(1),l.pc("ngIf",e.issuelist&&e.issuelist.total>0))},directives:[Q.c,Q.b,T,c.h,i.l,c.f,a.a,V.q],encapsulation:2}),t})();const Y=function(t,e){return["/browse",t,"purpose",e]};function E(t,e){if(1&t&&(l.Wb(0,"div",5),l.Wb(1,"a",6),l.Wb(2,"sub",7),l.Kc(3),l.Vb(),l.Rb(4,"fa-icon",8),l.Wb(5,"div"),l.Kc(6),l.Wb(7,"span",9),l.Kc(8),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&t){const t=e.$implicit;l.Cb(1),l.pc("routerLink",l.uc(5,Y,t.key,t.key)),l.Cb(2),l.Nc("",t.issueType,": ",t.key,""),l.Cb(3),l.Mc(" ",t.title," "),l.Cb(2),l.Lc(t.status)}}function G(t,e){if(1&t&&(l.Wb(0,"div",3),l.Ic(1,E,9,8,"div",4),l.Vb()),2&t){const t=l.kc();l.Cb(1),l.pc("ngForOf",t.issuelist.results)}}let J=(()=>{class t{constructor(t,e,s,i){this.router=t,this.activatedRoute=e,this.jiraService=s,this.store$=i,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0}ngOnInit(){this.store$.dispatch(new j.f(j.b.LIST)),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(p.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(c.d),l.Qb(c.a),l.Qb($.b),l.Qb(r.h))},t.\u0275cmp=l.Kb({type:t,selectors:[["app-search-listview"]],decls:3,vars:1,consts:[[1,"row"],[1,"col-md-10"],["class","p-3 bg-white",4,"ngIf"],[1,"p-3","bg-white"],["class","issue-list-item",4,"ngFor","ngForOf"],[1,"issue-list-item"],[1,"btn","btn-link","btn-sm","text-dark","text-left","w-100","pt-0",3,"routerLink"],[1,"text-primary","text-uppercase"],["icon","angle-right",1,"text-muted","float-right","mt-2"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Ic(2,G,2,1,"div",2),l.Vb(),l.Vb()),2&t&&(l.Cb(2),l.pc("ngIf",e.issuelist))},directives:[i.l,i.k,c.f,a.a],encapsulation:2}),t})();var M=s("iLqC"),U=s("Ewkv"),Z=s("NGyg");function _(t,e){if(1&t){const t=l.Xb();l.Wb(0,"p-dialog",5),l.ic("visibleChange",(function(e){return l.Bc(t),l.kc(2).showStatistics=e})),l.Rb(1,"app-epic-statistics",6),l.Vb()}if(2&t){const t=l.kc(2);l.pc("visible",t.showStatistics),l.Cb(1),l.pc("statusStats",t.storyboardItem.statistics.status)("issueTypeStats",t.storyboardItem.statistics.issueTypes)("componentStats",t.storyboardItem.statistics.components)}}const tt=function(){return["far","chart-bar"]};function et(t,e){if(1&t){const t=l.Xb();l.Wb(0,"div"),l.Wb(1,"button",1),l.ic("click",(function(){return l.Bc(t),l.kc().showStatistics=!0})),l.Rb(2,"fa-icon",2),l.Vb(),l.Rb(3,"app-storyboard-renderer",3),l.Ic(4,_,2,4,"p-dialog",4),l.Vb()}if(2&t){const t=l.kc();l.Cb(2),l.pc("icon",l.sc(3,tt)),l.Cb(1),l.pc("storyboardItem",t.storyboardItem),l.Cb(1),l.pc("ngIf",t.storyboardItem.statistics)}}let st=(()=>{class t{constructor(t,e){this.store$=t,this.activatedRoute=e,this.showStatistics=!1}ngOnInit(){this.store$.dispatch(new j.f(j.b.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(p.a)(t=>t)).subscribe(t=>{this.storyboardItem.metadata=Object(M.b)(),this.storyboardItem.children=t.results,Object(M.c)(this.storyboardItem.metadata,Object(M.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(M.d)(this.storyboardItem)})}ngOnDestroy(){this.issuelist$&&this.issuelist$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(r.h),l.Qb(c.a))},t.\u0275cmp=l.Kb({type:t,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"btn","btn-link","float-right","mt-1",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&l.Ic(0,et,5,4,"div",0),2&t&&l.pc("ngIf",e.storyboardItem)},directives:[i.l,a.a,U.a,O.a,Z.a],encapsulation:2}),t})();s.d(e,"SearchModule",(function(){return rt}));const it=[{path:"",component:H,children:[{path:"list",component:J},{path:"storyboard",component:st}]}];let rt=(()=>{class t{}return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)},imports:[[i.c,c.g,b.c,n.b,a.c,u.b,w,O.b,S.b,Q.a,V.i,o.a,r.i.forFeature("search",C,{initialState:k}),c.g.forChild(it)]]}),t})()}}]);