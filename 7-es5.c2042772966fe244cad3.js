function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,s){"use strict";s.r(e);var i,a,n,c=s("ofXK"),r=s("kt0X"),o=s("l2bN"),u=s("6NWb"),l=s("tyNb"),b=s("sITn"),h=s("3Pt+"),d=s("jLSX"),f=s("fXoL"),p=(s("XNiG"),s("YyRF"),s("vxfF")),g=(s("R0Ic"),s("7zfz")),v=(s("t2ka"),s("xlun")),y=((n=function t(){_classCallCheck(this,t)}).\u0275mod=f.Ob({type:n}),n.\u0275inj=f.Nb({factory:function(t){return new(t||n)},imports:[[c.c,g.e,p.d,v.b],g.e,p.d]}),n),m=((a=function t(){_classCallCheck(this,t)}).\u0275mod=f.Ob({type:a}),a.\u0275inj=f.Nb({factory:function(t){return new(t||a)},imports:[[c.c,y,h.c,g.e],y,h.c,g.e]}),a),S=((i=function t(){_classCallCheck(this,t)}).\u0275mod=f.Ob({type:i}),i.\u0275inj=f.Nb({factory:function(t){return new(t||i)},imports:[[c.c,m],g.e]}),i),k=s("LPYB"),C=(s("hSFZ"),s("/RsI")),I=s("j9Al"),O={LIST:"LIST",STORYBOARD:"STORYBOARD"},w={SwitchViewmode:Object(I.b)("[SwitchViewmode]"),SetQueryContext:Object(I.b)("[SetQueryContext]"),LoadSearchResults:Object(I.b)("[LoadSearchResults]"),LoadSearchResultsFailed:Object(I.b)("[LoadSearchResults] Failed"),LoadSearchResultsSuccess:Object(I.b)("[LoadSearchResults] Success"),LoadSavedSearchlist:Object(I.b)("[LoadSavedSearchlist]"),LoadSavedSearchlistFailed:Object(I.b)("[LoadSavedSearchlist] Failed"),LoadSavedSearchlistSuccess:Object(I.b)("[LoadSavedSearchlist] Success")},j=function t(e){_classCallCheck(this,t),this.payload=e,this.type=w.SwitchViewmode},L=function t(e){_classCallCheck(this,t),this.payload=e,this.type=w.LoadSearchResults},V=function t(e){_classCallCheck(this,t),this.payload=e,this.type=w.LoadSavedSearchlist},x={queryContext:null,issuelist:null,viewmode:O.LIST,savedSearchlist:null},R=s("LvDl");function W(t,e){switch(e.type){case w.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case w.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case w.LoadSearchResults:return Object.assign(Object.assign({},t),{issuelist:[]});case w.LoadSearchResultsSuccess:return Object.assign(Object.assign({},t),{issuelist:e.payload});case w.LoadSavedSearchlist:return Object.assign(Object.assign({},t),{savedSearchlist:[]});case w.LoadSavedSearchlistSuccess:var s=R.map(e.payload,(function(t){return R.pick(t,["id","name","jql"])}));return Object.assign(Object.assign({},t),{savedSearchlist:s});default:return t}}var z=s("1kSV"),P=s("pLZG"),q=s("lJxs"),$=s("krUz"),F=s("SYT+"),T=s("cdP3"),_=function(){return["/search/list"]},Q=function(t){return{query:t}};function N(t,e){if(1&t&&(f.Wb(0,"div",3),f.Wb(1,"a",4),f.Kc(2),f.Vb(),f.Vb()),2&t){var s=e.$implicit;f.Cb(1),f.pc("routerLink",f.sc(3,_))("queryParams",f.tc(4,Q,s.jql)),f.Cb(1),f.Mc(" ",s.name," ")}}function K(t,e){if(1&t&&(f.Wb(0,"div",1),f.Ic(1,N,3,6,"div",2),f.Vb()),2&t){var s=f.kc();f.Cb(1),f.pc("ngForOf",s.searchlist)}}var B,A=((B=function(){function t(e){_classCallCheck(this,t),this.store$=e}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.searchlist$=this.store$.select((function(t){return t.search.savedSearchlist})).pipe(Object(P.a)((function(t){return t}))).subscribe((function(e){return t.searchlist=e})),this.store$.dispatch(new V(null))}},{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||B)(f.Qb(r.h))},B.\u0275cmp=f.Kb({type:B,selectors:[["app-favourite-searches"]],decls:3,vars:1,consts:[["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(f.Wb(0,"h6"),f.Kc(1,"Favourite"),f.Vb(),f.Ic(2,K,2,1,"div",0)),2&t&&(f.Cb(2),f.pc("ngIf",e.searchlist))},directives:[c.l,c.k,l.f],encapsulation:2}),B);function M(t,e){1&t&&(f.Wb(0,"div"),f.Rb(1,"app-favourite-searches"),f.Vb())}function X(t,e){1&t&&(f.Wb(0,"div",11),f.Kc(1," No Records found. "),f.Vb())}function D(t,e){1&t&&(f.Wb(0,"a",19),f.Rb(1,"fa-icon",20),f.Kc(2," Storyboard view "),f.Vb()),2&t&&(f.Cb(1),f.pc("fixedWidth",!0))}function Y(t,e){1&t&&(f.Wb(0,"a",21),f.Rb(1,"fa-icon",22),f.Kc(2," Back to list view "),f.Vb()),2&t&&(f.Cb(1),f.pc("fixedWidth",!0))}function E(t,e){if(1&t&&(f.Wb(0,"div",16),f.Ic(1,D,3,1,"a",17),f.Ic(2,Y,3,1,"a",18),f.Vb()),2&t){var s=f.kc(2);f.Cb(1),f.pc("ngIf",s.searchViewmode===s.localViewmode.LIST),f.Cb(1),f.pc("ngIf",s.searchViewmode===s.localViewmode.STORYBOARD)}}function J(t,e){if(1&t){var s=f.Xb();f.Wb(0,"div",23),f.Wb(1,"ngb-pagination",24),f.ic("pageChange",(function(t){return f.Bc(s),f.kc(2).currentPageIndex=t}))("pageChange",(function(){return f.Bc(s),f.kc(2).onPageChange()})),f.Vb(),f.Vb()}if(2&t){var i=f.kc(2);f.Cb(1),f.pc("maxSize",3)("page",i.currentPageIndex)("boundaryLinks",!0)("pageSize",i.issuelist.pageSize)("collectionSize",i.issuelist.total)}}function G(t,e){if(1&t&&(f.Wb(0,"div",12),f.Ic(1,E,3,2,"div",13),f.Ic(2,J,2,5,"div",14),f.Wb(3,"div",15),f.Kc(4),f.Wb(5,"b"),f.Kc(6),f.Vb(),f.Vb(),f.Vb()),2&t){var s=f.kc();f.Cb(1),f.pc("ngIf",s.issuelist&&s.issuelist.results&&s.issuelist.results.length>1),f.Cb(1),f.pc("ngIf",s.issuelist.total>s.issuelist.pageSize),f.Cb(2),f.Nc(" ",s.issuelist.startAt+1," - ",s.issuelist.endAt," / "),f.Cb(2),f.Lc(s.issuelist.total)}}var H,Z=((H=function(){function t(e,s,i){var a=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=s,this.store$=i,this.selectedTab=1,this.currentPageIndex=1,this.canNavigate=function(){return a.issuelist&&a.issuelist.trim().length>0},this.canExecuteQuery=function(){return a.query&&a.query.trim().length>0},this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.localViewmode=O,this.searchViewmode$=this.store$.select((function(t){return t.search.viewmode})).subscribe((function(e){return t.searchViewmode=e})),this.store$.dispatch(new F.l(!0)),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(P.a)((function(t){return t&&t.query&&t.query.length>0})),Object(q.a)((function(t){return t.query}))).subscribe((function(e){t.query=e,t.executeQuery()})),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(P.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"parseQueryContext",value:function(t,e){if(t)return t.issueType!==$.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}},{key:"executeQuery",value:function(){this.canExecuteQuery()&&this.store$.dispatch(new L({query:this.query,currentPageIndex:this.currentPageIndex}))}},{key:"onPageChange",value:function(){this.executeQuery()}},{key:"dragEnd",value:function(t){this.adjustPaneSize(t.sizes[0])}},{key:"adjustPaneSize",value:function(t){this.leftPaneSize=t,this.columns[0].size=t,this.columns[1].size=100-t}},{key:"toggleFullscreen",value:function(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}]),t}()).\u0275fac=function(t){return new(t||H)(f.Qb(l.d),f.Qb(l.a),f.Qb(r.h))},H.\u0275cmp=f.Kb({type:H,selectors:[["app-result-container"]],decls:12,vars:7,consts:[[1,"main-container"],["direction","horizontal"],[1,"small","pt-2","pl-3",3,"size"],[4,"ngIf"],[3,"size"],[1,"body-container"],[1,"container-fluid"],["title","expand/collapse pane",1,"btn","btn-link","text-muted","float-left","pl-0",3,"click"],[3,"icon","fixedWidth"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["class","footer-container bg-light",4,"ngIf"],[1,"center-text","custom-shadow","alert-warning","p-4"],[1,"footer-container","bg-light"],["class","float-right pt-1 ml-2",4,"ngIf"],["class","float-right mt-1 mb-0",4,"ngIf"],[1,"pt-2","small","clearfix"],[1,"float-right","pt-1","ml-2"],["class","btn btn-brand btn-sm","routerLink","storyboard","queryParamsHandling","merge",4,"ngIf"],["class","btn btn-secondary btn-sm","routerLink","list","queryParamsHandling","merge",4,"ngIf"],["routerLink","storyboard","queryParamsHandling","merge",1,"btn","btn-brand","btn-sm"],["icon","map",3,"fixedWidth"],["routerLink","list","queryParamsHandling","merge",1,"btn","btn-secondary","btn-sm"],["icon","chevron-left",3,"fixedWidth"],[1,"float-right","mt-1","mb-0"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"as-split",1),f.Wb(2,"as-split-area",2),f.Ic(3,M,2,0,"div",3),f.Vb(),f.Wb(4,"as-split-area",4),f.Wb(5,"div",5),f.Wb(6,"div",6),f.Wb(7,"button",7),f.ic("click",(function(){return e.toggleFullscreen()})),f.Rb(8,"fa-icon",8),f.Vb(),f.Rb(9,"router-outlet"),f.Ic(10,X,2,0,"div",9),f.Vb(),f.Vb(),f.Ic(11,G,7,5,"div",10),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Cb(2),f.pc("size",e.columns[0].size),f.Cb(1),f.pc("ngIf",e.leftPaneSize>0),f.Cb(1),f.pc("size",e.columns[1].size),f.Cb(4),f.pc("icon",0===e.columns[0].size?"angle-double-right":"angle-double-left")("fixedWidth",!0),f.Cb(2),f.pc("ngIf",e.issuelist&&0===e.issuelist.total),f.Cb(1),f.pc("ngIf",e.issuelist&&e.issuelist.total>0))},directives:[T.c,T.b,c.l,u.a,l.h,A,l.f,z.q],encapsulation:2}),H),U=function(t,e){return["/browse",t,"purpose",e]};function tt(t,e){if(1&t&&(f.Wb(0,"div",4),f.Wb(1,"a",5),f.Wb(2,"sub",6),f.Kc(3),f.Vb(),f.Rb(4,"fa-icon",7),f.Wb(5,"div",8),f.Kc(6),f.Wb(7,"span",9),f.Kc(8),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&t){var s=e.$implicit;f.Cb(1),f.pc("routerLink",f.uc(5,U,s.key,s.key)),f.Cb(2),f.Nc("",s.issueType,": ",s.key,""),f.Cb(3),f.Mc(" ",s.title," "),f.Cb(2),f.Lc(s.status)}}function et(t,e){if(1&t&&(f.Wb(0,"div",2),f.Ic(1,tt,9,8,"div",3),f.Vb()),2&t){var s=f.kc();f.Cb(1),f.pc("ngForOf",s.issuelist.results)}}var st,it=((st=function(){function t(e,s,i){var a=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=s,this.store$=i,this.currentPageIndex=1,this.canNavigate=function(){return a.issuelist&&a.issuelist.trim().length>0}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new j(O.LIST)),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(P.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}]),t}()).\u0275fac=function(t){return new(t||st)(f.Qb(l.d),f.Qb(l.a),f.Qb(r.h))},st.\u0275cmp=f.Kb({type:st,selectors:[["app-search-listview"]],decls:2,vars:1,consts:[[1,"container"],["class","p-3 bg-white",4,"ngIf"],[1,"p-3","bg-white"],["class","issue-list-item",4,"ngFor","ngForOf"],[1,"issue-list-item"],[1,"btn","btn-link","btn-sm","text-dark","text-left","w-100","pt-0",3,"routerLink"],[1,"text-primary","text-uppercase"],["icon","angle-right",1,"text-muted","float-right","mt-2"],[1,"text-no-wrap"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Ic(1,et,2,1,"div",1),f.Vb()),2&t&&(f.Cb(1),f.pc("ngIf",e.issuelist))},directives:[c.l,c.k,l.f,u.a],encapsulation:2}),st),at=s("iLqC"),nt=s("Ewkv"),ct=s("lVkt"),rt=s("NGyg");function ot(t,e){if(1&t){var s=f.Xb();f.Wb(0,"p-multiSelect",10),f.ic("ngModelChange",(function(t){return f.Bc(s),f.kc(2).selectedStatuses=t}))("onChange",(function(t){return f.Bc(s),f.kc(2).onSelectedStatusChange(t)})),f.Vb()}if(2&t){var i=f.kc(2);f.pc("options",i.statusLookup)("ngModel",i.selectedStatuses)}}function ut(t,e){if(1&t){var s=f.Xb();f.Wb(0,"p-dialog",11),f.ic("visibleChange",(function(t){return f.Bc(s),f.kc(2).showStatistics=t})),f.Rb(1,"app-statistics",12),f.Vb()}if(2&t){var i=f.kc(2);f.pc("visible",i.showStatistics),f.Cb(1),f.pc("statusStats",i.storyboardItem.statistics.status)("issueTypeStats",i.storyboardItem.statistics.issueTypes)("componentStats",i.storyboardItem.statistics.components)}}var lt=function(){return["far","chart-bar"]};function bt(t,e){if(1&t){var s=f.Xb();f.Wb(0,"div"),f.Wb(1,"div",1),f.Rb(2,"div",2),f.Wb(3,"div",3),f.Ic(4,ot,1,2,"p-multiSelect",4),f.Vb(),f.Wb(5,"div",5),f.Wb(6,"button",6),f.ic("click",(function(){return f.Bc(s),f.kc().showStatistics=!0})),f.Rb(7,"fa-icon",7),f.Vb(),f.Vb(),f.Vb(),f.Rb(8,"app-storyboard-renderer",8),f.Ic(9,ut,2,4,"p-dialog",9),f.Vb()}if(2&t){var i=f.kc();f.Cb(4),f.pc("ngIf",i.statusLookup&&i.statusLookup.length>0),f.Cb(3),f.pc("icon",f.sc(4,lt)),f.Cb(1),f.pc("storyboardItem",i.storyboardItem),f.Cb(1),f.pc("ngIf",i.storyboardItem.statistics)}}var ht,dt,ft=((ht=function(){function t(e,s){_classCallCheck(this,t),this.activatedRoute=e,this.store$=s,this.selectedStatuses=[],this.statusLookup=[],this.showStatistics=!1,this.filterByStatus=function(t,e){return e&&e.length>0?R.filter(t,(function(t){return void 0!==R.find(e,(function(e){return e===t.status}))})):t}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new j(O.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(P.a)((function(t){return t}))).subscribe((function(e){t.issuelist=e,t.plotStoryboard()}))}},{key:"ngOnDestroy",value:function(){this.issuelist$&&this.issuelist$.unsubscribe()}},{key:"plotStoryboard",value:function(){var t=R.map(this.selectedStatuses,"key");this.storyboardItem.metadata=Object(at.b)(),this.storyboardItem.children=this.filterByStatus(this.issuelist.results,t),Object(at.c)(this.storyboardItem.metadata,Object(at.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(at.d)(this.storyboardItem),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}},{key:"onSelectedStatusChange",value:function(t){this.plotStoryboard()}}]),t}()).\u0275fac=function(t){return new(t||ht)(f.Qb(l.a),f.Qb(r.h))},ht.\u0275cmp=f.Kb({type:ht,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","mt-1","mb-1"],[1,"col-md-8"],[1,"col-md-3"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1"],[1,"btn","btn-link",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&f.Ic(0,bt,10,5,"div",0),2&t&&f.pc("ngIf",e.storyboardItem)},directives:[c.l,u.a,nt.a,ct.a,h.f,h.i,C.a,rt.a],encapsulation:2}),ht),pt=s("snw9"),gt=s("mrSG"),vt=s("eIep"),yt=s("JIr8"),mt=s("LRne"),St=s("F2Ol"),kt=((dt=function t(e,s){var i=this;_classCallCheck(this,t),this.actions$=e,this.jiraService=s,this.loadSearchlist=this.actions$.pipe(Object(pt.d)(w.LoadSearchResults),Object(vt.a)((function(t){return i.jiraService.executeJql(t.payload.query,t.payload.currentPageIndex-1,50,$.l,"issuelist.json").pipe(Object(q.a)((function(t){return{total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:R.map(t.issues,(function(t){return Object($.q)(t)}))}}))).pipe(Object(q.a)((function(t){return{type:w.LoadSearchResultsSuccess,payload:t}})),Object(yt.a)((function(){return Object(mt.a)({type:w.LoadSearchResultsFailed})})))}))),this.loadSaveSearchlist=this.actions$.pipe(Object(pt.d)(w.LoadSavedSearchlist),Object(vt.a)((function(){return i.jiraService.favouriteSearches("favourite-search.json").pipe(Object(q.a)((function(t){return{type:w.LoadSavedSearchlistSuccess,payload:t}})),Object(yt.a)((function(){return Object(mt.a)({type:w.LoadSavedSearchlistFailed})})))})))}).\u0275fac=function(t){return new(t||dt)(f.ec(pt.a),f.ec(St.b))},dt.\u0275prov=f.Mb({token:dt,factory:dt.\u0275fac}),Object(gt.b)([Object(pt.b)()],dt.prototype,"loadSearchlist",void 0),Object(gt.b)([Object(pt.b)()],dt.prototype,"loadSaveSearchlist",void 0),dt);s.d(e,"SearchModule",(function(){return Ot}));var Ct,It=[{path:"",component:Z,children:[{path:"list",component:it},{path:"storyboard",component:ft}]}],Ot=((Ct=function t(){_classCallCheck(this,t)}).\u0275mod=f.Ob({type:Ct}),Ct.\u0275inj=f.Nb({factory:function(t){return new(t||Ct)},imports:[[c.c,l.g,h.c,o.b,u.c,d.b,S,C.b,k.b,ct.b,T.a,z.i,b.a,r.j.forFeature("search",W,{initialState:x}),pt.c.forFeature([kt]),l.g.forChild(It)]]}),Ct)}}]);