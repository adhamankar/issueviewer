(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2Jat":function(e,t,s){"use strict";s.r(t);var i=s("ofXK"),n=s("kt0X");const c={primaryIssueKey:"",primaryIssue:null,selectedIssueKey:"",selectedIssue:null,subtasks:null,purpose:[],recentlyViewedItems:[],recentmostItem:null,updatedField:null};var a=s("LvDl"),o=s("j9Al");const l={LoadPrimaryIssue:Object(o.b)("[LoadPrimaryIssue]"),LoadPrimaryIssueFailed:Object(o.b)("[LoadPrimaryIssue] Failed"),LoadPrimaryIssueSuccess:Object(o.b)("[LoadPrimaryIssue] Success"),LoadPrimaryIssueEpicChildren:Object(o.b)("[LoadPrimaryIssueEpicChildren]"),LoadPrimaryIssueEpicChildrenFailed:Object(o.b)("[LoadPrimaryIssueEpicChildren] Failed"),LoadPrimaryIssueEpicChildrenSuccess:Object(o.b)("[LoadPrimaryIssueEpicChildren] Success"),LoadPrimaryIssueRelatedLinks:Object(o.b)("[LoadPrimaryIssueRelatedLinks]"),LoadPrimaryIssueRelatedLinksFailed:Object(o.b)("[LoadPrimaryIssueRelatedLinks] Failed"),LoadPrimaryIssueRelatedLinksSuccess:Object(o.b)("[LoadPrimaryIssueRelatedLinks] Success"),LoadSubtasks:Object(o.b)("[LoadSubtasks]"),LoadSubtasksFailed:Object(o.b)("[LoadSubtasks] Failed"),LoadSubtasksSuccess:Object(o.b)("[LoadSubtasks] Success"),LoadProjectDetails:Object(o.b)("[LoadProjectDetails]"),LoadProjectDetailsFailed:Object(o.b)("[LoadProjectDetails] Failed"),LoadProjectDetailsSuccess:Object(o.b)("[LoadProjectDetails] Success"),LoadSelectedIssue:Object(o.b)("[LoadSelectedIssue]"),LoadSelectedIssueFailed:Object(o.b)("[LoadSelectedIssue] Failed"),LoadSelectedIssueSuccess:Object(o.b)("[LoadSelectedIssue] Success"),LoadSelectedIssueEpicChildren:Object(o.b)("[LoadSelectedIssueEpicChildren]"),LoadSelectedIssueEpicChildrenFailed:Object(o.b)("[LoadSelectedIssueEpicChildren] Failed"),LoadSelectedIssueEpicChildrenSuccess:Object(o.b)("[LoadSelectedIssueEpicChildren] Success"),LoadSelectedIssueRelatedLinks:Object(o.b)("[LoadSelectedIssueRelatedLinks]"),LoadSelectedIssueRelatedLinksFailed:Object(o.b)("[LoadSelectedIssueRelatedLinks] Failed"),LoadSelectedIssueRelatedLinksSuccess:Object(o.b)("[LoadSelectedIssueRelatedLinks] Success"),SetSelectedIssue:Object(o.b)("[SetSelectedIssue]"),SetPurpose:Object(o.b)("[SetPurpose]"),UpdateOrganizationPurpose:Object(o.b)("[UpdateOrganizationPurpose]"),SetRecentlyViewed:Object(o.b)("[SetRecentlyViewed]"),UpdateFieldValue:Object(o.b)("[UpdateFieldValue]"),UpdateFieldValueFailed:Object(o.b)("[UpdateFieldValue] Failed"),UpdateFieldValueSuccess:Object(o.b)("[UpdateFieldValue] Success"),UpdateOrganizationTitle:Object(o.b)("[UpdateOrganizationTitle]"),UpdateOrganizationTitleFailed:Object(o.b)("[UpdateOrganizationTitle] Failed"),UpdateOrganizationTitleSuccess:Object(o.b)("[UpdateOrganizationTitle] Success")};class r{constructor(e){this.payload=e,this.type=l.LoadPrimaryIssue}}class d{constructor(e){this.payload=e,this.type=l.LoadPrimaryIssueEpicChildren}}class u{constructor(e){this.payload=e,this.type=l.LoadPrimaryIssueRelatedLinks}}class b{constructor(e){this.payload=e,this.type=l.LoadSubtasks}}class p{constructor(e){this.payload=e,this.type=l.LoadProjectDetails}}class h{constructor(e){this.payload=e,this.type=l.LoadSelectedIssue}}class g{constructor(e){this.payload=e,this.type=l.LoadSelectedIssueEpicChildren}}class f{constructor(e){this.payload=e,this.type=l.LoadSelectedIssueRelatedLinks}}class m{constructor(e){this.payload=e,this.type=l.SetSelectedIssue}}class I{constructor(e){this.payload=e,this.type=l.UpdateOrganizationPurpose}}class y{constructor(e){this.payload=e,this.type=l.UpdateFieldValue}}class k{constructor(e){this.payload=e,this.type=l.UpdateOrganizationTitle}}var C=s("krUz");function j(e,t){switch(t.type){case l.LoadPrimaryIssue:return Object.assign(Object.assign({},e),{primaryIssue:null,primaryIssueKey:t.payload.issue});case l.LoadPrimaryIssueSuccess:return Object.assign(Object.assign({},e),{primaryIssue:v(t.payload)});case l.LoadPrimaryIssueEpicChildren:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{epicChildrenLoading:!0})});case l.LoadPrimaryIssueEpicChildrenSuccess:{const s=a.map(t.payload.issues,e=>Object(C.q)(e));return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{epicChildrenLoading:!1,epicChildrenLoaded:!0,epicChildren:s})})}case l.LoadPrimaryIssueRelatedLinks:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{relatedLinksLoading:!0})});case l.LoadPrimaryIssueRelatedLinksSuccess:{const s=function(e,t){if(!e.primaryIssue)return null;const s=e.primaryIssue.relatedLinks;if(t.payload&&t.payload.issues&&s){const e=a.map(t.payload.issues,e=>a.pick(Object(C.q)(e),C.r));s.forEach(t=>{const s=a.find(e,{key:t.key});s&&(t.project=s.project,t.labels=s.labels,t.fixVersions=s.fixVersions,t.components=s.components)})}return s}(e,t);return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{relatedLinksLoading:!1,relatedLinksLoaded:!0,relatedLinks:s})})}case l.LoadProjectDetails:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{projectConfigLoading:!0})});case l.LoadProjectDetailsSuccess:{const s=function(e){const t=a.pick(e,["id","key","description","name","customFields"]);return t.hierarchy=[],e.issueTypes&&(t.standardIssueTypes=O(e.issueTypes,!1),t.subTaskIssueTypes=O(e.issueTypes,!0)),t.metadata={},e.components&&(t.metadata.components=a.sortBy(a.map(e.components,e=>a.pick(e,["id","name"])),["name"])),e.versions&&(t.metadata.versions=a.sortBy(a.map(e.versions,e=>a.pick(e,["archived","id","name","releaseDate"])),["name"])),t}(t.payload);return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{projectConfigLoading:!1,projectConfigLoaded:!0,projectConfig:s})})}case l.LoadSubtasks:return Object.assign(Object.assign({},e),{subtasks:null});case l.LoadSubtasksSuccess:{let s=null;return t.payload&&t.payload.result&&t.payload.result.issues&&(s=Object(C.m)(t.payload.result.issues),Object(C.d)(s,t.payload.extendedFields)),Object.assign(Object.assign({},e),{subtasks:s})}case l.LoadSelectedIssue:return Object.assign(Object.assign({},e),{selectedIssue:null,selectedIssueKey:t.payload.issue});case l.LoadSelectedIssueSuccess:return Object.assign(Object.assign({},e),{selectedIssue:v(t.payload)});case l.LoadSelectedIssueEpicChildren:return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{epicChildrenLoading:!0,epicChildrenLoaded:!1})});case l.LoadSelectedIssueEpicChildrenSuccess:{const s=a.map(t.payload.issues,e=>Object(C.q)(e));return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{epicChildrenLoading:!1,epicChildrenLoaded:!0,epicChildren:s})})}case l.LoadSelectedIssueRelatedLinks:return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{relatedLinksLoading:!0,relatedLinksLoaded:!1})});case l.LoadSelectedIssueRelatedLinksSuccess:{const s=a.map(t.payload.issues,e=>Object(C.q)(e)),i=e.selectedIssue.relatedLinks;return s.forEach(e=>{const t=a.find(i,{key:e.key});e.linkType=t?t.linkType:"link"}),Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{relatedLinksLoading:!1,relatedLinksLoaded:!0,relatedLinks:s})})}case l.SetSelectedIssue:return Object.assign(Object.assign({},e),{selectedIssue:t.payload});case l.SetPurpose:return Object.assign(Object.assign({},e),{purpose:t.payload});case l.UpdateOrganizationPurpose:{const s=t.payload||{};return Object.assign(Object.assign({},e),{purpose:e.purpose.map(e=>e.issueType===C.a.Organization?Object.assign(Object.assign({},e),{key:s.name,title:s.name,purpose:s.purpose}):e)})}case l.SetRecentlyViewed:return Object.assign(Object.assign({},e),{recentmostItem:t.payload});case l.UpdateFieldValue:return Object.assign(Object.assign({},e),{updatedField:null});case l.UpdateFieldValueSuccess:{const s=t.payload;return Object.assign(Object.assign({},e),{updatedField:s})}case l.UpdateOrganizationTitleSuccess:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{organization:t.payload})});default:return e}}function v(e){const t=Object(C.q)(e.issue);return e.extendedFields&&e.extendedFields.length>0&&(t.extendedFields=[],e.extendedFields.forEach(s=>{s.extendedValue=Object(C.n)(e.issue,s.id),t.extendedFields.push(s)})),t&&(t.organization=e.organization,t.projectConfig=e.projectConfig,t.projectConfigLoaded=!!e.projectConfig,t.relatedLinks=Object(C.o)(e.issue),t.epicChildrenLoading=!1,t.epicChildrenLoaded=!1),t}function O(e,t){return a.map(a.filter(e,{subtask:t}),e=>({name:e.name,list:[]}))}var L=s("fXoL"),S=s("itXk"),V=s("pLZG"),W=s("6NWb"),w=s("tyNb"),F=s("l2bN");function x(e,t){if(1&e&&(L.Wb(0,"div",15),L.Wb(1,"h5",16),L.Kc(2),L.Vb(),L.Rb(3,"ngx-md",17),L.Vb()),2&e){const e=L.kc().$implicit;L.Cb(2),L.Mc(" ",e.title," "),L.Cb(1),L.pc("data",e.purpose)}}const $=function(e){return{"float-left":e}};function E(e,t){if(1&e&&(L.Wb(0,"div",4),L.Rb(1,"div",9),L.Wb(2,"div",12),L.Wb(3,"a",6),L.ic("click",(function(){const e=t.$implicit;return e.show=!e.show})),L.Rb(4,"fa-icon",7),L.Wb(5,"span",13),L.Kc(6),L.Vb(),L.Vb(),L.Vb(),L.Ic(7,x,4,2,"div",14),L.Vb()),2&e){const e=t.$implicit;L.pc("ngClass",L.tc(4,$,!e.show)),L.Cb(4),L.pc("icon",e.show?"chevron-down":"chevron-right"),L.Cb(2),L.Mc("",e.issueType," purpose"),L.Cb(1),L.pc("ngIf",e.show)}}const R=function(e){return{small:e}};function T(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",4),L.Wb(1,"div",5),L.Wb(2,"a",6),L.ic("click",(function(){L.Bc(e);const t=L.kc();return t.showHideAllPurposes(!t.showAll)})),L.Rb(3,"fa-icon",7),L.Vb(),L.Vb(),L.Ic(4,E,8,6,"div",8),L.Wb(5,"div",9),L.Kc(6,"\xa0"),L.Vb(),L.Wb(7,"a",10),L.Kc(8," Proceed to workbench "),L.Rb(9,"fa-icon",11),L.Vb(),L.Vb()}if(2&e){const e=L.kc();L.pc("ngClass",L.tc(3,R,e.fontSizeSmall)),L.Cb(3),L.pc("icon",e.showAll?"angle-double-down":"angle-double-right"),L.Cb(1),L.pc("ngForOf",e.purpose)}}let P=(()=>{class e{constructor(e){this.store$=e,this.edit=new L.n,this.showAll=!1,this.hideExtendedFields=!1,this.fontSizeSmall=!1}ngOnInit(){const e=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(V.a)(e=>e)),t=this.store$.select(e=>e.app.hierarchicalIssue).pipe(Object(V.a)(e=>e));this.combined$=Object(S.a)(e,t).subscribe(([e,t])=>{const s=Object(C.s)(t,e.key);s&&(Object(C.g)(e,s),this.purpose=this.expandPurpose(s))})}ngOnDestroy(){this.hierarchySetupVisibility$&&this.hierarchySetupVisibility$.unsubscribe(),this.combined$&&this.combined$.unsubscribe()}showHideAllPurposes(e){this.showAll=e,this.purpose&&(this.purpose.forEach(e=>e.show=this.showAll),!this.showAll&&this.purpose.length>0&&(this.purpose[this.purpose.length-1].show=!0))}expandPurpose(e){const t=[];return this.populatePurpose(e,t),a.reverse(t),t.length>0&&(t[t.length-1].show=!0),t}populatePurpose(e,t){e&&(e.issueType!==C.a.EpicChildren&&e.issueType!==C.a.RelatedLink&&t.push({key:e.key,issueType:e.issueType,title:e.title,purpose:e.description,editable:e.editable,hfKey:e.hfKey,show:!1}),e.parent&&this.populatePurpose(e.parent,t))}}return e.\u0275fac=function(t){return new(t||e)(L.Qb(n.h))},e.\u0275cmp=L.Kb({type:e,selectors:[["app-purpose"]],outputs:{edit:"edit"},decls:4,vars:1,consts:[[1,"row"],[1,"col-md-10"],[3,"ngClass",4,"ngIf"],[1,"col-md-2"],[3,"ngClass"],[1,"border-0","pb-0","mb-2","float-left"],["title","Show/hide details",1,"btn","btn-light","btn-sm","text-muted","mr-2",3,"click"],["size","fw",3,"icon"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"clearfix"],["routerLink","../workbench",1,"btn","btn-light","btn-sm","text-primary","mt-3"],["icon","chevron-right","size","sm"],[1,"text-uppercase","text-muted"],[1,"small"],["class","ml-3 pl-3 pr-3 border-left","style","overflow:auto",4,"ngIf"],[1,"ml-3","pl-3","pr-3","border-left",2,"overflow","auto"],[1,"text-dark","font-weight-normal","mt-1"],[3,"data"]],template:function(e,t){1&e&&(L.Wb(0,"div",0),L.Wb(1,"div",1),L.Ic(2,T,10,5,"div",2),L.Vb(),L.Rb(3,"div",3),L.Vb()),2&e&&(L.Cb(2),L.pc("ngIf",t.purpose&&t.purpose.length>0))},directives:[i.l,i.j,W.a,i.k,w.f,F.a],encapsulation:2}),e})();var z=s("sITn"),K=s("3Pt+"),N=s("jLSX"),M=s("lJxs"),D=s("yVuU"),B=s("AQDj");function U(e,t){if(1&e&&(L.Wb(0,"span",18),L.Kc(1),L.Vb()),2&e){const e=t.$implicit;L.Cb(1),L.Lc(e)}}function X(e,t){if(1&e&&(L.Wb(0,"div",15),L.Wb(1,"span",16),L.Kc(2,"FIX VERSION: "),L.Vb(),L.Ic(3,U,2,1,"span",17),L.Vb()),2&e){const e=L.kc(2);L.Cb(3),L.pc("ngForOf",e.selectedIssue.fixVersions)}}function A(e,t){1&e&&(L.Wb(0,"a",19),L.Rb(1,"fa-icon",20),L.Kc(2," Storyboard "),L.Vb()),2&e&&L.pc("routerLinkActive","active")}const Q=function(){return["details"]},H=function(){return["far","window-restore"]};function q(e,t){if(1&e&&(L.Wb(0,"div",2),L.Wb(1,"div",3),L.Wb(2,"div"),L.Ic(3,X,4,1,"div",4),L.Wb(4,"sub",5),L.Kc(5),L.Vb(),L.Rb(6,"app-issue-navigation-menu",6),L.Vb(),L.Wb(7,"h2",7),L.Kc(8),L.Wb(9,"sup",8),L.Kc(10),L.Vb(),L.Vb(),L.Wb(11,"div",9),L.Wb(12,"a",10),L.Rb(13,"fa-icon",11),L.Kc(14," Purpose "),L.Vb(),L.Wb(15,"a",12),L.Rb(16,"fa-icon",13),L.Kc(17," Workbench "),L.Vb(),L.Ic(18,A,3,1,"a",14),L.Vb(),L.Vb(),L.Vb()),2&e){const e=L.kc();L.Cb(3),L.pc("ngIf",e.selectedIssue.fixVersions&&e.selectedIssue.fixVersions.length>0),L.Cb(2),L.Nc(" ",e.selectedIssue.issueType,": ",e.selectedIssue.key," "),L.Cb(1),L.pc("issueKey",e.selectedIssue.key),L.Cb(2),L.Mc(" ",e.selectedIssue.title," "),L.Cb(2),L.Mc(" ",e.selectedIssue.status," "),L.Cb(2),L.pc("routerLink",L.sc(11,Q))("routerLinkActive","active"),L.Cb(3),L.pc("routerLinkActive","active"),L.Cb(1),L.pc("icon",L.sc(12,H)),L.Cb(2),L.pc("ngIf",e.canNavigateToStoryboard())}}let J=(()=>{class e{constructor(e,t,s,i){this.router=e,this.activatedRoute=t,this.cachingService=s,this.store$=i,this.canNavigateToStoryboard=()=>this.selectedIssue&&this.primaryIssue&&("Epic"===this.selectedIssue.issueType||this.primaryIssue.key.toLowerCase()===this.selectedIssue.key.toLowerCase())}ngOnInit(){this.localNodeType=C.a,this.updatedField$=this.store$.select(e=>e.issue.updatedField).pipe(Object(V.a)(e=>e&&this.selectedIssue)).subscribe(e=>{this.store$.dispatch(new h({issue:this.selectedIssue.key,extendedFields:this.extendedFields}))}),this.organization$=this.store$.select(e=>e.app.organization).pipe(Object(V.a)(e=>e)).subscribe(e=>this.store$.dispatch(new I(e))),this.selectedIssue$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(V.a)(e=>e)).subscribe(e=>{this.selectedIssue=e,this.selectedIssue.relatedLinksLoaded||this.selectedIssue.relatedLinksLoading||this.selectedIssue.relatedLinks&&this.selectedIssue.relatedLinks.length>0&&this.store$.dispatch(new f(a.map(this.selectedIssue.relatedLinks,"key"))),this.selectedIssue.issueType!==C.a.Epic||this.selectedIssue.epicChildrenLoaded||this.selectedIssue.epicChildrenLoading||this.store$.dispatch(new g(this.selectedIssue.key))});const e=this.store$.select(e=>e.issue.primaryIssue).pipe(Object(V.a)(e=>e)),t=this.store$.select(e=>e.app.hierarchicalIssue).pipe(Object(V.a)(e=>e)),s=this.activatedRoute.params.pipe(Object(V.a)(e=>e&&e.selected&&e.selected.length>0),Object(M.a)(e=>e.selected));this.combined$=Object(S.a)(e,t,s).subscribe(([e,t,s])=>{if(this.primaryIssue=e,s.toLowerCase()===this.primaryIssue.key.toLowerCase())this.store$.dispatch(new m(e));else if(!this.selectedIssue||this.selectedIssue.key.toLowerCase()!==s.toLowerCase()){const i=Object(C.s)(t,s);this.extendedFields=i?this.populateExtendedFields(e.projectConfig,i.issueType):[],this.store$.dispatch(new h({issue:s,extendedFields:this.extendedFields}))}})}populateExtendedFields(e,t){if(e&&e.standardIssueTypes){const s=a.find(e.standardIssueTypes,{name:t});return s?s.list:[]}return[]}ngOnDestroy(){this.updatedField$&&this.updatedField$.unsubscribe(),this.organization$&&this.organization$.unsubscribe(),this.combined$&&this.combined$.unsubscribe(),this.selectedIssue$&&this.selectedIssue$.unsubscribe()}prepareExternalUrl(e){const t=this.cachingService.getConnectionDetails();return t&&t.serverUrl&&t.serverUrl.length>0?`${t.serverUrl}/browse/${e}`:""}}return e.\u0275fac=function(t){return new(t||e)(L.Qb(w.d),L.Qb(w.a),L.Qb(D.a),L.Qb(n.h))},e.\u0275cmp=L.Kb({type:e,selectors:[["app-selected-issue-container"]],decls:4,vars:1,consts:[[1,"pt-0","pr-3","pb-2","pl-3"],["class","pb-3",4,"ngIf"],[1,"pb-3"],[1,""],["class","float-right small mt-1",4,"ngIf"],[1,"text-uppercase","mr-2"],["icon","ellipsis-h","placement","bottom-left",3,"issueKey"],[1,"font-weight-light"],[1,"badge","badge-light","text-uppercase","text-muted",2,"font-size","small"],[1,"pb-0"],["title","View purpose",1,"btn","btn-default","btn-sm","mr-1",3,"routerLink","routerLinkActive"],["icon","fire","size","sm",1,"text-brand"],["routerLink","workbench",1,"btn","btn-default","btn-sm","mr-1",3,"routerLinkActive"],["size","sm",3,"icon"],["class","btn btn-default btn-sm mr-1","routerLink","storyboard",3,"routerLinkActive",4,"ngIf"],[1,"float-right","small","mt-1"],[1,"small","text-muted"],["class","badge badge-light ml-1",4,"ngFor","ngForOf"],[1,"badge","badge-light","ml-1"],["routerLink","storyboard",1,"btn","btn-default","btn-sm","mr-1",3,"routerLinkActive"],["icon","map","size","sm"]],template:function(e,t){1&e&&(L.Wb(0,"div",0),L.Ic(1,q,19,13,"div",1),L.Wb(2,"div"),L.Rb(3,"router-outlet"),L.Vb(),L.Vb()),2&e&&(L.Cb(1),L.pc("ngIf",t.selectedIssue))},directives:[i.l,w.h,B.a,w.f,w.e,W.a,i.k],encapsulation:2}),e})();var G=s("1kSV"),Y=s("cdP3");function _(e,t){1&e&&(L.Wb(0,"div",3),L.Rb(1,"fa-icon",4),L.Kc(2," There are no extended fields/attributes for this record. "),L.Vb())}const Z=function(e){return{small:e}};function ee(e,t){if(1&e&&(L.Wb(0,"div",8),L.Wb(1,"sub",9),L.Kc(2),L.Vb(),L.Rb(3,"ngx-md",10),L.Vb()),2&e){const e=L.kc().$implicit,t=L.kc(3);L.Cb(2),L.Lc(e.name),L.Cb(1),L.pc("ngClass",L.tc(3,Z,t.fontSizeSmall))("data",e.extendedValue)}}function te(e,t){if(1&e&&(L.Ub(0),L.Ic(1,ee,4,5,"div",7),L.Tb()),2&e){const e=t.$implicit;L.Cb(1),L.pc("ngIf",e.extendedValue&&e.extendedValue.length>0)}}function se(e,t){if(1&e&&(L.Wb(0,"div",5),L.Ic(1,te,2,1,"ng-container",6),L.Vb()),2&e){const e=L.kc(2);L.Cb(1),L.pc("ngForOf",e.issue.extendedFields)}}function ie(e,t){if(1&e&&(L.Wb(0,"div"),L.Ic(1,_,3,0,"div",1),L.Ic(2,se,2,1,"div",2),L.Vb()),2&e){const e=L.kc();L.Cb(1),L.pc("ngIf",!e.issue.extendedFields||0===e.issue.extendedFields.length),L.Cb(1),L.pc("ngIf",e.issue.extendedFields&&e.issue.extendedFields.length>0)}}let ne=(()=>{class e{constructor(){this.fontSizeSmall=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=L.Kb({type:e,selectors:[["app-extended-fields"]],inputs:{issue:"issue"},decls:1,vars:1,consts:[[4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"alert","alert-warning"],["icon","exclamation-triangle",1,"text-warning"],[1,"mt-5"],[4,"ngFor","ngForOf"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"text-muted","text-uppercase"],[3,"ngClass","data"]],template:function(e,t){1&e&&L.Ic(0,ie,3,2,"div",0),2&e&&L.pc("ngIf",t.issue)},directives:[i.l,W.a,i.k,F.a,i.j],encapsulation:2}),e})();function ce(e,t){if(1&e){const e=L.Xb();L.Wb(0,"button",12),L.ic("click",(function(){L.Bc(e);const t=L.kc(3);return t.hideDetails=!t.hideDetails})),L.Kc(1),L.Vb()}if(2&e){const e=L.kc(3);L.Cb(1),L.Mc(" ",e.hideDetails?"more ...":"... less"," ")}}function ae(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",3),L.Rb(1,"app-issue-navigation-menu",4),L.Wb(2,"button",5),L.ic("click",(function(){return L.Bc(e),L.kc(2).onClose()})),L.Rb(3,"fa-icon",6),L.Vb(),L.Wb(4,"span",7),L.Wb(5,"span",8),L.Kc(6),L.Vb(),L.Kc(7),L.Vb(),L.Ic(8,ce,2,1,"button",9),L.Wb(9,"div",10),L.Rb(10,"ngx-md",11),L.Vb(),L.Vb()}if(2&e){const e=L.kc(2);L.Cb(1),L.pc("issueKey",e.issue.key),L.Cb(5),L.Mc("",e.issue.key,":"),L.Cb(1),L.Mc(" ",e.issue.title," "),L.Cb(1),L.pc("ngIf",e.issue.description&&e.issue.description.length>0),L.Cb(1),L.pc("ngbCollapse",e.hideDetails),L.Cb(1),L.pc("data",e.issue.description)}}function oe(e,t){if(1&e){const e=L.Xb();L.Wb(0,"button",23),L.ic("click",(function(){return L.Bc(e),L.kc(3).showHideExtendedFields()})),L.Rb(1,"fa-icon",24),L.Vb()}if(2&e){const e=L.kc(3);L.Cb(1),L.pc("fixedWidth",!0)("icon",e.hideExtendedFields?"angle-double-right":"angle-double-down")}}function le(e,t){if(1&e&&(L.Wb(0,"span",8),L.Kc(1),L.Vb()),2&e){const e=L.kc(3);L.Cb(1),L.Mc(" ",e.filteredItems.length," ")}}function re(e,t){if(1&e){const e=L.Xb();L.Wb(0,"button",25),L.ic("click",(function(){L.Bc(e);const t=L.kc(3);return t.tasklistFilterVisible=!t.tasklistFilterVisible})),L.Rb(1,"fa-icon",26),L.Vb()}if(2&e){const e=L.kc(3);L.Cb(1),L.pc("icon",e.tasklistFilterVisible?"chevron-up":"filter")}}function de(e,t){if(1&e&&(L.Wb(0,"option",31),L.Kc(1),L.Vb()),2&e){const e=t.$implicit;L.pc("value",e.key),L.Cb(1),L.Mc(" ",e.key+" ("+e.count+")","")}}function ue(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",27),L.Wb(1,"select",28),L.ic("ngModelChange",(function(t){return L.Bc(e),L.kc(3).issueTypeFilter=t}))("change",(function(){return L.Bc(e),L.kc(3).onFilterChanged()})),L.Wb(2,"option",29),L.Kc(3,"ISSUE TYPE: All"),L.Vb(),L.Ic(4,de,2,2,"option",30),L.Vb(),L.Vb()}if(2&e){const e=L.kc(3);L.Cb(1),L.pc("ngModel",e.issueTypeFilter),L.Cb(3),L.pc("ngForOf",e.issueTypeStats)}}function be(e,t){if(1&e&&(L.Wb(0,"option",31),L.Kc(1),L.Vb()),2&e){const e=t.$implicit;L.pc("value",e.key),L.Cb(1),L.Mc(" ",e.key+" ("+e.count+")","")}}function pe(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",27),L.Wb(1,"select",28),L.ic("ngModelChange",(function(t){return L.Bc(e),L.kc(3).statusFilter=t}))("change",(function(){return L.Bc(e),L.kc(3).onFilterChanged()})),L.Wb(2,"option",29),L.Kc(3,"STATUS: All"),L.Vb(),L.Ic(4,be,2,2,"option",30),L.Vb(),L.Vb()}if(2&e){const e=L.kc(3);L.Cb(1),L.pc("ngModel",e.statusFilter),L.Cb(3),L.pc("ngForOf",e.statusStats)}}function he(e,t){if(1&e){const e=L.Xb();L.Wb(0,"button",39),L.ic("click",(function(){L.Bc(e);const t=L.kc().$implicit;return t.hideExtendedFields=!t.hideExtendedFields})),L.Rb(1,"fa-icon",24),L.Vb()}if(2&e){const e=L.kc().$implicit;L.Cb(1),L.pc("fixedWidth",!0)("icon",e.hideExtendedFields?"angle-right":"angle-down")}}function ge(e,t){if(1&e&&(L.Wb(0,"tr"),L.Wb(1,"td",43),L.Kc(2),L.Vb(),L.Wb(3,"td",44),L.Kc(4),L.Vb(),L.Vb()),2&e){const e=t.$implicit;L.Cb(2),L.Mc("",e.name,":"),L.Cb(2),L.Mc(" ",e.value," ")}}function fe(e,t){if(1&e&&(L.Wb(0,"div",40),L.Wb(1,"table",41),L.Ic(2,ge,5,2,"tr",42),L.Vb(),L.Vb()),2&e){const e=L.kc().$implicit;L.Cb(2),L.pc("ngForOf",e.extendedFields)}}const me=function(e){return{"ml-4":e}};function Ie(e,t){if(1&e&&(L.Wb(0,"div",32),L.Ic(1,he,2,2,"button",33),L.Wb(2,"small",34),L.Kc(3),L.Vb(),L.Wb(4,"small",35),L.Wb(5,"span",36),L.Kc(6),L.Vb(),L.Kc(7),L.Vb(),L.Wb(8,"div",37),L.Wb(9,"div"),L.Kc(10),L.Vb(),L.Ic(11,fe,3,1,"div",38),L.Vb(),L.Vb()),2&e){const e=t.$implicit,s=L.kc(3);L.Cb(1),L.pc("ngIf",s.hasExtendedFields),L.Cb(2),L.Lc(e.status),L.Cb(3),L.Lc(e.issueType),L.Cb(1),L.Mc(": ",e.key," "),L.Cb(1),L.pc("ngClass",L.tc(7,me,s.hasExtendedFields)),L.Cb(2),L.Lc(e.title),L.Cb(1),L.pc("ngIf",!e.hideExtendedFields&&e.extendedFields&&e.extendedFields.length>0)}}function ye(e,t){if(1&e&&(L.Wb(0,"div"),L.Wb(1,"div",13),L.Wb(2,"div",14),L.Wb(3,"div",15),L.Ic(4,oe,2,2,"button",16),L.Wb(5,"b",17),L.Ic(6,le,2,1,"span",18),L.Kc(7),L.Vb(),L.Ic(8,re,2,1,"button",19),L.Vb(),L.Wb(9,"div",20),L.Ic(10,ue,5,2,"div",21),L.Ic(11,pe,5,2,"div",21),L.Vb(),L.Vb(),L.Ic(12,Ie,12,9,"div",22),L.Vb(),L.Vb()),2&e){const e=L.kc(2);L.Cb(4),L.pc("ngIf",e.hasExtendedFields),L.Cb(2),L.pc("ngIf",e.filteredItems.length>0),L.Cb(1),L.Mc(" record",e.filteredItems.length>1?"s":"",""),L.Cb(1),L.pc("ngIf",e.issueTypeStats&&e.issueTypeStats.length>1||e.statusStats&&e.statusStats.length>1),L.Cb(1),L.pc("ngbCollapse",!e.tasklistFilterVisible),L.Cb(1),L.pc("ngIf",e.issueTypeStats&&e.issueTypeStats.length>1),L.Cb(1),L.pc("ngIf",e.statusStats&&e.statusStats.length>1),L.Cb(1),L.pc("ngForOf",e.filteredItems)}}function ke(e,t){1&e&&(L.Wb(0,"div",45),L.Kc(1," No detail records found. "),L.Vb())}function Ce(e,t){if(1&e&&(L.Wb(0,"div"),L.Ic(1,ae,11,6,"div",1),L.Ic(2,ye,13,8,"div",0),L.Ic(3,ke,2,0,"div",2),L.Vb()),2&e){const e=L.kc();L.Cb(1),L.pc("ngIf",e.showIssue),L.Cb(1),L.pc("ngIf",e.filteredItems&&e.filteredItems.length>0),L.Cb(1),L.pc("ngIf",e.filteredItems&&0===e.filteredItems.length)}}let je=(()=>{class e{constructor(e){this.store$=e,this.close=new L.n,this.tasklistFilterVisible=!1,this.childIssueType="",this.hasExtendedFields=!1,this.hideDetails=!0,this.hideExtendedFields=!0,this.statusFilter="all",this.issueTypeFilter="all"}set issue(e){this._issue=e,this.loadDetails()}get issue(){return this._issue}ngOnInit(){this.subtasks$=this.store$.select(e=>e.issue.subtasks).pipe(Object(V.a)(e=>e)).subscribe(e=>{this.subtasks=e,this.subtasks.forEach(e=>e.hideExtendedFields=this.hideExtendedFields),this.onFilterChanged(),this.populateStatistics()})}ngOnDestroy(){this.subtasks$&&this.subtasks$.unsubscribe()}loadDetails(){if(this.subtasks=null,this.issue&&this.issue.projectConfig&&this.issue.projectConfig.subTaskIssueTypes&&this.issue.projectConfig.subTaskIssueTypes.length>0){const e=a.join(a.map(this.issue.projectConfig.subTaskIssueTypes,e=>`'${e.name}'`),","),t=a.spread(a.union)(a.map(this.issue.projectConfig.subTaskIssueTypes,"list"));this.hasExtendedFields=t&&t.length>0,this.store$.dispatch(new b({issueKey:this.issue.key,subTaskIssueTypes:e,extendedFields:t}))}}populateStatistics(){const e=a.mapValues(a.groupBy(a.map(this.subtasks,"status")),e=>e.length);this.statusStats=Object.keys(e).map(t=>({key:t,count:e[t]}));const t=a.mapValues(a.groupBy(a.map(this.subtasks,"issueType")),e=>e.length);this.issueTypeStats=Object.keys(t).map(e=>({key:e,count:t[e]}))}onFilterChanged(){this.filteredItems=a.filter(this.subtasks,e=>!(this.statusFilter&&"all"!==this.statusFilter&&e.status!==this.statusFilter||this.issueTypeFilter&&"all"!==this.issueTypeFilter&&e.issueType!==this.issueTypeFilter)),this.filteredItems=a.orderBy(this.filteredItems,["issueType","status"])}showHideExtendedFields(){this.hideExtendedFields=!this.hideExtendedFields,this.subtasks&&this.subtasks.forEach(e=>e.hideExtendedFields=this.hideExtendedFields)}onClose(){this.close.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(L.Qb(n.h))},e.\u0275cmp=L.Kb({type:e,selectors:[["app-task-list"]],inputs:{issue:"issue",showIssue:"showIssue"},outputs:{close:"close"},decls:1,vars:1,consts:[[4,"ngIf"],["class","alert bg-light pl-0 mb-0","style","font-size:medium;",4,"ngIf"],["class","alert alert-warning mt-2",4,"ngIf"],[1,"alert","bg-light","pl-0","mb-0",2,"font-size","medium"],[1,"float-right",3,"issueKey"],[1,"btn","btn-sm","btn-link","mr-2",3,"click"],["icon","chevron-left","size","lg"],[1,"pt-2"],[1,"mr-1"],["class","btn btn-link btn-sm",3,"click",4,"ngIf"],[1,"small","p-4",3,"ngbCollapse"],[3,"data"],[1,"btn","btn-link","btn-sm",3,"click"],[1,"list-group","list-group-flush","list-group-flush-compact"],[1,"list-group-item","list-group-item-light"],[1,"clearfix"],["class","btn btn-sm btn-link text-muted pl-0","title","Show/hide details",3,"click",4,"ngIf"],[1,"mt-1"],["class","mr-1",4,"ngIf"],["class","btn btn-link btn-sm float-right","title","Filters",3,"click",4,"ngIf"],[1,"row","ml-3",3,"ngbCollapse"],["class","col-md-6",4,"ngIf"],["class","list-group-item",4,"ngFor","ngForOf"],["title","Show/hide details",1,"btn","btn-sm","btn-link","text-muted","pl-0",3,"click"],["size","sm",3,"fixedWidth","icon"],["title","Filters",1,"btn","btn-link","btn-sm","float-right",3,"click"],["size","sm",3,"icon"],[1,"col-md-6"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"list-group-item"],["class","btn btn-link btn-sm text-muted pl-0 pt-0","title","Show/hide details",3,"click",4,"ngIf"],[1,"float-right","badge","badge-light","font-weight-light","text-uppercase"],[1,"text-muted"],[1,"text-uppercase"],[3,"ngClass"],["style","overflow: auto;","class","alert mt-2 p-0 rounded-0 border-0",4,"ngIf"],["title","Show/hide details",1,"btn","btn-link","btn-sm","text-muted","pl-0","pt-0",3,"click"],[1,"alert","mt-2","p-0","rounded-0","border-0",2,"overflow","auto"],[1,"table","table-small","m-0","border-0","bg-light","extended-fields"],[4,"ngFor","ngForOf"],["width","10%",1,"p-1","text-nowrap","text-muted"],["Markdown","",1,"p-1","text-dark"],[1,"alert","alert-warning","mt-2"]],template:function(e,t){1&e&&L.Ic(0,Ce,4,3,"div",0),2&e&&L.pc("ngIf",t.issue)},directives:[i.l,B.a,W.a,G.b,F.a,i.k,K.k,K.f,K.i,K.j,K.l,i.j],encapsulation:2}),e})();const ve=["content"];function Oe(e,t){if(1&e&&L.Rb(0,"app-extended-fields",17),2&e){const e=L.kc(2);L.pc("issue",e.issue)}}function Le(e,t){if(1&e&&L.Rb(0,"fa-icon",19),2&e){const e=L.kc(3);L.pc("icon",e.allEpicChildrenVisible?"angle-double-down":"angle-double-right")("fixedWidth",!0)}}function Se(e,t){1&e&&(L.Wb(0,"div",23),L.Kc(1," There are no issues in this epic "),L.Vb())}function Ve(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",33),L.Rb(1,"app-issue-navigation-menu",34),L.Wb(2,"div",35),L.Kc(3),L.Vb(),L.Rb(4,"i",36),L.Wb(5,"a",37),L.ic("click",(function(){L.Bc(e);const s=t.$implicit;return L.kc(8).selectEpicIssue(s)})),L.Kc(6),L.Vb(),L.Kc(7),L.Vb()}if(2&e){const e=t.$implicit;L.Cb(1),L.pc("issueKey",e.key),L.Cb(2),L.Mc(" ",e.duedate," "),L.Cb(1),L.Eb(e.icon),L.Cb(2),L.Lc(e.key),L.Cb(1),L.Mc(" ",e.title," ")}}function We(e,t){if(1&e&&(L.Wb(0,"div",31),L.Ic(1,Ve,8,6,"div",32),L.Vb()),2&e){const e=L.kc().$implicit;L.Cb(1),L.pc("ngForOf",e.children)}}const we=function(e){return{"w-100 btn-light ":e}};function Fe(e,t){if(1&e&&(L.Wb(0,"div"),L.Wb(1,"div",27),L.Wb(2,"button",28),L.ic("click",(function(){const e=t.$implicit;return e.visible=!e.visible})),L.Rb(3,"fa-icon",19),L.Wb(4,"span",29),L.Kc(5),L.Vb(),L.Vb(),L.Vb(),L.Ic(6,We,2,1,"div",30),L.Vb()),2&e){const e=t.$implicit;L.Cb(2),L.pc("ngClass",L.tc(6,we,e.visible)),L.Cb(1),L.pc("icon",e.visible?"angle-down":"angle-right")("fixedWidth",!0),L.Cb(2),L.Nc("",e.label," / ",e.total,""),L.Cb(1),L.pc("ngIf",e.visible)}}function xe(e,t){if(1&e&&(L.Wb(0,"div"),L.Ic(1,Fe,7,8,"div",24),L.Wb(2,"a",25),L.Kc(3," Storyboard view "),L.Rb(4,"fa-icon",26),L.Vb(),L.Vb()),2&e){const e=L.kc(5);L.Cb(1),L.pc("ngForOf",e.groupedEpicChildren)}}function $e(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div"),L.Wb(1,"app-task-list",38),L.ic("close",(function(){return L.Bc(e),L.kc(5).resetSelectedEpicIssue()})),L.Vb(),L.Vb()}if(2&e){const e=L.kc(5);L.Cb(1),L.pc("issue",e.selectedEpicIssue)("showIssue",!0)}}function Ee(e,t){if(1&e&&(L.Wb(0,"div"),L.Ic(1,xe,5,1,"div",22),L.Ic(2,$e,2,2,"div",22),L.Vb()),2&e){const e=L.kc(4);L.Cb(1),L.pc("ngIf",!e.selectedEpicIssue),L.Cb(1),L.pc("ngIf",e.selectedEpicIssue)}}function Re(e,t){if(1&e&&(L.Wb(0,"div",20),L.Ic(1,Se,2,0,"div",21),L.Ic(2,Ee,3,2,"div",22),L.Vb()),2&e){const e=L.kc(3);L.Cb(1),L.pc("ngIf",e.groupedEpicChildren&&0===e.groupedEpicChildren.length),L.Cb(1),L.pc("ngIf",e.groupedEpicChildren&&e.groupedEpicChildren.length>0)}}function Te(e,t){if(1&e){const e=L.Xb();L.Wb(0,"li",13),L.Wb(1,"a",14),L.ic("click",(function(){return L.Bc(e),L.kc(2).toggleAllEpicChildren()})),L.Ic(2,Le,1,2,"fa-icon",18),L.Kc(3," Issues in epic "),L.Vb(),L.Ic(4,Re,3,2,"ng-template",15),L.Vb()}if(2&e){const e=L.kc(2);L.pc("ngbNavItem",1),L.Cb(2),L.pc("ngIf",e.groupedEpicChildren&&e.groupedEpicChildren.length>1)}}function Pe(e,t){if(1&e&&L.Rb(0,"fa-icon",19),2&e){const e=L.kc(3);L.pc("icon",e.allRelatedIssuesVisible?"angle-double-down":"angle-double-right")("fixedWidth",!0)}}function ze(e,t){if(1&e&&(L.Wb(0,"span"),L.Kc(1),L.Vb()),2&e){const e=L.kc().$implicit;L.Cb(1),L.Mc(" / ",e.children.length,"")}}function Ke(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",40),L.Rb(1,"app-issue-navigation-menu",34),L.Wb(2,"div",35),L.Kc(3),L.Vb(),L.Rb(4,"i",36),L.Wb(5,"a",37),L.ic("click",(function(){L.Bc(e);const s=t.$implicit;return L.kc(7).selectRelatedIssue(s)})),L.Kc(6),L.Vb(),L.Kc(7),L.Vb()}if(2&e){const e=t.$implicit;L.pc("title",e.issueType),L.Cb(1),L.pc("issueKey",e.key),L.Cb(2),L.Mc(" ",e.status," "),L.Cb(1),L.Eb(e.icon),L.Cb(2),L.Lc(e.key),L.Cb(1),L.Mc(" ",e.title," ")}}function Ne(e,t){if(1&e&&(L.Wb(0,"div",31),L.Ic(1,Ke,8,7,"div",39),L.Vb()),2&e){const e=L.kc().$implicit;L.Cb(1),L.pc("ngForOf",e.children)}}function Me(e,t){if(1&e&&(L.Wb(0,"div"),L.Wb(1,"div",27),L.Wb(2,"button",28),L.ic("click",(function(){const e=t.$implicit;return e.visible=!e.visible})),L.Rb(3,"fa-icon",19),L.Wb(4,"span",29),L.Kc(5),L.Ic(6,ze,2,1,"span",22),L.Vb(),L.Vb(),L.Vb(),L.Ic(7,Ne,2,1,"div",30),L.Vb()),2&e){const e=t.$implicit;L.Cb(2),L.pc("ngClass",L.tc(6,we,e.visible)),L.Cb(1),L.pc("icon",e.visible?"angle-down":"angle-right")("fixedWidth",!0),L.Cb(2),L.Mc("",e.label," "),L.Cb(1),L.pc("ngIf",e.children),L.Cb(1),L.pc("ngIf",e.visible)}}function De(e,t){if(1&e&&(L.Wb(0,"div"),L.Ic(1,Me,8,8,"div",24),L.Vb()),2&e){const e=L.kc(4);L.Cb(1),L.pc("ngForOf",e.groupedRelatedLinks)}}function Be(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div"),L.Wb(1,"app-task-list",38),L.ic("close",(function(){return L.Bc(e),L.kc(4).resetSelectedRelatedIssue()})),L.Vb(),L.Vb()}if(2&e){const e=L.kc(4);L.Cb(1),L.pc("issue",e.selectedRelatedIssue)("showIssue",!0)}}function Ue(e,t){if(1&e&&(L.Wb(0,"div",20),L.Ic(1,De,2,1,"div",22),L.Ic(2,Be,2,2,"div",22),L.Vb()),2&e){const e=L.kc(3);L.Cb(1),L.pc("ngIf",!e.selectedRelatedIssue),L.Cb(1),L.pc("ngIf",e.selectedRelatedIssue)}}function Xe(e,t){if(1&e){const e=L.Xb();L.Wb(0,"li",13),L.Wb(1,"a",14),L.ic("click",(function(){return L.Bc(e),L.kc(2).toggleAllRelatedIssues()})),L.Ic(2,Pe,1,2,"fa-icon",18),L.Kc(3," Related "),L.Vb(),L.Ic(4,Ue,3,2,"ng-template",15),L.Vb()}if(2&e){const e=L.kc(2);L.pc("ngbNavItem",2),L.Cb(2),L.pc("ngIf",e.groupedRelatedLinks.length>1)}}function Ae(e,t){if(1&e&&(L.Wb(0,"div",20),L.Rb(1,"app-task-list",41),L.Vb()),2&e){const e=L.kc(2);L.Cb(1),L.pc("issue",e.selectedIssue)("showIssue",!1)}}const Qe=function(e){return{small:e}};function He(e,t){if(1&e){const e=L.Xb();L.Wb(0,"as-split",2),L.ic("gutterDblClick",(function(){return L.Bc(e),L.kc().toggleFullscreen()}))("dragEnd",(function(t){return L.Bc(e),L.kc().dragEnd(t)})),L.Wb(1,"as-split-area",3),L.Wb(2,"div",4),L.Rb(3,"ngx-md",5),L.Ic(4,Oe,1,1,"app-extended-fields",6),L.Vb(),L.Vb(),L.Wb(5,"as-split-area",7),L.Wb(6,"button",8),L.ic("click",(function(){return L.Bc(e),L.kc().toggleFullscreen()})),L.Rb(7,"fa-icon",9),L.Vb(),L.Wb(8,"ul",10,11),L.ic("activeIdChange",(function(t){return L.Bc(e),L.kc().selectedTab=t})),L.Ic(10,Te,5,2,"li",12),L.Ic(11,Xe,5,2,"li",12),L.Wb(12,"li",13),L.Wb(13,"a",14),L.ic("click",(function(){return L.Bc(e),L.kc().reloadSubtasks()})),L.Kc(14,"Task breakup"),L.Vb(),L.Ic(15,Ae,2,2,"ng-template",15),L.Vb(),L.Vb(),L.Rb(16,"div",16),L.Vb(),L.Vb()}if(2&e){const e=L.Ac(9),t=L.kc();L.Cb(1),L.pc("size",t.columns[0].size),L.Cb(2),L.pc("data",t.issue.description),L.Cb(1),L.pc("ngIf",t.leftPaneSize>0),L.Cb(1),L.pc("size",t.columns[1].size)("ngClass",L.tc(13,Qe,0!==t.columns[0].size)),L.Cb(2),L.pc("icon",0===t.columns[0].size?"compress-arrows-alt":"expand-arrows-alt")("fixedWidth",!0),L.Cb(1),L.pc("activeId",t.selectedTab)("destroyOnHide",!1),L.Cb(2),L.pc("ngIf",t.issue.issueType===t.localNodeType.Epic),L.Cb(1),L.pc("ngIf",t.groupedRelatedLinks&&t.groupedRelatedLinks.length>0),L.Cb(1),L.pc("ngbNavItem",3),L.Cb(4),L.pc("ngbNavOutlet",e)}}let qe=(()=>{class e{constructor(e,t){this.cdRef=e,this.store$=t,this.allRelatedIssuesVisible=!0,this.allEpicChildrenVisible=!0,this.contentHeight=0,this.selectedTab=1,this.leftPaneSize=60,this.columns=[{visible:!0,size:60},{visible:!0,size:40}],this.resetSelectedRelatedIssue=()=>this.selectedRelatedIssue=null,this.resetSelectedEpicIssue=()=>this.selectedEpicIssue=null,this.localNodeType=C.a}ngOnInit(){this.selectedIssue$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(V.a)(e=>e)).subscribe(e=>{this.issue=e,this.selectedRelatedIssue=null,this.selectedEpicIssue=null,this.issue.relatedLinksLoaded&&!this.groupedRelatedLinks&&(this.groupedRelatedLinks=Object(o.a)(this.issue.relatedLinks,"linkType"),this.issue.relatedLinksCount=this.groupedRelatedLinks.length,this.selectedTab=this.groupedRelatedLinks.length>0?2:3,this.toggleAllRelatedIssues()),this.issue.issueType===C.a.Epic&&this.issue.epicChildrenLoaded&&this.groupEpicChildren("status")})}ngOnDestroy(){this.epicChildrenLoaded$&&this.epicChildrenLoaded$.unsubscribe(),this.selectedIssue$&&this.selectedIssue$.unsubscribe()}ngAfterViewInit(){this.contentHeight=this.elementView.nativeElement.offsetParent.clientHeight-134,this.cdRef.detectChanges()}dragEnd(e){this.adjustPaneSize(e.sizes[0])}adjustPaneSize(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?60:0)}selectRelatedIssue(e){this.selectedRelatedIssue=e,this.selectedRelatedIssue.projectConfig=this.issue.projectConfig}selectEpicIssue(e){this.selectedEpicIssue=e,this.selectedEpicIssue.projectConfig=this.issue.projectConfig}groupEpicChildren(e){if(this.selectedTab=1,this.issue&&!this.groupedEpicChildren){const t=this.issue.epicChildren;t&&t.length>0&&(this.groupedEpicChildren=Object(o.a)(t,e)),this.toggleAllEpicChildren()}}toggleAllEpicChildren(){this.selectedIssue=null,this.allEpicChildrenVisible=!this.allEpicChildrenVisible,this.groupedEpicChildren&&this.groupedEpicChildren.forEach(e=>e.visible=1===this.groupedEpicChildren.length||this.allEpicChildrenVisible)}toggleAllRelatedIssues(){this.selectedIssue=null,this.allRelatedIssuesVisible=!this.allRelatedIssuesVisible,this.groupedRelatedLinks&&this.groupedRelatedLinks.length>0&&this.groupedRelatedLinks.forEach(e=>e.visible=1===this.groupedRelatedLinks.length||this.allRelatedIssuesVisible)}reloadSubtasks(){this.selectedEpicIssue=null,this.selectedRelatedIssue=null,this.selectedIssue=this.issue}}return e.\u0275fac=function(t){return new(t||e)(L.Qb(L.h),L.Qb(n.h))},e.\u0275cmp=L.Kb({type:e,selectors:[["app-workbench"]],viewQuery:function(e,t){var s;1&e&&L.Oc(ve,!0),2&e&&L.zc(s=L.jc())&&(t.elementView=s.first)},decls:3,vars:3,consts:[["content",""],["direction","horizontal",3,"gutterDblClick","dragEnd",4,"ngIf"],["direction","horizontal",3,"gutterDblClick","dragEnd"],[3,"size"],[1,"mr-3","alert","bg-light",2,"overflow","auto"],[3,"data"],[3,"issue",4,"ngIf"],[3,"size","ngClass"],["title","expand/collapse pane",1,"btn","btn-sm","btn-link","text-muted","float-right",3,"click"],[3,"icon","fixedWidth"],["ngbNav","",1,"nav-tabs",3,"activeId","destroyOnHide","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngIf"],[3,"ngbNavItem"],["ngbNavLink","",3,"click"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[3,"issue"],["size","sm",3,"icon","fixedWidth",4,"ngIf"],["size","sm",3,"icon","fixedWidth"],[1,"pl-2","pr-2","pb-2"],["class","alert alert-warning",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-warning"],[4,"ngFor","ngForOf"],["routerLink","../storyboard",1,"btn","btn-light","btn-sm","text-primary","mt-4"],["icon","chevron-right","size","sm"],[1,"text-muted","text-uppercase","mt-1","mb-1"],[1,"btn","btn-sm","btn-link","text-left","text-dark",3,"ngClass","click"],[1,"ml-2"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["class","ml-3 p-1 border-bottom",4,"ngFor","ngForOf"],[1,"ml-3","p-1","border-bottom"],[1,"float-right",3,"issueKey"],[1,"badge","badge-light","font-weight-normal","text-uppercase","float-right","mt-1"],[1,"mr-1"],[1,"text-primary","mr-2",3,"click"],[3,"issue","showIssue","close"],["class","ml-3 p-1 border-bottom",3,"title",4,"ngFor","ngForOf"],[1,"ml-3","p-1","border-bottom",3,"title"],[3,"issue","showIssue"]],template:function(e,t){1&e&&(L.Wb(0,"div",null,0),L.Ic(2,He,17,15,"as-split",1),L.Vb()),2&e&&(L.Hc("height",t.contentHeight,"px"),L.Cb(2),L.pc("ngIf",t.issue))},directives:[i.l,Y.c,Y.b,F.a,i.j,W.a,G.j,G.l,G.m,G.k,G.o,ne,i.k,w.f,B.a,je],encapsulation:2}),e})();var Je=s("iLqC"),Ge=s("Ewkv"),Ye=s("lVkt"),_e=s("/RsI"),Ze=s("NGyg");function et(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div"),L.Wb(1,"input",11),L.ic("ngModelChange",(function(t){return L.Bc(e),L.kc(3).includeEpicChildren=t}))("change",(function(){return L.Bc(e),L.kc(3).plotIssuesOnStoryboard()})),L.Vb(),L.Wb(2,"b",12),L.Kc(3),L.Vb(),L.Kc(4," issues in this epic "),L.Vb()}if(2&e){const e=L.kc(3);L.Cb(1),L.pc("ngModel",e.includeEpicChildren),L.Cb(2),L.Lc(e.storyboardItem.epicChildren.length)}}function tt(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div"),L.Wb(1,"input",11),L.ic("ngModelChange",(function(t){return L.Bc(e),L.kc(3).includeRelatedIssues=t}))("change",(function(){return L.Bc(e),L.kc(3).plotIssuesOnStoryboard()})),L.Vb(),L.Wb(2,"b",12),L.Kc(3),L.Vb(),L.Kc(4," related issues "),L.Vb()}if(2&e){const e=L.kc(3);L.Cb(1),L.pc("ngModel",e.includeRelatedIssues),L.Cb(2),L.Lc(e.storyboardItem.relatedLinks.length)}}function st(e,t){if(1&e&&(L.Ub(0),L.Ic(1,et,5,2,"div",4),L.Ic(2,tt,5,2,"div",4),L.Tb()),2&e){const e=L.kc(2);L.Cb(1),L.pc("ngIf",e.storyboardItem.epicChildren&&e.storyboardItem.epicChildren.length>0),L.Cb(1),L.pc("ngIf",e.storyboardItem.relatedLinks&&e.storyboardItem.relatedLinks.length>0)}}function it(e,t){if(1&e&&(L.Wb(0,"div",14),L.Wb(1,"span",15),L.Kc(2),L.Vb(),L.Kc(3," unplanned issues. "),L.Vb()),2&e){const e=L.kc(3);L.Cb(2),L.Lc(e.storyboardItem.metadata.backlogCount)}}function nt(e,t){if(1&e&&(L.Wb(0,"div"),L.Wb(1,"span",15),L.Kc(2),L.Vb(),L.Kc(3," issues in unknown functional areas. "),L.Vb()),2&e){const e=L.kc(3);L.Cb(2),L.Lc(e.storyboardItem.metadata.noComponentCount)}}function ct(e,t){if(1&e&&(L.Ub(0),L.Ic(1,it,4,1,"div",13),L.Ic(2,nt,4,1,"div",4),L.Tb()),2&e){const e=L.kc(2);L.Cb(1),L.pc("ngIf",e.storyboardItem.metadata.backlogCount>0),L.Cb(1),L.pc("ngIf",e.storyboardItem.metadata.noComponentCount>0)}}function at(e,t){if(1&e){const e=L.Xb();L.Wb(0,"p-multiSelect",16),L.ic("ngModelChange",(function(t){return L.Bc(e),L.kc(2).selectedStatuses=t}))("onChange",(function(t){return L.Bc(e),L.kc(2).onSelectedStatusChange(t)})),L.Vb()}if(2&e){const e=L.kc(2);L.pc("options",e.statusLookup)("ngModel",e.selectedStatuses)}}const ot=function(){return["far","chart-bar"]};function lt(e,t){if(1&e){const e=L.Xb();L.Wb(0,"button",17),L.ic("click",(function(){return L.Bc(e),L.kc(2).showStatistics=!0})),L.Rb(1,"fa-icon",18),L.Vb()}2&e&&(L.Cb(1),L.pc("icon",L.sc(1,ot)))}function rt(e,t){if(1&e){const e=L.Xb();L.Wb(0,"p-dialog",19),L.ic("visibleChange",(function(t){return L.Bc(e),L.kc(2).showStatistics=t})),L.Rb(1,"app-statistics",20),L.Vb()}if(2&e){const e=L.kc(2);L.pc("visible",e.showStatistics),L.Cb(1),L.pc("statusStats",e.storyboardItem.statistics.status)("issueTypeStats",e.storyboardItem.statistics.issueTypes)("componentStats",e.storyboardItem.statistics.components)}}function dt(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",1),L.Wb(1,"div",2),L.Wb(2,"div",3),L.Ic(3,st,3,2,"ng-container",4),L.Vb(),L.Wb(4,"div",3),L.Ic(5,ct,3,2,"ng-container",4),L.Vb(),L.Wb(6,"div",5),L.Ic(7,at,1,2,"p-multiSelect",6),L.Vb(),L.Wb(8,"div",7),L.Ic(9,lt,2,2,"button",8),L.Vb(),L.Vb(),L.Wb(10,"app-storyboard-renderer",9),L.ic("fieldValueChange",(function(t){return L.Bc(e),L.kc().onFieldValueChanged(t)})),L.Vb(),L.Ic(11,rt,2,4,"p-dialog",10),L.Vb()}if(2&e){const e=L.kc();L.Cb(3),L.pc("ngIf",e.storyboardItem.epicChildren&&e.storyboardItem.epicChildren.length>0||e.storyboardItem.relatedLinks&&e.storyboardItem.relatedLinks.length>0),L.Cb(2),L.pc("ngIf",e.storyboardItem.metadata&&(e.storyboardItem.metadata.backlogCount>0||e.storyboardItem.metadata.noComponentCount>0)),L.Cb(2),L.pc("ngIf",e.statusLookup&&e.statusLookup.length>0),L.Cb(2),L.pc("ngIf",e.storyboardItem.epicChildren&&e.storyboardItem.epicChildren.length>0||e.storyboardItem.relatedLinks&&e.storyboardItem.relatedLinks.length>0),L.Cb(1),L.pc("storyboardItem",e.storyboardItem),L.Cb(1),L.pc("ngIf",e.storyboardItem&&e.storyboardItem.statistics)}}let ut=(()=>{class e{constructor(e){this.store$=e,this.selectedStatuses=[],this.statusLookup=[],this.includeRelatedIssues=!1,this.relatedIssuesIncluded=!1,this.includeEpicChildren=!1,this.epicChildrenIncluded=!1,this.showStatistics=!1,this.filterByStatus=(e,t)=>t&&t.length>0?a.filter(e,e=>void 0!==a.find(t,t=>t===e.status)):e}ngOnInit(){this.selectedItem$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(V.a)(e=>e)).subscribe(e=>{this.storyboardItem=a.pick(e,a.union(C.r,["relatedLinks","epicChildren"])),this.storyboardItem.children=[],this.storyboardItem.metadata=Object(Je.b)(),e.issueType===C.a.Epic?this.includeEpicChildren=!0:this.includeRelatedIssues=!0,this.plotIssuesOnStoryboard()})}ngOnDestroy(){this.selectedItem$&&this.selectedItem$.unsubscribe()}plotIssuesOnStoryboard(){this.storyboardItem.children=[],this.storyboardItem.metadata=Object(Je.b)();const e=a.map(this.selectedStatuses,"key");if(this.includeEpicChildren&&this.storyboardItem.epicChildren&&this.storyboardItem.epicChildren.length>0){this.epicChildrenIncluded=!0;const t=this.filterByStatus(this.storyboardItem.epicChildren,e);this.storyboardItem.children=a.union(this.storyboardItem.children,t),Object(Je.c)(this.storyboardItem.metadata,Object(Je.a)(t))}if(this.includeRelatedIssues&&this.storyboardItem.relatedLinks&&this.storyboardItem.relatedLinks.length>0){this.relatedIssuesIncluded=!0;const t=this.filterByStatus(this.storyboardItem.relatedLinks,e);this.storyboardItem.children=a.union(this.storyboardItem.children,t),Object(Je.c)(this.storyboardItem.metadata,Object(Je.a)(t))}this.storyboardItem.statistics=Object(Je.d)(this.storyboardItem),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}onFieldValueChanged(e){this.store$.dispatch(new y(e))}onSelectedStatusChange(e){this.plotIssuesOnStoryboard()}}return e.\u0275fac=function(t){return new(t||e)(L.Qb(n.h))},e.\u0275cmp=L.Kb({type:e,selectors:[["app-storyboard"]],decls:1,vars:1,consts:[["class","pr-3",4,"ngIf"],[1,"pr-3"],[1,"row","small"],[1,"col-md-4","mb-3"],[4,"ngIf"],[1,"col-md-3"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1"],["class","btn btn-link",3,"click",4,"ngIf"],[3,"storyboardItem","fieldValueChange"],["header","Statistics","position","right","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"badge","badge-success","ml-1"],["class","mr-4",4,"ngIf"],[1,"mr-4"],[1,"badge","badge-warning"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],[1,"btn","btn-link",3,"click"],["size","lg",3,"icon"],["header","Statistics","position","right",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(e,t){1&e&&L.Ic(0,dt,12,6,"div",0),2&e&&L.pc("ngIf",t.storyboardItem)},directives:[i.l,Ge.a,K.a,K.f,K.i,Ye.a,W.a,_e.a,Ze.a],encapsulation:2}),e})();var bt=s("snw9"),pt=s("mrSG"),ht=s("eIep"),gt=s("JIr8"),ft=s("vkgz"),mt=s("LRne"),It=s("F2Ol");let yt=(()=>{class e{constructor(e,t,s){this.actions$=e,this.jiraService=t,this.cachingService=s,this.loadPrimaryIssue=this.actions$.pipe(Object(bt.d)(l.LoadPrimaryIssue),Object(ht.a)(e=>this.getIssueDetails(e.payload).pipe(Object(M.a)(e=>({type:l.LoadPrimaryIssueSuccess,payload:e})),Object(gt.a)(()=>Object(mt.a)({type:l.LoadPrimaryIssueFailed}))))),this.loadPrimaryIssueEpicChildren=this.actions$.pipe(Object(bt.d)(l.LoadPrimaryIssueEpicChildren),Object(ht.a)(e=>this.jiraService.executeJql(`'epic Link'=${e.payload}`,0,100,C.l,"epic-children.json").pipe(Object(M.a)(e=>({type:l.LoadPrimaryIssueEpicChildrenSuccess,payload:e})),Object(gt.a)(()=>Object(mt.a)({type:l.LoadPrimaryIssueEpicChildrenFailed}))))),this.loadPrimaryIssueRelatedLinks=this.actions$.pipe(Object(bt.d)(l.LoadPrimaryIssueRelatedLinks),Object(ht.a)(e=>this.jiraService.executeJql(`key in (${a.join(e.payload,",")})`,0,100,C.l,"linked-issues.json").pipe(Object(M.a)(e=>({type:l.LoadPrimaryIssueRelatedLinksSuccess,payload:e})),Object(gt.a)(()=>Object(mt.a)({type:l.LoadPrimaryIssueRelatedLinksFailed}))))),this.loadSelectedIssue=this.actions$.pipe(Object(bt.d)(l.LoadSelectedIssue),Object(ht.a)(e=>this.getIssueDetails(e.payload).pipe(Object(M.a)(e=>({type:l.LoadSelectedIssueSuccess,payload:e})),Object(gt.a)(()=>Object(mt.a)({type:l.LoadSelectedIssueFailed}))))),this.loadSelectedIssueEpicChildren=this.actions$.pipe(Object(bt.d)(l.LoadSelectedIssueEpicChildren),Object(ht.a)(e=>this.jiraService.executeJql(`'epic Link'=${e.payload}`,0,100,C.l,"epic-children.json").pipe(Object(M.a)(e=>({type:l.LoadSelectedIssueEpicChildrenSuccess,payload:e})),Object(gt.a)(()=>Object(mt.a)({type:l.LoadSelectedIssueEpicChildrenFailed}))))),this.loadSelectedIssueRelatedLinks=this.actions$.pipe(Object(bt.d)(l.LoadSelectedIssueRelatedLinks),Object(ht.a)(e=>this.jiraService.executeJql(`key in (${a.join(e.payload,",")})`,0,100,C.l,"linked-issues.json").pipe(Object(M.a)(e=>({type:l.LoadSelectedIssueRelatedLinksSuccess,payload:e})),Object(gt.a)(()=>Object(mt.a)({type:l.LoadSelectedIssueRelatedLinksFailed}))))),this.loadSubtasks=this.actions$.pipe(Object(bt.d)(l.LoadSubtasks),Object(ht.a)(e=>this.jiraService.executeJql(`issuetype in (${e.payload.subTaskIssueTypes}) AND parent=${e.payload.issueKey}`,0,100,a.map(e.payload.extendedFields,"id"),"test-cases.json").pipe(Object(M.a)(t=>({type:l.LoadSubtasksSuccess,payload:{result:t,extendedFields:e.payload.extendedFields}})),Object(gt.a)(()=>Object(mt.a)({type:l.LoadSubtasksFailed}))))),this.loadProjectConfig=this.actions$.pipe(Object(bt.d)(l.LoadProjectDetails),Object(ht.a)(e=>this.jiraService.getProjectDetails(e.payload).pipe(Object(M.a)(e=>{let t=null;return e&&e.length>0&&(t=e[0],t.customFields=a.sortBy(a.map(a.filter(e[1],{custom:!0}),e=>a.pick(e,["id","name"])),["name"])),{type:l.LoadProjectDetailsSuccess,payload:t}}),Object(gt.a)(()=>Object(mt.a)({type:l.LoadProjectDetailsFailed}))))),this.updateFixVersions=this.actions$.pipe(Object(bt.d)(l.UpdateFieldValue),Object(ht.a)(e=>this.jiraService.updateFieldValue$(e.payload).pipe(Object(M.a)(()=>({type:l.UpdateFieldValueSuccess,payload:e.payload})),Object(gt.a)(()=>Object(mt.a)({type:l.UpdateFieldValueFailed}))))),this.updateOrganizationTitle=this.actions$.pipe(Object(bt.d)(l.UpdateOrganizationTitle),Object(ft.a)(e=>this.cachingService.setOrganization(e.payload)),Object(ht.a)(e=>Object(mt.a)({type:l.UpdateOrganizationTitleSuccess,payload:e.payload})))}getIssueDetails(e){return this.jiraService.getIssueDetails(e.issue,a.map(e.extendedFields,"id")).pipe(Object(M.a)(t=>{const s={issue:t,extendedFields:e.extendedFields,organization:this.cachingService.getOrganization(),projectConfig:null};return t&&t.fields&&t.fields.project&&t.fields.project.key&&t.fields.project.key.length>0&&(s.projectConfig=this.cachingService.getProjectDetails(t.fields.project.key)),s}))}}return e.\u0275fac=function(t){return new(t||e)(L.ec(bt.a),L.ec(It.b),L.ec(D.a))},e.\u0275prov=L.Mb({token:e,factory:e.\u0275fac}),Object(pt.b)([Object(bt.b)()],e.prototype,"loadPrimaryIssue",void 0),Object(pt.b)([Object(bt.b)()],e.prototype,"loadPrimaryIssueEpicChildren",void 0),Object(pt.b)([Object(bt.b)()],e.prototype,"loadPrimaryIssueRelatedLinks",void 0),Object(pt.b)([Object(bt.b)()],e.prototype,"loadSelectedIssue",void 0),Object(pt.b)([Object(bt.b)()],e.prototype,"loadSelectedIssueEpicChildren",void 0),Object(pt.b)([Object(bt.b)()],e.prototype,"loadSelectedIssueRelatedLinks",void 0),Object(pt.b)([Object(bt.b)()],e.prototype,"loadSubtasks",void 0),Object(pt.b)([Object(bt.b)()],e.prototype,"loadProjectConfig",void 0),Object(pt.b)([Object(bt.b)()],e.prototype,"updateFixVersions",void 0),Object(pt.b)([Object(bt.b)()],e.prototype,"updateOrganizationTitle",void 0),e})();var kt=s("AytR"),Ct=s("SYT+"),jt=s("jhN1"),vt=s("XNiG"),Ot=s("VRyK"),Lt=s("Kj3r"),St=s("/uUt");const Vt=["instance"];function Wt(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",5),L.Wb(1,"button",6),L.ic("click",(function(){return L.Bc(e),L.kc().onShowEpiclist()})),L.Rb(2,"fa-icon",7),L.Vb(),L.Vb()}}function wt(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",8),L.Wb(1,"button",9),L.ic("click",(function(){L.Bc(e);const t=L.kc();return t.navigateTo(t.issue)})),L.Rb(2,"fa-icon",10),L.Vb(),L.Vb()}2&e&&(L.Cb(2),L.pc("fixedWidth",!0))}let Ft=(()=>{class e{constructor(e,t,s){this.router=e,this.activatedRoute=t,this.store$=s,this.hideIssuelistNavigator=!0,this.showIssuelist=new L.n,this.canNavigate=()=>this.issue&&this.issue.trim().length>0,this.focus$=new vt.a,this.click$=new vt.a,this.search=e=>{const t=e.pipe(Object(Lt.a)(200),Object(St.a)()),s=this.click$.pipe(Object(V.a)(()=>!this.instance.isPopupOpen())),i=this.focus$;return Object(Ot.a)(t,i,s).pipe(Object(M.a)(e=>""===e?this.issueLookup:a.filter(this.issueLookup||[],t=>t.toLowerCase().indexOf(e.toLowerCase())>-1)),Object(M.a)(e=>(e||[]).slice(0,20)))}}ngOnInit(){this.subscription=this.store$.select(e=>e.issue.primaryIssueKey).pipe(Object(V.a)(e=>e&&e.length>0)).subscribe(e=>this.issue=e)}ngOnDestroy(){}navigateTo(e){this.canNavigate()&&this.router.navigate(["/browse",e.trim()])}selectTo(e){if(this.canNavigate()){const t=e.trim();a.find(this.issueLookup,e=>e===t)?this.router.navigate(["purpose",t,"details"],{relativeTo:this.activatedRoute}):this.router.navigate(["/browse",t,"purpose",t,"details"])}}onShowEpiclist(){this.showIssuelist.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(L.Qb(w.d),L.Qb(w.a),L.Qb(n.h))},e.\u0275cmp=L.Kb({type:e,selectors:[["app-issue-entry"]],viewQuery:function(e,t){var s;1&e&&L.Gc(Vt,!0),2&e&&L.zc(s=L.jc())&&(t.instance=s.first)},inputs:{issueLookup:"issueLookup",hideIssuelistNavigator:"hideIssuelistNavigator"},outputs:{showIssuelist:"showIssuelist"},decls:5,vars:4,consts:[[1,"input-group"],["class","input-group-prepend",4,"ngIf"],["type","text","name","issueByKeyId","placeholder","Jira issue key","id","typeahead-focus","type","text",1,"form-control","rounded-0","bg-light",3,"ngModel","ngbTypeahead","ngModelChange","focus","click","keydown.enter","keydown.control.enter"],["instance","ngbTypeahead"],["class","input-group-append",4,"ngIf"],[1,"input-group-prepend"],[1,"btn","btn-light","rounded-0","border","text-primary",3,"click"],["icon","bars"],[1,"input-group-append"],["type","button",1,"btn","btn-light","rounded-0","border","border-left-0","text-primary",3,"click"],["icon","chevron-right",3,"fixedWidth"]],template:function(e,t){1&e&&(L.Wb(0,"div",0),L.Ic(1,Wt,3,0,"div",1),L.Wb(2,"input",2,3),L.ic("ngModelChange",(function(e){return t.issue=e}))("focus",(function(e){return t.focus$.next(e.target.value)}))("click",(function(e){return t.click$.next(e.target.value)}))("keydown.enter",(function(){return t.selectTo(t.issue)}))("keydown.control.enter",(function(){return t.navigateTo(t.issue)})),L.Vb(),L.Ic(4,wt,3,1,"div",4),L.Vb()),2&e&&(L.Cb(1),L.pc("ngIf",!t.hideIssuelistNavigator),L.Cb(1),L.pc("ngModel",t.issue)("ngbTypeahead",t.search),L.Cb(2),L.pc("ngIf",t.canNavigate()))},directives:[i.l,K.b,G.t,K.f,K.i,W.a],encapsulation:2}),e})();var xt=s("yNBN"),$t=s("g9iH"),Et=s("7zfz"),Rt=s("/Azu");const Tt=function(e,t){return{"small text-muted text-uppercase font-italic":e,"font-weight-bold":t}};function Pt(e,t){if(1&e&&(L.Wb(0,"div",17),L.Kc(1),L.Vb()),2&e){const e=t.$implicit,s=L.kc(3);L.pc("ngClass",L.uc(3,Tt,s.checkIfCustomNode(e),e.key===s.issueKey))("title",s.getIssueTitle(e)),L.Cb(1),L.Mc(" ",e.label,"")}}function zt(e,t){if(1&e&&(L.Wb(0,"div",18),L.Kc(1),L.Vb()),2&e){const e=t.$implicit,s=L.kc(3);L.pc("title",s.getHeaderTitle(e)),L.Cb(1),L.Mc(" ",e.label," ")}}function Kt(e,t){1&e&&L.Rb(0,"fa-icon",21)}function Nt(e,t){if(1&e&&(L.Wb(0,"i",19),L.Kc(1),L.Ic(2,Kt,1,0,"fa-icon",20),L.Vb()),2&e){const e=t.$implicit;L.Cb(1),L.Mc(" ",e.label," "),L.Cb(1),L.pc("ngIf",e.editable)}}function Mt(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",22),L.Wb(1,"input",23),L.ic("ngModelChange",(function(s){return L.Bc(e),t.$implicit.title=s}))("keydown.enter",(function(s){L.Bc(e);const i=t.$implicit;return L.kc(3).updateNodeTitleOnEnter(s,i)}))("keydown.escape",(function(s){L.Bc(e);const i=t.$implicit;return L.kc(3).cancelNodeEditingOnEscape(s,i)})),L.Vb(),L.Wb(2,"div",24),L.Wb(3,"button",25),L.ic("click",(function(){L.Bc(e);const s=t.$implicit;return L.kc(3).updateNodeTitle(s)})),L.Rb(4,"fa-icon",26),L.Vb(),L.Wb(5,"button",27),L.ic("click",(function(){L.Bc(e);const s=t.$implicit;return L.kc(3).cancelNodeEditing(s)})),L.Rb(6,"fa-icon",28),L.Vb(),L.Vb(),L.Vb()}if(2&e){const e=t.$implicit,s=L.kc(3);L.Cb(1),L.pc("appAutofocus","Editing"===e.type)("ngModel",e.title),L.Cb(2),L.pc("disabled",!s.canUpdateTitle(e))}}const Dt=function(e){return[e]};function Bt(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div",9),L.Rb(1,"p-contextMenu",10,11),L.Wb(3,"p-tree",12),L.ic("selectionChange",(function(t){return L.Bc(e),L.kc(2).selectedNode=t}))("onNodeSelect",(function(t){return L.Bc(e),L.kc(2).nodeSelected(t)})),L.Ic(4,Pt,2,6,"ng-template",13),L.Ic(5,zt,2,2,"ng-template",14),L.Ic(6,Nt,3,2,"ng-template",15),L.Ic(7,Mt,7,3,"ng-template",16),L.Vb(),L.Vb()}if(2&e){const e=L.kc(2);L.Cb(1),L.pc("model",e.menulist),L.Cb(2),L.pc("value",L.tc(3,Dt,e.rootNode))("selection",e.selectedNode)}}function Ut(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div"),L.Wb(1,"div",6),L.Wb(2,"app-issue-entry",7),L.ic("showIssuelist",(function(){return L.Bc(e),L.kc().onShowIssuelist()})),L.Vb(),L.Vb(),L.Ic(3,Bt,8,5,"div",8),L.Vb()}if(2&e){const e=L.kc();L.Cb(2),L.pc("hideIssuelistNavigator",!1),L.Cb(1),L.pc("ngIf",e.rootNode)}}let Xt=(()=>{class e{constructor(e,t,s,i){this.router=e,this.activatedRoute=t,this.titleService=s,this.store$=i,this.extendedFields=[],this.cancelNodeEditingOnEscape=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.cancelNodeEditing(t)},this.canUpdateTitle=e=>e&&e.title&&e.title.trim().length>0,this.updateNodeTitleOnEnter=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.updateNodeTitle(t)},this.getIssueTitle=e=>Object(C.p)(e)?e.title:`[${e.issueType}] ${e.linkType||""} ${e.key} | ${e.title}`,this.getHeaderTitle=e=>`[${e.issueType}] ${e.title}`,this.checkIfCustomNode=e=>Object(C.p)(e),this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}ngOnInit(){this.reloadOnChange();const e=this.activatedRoute.params.pipe(Object(V.a)(e=>e&&e.issue&&e.issue.length>0),Object(M.a)(e=>e.issue)),t=this.store$.select(e=>e.app.projects);this.combined$=Object(S.a)(e,t).subscribe(([e,t])=>{this.titleService.setTitle(`${kt.a.appTitle}: ${e}`),t&&(this.extendedFields=a.union(a.flatten(a.map(t,"hierarchy")),a.filter(a.flatten(a.map(t,"customFields")),{name:"Epic Link"}))),this.store$.dispatch(new r({issue:e,extendedFields:this.extendedFields}))}),this.primaryIssue$=this.store$.select(e=>e.issue.primaryIssue).pipe(Object(V.a)(e=>e)).subscribe(e=>{this.primaryIssue=e,this.populateProjectConfig(),this.populateEpicChildren(),this.populateRelatedLinks(),this.buildTree()})}reloadOnChange(){this.currentProjectUpdated$=this.store$.select(e=>e.app.currentProjectUpdated).pipe(Object(V.a)(e=>!0===e&&this.primaryIssue)).subscribe(()=>{this.store$.dispatch(new r({issue:this.primaryIssue.key,extendedFields:this.extendedFields}))}),this.updatedField$=this.store$.select(e=>e.issue.updatedField).pipe(Object(V.a)(e=>e&&this.primaryIssue)).subscribe(()=>{this.store$.dispatch(new r({issue:this.primaryIssue.key,extendedFields:this.extendedFields}))})}ngOnDestroy(){this.currentProjectUpdated$&&this.currentProjectUpdated$.unsubscribe(),this.updatedField$&&this.updatedField$.unsubscribe(),this.combined$&&this.combined$.unsubscribe(),this.primaryIssue$&&this.primaryIssue$.unsubscribe()}buildTree(){if(!0===this.primaryIssue.epicChildrenLoaded&&!0===this.primaryIssue.relatedLinksLoaded&&!0===this.primaryIssue.projectConfigLoaded){const e=Object(C.j)(this.primaryIssue.organization);let t=Object(C.k)(this.primaryIssue.projectConfig),s=this.primaryIssue.projectConfig.hierarchy?this.prepareHierarchyNodes():null;t=Object(C.c)(e,t),s=Object(C.c)(t,s),this.primaryIssue.expanded=!0,this.rootNode=Object(C.c)(s,this.primaryIssue),this.store$.dispatch(new Ct.i(this.rootNode))}}prepareHierarchyNodes(){const e={children:[]};if(this.primaryIssue.projectConfig.hierarchy.forEach(t=>{const s=a.find(this.primaryIssue.extendedFields,{id:t.id});s&&s.extendedValue&&s.extendedValue.length>0&&e.children.push(Object(C.i)(s))}),e.children.length>0){const t=e.children[0];return Object(C.f)(e.children,t),t}return null}populateEpicChildren(){this.primaryIssue.issueType===C.a.Epic?this.primaryIssue.epicChildrenLoaded?!a.find(this.primaryIssue.children,{issueType:C.a.EpicChildren})&&this.primaryIssue.epicChildren&&this.primaryIssue.epicChildren.length>0&&(this.primaryIssue.children=this.primaryIssue.children||[],this.primaryIssue.children.unshift(Object(C.h)(this.primaryIssue)),this.primaryIssue.expanded=!0):this.primaryIssue.epicChildrenLoading||this.store$.dispatch(new d(this.primaryIssue.key)):this.primaryIssue.epicChildrenLoaded=!0}populateRelatedLinks(){if(this.primaryIssue&&this.primaryIssue.relatedLinks&&this.primaryIssue.relatedLinks.length>0)if(this.primaryIssue.relatedLinksLoaded){if(0===a.filter(this.primaryIssue.children,{issueType:C.a.RelatedLink}).length){const e=Object(C.e)(this.primaryIssue.relatedLinks,this.primaryIssue.key);e&&(this.primaryIssue.children=this.primaryIssue.children||[],e.forEach(e=>this.primaryIssue.children.push(e)))}}else!this.primaryIssue.relatedLinksLoading&&this.primaryIssue.relatedLinks&&this.primaryIssue.relatedLinks.length>0&&this.store$.dispatch(new u(a.map(this.primaryIssue.relatedLinks,"key")));else this.primaryIssue.relatedLinksLoaded=!0}populateProjectConfig(){this.primaryIssue.projectConfigLoaded?this.primaryIssue.projectConfig&&this.store$.dispatch(new Ct.n(this.primaryIssue.projectConfig)):this.primaryIssue.project&&this.primaryIssue.project.key&&this.primaryIssue.project.key.length>0&&!this.primaryIssue.projectConfigLoading&&this.store$.dispatch(new p(this.primaryIssue.project.key))}onShowIssuelist(){this.router.navigate(["/search/list"])}nodeSelected(e){if(e.node.editable)e.node.memento={type:e.node.type,selectable:e.node.selectable},e.node.type=C.b.Editing,e.node.selectable=!1;else{let t=function(e,t){const s=e.parseUrl(e.url);return s.root.children[w.c]&&s.root.children[w.c].segments&&5===s.root.children[w.c].segments.length?a.last(s.root.children[w.c].segments).path:"details"}(this.router);this.router.navigate(["purpose",e.node.key,t],{relativeTo:this.activatedRoute})}}nodeContextMenuSelect(e){console.log(e)}cancelNodeEditing(e){e.memento&&(e.title="",e.type=e.memento.type,setTimeout(()=>e.selectable=e.memento.selectable,200))}updateNodeTitle(e){e.title&&e.title.length>0&&(e.type=C.b.Heading,e.selectable=!1,e.key=e.title,this.store$.dispatch(new k({name:e.title})))}dragEnd(e){this.adjustPaneSize(e.sizes[0])}adjustPaneSize(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}return e.\u0275fac=function(t){return new(t||e)(L.Qb(w.d),L.Qb(w.a),L.Qb(jt.c),L.Qb(n.h))},e.\u0275cmp=L.Kb({type:e,selectors:[["app-primary-issue-container"]],decls:8,vars:5,consts:[[1,"main-container"],["direction","horizontal",3,"gutterDblClick","dragEnd"],[3,"size"],[4,"ngIf"],["title","expand/collapse pane",1,"btn","btn-sm","btn-link","text-muted","float-right",3,"click"],[3,"icon","fixedWidth"],[1,"sticky-title","p-2"],[3,"hideIssuelistNavigator","showIssuelist"],["class","pb-5",4,"ngIf"],[1,"pb-5"],["appendTo","body",3,"model"],["cm",""],["selectionMode","single",3,"value","selection","selectionChange","onNodeSelect"],["pTemplate","default"],["pTemplate","Heading"],["pTemplate","Editable"],["pTemplate","Editing"],[2,"font-size","90%",3,"ngClass","title"],[3,"title"],[1,"editable-node"],["size","sm","class","text-muted ml-1","icon","pencil-alt",4,"ngIf"],["size","sm","icon","pencil-alt",1,"text-muted","ml-1"],[1,"input-group","input-group-sm",2,"width","200px"],["type","text",1,"form-control",3,"appAutofocus","ngModel","ngModelChange","keydown.enter","keydown.escape"],[1,"input-group-append"],[1,"btn","btn-link","border",3,"disabled","click"],["icon","check"],[1,"btn","btn-link","text-danger","border",3,"click"],["icon","times"]],template:function(e,t){1&e&&(L.Wb(0,"div",0),L.Wb(1,"as-split",1),L.ic("gutterDblClick",(function(){return t.toggleFullscreen()}))("dragEnd",(function(e){return t.dragEnd(e)})),L.Wb(2,"as-split-area",2),L.Ic(3,Ut,4,2,"div",3),L.Vb(),L.Wb(4,"as-split-area",2),L.Wb(5,"button",4),L.ic("click",(function(){return t.toggleFullscreen()})),L.Rb(6,"fa-icon",5),L.Vb(),L.Rb(7,"router-outlet"),L.Vb(),L.Vb(),L.Vb()),2&e&&(L.Cb(2),L.pc("size",t.columns[0].size),L.Cb(1),L.pc("ngIf",t.leftPaneSize>0),L.Cb(1),L.pc("size",t.columns[1].size),L.Cb(2),L.pc("icon",0===t.columns[0].size?"compress-arrows-alt":"expand-arrows-alt")("fixedWidth",!0))},directives:[Y.c,Y.b,i.l,W.a,w.h,Ft,xt.a,$t.a,Et.d,i.j,K.b,Rt.a,K.f,K.i],encapsulation:2}),e})();function At(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div"),L.Wb(1,"div",5),L.Rb(2,"fa-icon",6),L.Kc(3," Connection details are incomplete. "),L.Vb(),L.Wb(4,"a",7),L.ic("click",(function(){return L.Bc(e),L.kc(2).onShowSetup()})),L.Kc(5," Enter credentials "),L.Rb(6,"fa-icon",8),L.Vb(),L.Vb()}}const Qt=function(){return["fab","jira"]},Ht=function(){return{mode:"import"}};function qt(e,t){if(1&e){const e=L.Xb();L.Wb(0,"div"),L.Wb(1,"div",9),L.Rb(2,"fa-icon",10),L.Kc(3," Please provide Jira connection details "),L.Vb(),L.Wb(4,"a",11),L.ic("click",(function(){return L.Bc(e),L.kc(2).onShowSetup()})),L.Kc(5," Manual setup "),L.Rb(6,"fa-icon",12),L.Vb(),L.Wb(7,"a",13),L.Rb(8,"fa-icon",14),L.Kc(9," Import config file "),L.Vb(),L.Vb()}2&e&&(L.Cb(2),L.pc("icon",L.sc(2,Qt)),L.Cb(5),L.pc("queryParams",L.sc(3,Ht)))}function Jt(e,t){if(1&e&&(L.Wb(0,"div",2),L.Wb(1,"div",3),L.Ic(2,At,7,0,"div",1),L.Ic(3,qt,10,4,"div",1),L.Vb(),L.Wb(4,"div",4),L.Wb(5,"ol"),L.Wb(6,"li"),L.Kc(7,"Setup the jira connection details"),L.Vb(),L.Wb(8,"li"),L.Kc(9,"Enter the Jira issue key"),L.Vb(),L.Wb(10,"li"),L.Kc(11,"Track purpose of issue"),L.Vb(),L.Vb(),L.Vb(),L.Vb()),2&e){const e=L.kc();L.Cb(2),L.pc("ngIf",e.connectionDetails&&!e.connectionDetails.verified),L.Cb(1),L.pc("ngIf",!e.connectionDetails)}}function Gt(e,t){1&e&&(L.Wb(0,"div"),L.Rb(1,"router-outlet"),L.Vb())}let Yt=(()=>{class e{constructor(e,t,s){this.cachingService=e,this.messageService=t,this.store$=s,this.isOnlineMode=!1}ngOnInit(){this.store$.select(e=>e.app.mode).subscribe(e=>this.isOnlineMode=e&&e===Ct.f.Online),this.connectionDetailsSubscription=this.store$.select(e=>e.app.connectionDetails).subscribe(e=>this.connectionDetails=e)}ngOnDestroy(){this.connectionDetailsSubscription&&this.connectionDetailsSubscription.unsubscribe()}onShowSetup(){this.store$.dispatch(new Ct.l(!0))}}return e.\u0275fac=function(t){return new(t||e)(L.Qb(D.a),L.Qb(Et.c),L.Qb(n.h))},e.\u0275cmp=L.Kb({type:e,selectors:[["app-issue-home"]],decls:2,vars:2,consts:[["class","center-text custom-shadow p-3 bg-light",4,"ngIf"],[4,"ngIf"],[1,"center-text","custom-shadow","p-3","bg-light"],[1,"alert","bg-white"],[1,"text-left"],[1,"mb-2"],["icon","exclamation-triangle",1,"text-warning"],[1,"btn","btn-sm","btn-primary","text-white","mt-2",3,"click"],["icon","chevron-right"],[1,"mb-3","alert-warning","p-2","rounded"],[1,"text-primary",3,"icon"],[1,"btn","btn-primary","btn-sm","text-white","mr-2",3,"click"],["icon","angle-right"],["routerLink","../configurations",1,"btn","btn-light","border","btn-sm",3,"queryParams"],["icon","file-import",1,"text-muted"]],template:function(e,t){1&e&&(L.Ic(0,Jt,12,2,"div",0),L.Ic(1,Gt,2,0,"div",1)),2&e&&(L.pc("ngIf",!(t.connectionDetails&&t.connectionDetails.verified)&&t.isOnlineMode),L.Cb(1),L.pc("ngIf",t.connectionDetails&&t.connectionDetails.verified||!1===t.isOnlineMode))},directives:[i.l,W.a,w.f,w.h],encapsulation:2}),e})(),_t=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=L.Kb({type:e,selectors:[["app-issue-not-entered"]],decls:9,vars:0,consts:[[1,"center-text"],[1,"custom-shadow","p-4","rounded"],[1,"mt-3","mb-2"],[1,"text-right","small"],["routerLink","/search/list",1,"btn","btn-sm","btn-link"],["icon","angle-right"]],template:function(e,t){1&e&&(L.Wb(0,"div",0),L.Wb(1,"div",1),L.Kc(2," Proceed by entering Jira issue key "),L.Wb(3,"div",2),L.Rb(4,"app-issue-entry"),L.Vb(),L.Vb(),L.Wb(5,"div",3),L.Wb(6,"a",4),L.Kc(7," Instead go to query builder "),L.Rb(8,"fa-icon",5),L.Vb(),L.Vb(),L.Vb())},directives:[Ft,w.f,W.a],encapsulation:2}),e})(),Zt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=L.Kb({type:e,selectors:[["app-selected-issue-home"]],decls:1,vars:0,template:function(e,t){1&e&&L.Rb(0,"router-outlet")},directives:[w.h],encapsulation:2}),e})();s.d(t,"IssueModule",(function(){return ts}));const es=[{path:"",component:Yt,children:[{path:":issue",component:Xt,children:[{path:"purpose",component:Zt,children:[{path:":selected",component:J,children:[{path:"details",component:P},{path:"workbench",component:qe},{path:"storyboard",component:ut},{path:"",redirectTo:"details",pathMatch:"full"}]}]}]},{path:"",component:_t}]}];let ts=(()=>{class e{}return e.\u0275mod=L.Ob({type:e}),e.\u0275inj=L.Nb({factory:function(t){return new(t||e)},imports:[[i.c,w.g,K.c,F.b,$t.b,xt.b,_e.b,N.b,Ye.b,G.g,G.c,G.n,G.u,W.c,Y.a,z.a,n.j.forFeature("issue",j,{initialState:c}),bt.c.forFeature([yt]),w.g.forChild(es)]]}),e})()}}]);