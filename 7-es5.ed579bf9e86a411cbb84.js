function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,s){"use strict";s.r(e);var i,n,a,r=s("ofXK"),c=s("kt0X"),o=s("l2bN"),u=s("6NWb"),l=s("tyNb"),b=s("sITn"),h=s("3Pt+"),f=s("jLSX"),p=s("fXoL"),d=(s("XNiG"),s("YyRF"),s("vxfF")),g=(s("R0Ic"),s("7zfz")),v=(s("t2ka"),s("xlun")),y=((a=function t(){_classCallCheck(this,t)}).\u0275mod=p.Ob({type:a}),a.\u0275inj=p.Nb({factory:function(t){return new(t||a)},imports:[[r.c,g.e,d.d,v.b],g.e,d.d]}),a),m=((n=function t(){_classCallCheck(this,t)}).\u0275mod=p.Ob({type:n}),n.\u0275inj=p.Nb({factory:function(t){return new(t||n)},imports:[[r.c,y,h.c,g.e],y,h.c,g.e]}),n),k=((i=function t(){_classCallCheck(this,t)}).\u0275mod=p.Ob({type:i}),i.\u0275inj=p.Nb({factory:function(t){return new(t||i)},imports:[[r.c,m],g.e]}),i),S=s("LPYB"),C=(s("hSFZ"),s("/RsI")),I=s("j9Al"),w={LIST:"LIST",STORYBOARD:"STORYBOARD"},O={SwitchViewmode:Object(I.b)("[SwitchViewmode]"),SetQueryContext:Object(I.b)("[SetQueryContext]"),SetIssuelist:Object(I.b)("[SetIssuelist]"),SetSavedSearchlist:Object(I.b)("[SetSavedSearchlist]")},V=function t(e){_classCallCheck(this,t),this.payload=e,this.type=O.SwitchViewmode},j=function t(e){_classCallCheck(this,t),this.payload=e,this.type=O.SetIssuelist},x=function t(e){_classCallCheck(this,t),this.payload=e,this.type=O.SetSavedSearchlist},W={queryContext:null,issuelist:null,viewmode:w.LIST,savedSearchlist:null};function L(t,e){switch(e.type){case O.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case O.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case O.SetIssuelist:return Object.assign(Object.assign({},t),{issuelist:e.payload});case O.SetSavedSearchlist:return Object.assign(Object.assign({},t),{savedSearchlist:e.payload});default:return t}}var R=s("1kSV"),q=s("LvDl"),Q=s("pLZG"),$=s("lJxs"),P=s("krUz"),T=s("SYT+"),_=s("F2Ol"),z=s("cdP3"),N=function(){return["/search/list"]},K=function(t){return{query:t}};function B(t,e){if(1&t&&(p.Wb(0,"div",3),p.Wb(1,"a",4),p.Kc(2),p.Vb(),p.Vb()),2&t){var s=e.$implicit;p.Cb(1),p.pc("routerLink",p.sc(3,N))("queryParams",p.tc(4,K,s.jql)),p.Cb(1),p.Mc(" ",s.name," ")}}function F(t,e){if(1&t&&(p.Wb(0,"div",1),p.Ic(1,B,3,6,"div",2),p.Vb()),2&t){var s=p.kc();p.Cb(1),p.pc("ngForOf",s.searchlist)}}var A,X=((A=function(){function t(e,s,i,n){_classCallCheck(this,t),this.router=e,this.activatedRoute=s,this.jiraService=i,this.store$=n}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.searchlist$=this.store$.select((function(t){return t.search.savedSearchlist})).pipe(Object(Q.a)((function(t){return t}))).subscribe((function(e){return t.searchlist=e})),this.jiraService.favouriteSearches("favourite-search.json").pipe(Object(Q.a)((function(t){return t&&t.length>0})),Object($.a)((function(t){return q.map(t,(function(t){return q.pick(t,["id","name","jql"])}))}))).subscribe((function(e){return t.store$.dispatch(new x(e))}))}},{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||A)(p.Qb(l.d),p.Qb(l.a),p.Qb(_.b),p.Qb(c.h))},A.\u0275cmp=p.Kb({type:A,selectors:[["app-favourite-searches"]],decls:3,vars:1,consts:[["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(p.Wb(0,"h6"),p.Kc(1,"Favourite"),p.Vb(),p.Ic(2,F,2,1,"div",0)),2&t&&(p.Cb(2),p.pc("ngIf",e.searchlist))},directives:[r.l,r.k,l.f],encapsulation:2}),A);function D(t,e){1&t&&(p.Wb(0,"div",8),p.Kc(1," No Records found. "),p.Vb())}function M(t,e){1&t&&(p.Wb(0,"a",16),p.Rb(1,"fa-icon",17),p.Kc(2," Storyboard view "),p.Vb()),2&t&&(p.Cb(1),p.pc("fixedWidth",!0))}function Y(t,e){1&t&&(p.Wb(0,"a",18),p.Rb(1,"fa-icon",19),p.Kc(2," Back to list view "),p.Vb()),2&t&&(p.Cb(1),p.pc("fixedWidth",!0))}function E(t,e){if(1&t&&(p.Wb(0,"div",13),p.Ic(1,M,3,1,"a",14),p.Ic(2,Y,3,1,"a",15),p.Vb()),2&t){var s=p.kc(2);p.Cb(1),p.pc("ngIf",s.searchViewmode===s.localViewmode.LIST),p.Cb(1),p.pc("ngIf",s.searchViewmode===s.localViewmode.STORYBOARD)}}function H(t,e){if(1&t){var s=p.Xb();p.Wb(0,"div",20),p.Wb(1,"ngb-pagination",21),p.ic("pageChange",(function(t){return p.Bc(s),p.kc(2).currentPageIndex=t}))("pageChange",(function(){return p.Bc(s),p.kc(2).onPageChange()})),p.Vb(),p.Vb()}if(2&t){var i=p.kc(2);p.Cb(1),p.pc("maxSize",3)("page",i.currentPageIndex)("boundaryLinks",!0)("pageSize",i.issuelist.pageSize)("collectionSize",i.issuelist.total)}}function J(t,e){if(1&t&&(p.Wb(0,"div",9),p.Ic(1,E,3,2,"div",10),p.Ic(2,H,2,5,"div",11),p.Wb(3,"div",12),p.Kc(4),p.Wb(5,"b"),p.Kc(6),p.Vb(),p.Vb(),p.Vb()),2&t){var s=p.kc();p.Cb(1),p.pc("ngIf",s.issuelist&&s.issuelist.results&&s.issuelist.results.length>1),p.Cb(1),p.pc("ngIf",s.issuelist.total>s.issuelist.pageSize),p.Cb(2),p.Nc(" ",s.issuelist.startAt+1," - ",s.issuelist.endAt," / "),p.Cb(2),p.Lc(s.issuelist.total)}}var G,Z=((G=function(){function t(e,s,i,n){var a=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=s,this.jiraService=i,this.store$=n,this.selectedTab=1,this.currentPageIndex=1,this.canNavigate=function(){return a.issuelist&&a.issuelist.trim().length>0},this.canExecuteQuery=function(){return a.query&&a.query.trim().length>0}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.localViewmode=w,this.searchViewmode$=this.store$.select((function(t){return t.search.viewmode})).subscribe((function(e){return t.searchViewmode=e})),this.store$.dispatch(new T.m(!0)),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(Q.a)((function(t){return t&&t.query&&t.query.length>0})),Object($.a)((function(t){return t.query}))).subscribe((function(e){t.query=e,t.executeQuery()})),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(Q.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"parseQueryContext",value:function(t,e){if(t)return t.issueType!==P.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}},{key:"executeQuery",value:function(){var t=this;this.canExecuteQuery()&&this.jiraService.executeJql(this.query,this.currentPageIndex-1,50,["components","labels","fixVersions"],"issuelist.json").pipe(Object($.a)((function(t){return{total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:q.map(t.issues,(function(t){return Object(P.q)(t)}))}}))).subscribe((function(e){return t.store$.dispatch(new j(e))}))}},{key:"onPageChange",value:function(){this.executeQuery()}}]),t}()).\u0275fac=function(t){return new(t||G)(p.Qb(l.d),p.Qb(l.a),p.Qb(_.b),p.Qb(c.h))},G.\u0275cmp=p.Kb({type:G,selectors:[["app-result-container"]],decls:10,vars:2,consts:[[1,"main-container"],["direction","horizontal"],["size","15",1,"small","pt-2","pl-3"],["size","85"],[1,"body-container"],[1,"container-fluid"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["class","footer-container bg-light",4,"ngIf"],[1,"center-text","custom-shadow","alert-warning","p-4"],[1,"footer-container","bg-light"],["class","float-right pt-1 ml-2",4,"ngIf"],["class","float-right mt-1 mb-0",4,"ngIf"],[1,"pt-2","small","clearfix"],[1,"float-right","pt-1","ml-2"],["class","btn btn-brand btn-sm","routerLink","storyboard","queryParamsHandling","merge",4,"ngIf"],["class","btn btn-secondary btn-sm","routerLink","list","queryParamsHandling","merge",4,"ngIf"],["routerLink","storyboard","queryParamsHandling","merge",1,"btn","btn-brand","btn-sm"],["icon","map",3,"fixedWidth"],["routerLink","list","queryParamsHandling","merge",1,"btn","btn-secondary","btn-sm"],["icon","chevron-left",3,"fixedWidth"],[1,"float-right","mt-1","mb-0"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"as-split",1),p.Wb(2,"as-split-area",2),p.Rb(3,"app-favourite-searches"),p.Vb(),p.Wb(4,"as-split-area",3),p.Wb(5,"div",4),p.Wb(6,"div",5),p.Rb(7,"router-outlet"),p.Ic(8,D,2,0,"div",6),p.Vb(),p.Vb(),p.Ic(9,J,7,5,"div",7),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Cb(8),p.pc("ngIf",e.issuelist&&0===e.issuelist.total),p.Cb(1),p.pc("ngIf",e.issuelist&&e.issuelist.total>0))},directives:[z.c,z.b,X,l.h,r.l,l.f,u.a,R.q],encapsulation:2}),G),U=function(t,e){return["/browse",t,"purpose",e]};function tt(t,e){if(1&t&&(p.Wb(0,"div",4),p.Wb(1,"a",5),p.Wb(2,"sub",6),p.Kc(3),p.Vb(),p.Rb(4,"fa-icon",7),p.Wb(5,"div"),p.Kc(6),p.Wb(7,"span",8),p.Kc(8),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t){var s=e.$implicit;p.Cb(1),p.pc("routerLink",p.uc(5,U,s.key,s.key)),p.Cb(2),p.Nc("",s.issueType,": ",s.key,""),p.Cb(3),p.Mc(" ",s.title," "),p.Cb(2),p.Lc(s.status)}}function et(t,e){if(1&t&&(p.Wb(0,"div",2),p.Ic(1,tt,9,8,"div",3),p.Vb()),2&t){var s=p.kc();p.Cb(1),p.pc("ngForOf",s.issuelist.results)}}var st,it=((st=function(){function t(e,s,i,n){var a=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=s,this.jiraService=i,this.store$=n,this.currentPageIndex=1,this.canNavigate=function(){return a.issuelist&&a.issuelist.trim().length>0}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new V(w.LIST)),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(Q.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}]),t}()).\u0275fac=function(t){return new(t||st)(p.Qb(l.d),p.Qb(l.a),p.Qb(_.b),p.Qb(c.h))},st.\u0275cmp=p.Kb({type:st,selectors:[["app-search-listview"]],decls:2,vars:1,consts:[[1,"container"],["class","p-3 bg-white",4,"ngIf"],[1,"p-3","bg-white"],["class","issue-list-item",4,"ngFor","ngForOf"],[1,"issue-list-item"],[1,"btn","btn-link","btn-sm","text-dark","text-left","w-100","pt-0",3,"routerLink"],[1,"text-primary","text-uppercase"],["icon","angle-right",1,"text-muted","float-right","mt-2"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Ic(1,et,2,1,"div",1),p.Vb()),2&t&&(p.Cb(1),p.pc("ngIf",e.issuelist))},directives:[r.l,r.k,l.f,u.a],encapsulation:2}),st),nt=s("iLqC"),at=s("Ewkv"),rt=s("lVkt"),ct=s("NGyg");function ot(t,e){if(1&t){var s=p.Xb();p.Wb(0,"p-multiSelect",10),p.ic("ngModelChange",(function(t){return p.Bc(s),p.kc(2).selectedStatuses=t}))("onChange",(function(t){return p.Bc(s),p.kc(2).onSelectedStatusChange(t)})),p.Vb()}if(2&t){var i=p.kc(2);p.pc("options",i.statusLookup)("ngModel",i.selectedStatuses)}}function ut(t,e){if(1&t){var s=p.Xb();p.Wb(0,"p-dialog",11),p.ic("visibleChange",(function(t){return p.Bc(s),p.kc(2).showStatistics=t})),p.Rb(1,"app-statistics",12),p.Vb()}if(2&t){var i=p.kc(2);p.pc("visible",i.showStatistics),p.Cb(1),p.pc("statusStats",i.storyboardItem.statistics.status)("issueTypeStats",i.storyboardItem.statistics.issueTypes)("componentStats",i.storyboardItem.statistics.components)}}var lt=function(){return["far","chart-bar"]};function bt(t,e){if(1&t){var s=p.Xb();p.Wb(0,"div"),p.Wb(1,"div",1),p.Rb(2,"div",2),p.Wb(3,"div",3),p.Ic(4,ot,1,2,"p-multiSelect",4),p.Vb(),p.Wb(5,"div",5),p.Wb(6,"button",6),p.ic("click",(function(){return p.Bc(s),p.kc().showStatistics=!0})),p.Rb(7,"fa-icon",7),p.Vb(),p.Vb(),p.Vb(),p.Rb(8,"app-storyboard-renderer",8),p.Ic(9,ut,2,4,"p-dialog",9),p.Vb()}if(2&t){var i=p.kc();p.Cb(4),p.pc("ngIf",i.statusLookup&&i.statusLookup.length>0),p.Cb(3),p.pc("icon",p.sc(4,lt)),p.Cb(1),p.pc("storyboardItem",i.storyboardItem),p.Cb(1),p.pc("ngIf",i.storyboardItem.statistics)}}var ht,ft=((ht=function(){function t(e,s){_classCallCheck(this,t),this.activatedRoute=e,this.store$=s,this.selectedStatuses=[],this.statusLookup=[],this.showStatistics=!1,this.filterByStatus=function(t,e){return e&&e.length>0?q.filter(t,(function(t){return void 0!==q.find(e,(function(e){return e===t.status}))})):t}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new V(w.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(Q.a)((function(t){return t}))).subscribe((function(e){t.issuelist=e,t.plotStoryboard()}))}},{key:"ngOnDestroy",value:function(){this.issuelist$&&this.issuelist$.unsubscribe()}},{key:"plotStoryboard",value:function(){var t=q.map(this.selectedStatuses,"key");this.storyboardItem.metadata=Object(nt.b)(),this.storyboardItem.children=this.filterByStatus(this.issuelist.results,t),Object(nt.c)(this.storyboardItem.metadata,Object(nt.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(nt.d)(this.storyboardItem),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}},{key:"onSelectedStatusChange",value:function(t){this.plotStoryboard()}}]),t}()).\u0275fac=function(t){return new(t||ht)(p.Qb(l.a),p.Qb(c.h))},ht.\u0275cmp=p.Kb({type:ht,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","mt-2","mb-1"],[1,"col-md-8"],[1,"col-md-3"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1"],[1,"btn","btn-link",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&p.Ic(0,bt,10,5,"div",0),2&t&&p.pc("ngIf",e.storyboardItem)},directives:[r.l,u.a,at.a,rt.a,h.f,h.i,C.a,ct.a],encapsulation:2}),ht);s.d(e,"SearchModule",(function(){return gt}));var pt,dt=[{path:"",component:Z,children:[{path:"list",component:it},{path:"storyboard",component:ft}]}],gt=((pt=function t(){_classCallCheck(this,t)}).\u0275mod=p.Ob({type:pt}),pt.\u0275inj=p.Nb({factory:function(t){return new(t||pt)},imports:[[r.c,l.g,h.c,o.b,u.c,f.b,k,C.b,S.b,rt.b,z.a,R.i,b.a,c.j.forFeature("search",L,{initialState:W}),l.g.forChild(dt)]]}),pt)}}]);