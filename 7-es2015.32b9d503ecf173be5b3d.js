(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,s,e){"use strict";e.r(s);var i=e("ofXK"),a=e("kt0X"),r=e("l2bN"),n=e("6NWb"),c=e("tyNb"),o=e("sITn"),b=e("3Pt+"),u=e("jLSX"),l=e("EVgl"),h=e("LPYB"),p=(e("hSFZ"),e("/RsI")),d=e("6ElM");const g={queryContext:null,issuelist:null,viewmode:d.b.LIST,savedSearchlist:null};function f(t,s){switch(s.type){case d.a.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:s.payload});case d.a.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:s.payload});case d.a.SetIssuelist:return Object.assign(Object.assign({},t),{issuelist:s.payload});case d.a.SetSavedSearchlist:return Object.assign(Object.assign({},t),{savedSearchlist:s.payload});default:return t}}var m=e("1kSV"),y=e("LvDl"),v=e("pLZG"),I=e("lJxs"),w=e("krUz"),S=e("SYT+"),O=e("fXoL"),k=e("F2Ol"),V=e("cdP3");const C=function(){return["/search/list"]},x=function(t){return{query:t}};function W(t,s){if(1&t&&(O.Wb(0,"div",3),O.Wb(1,"a",4),O.Kc(2),O.Vb(),O.Vb()),2&t){const t=s.$implicit;O.Cb(1),O.pc("routerLink",O.sc(3,C))("queryParams",O.tc(4,x,t.jql)),O.Cb(1),O.Mc(" ",t.name," ")}}function j(t,s){if(1&t&&(O.Wb(0,"div",1),O.Ic(1,W,3,6,"div",2),O.Vb()),2&t){const t=O.kc();O.Cb(1),O.pc("ngForOf",t.searchlist)}}let q=(()=>{class t{constructor(t,s,e,i){this.router=t,this.activatedRoute=s,this.jiraService=e,this.store$=i}ngOnInit(){this.searchlist$=this.store$.select(t=>t.search.savedSearchlist).pipe(Object(v.a)(t=>t)).subscribe(t=>this.searchlist=t),this.jiraService.favouriteSearches("favourite-search.json").pipe(Object(v.a)(t=>t&&t.length>0),Object(I.a)(t=>y.map(t,t=>y.pick(t,["id","name","jql"])))).subscribe(t=>this.store$.dispatch(new d.e(t)))}ngOnDestroy(){}}return t.\u0275fac=function(s){return new(s||t)(O.Qb(c.d),O.Qb(c.a),O.Qb(k.b),O.Qb(a.h))},t.\u0275cmp=O.Kb({type:t,selectors:[["app-favourite-searches"]],decls:3,vars:1,consts:[["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted",3,"routerLink","queryParams"]],template:function(t,s){1&t&&(O.Wb(0,"h6"),O.Kc(1,"Favourite"),O.Vb(),O.Ic(2,j,2,1,"div",0)),2&t&&(O.Cb(2),O.pc("ngIf",s.searchlist))},directives:[i.l,i.k,c.f],encapsulation:2}),t})();function $(t,s){1&t&&(O.Wb(0,"div",8),O.Kc(1," No Records found. "),O.Vb())}function R(t,s){1&t&&(O.Wb(0,"a",16),O.Rb(1,"fa-icon",17),O.Kc(2," Storyboard view "),O.Vb()),2&t&&(O.Cb(1),O.pc("fixedWidth",!0))}function Q(t,s){1&t&&(O.Wb(0,"a",18),O.Rb(1,"fa-icon",19),O.Kc(2," Back to list view "),O.Vb()),2&t&&(O.Cb(1),O.pc("fixedWidth",!0))}function L(t,s){if(1&t&&(O.Wb(0,"div",13),O.Ic(1,R,3,1,"a",14),O.Ic(2,Q,3,1,"a",15),O.Vb()),2&t){const t=O.kc(2);O.Cb(1),O.pc("ngIf",t.searchViewmode===t.localViewmode.LIST),O.Cb(1),O.pc("ngIf",t.searchViewmode===t.localViewmode.STORYBOARD)}}function P(t,s){if(1&t){const t=O.Xb();O.Wb(0,"div",20),O.Wb(1,"ngb-pagination",21),O.ic("pageChange",(function(s){return O.Bc(t),O.kc(2).currentPageIndex=s}))("pageChange",(function(){return O.Bc(t),O.kc(2).onPageChange()})),O.Vb(),O.Vb()}if(2&t){const t=O.kc(2);O.Cb(1),O.pc("maxSize",3)("page",t.currentPageIndex)("boundaryLinks",!0)("pageSize",t.issuelist.pageSize)("collectionSize",t.issuelist.total)}}function z(t,s){if(1&t&&(O.Wb(0,"div",9),O.Ic(1,L,3,2,"div",10),O.Ic(2,P,2,5,"div",11),O.Wb(3,"div",12),O.Kc(4),O.Wb(5,"b"),O.Kc(6),O.Vb(),O.Vb(),O.Vb()),2&t){const t=O.kc();O.Cb(1),O.pc("ngIf",t.issuelist&&t.issuelist.results&&t.issuelist.results.length>1),O.Cb(1),O.pc("ngIf",t.issuelist.total>t.issuelist.pageSize),O.Cb(2),O.Nc(" ",t.issuelist.startAt+1," - ",t.issuelist.endAt," / "),O.Cb(2),O.Lc(t.issuelist.total)}}let T=(()=>{class t{constructor(t,s,e,i){this.router=t,this.activatedRoute=s,this.jiraService=e,this.store$=i,this.selectedTab=1,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0,this.canExecuteQuery=()=>this.query&&this.query.trim().length>0}ngOnInit(){this.localViewmode=d.b,this.searchViewmode$=this.store$.select(t=>t.search.viewmode).subscribe(t=>this.searchViewmode=t),this.store$.dispatch(new S.p(!0)),this.query$=this.store$.select(t=>t.app.query).pipe(Object(v.a)(t=>t&&t.length>0)).subscribe(t=>{this.query=t,this.executeQuery()}),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(v.a)(t=>t&&t.query&&t.query.length>0),Object(I.a)(t=>t.query)).subscribe(t=>this.store$.dispatch(new S.n(t))),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(v.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}parseQueryContext(t,s){if(t)return t.issueType!==w.a.Organization&&s.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,s):null}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}executeQuery(){this.canExecuteQuery()&&this.jiraService.executeJql(this.query,this.currentPageIndex-1,50,["components","labels","fixVersions"],"issuelist.json").pipe(Object(I.a)(t=>({total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:y.map(t.issues,t=>Object(w.n)(t))}))).subscribe(t=>this.store$.dispatch(new d.c(t)))}onPageChange(){this.executeQuery()}}return t.\u0275fac=function(s){return new(s||t)(O.Qb(c.d),O.Qb(c.a),O.Qb(k.b),O.Qb(a.h))},t.\u0275cmp=O.Kb({type:t,selectors:[["app-result-container"]],decls:10,vars:2,consts:[[1,"main-container"],["direction","horizontal"],["size","15",1,"small","pt-2","pl-3"],["size","85"],[1,"body-container"],[1,"container-fluid"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["class","footer-container bg-light",4,"ngIf"],[1,"center-text","custom-shadow","alert-warning","p-4"],[1,"footer-container","bg-light"],["class","float-right pt-1 ml-2",4,"ngIf"],["class","float-right mt-1 mb-0",4,"ngIf"],[1,"pt-2","small","clearfix"],[1,"float-right","pt-1","ml-2"],["class","btn btn-brand btn-sm","routerLink","storyboard","queryParamsHandling","merge",4,"ngIf"],["class","btn btn-secondary btn-sm","routerLink","list","queryParamsHandling","merge",4,"ngIf"],["routerLink","storyboard","queryParamsHandling","merge",1,"btn","btn-brand","btn-sm"],["icon","map",3,"fixedWidth"],["routerLink","list","queryParamsHandling","merge",1,"btn","btn-secondary","btn-sm"],["icon","chevron-left",3,"fixedWidth"],[1,"float-right","mt-1","mb-0"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"]],template:function(t,s){1&t&&(O.Wb(0,"div",0),O.Wb(1,"as-split",1),O.Wb(2,"as-split-area",2),O.Rb(3,"app-favourite-searches"),O.Vb(),O.Wb(4,"as-split-area",3),O.Wb(5,"div",4),O.Wb(6,"div",5),O.Rb(7,"router-outlet"),O.Ic(8,$,2,0,"div",6),O.Vb(),O.Vb(),O.Ic(9,z,7,5,"div",7),O.Vb(),O.Vb(),O.Vb()),2&t&&(O.Cb(8),O.pc("ngIf",s.issuelist&&0===s.issuelist.total),O.Cb(1),O.pc("ngIf",s.issuelist&&s.issuelist.total>0))},directives:[V.c,V.b,q,c.h,i.l,c.f,n.a,m.q],encapsulation:2}),t})();const K=function(t,s){return["/browse",t,"purpose",s]};function N(t,s){if(1&t&&(O.Wb(0,"div",5),O.Wb(1,"a",6),O.Wb(2,"sub",7),O.Kc(3),O.Vb(),O.Rb(4,"fa-icon",8),O.Wb(5,"div"),O.Kc(6),O.Wb(7,"span",9),O.Kc(8),O.Vb(),O.Vb(),O.Vb(),O.Vb()),2&t){const t=s.$implicit;O.Cb(1),O.pc("routerLink",O.uc(5,K,t.key,t.key)),O.Cb(2),O.Nc("",t.issueType,": ",t.key,""),O.Cb(3),O.Mc(" ",t.title," "),O.Cb(2),O.Lc(t.status)}}function F(t,s){if(1&t&&(O.Wb(0,"div",3),O.Ic(1,N,9,8,"div",4),O.Vb()),2&t){const t=O.kc();O.Cb(1),O.pc("ngForOf",t.issuelist.results)}}let A=(()=>{class t{constructor(t,s,e,i){this.router=t,this.activatedRoute=s,this.jiraService=e,this.store$=i,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0}ngOnInit(){this.store$.dispatch(new d.f(d.b.LIST)),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(v.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}return t.\u0275fac=function(s){return new(s||t)(O.Qb(c.d),O.Qb(c.a),O.Qb(k.b),O.Qb(a.h))},t.\u0275cmp=O.Kb({type:t,selectors:[["app-search-listview"]],decls:3,vars:1,consts:[[1,"row"],[1,"col-md-10"],["class","p-3 bg-white",4,"ngIf"],[1,"p-3","bg-white"],["class","issue-list-item",4,"ngFor","ngForOf"],[1,"issue-list-item"],[1,"btn","btn-link","btn-sm","text-dark","text-left","w-100","pt-0",3,"routerLink"],[1,"text-primary","text-uppercase"],["icon","angle-right",1,"text-muted","float-right","mt-2"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,s){1&t&&(O.Wb(0,"div",0),O.Wb(1,"div",1),O.Ic(2,F,2,1,"div",2),O.Vb(),O.Vb()),2&t&&(O.Cb(2),O.pc("ngIf",s.issuelist))},directives:[i.l,i.k,c.f,n.a],encapsulation:2}),t})();var B=e("iLqC"),X=e("Ewkv"),D=e("NGyg");function E(t,s){if(1&t){const t=O.Xb();O.Wb(0,"p-dialog",5),O.ic("visibleChange",(function(s){return O.Bc(t),O.kc(2).showStatistics=s})),O.Rb(1,"app-epic-statistics",6),O.Vb()}if(2&t){const t=O.kc(2);O.pc("visible",t.showStatistics),O.Cb(1),O.pc("statusStats",t.storyboardItem.statistics.status)("issueTypeStats",t.storyboardItem.statistics.issueTypes)("componentStats",t.storyboardItem.statistics.components)}}const H=function(){return["far","chart-bar"]};function J(t,s){if(1&t){const t=O.Xb();O.Wb(0,"div"),O.Wb(1,"button",1),O.ic("click",(function(){return O.Bc(t),O.kc().showStatistics=!0})),O.Rb(2,"fa-icon",2),O.Vb(),O.Rb(3,"app-storyboard-renderer",3),O.Ic(4,E,2,4,"p-dialog",4),O.Vb()}if(2&t){const t=O.kc();O.Cb(2),O.pc("icon",O.sc(3,H)),O.Cb(1),O.pc("storyboardItem",t.storyboardItem),O.Cb(1),O.pc("ngIf",t.storyboardItem.statistics)}}let M=(()=>{class t{constructor(t,s){this.store$=t,this.activatedRoute=s,this.showStatistics=!1}ngOnInit(){this.store$.dispatch(new d.f(d.b.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(v.a)(t=>t)).subscribe(t=>{this.storyboardItem.metadata=Object(B.b)(),this.storyboardItem.children=t.results,Object(B.c)(this.storyboardItem.metadata,Object(B.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(B.d)(this.storyboardItem)})}ngOnDestroy(){this.issuelist$&&this.issuelist$.unsubscribe()}}return t.\u0275fac=function(s){return new(s||t)(O.Qb(a.h),O.Qb(c.a))},t.\u0275cmp=O.Kb({type:t,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"btn","btn-link","float-right","mt-1",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,s){1&t&&O.Ic(0,J,5,4,"div",0),2&t&&O.pc("ngIf",s.storyboardItem)},directives:[i.l,n.a,X.a,p.a,D.a],encapsulation:2}),t})();e.d(s,"SearchModule",(function(){return G}));const Y=[{path:"",component:T,children:[{path:"list",component:A},{path:"storyboard",component:M}]}];let G=(()=>{class t{}return t.\u0275mod=O.Ob({type:t}),t.\u0275inj=O.Nb({factory:function(s){return new(s||t)},imports:[[i.c,c.g,b.c,r.b,n.c,u.b,l.a,p.b,h.b,V.a,m.i,o.a,a.i.forFeature("search",f,{initialState:g}),c.g.forChild(Y)]]}),t})()}}]);