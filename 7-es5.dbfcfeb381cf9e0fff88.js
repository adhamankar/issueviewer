function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,i){"use strict";i.r(e);var s=i("ofXK"),n=i("kt0X"),r=i("l2bN"),a=i("6NWb"),c=i("tyNb"),o=i("sITn"),u=i("3Pt+"),b=i("jLSX"),l=i("EVgl"),d=i("LPYB"),f=(i("hSFZ"),i("/RsI")),h=i("6ElM"),p={queryContext:null,issuelist:null,viewmode:h.b.LIST};function g(t,e){switch(e.type){case h.a.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case h.a.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case h.a.SetIssuelist:return Object.assign(Object.assign({},t),{issuelist:e.payload});default:return t}}var v=i("1kSV"),m=i("LvDl"),y=i("pLZG"),I=i("lJxs"),w=i("krUz"),k=i("SYT+"),C=i("fXoL"),S=i("F2Ol");function V(t,e){1&t&&(C.Wb(0,"div",5),C.Kc(1," No Records found. "),C.Vb())}function x(t,e){1&t&&(C.Wb(0,"a",17),C.Rb(1,"fa-icon",18),C.Kc(2," Storyboard view "),C.Vb()),2&t&&(C.Cb(1),C.pc("fixedWidth",!0))}function O(t,e){1&t&&(C.Wb(0,"a",19),C.Rb(1,"fa-icon",20),C.Kc(2," Back to list view "),C.Vb()),2&t&&(C.Cb(1),C.pc("fixedWidth",!0))}function W(t,e){if(1&t&&(C.Wb(0,"div",14),C.Ic(1,x,3,1,"a",15),C.Ic(2,O,3,1,"a",16),C.Vb()),2&t){var i=C.kc(2);C.Cb(1),C.pc("ngIf",i.searchViewmode===i.localViewmode.LIST),C.Cb(1),C.pc("ngIf",i.searchViewmode===i.localViewmode.STORYBOARD)}}function j(t,e){if(1&t){var i=C.Xb();C.Wb(0,"div",6),C.Wb(1,"div",2),C.Wb(2,"div",7),C.Rb(3,"div",8),C.Wb(4,"div",9),C.Wb(5,"table",7),C.Wb(6,"div",10),C.Kc(7),C.Wb(8,"b"),C.Kc(9),C.Vb(),C.Vb(),C.Wb(10,"div",11),C.Wb(11,"ngb-pagination",12),C.ic("pageChange",(function(t){return C.Bc(i),C.kc().currentPageIndex=t}))("pageChange",(function(){return C.Bc(i),C.kc().onPageChange()})),C.Vb(),C.Vb(),C.Vb(),C.Vb(),C.Ic(12,W,3,2,"div",13),C.Vb(),C.Vb(),C.Vb()}if(2&t){var s=C.kc();C.Cb(7),C.Nc(" ",s.issuelist.startAt+1," - ",s.issuelist.endAt," / "),C.Cb(2),C.Lc(s.issuelist.total),C.Cb(2),C.pc("maxSize",3)("page",s.currentPageIndex)("boundaryLinks",!0)("pageSize",s.issuelist.pageSize)("collectionSize",s.issuelist.total),C.Cb(1),C.pc("ngIf",s.issuelist&&s.issuelist.results&&s.issuelist.results.length>1)}}var q,R=((q=function(){function t(e,i,s,n){var r=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=i,this.jiraService=s,this.store$=n,this.currentPageIndex=1,this.canNavigate=function(){return r.issuelist&&r.issuelist.trim().length>0},this.canExecuteQuery=function(){return r.query&&r.query.trim().length>0}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.localViewmode=h.b,this.searchViewmode$=this.store$.select((function(t){return t.search.viewmode})).subscribe((function(e){return t.searchViewmode=e})),this.store$.dispatch(new k.p(!0)),this.query$=this.store$.select((function(t){return t.app.query})).pipe(Object(y.a)((function(t){return t&&t.length>0}))).subscribe((function(e){t.query=e,t.executeQuery()})),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(y.a)((function(t){return t&&t.query&&t.query.length>0})),Object(I.a)((function(t){return t.query}))).subscribe((function(e){return t.store$.dispatch(new k.m(e))})),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(y.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"parseQueryContext",value:function(t,e){if(t)return t.issueType!==w.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}},{key:"executeQuery",value:function(){var t=this;this.canExecuteQuery()&&this.jiraService.executeJql(this.query,this.currentPageIndex-1,50,["components","labels","fixVersions"],"issuelist.json").pipe(Object(I.a)((function(t){return{total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:m.map(t.issues,(function(t){return Object(w.m)(t)}))}}))).subscribe((function(e){return t.store$.dispatch(new h.c(e))}))}},{key:"onPageChange",value:function(){this.executeQuery()}}]),t}()).\u0275fac=function(t){return new(t||q)(C.Qb(c.d),C.Qb(c.a),C.Qb(S.b),C.Qb(n.h))},q.\u0275cmp=C.Kb({type:q,selectors:[["app-result-container"]],decls:6,vars:2,consts:[[1,"main-container"],[1,"body-container"],[1,"container-fluid"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["class","pane-footer bg-light",4,"ngIf"],[1,"center-text","custom-shadow","alert-warning","p-4"],[1,"pane-footer","bg-light"],[1,"row"],[1,"col-md-2"],[1,"col-md-8"],[1,"col-md-3","pt-3","small"],[1,"col-md-9"],["size","sm",1,"float-right","mt-2",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"],["class","col-md-2 text-right pt-2",4,"ngIf"],[1,"col-md-2","text-right","pt-2"],["class","btn btn-brand btn-sm","routerLink","storyboard","queryParamsHandling","merge",4,"ngIf"],["class","btn btn-secondary btn-sm","routerLink","list","queryParamsHandling","merge",4,"ngIf"],["routerLink","storyboard","queryParamsHandling","merge",1,"btn","btn-brand","btn-sm"],["icon","map",3,"fixedWidth"],["routerLink","list","queryParamsHandling","merge",1,"btn","btn-secondary","btn-sm"],["icon","chevron-left",3,"fixedWidth"]],template:function(t,e){1&t&&(C.Wb(0,"div",0),C.Wb(1,"div",1),C.Wb(2,"div",2),C.Rb(3,"router-outlet"),C.Ic(4,V,2,0,"div",3),C.Vb(),C.Vb(),C.Ic(5,j,13,9,"div",4),C.Vb()),2&t&&(C.Cb(4),C.pc("ngIf",e.issuelist&&0===e.issuelist.total),C.Cb(1),C.pc("ngIf",e.issuelist&&e.issuelist.total>0))},directives:[c.h,s.l,v.q,c.f,a.a],encapsulation:2}),q),$=function(t,e){return["/browse",t,"purpose",e]};function L(t,e){if(1&t&&(C.Wb(0,"div",5),C.Wb(1,"a",6),C.Wb(2,"sub",7),C.Kc(3),C.Vb(),C.Rb(4,"fa-icon",8),C.Wb(5,"div"),C.Kc(6),C.Wb(7,"span",9),C.Kc(8),C.Vb(),C.Vb(),C.Vb(),C.Vb()),2&t){var i=e.$implicit;C.Cb(1),C.pc("routerLink",C.uc(5,$,i.key,i.key)),C.Cb(2),C.Nc("",i.issueType,": ",i.key,""),C.Cb(3),C.Mc(" ",i.title," "),C.Cb(2),C.Lc(i.status)}}function P(t,e){if(1&t&&(C.Wb(0,"div",3),C.Ic(1,L,9,8,"div",4),C.Vb()),2&t){var i=C.kc();C.Cb(1),C.pc("ngForOf",i.issuelist.results)}}var Q,T=((Q=function(){function t(e,i,s,n){var r=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=i,this.jiraService=s,this.store$=n,this.currentPageIndex=1,this.canNavigate=function(){return r.issuelist&&r.issuelist.trim().length>0}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new h.e(h.b.LIST)),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(y.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}]),t}()).\u0275fac=function(t){return new(t||Q)(C.Qb(c.d),C.Qb(c.a),C.Qb(S.b),C.Qb(n.h))},Q.\u0275cmp=C.Kb({type:Q,selectors:[["app-search-listview"]],decls:3,vars:1,consts:[[1,"row"],[1,"col-md-8","offset-md-2"],["class","p-3 bg-white",4,"ngIf"],[1,"p-3","bg-white"],["class","issue-list-item",4,"ngFor","ngForOf"],[1,"issue-list-item"],[1,"btn","btn-link","btn-sm","text-dark","text-left","w-100","pt-0",3,"routerLink"],[1,"text-primary","text-uppercase"],["icon","angle-right",1,"text-muted","float-right","mt-2"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&(C.Wb(0,"div",0),C.Wb(1,"div",1),C.Ic(2,P,2,1,"div",2),C.Vb(),C.Vb()),2&t&&(C.Cb(2),C.pc("ngIf",e.issuelist))},directives:[s.l,s.k,c.f,a.a],encapsulation:2}),Q),z=i("iLqC"),K=i("Ewkv"),N=i("NGyg");function _(t,e){if(1&t){var i=C.Xb();C.Wb(0,"p-dialog",5),C.ic("visibleChange",(function(t){return C.Bc(i),C.kc(2).showStatistics=t})),C.Rb(1,"app-epic-statistics",6),C.Vb()}if(2&t){var s=C.kc(2);C.pc("visible",s.showStatistics),C.Cb(1),C.pc("statusStats",s.storyboardItem.statistics.status)("issueTypeStats",s.storyboardItem.statistics.issueTypes)("componentStats",s.storyboardItem.statistics.components)}}var A=function(){return["far","chart-bar"]};function B(t,e){if(1&t){var i=C.Xb();C.Wb(0,"div"),C.Wb(1,"button",1),C.ic("click",(function(){return C.Bc(i),C.kc().showStatistics=!0})),C.Rb(2,"fa-icon",2),C.Vb(),C.Rb(3,"app-storyboard-renderer",3),C.Ic(4,_,2,4,"p-dialog",4),C.Vb()}if(2&t){var s=C.kc();C.Cb(2),C.pc("icon",C.sc(3,A)),C.Cb(1),C.pc("storyboardItem",s.storyboardItem),C.Cb(1),C.pc("ngIf",s.storyboardItem.statistics)}}var X,D=((X=function(){function t(e,i){_classCallCheck(this,t),this.store$=e,this.activatedRoute=i,this.showStatistics=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new h.e(h.b.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(y.a)((function(t){return t}))).subscribe((function(e){t.storyboardItem.metadata=Object(z.b)(),console.log(e),t.storyboardItem.children=e.results,Object(z.c)(t.storyboardItem.metadata,Object(z.a)(t.storyboardItem.children)),t.storyboardItem.statistics=Object(z.d)(t.storyboardItem)}))}},{key:"ngOnDestroy",value:function(){this.issuelist$&&this.issuelist$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||X)(C.Qb(n.h),C.Qb(c.a))},X.\u0275cmp=C.Kb({type:X,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"btn","btn-link","float-right","mt-1",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&C.Ic(0,B,5,4,"div",0),2&t&&C.pc("ngIf",e.storyboardItem)},directives:[s.l,a.a,K.a,f.a,N.a],encapsulation:2}),X);i.d(e,"SearchModule",(function(){return H}));var E,F=[{path:"",component:R,children:[{path:"list",component:T},{path:"storyboard",component:D}]}],H=((E=function t(){_classCallCheck(this,t)}).\u0275mod=C.Ob({type:E}),E.\u0275inj=C.Nb({factory:function(t){return new(t||E)},imports:[[s.c,c.g,u.c,r.b,a.c,b.b,l.a,f.b,d.b,v.i,o.a,n.i.forFeature("search",g,{initialState:p}),c.g.forChild(F)]]}),E)}}]);