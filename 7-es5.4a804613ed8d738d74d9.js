function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,i){"use strict";i.r(e);var s=i("ofXK"),n=i("kt0X"),r=i("l2bN"),a=i("6NWb"),c=i("tyNb"),o=i("sITn"),u=i("3Pt+"),l=i("jLSX"),b=i("EVgl"),f=i("LPYB"),h=(i("hSFZ"),i("/RsI")),p=i("6ElM"),d={queryContext:null,issuelist:null,viewmode:p.b.LIST,savedSearchlist:null};function g(t,e){switch(e.type){case p.a.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case p.a.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case p.a.SetIssuelist:return Object.assign(Object.assign({},t),{issuelist:e.payload});case p.a.SetSavedSearchlist:return Object.assign(Object.assign({},t),{savedSearchlist:e.payload});default:return t}}var v=i("1kSV"),m=i("LvDl"),y=i("pLZG"),I=i("lJxs"),k=i("krUz"),C=i("SYT+"),w=i("fXoL"),S=i("F2Ol"),O=i("cdP3"),V=function(){return["/search/list"]},x=function(t){return{query:t}};function j(t,e){if(1&t&&(w.Wb(0,"div",3),w.Wb(1,"a",4),w.Kc(2),w.Vb(),w.Vb()),2&t){var i=e.$implicit;w.Cb(1),w.pc("routerLink",w.sc(3,V))("queryParams",w.tc(4,x,i.jql)),w.Cb(1),w.Mc(" ",i.name," ")}}function W(t,e){if(1&t&&(w.Wb(0,"div",1),w.Ic(1,j,3,6,"div",2),w.Vb()),2&t){var i=w.kc();w.Cb(1),w.pc("ngForOf",i.searchlist)}}var q,$=((q=function(){function t(e,i,s,n){_classCallCheck(this,t),this.router=e,this.activatedRoute=i,this.jiraService=s,this.store$=n}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.searchlist$=this.store$.select((function(t){return t.search.savedSearchlist})).pipe(Object(y.a)((function(t){return t}))).subscribe((function(e){return t.searchlist=e})),this.jiraService.favouriteSearches("favourite-search.json").pipe(Object(y.a)((function(t){return t&&t.length>0})),Object(I.a)((function(t){return m.map(t,(function(t){return m.pick(t,["id","name","jql"])}))}))).subscribe((function(e){return t.store$.dispatch(new p.e(e))}))}},{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||q)(w.Qb(c.d),w.Qb(c.a),w.Qb(S.b),w.Qb(n.h))},q.\u0275cmp=w.Kb({type:q,selectors:[["app-favourite-searches"]],decls:3,vars:1,consts:[["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(w.Wb(0,"h6"),w.Kc(1,"Favourite"),w.Vb(),w.Ic(2,W,2,1,"div",0)),2&t&&(w.Cb(2),w.pc("ngIf",e.searchlist))},directives:[s.l,s.k,c.f],encapsulation:2}),q);function R(t,e){1&t&&(w.Wb(0,"div",8),w.Kc(1," No Records found. "),w.Vb())}function P(t,e){1&t&&(w.Wb(0,"a",16),w.Rb(1,"fa-icon",17),w.Kc(2," Storyboard view "),w.Vb()),2&t&&(w.Cb(1),w.pc("fixedWidth",!0))}function Q(t,e){1&t&&(w.Wb(0,"a",18),w.Rb(1,"fa-icon",19),w.Kc(2," Back to list view "),w.Vb()),2&t&&(w.Cb(1),w.pc("fixedWidth",!0))}function L(t,e){if(1&t&&(w.Wb(0,"div",13),w.Ic(1,P,3,1,"a",14),w.Ic(2,Q,3,1,"a",15),w.Vb()),2&t){var i=w.kc(2);w.Cb(1),w.pc("ngIf",i.searchViewmode===i.localViewmode.LIST),w.Cb(1),w.pc("ngIf",i.searchViewmode===i.localViewmode.STORYBOARD)}}function T(t,e){if(1&t){var i=w.Xb();w.Wb(0,"div",20),w.Wb(1,"ngb-pagination",21),w.ic("pageChange",(function(t){return w.Bc(i),w.kc(2).currentPageIndex=t}))("pageChange",(function(){return w.Bc(i),w.kc(2).onPageChange()})),w.Vb(),w.Vb()}if(2&t){var s=w.kc(2);w.Cb(1),w.pc("maxSize",3)("page",s.currentPageIndex)("boundaryLinks",!0)("pageSize",s.issuelist.pageSize)("collectionSize",s.issuelist.total)}}function z(t,e){if(1&t&&(w.Wb(0,"div",9),w.Ic(1,L,3,2,"div",10),w.Ic(2,T,2,5,"div",11),w.Wb(3,"div",12),w.Kc(4),w.Wb(5,"b"),w.Kc(6),w.Vb(),w.Vb(),w.Vb()),2&t){var i=w.kc();w.Cb(1),w.pc("ngIf",i.issuelist&&i.issuelist.results&&i.issuelist.results.length>1),w.Cb(1),w.pc("ngIf",i.issuelist.total>i.issuelist.pageSize),w.Cb(2),w.Nc(" ",i.issuelist.startAt+1," - ",i.issuelist.endAt," / "),w.Cb(2),w.Lc(i.issuelist.total)}}var K,_=((K=function(){function t(e,i,s,n){var r=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=i,this.jiraService=s,this.store$=n,this.selectedTab=1,this.currentPageIndex=1,this.canNavigate=function(){return r.issuelist&&r.issuelist.trim().length>0},this.canExecuteQuery=function(){return r.query&&r.query.trim().length>0}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.localViewmode=p.b,this.searchViewmode$=this.store$.select((function(t){return t.search.viewmode})).subscribe((function(e){return t.searchViewmode=e})),this.store$.dispatch(new C.p(!0)),this.query$=this.store$.select((function(t){return t.app.query})).pipe(Object(y.a)((function(t){return t&&t.length>0}))).subscribe((function(e){t.query=e,t.executeQuery()})),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(y.a)((function(t){return t&&t.query&&t.query.length>0})),Object(I.a)((function(t){return t.query}))).subscribe((function(e){return t.store$.dispatch(new C.n(e))})),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(y.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"parseQueryContext",value:function(t,e){if(t)return t.issueType!==k.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}},{key:"executeQuery",value:function(){var t=this;this.canExecuteQuery()&&this.jiraService.executeJql(this.query,this.currentPageIndex-1,50,["components","labels","fixVersions"],"issuelist.json").pipe(Object(I.a)((function(t){return{total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:m.map(t.issues,(function(t){return Object(k.n)(t)}))}}))).subscribe((function(e){return t.store$.dispatch(new p.c(e))}))}},{key:"onPageChange",value:function(){this.executeQuery()}}]),t}()).\u0275fac=function(t){return new(t||K)(w.Qb(c.d),w.Qb(c.a),w.Qb(S.b),w.Qb(n.h))},K.\u0275cmp=w.Kb({type:K,selectors:[["app-result-container"]],decls:10,vars:2,consts:[[1,"main-container"],["direction","horizontal"],["size","15",1,"small","pt-2","pl-3"],["size","85"],[1,"body-container"],[1,"container-fluid"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["class","footer-container bg-light",4,"ngIf"],[1,"center-text","custom-shadow","alert-warning","p-4"],[1,"footer-container","bg-light"],["class","float-right pt-1 ml-2",4,"ngIf"],["class","float-right mt-1 mb-0",4,"ngIf"],[1,"pt-2","small","clearfix"],[1,"float-right","pt-1","ml-2"],["class","btn btn-brand btn-sm","routerLink","storyboard","queryParamsHandling","merge",4,"ngIf"],["class","btn btn-secondary btn-sm","routerLink","list","queryParamsHandling","merge",4,"ngIf"],["routerLink","storyboard","queryParamsHandling","merge",1,"btn","btn-brand","btn-sm"],["icon","map",3,"fixedWidth"],["routerLink","list","queryParamsHandling","merge",1,"btn","btn-secondary","btn-sm"],["icon","chevron-left",3,"fixedWidth"],[1,"float-right","mt-1","mb-0"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"]],template:function(t,e){1&t&&(w.Wb(0,"div",0),w.Wb(1,"as-split",1),w.Wb(2,"as-split-area",2),w.Rb(3,"app-favourite-searches"),w.Vb(),w.Wb(4,"as-split-area",3),w.Wb(5,"div",4),w.Wb(6,"div",5),w.Rb(7,"router-outlet"),w.Ic(8,R,2,0,"div",6),w.Vb(),w.Vb(),w.Ic(9,z,7,5,"div",7),w.Vb(),w.Vb(),w.Vb()),2&t&&(w.Cb(8),w.pc("ngIf",e.issuelist&&0===e.issuelist.total),w.Cb(1),w.pc("ngIf",e.issuelist&&e.issuelist.total>0))},directives:[O.c,O.b,$,c.h,s.l,c.f,a.a,v.q],encapsulation:2}),K),N=function(t,e){return["/browse",t,"purpose",e]};function F(t,e){if(1&t&&(w.Wb(0,"div",5),w.Wb(1,"a",6),w.Wb(2,"sub",7),w.Kc(3),w.Vb(),w.Rb(4,"fa-icon",8),w.Wb(5,"div"),w.Kc(6),w.Wb(7,"span",9),w.Kc(8),w.Vb(),w.Vb(),w.Vb(),w.Vb()),2&t){var i=e.$implicit;w.Cb(1),w.pc("routerLink",w.uc(5,N,i.key,i.key)),w.Cb(2),w.Nc("",i.issueType,": ",i.key,""),w.Cb(3),w.Mc(" ",i.title," "),w.Cb(2),w.Lc(i.status)}}function A(t,e){if(1&t&&(w.Wb(0,"div",3),w.Ic(1,F,9,8,"div",4),w.Vb()),2&t){var i=w.kc();w.Cb(1),w.pc("ngForOf",i.issuelist.results)}}var B,X=((B=function(){function t(e,i,s,n){var r=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=i,this.jiraService=s,this.store$=n,this.currentPageIndex=1,this.canNavigate=function(){return r.issuelist&&r.issuelist.trim().length>0}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new p.f(p.b.LIST)),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(y.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}]),t}()).\u0275fac=function(t){return new(t||B)(w.Qb(c.d),w.Qb(c.a),w.Qb(S.b),w.Qb(n.h))},B.\u0275cmp=w.Kb({type:B,selectors:[["app-search-listview"]],decls:3,vars:1,consts:[[1,"row"],[1,"col-md-10"],["class","p-3 bg-white",4,"ngIf"],[1,"p-3","bg-white"],["class","issue-list-item",4,"ngFor","ngForOf"],[1,"issue-list-item"],[1,"btn","btn-link","btn-sm","text-dark","text-left","w-100","pt-0",3,"routerLink"],[1,"text-primary","text-uppercase"],["icon","angle-right",1,"text-muted","float-right","mt-2"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&(w.Wb(0,"div",0),w.Wb(1,"div",1),w.Ic(2,A,2,1,"div",2),w.Vb(),w.Vb()),2&t&&(w.Cb(2),w.pc("ngIf",e.issuelist))},directives:[s.l,s.k,c.f,a.a],encapsulation:2}),B),D=i("iLqC"),E=i("Ewkv"),H=i("NGyg");function J(t,e){if(1&t){var i=w.Xb();w.Wb(0,"p-dialog",5),w.ic("visibleChange",(function(t){return w.Bc(i),w.kc(2).showStatistics=t})),w.Rb(1,"app-epic-statistics",6),w.Vb()}if(2&t){var s=w.kc(2);w.pc("visible",s.showStatistics),w.Cb(1),w.pc("statusStats",s.storyboardItem.statistics.status)("issueTypeStats",s.storyboardItem.statistics.issueTypes)("componentStats",s.storyboardItem.statistics.components)}}var M=function(){return["far","chart-bar"]};function Y(t,e){if(1&t){var i=w.Xb();w.Wb(0,"div"),w.Wb(1,"button",1),w.ic("click",(function(){return w.Bc(i),w.kc().showStatistics=!0})),w.Rb(2,"fa-icon",2),w.Vb(),w.Rb(3,"app-storyboard-renderer",3),w.Ic(4,J,2,4,"p-dialog",4),w.Vb()}if(2&t){var s=w.kc();w.Cb(2),w.pc("icon",w.sc(3,M)),w.Cb(1),w.pc("storyboardItem",s.storyboardItem),w.Cb(1),w.pc("ngIf",s.storyboardItem.statistics)}}var G,Z=((G=function(){function t(e,i){_classCallCheck(this,t),this.store$=e,this.activatedRoute=i,this.showStatistics=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new p.f(p.b.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(y.a)((function(t){return t}))).subscribe((function(e){t.storyboardItem.metadata=Object(D.b)(),t.storyboardItem.children=e.results,Object(D.c)(t.storyboardItem.metadata,Object(D.a)(t.storyboardItem.children)),t.storyboardItem.statistics=Object(D.d)(t.storyboardItem)}))}},{key:"ngOnDestroy",value:function(){this.issuelist$&&this.issuelist$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||G)(w.Qb(n.h),w.Qb(c.a))},G.\u0275cmp=w.Kb({type:G,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"btn","btn-link","float-right","mt-1",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&w.Ic(0,Y,5,4,"div",0),2&t&&w.pc("ngIf",e.storyboardItem)},directives:[s.l,a.a,E.a,h.a,H.a],encapsulation:2}),G);i.d(e,"SearchModule",(function(){return et}));var U,tt=[{path:"",component:_,children:[{path:"list",component:X},{path:"storyboard",component:Z}]}],et=((U=function t(){_classCallCheck(this,t)}).\u0275mod=w.Ob({type:U}),U.\u0275inj=w.Nb({factory:function(t){return new(t||U)},imports:[[s.c,c.g,u.c,r.b,a.c,l.b,b.a,h.b,f.b,O.a,v.i,o.a,n.i.forFeature("search",g,{initialState:d}),c.g.forChild(tt)]]}),U)}}]);