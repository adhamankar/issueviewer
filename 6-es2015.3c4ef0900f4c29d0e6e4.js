(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{cyGc:function(e,t,i){"use strict";i.r(t);var s=i("ofXK"),n=i("kt0X");const c={selectedItem:null,item:null,recentlyViewedItems:[],recentmostItem:null,organizationEditorVisible:!1,hierarchyEditorVisible:!1};var o=i("Kv0p");function r(e,t){switch(t.type){case o.a.SetSelectedItem:return Object.assign(Object.assign({},e),{selectedItem:t.payload});case o.a.SetPurpose:return Object.assign(Object.assign({},e),{item:t.payload});case o.a.SetRecentlyViewed:return Object.assign(Object.assign({},e),{recentmostItem:t.payload});case o.a.ManageOrganizationEditorVisibility:return Object.assign(Object.assign({},e),{organizationEditorVisible:t.payload});case o.a.ManageHierarchyEditorVisibility:return Object.assign(Object.assign({},e),{hierarchyEditorVisible:t.payload});default:return e}}var l=i("fXoL"),a=i("LvDl"),b=i("pLZG"),d=i("krUz"),p=i("ze3F"),u=i("jLSX"),h=i("F2Ol"),f=i("vjJ9"),g=i("3Pt+");function m(e,t){if(1&e){const e=l.Xb();l.Wb(0,"div",6),l.Wb(1,"div",7),l.Wb(2,"label",8),l.Kc(3,"Organization name"),l.Vb(),l.Wb(4,"input",9),l.ic("ngModelChange",(function(t){return l.Bc(e),l.kc().organization.name=t}))("keydown.control.enter",(function(){return l.Bc(e),l.kc().onSave()})),l.Vb(),l.Vb(),l.Wb(5,"div",7),l.Wb(6,"label",8),l.Kc(7,"Purpose"),l.Vb(),l.Wb(8,"textarea",10),l.ic("ngModelChange",(function(t){return l.Bc(e),l.kc().organization.purpose=t}))("keydown.control.enter",(function(){return l.Bc(e),l.kc().onSave()})),l.Vb(),l.Vb(),l.Vb()}if(2&e){const e=l.kc();l.Cb(4),l.pc("ngModel",e.organization.name),l.Cb(4),l.pc("ngModel",e.organization.purpose)}}let v=(()=>{class e{constructor(e,t){this.jiraService=e,this.persistenceService=t,this.close=new l.n}ngOnInit(){this.organization=this.persistenceService.getOrganizationDetails()||{}}onSave(){this.persistenceService.setOrganizationDetails(this.organization),this.onClose(!0)}onClose(e){this.close.emit(e)}onReset(){this.persistenceService.resetOrganizationDetails(),this.onClose(!0)}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(h.b),l.Qb(p.a))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-organization"]],outputs:{close:"close"},decls:8,vars:1,consts:[[1,"pane"],[1,"pane-header"],[1,"pane-body","p-3"],["class","container",4,"ngIf"],[1,"pane-footer"],[3,"save","close","reset"],[1,"container"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","placeholder","organization name",1,"form-control","form-control-lg",3,"ngModel","ngModelChange","keydown.control.enter"],["rows","5",1,"form-control",3,"ngModel","ngModelChange","keydown.control.enter"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"h4"),l.Kc(3,"Organization setup"),l.Vb(),l.Vb(),l.Wb(4,"div",2),l.Ic(5,m,9,2,"div",3),l.Vb(),l.Wb(6,"div",4),l.Wb(7,"app-button-panel",5),l.ic("save",(function(){return t.onSave()}))("close",(function(){return t.onClose(!1)}))("reset",(function(){return t.onReset()})),l.Vb(),l.Vb(),l.Vb()),2&e&&(l.Cb(5),l.pc("ngIf",t.organization))},directives:[s.l,f.a,g.a,g.e,g.f],encapsulation:2}),e})();function y(e,t){if(1&e){const e=l.Xb();l.Wb(0,"div",3),l.Wb(1,"h4",4),l.Kc(2),l.Vb(),l.Wb(3,"div",5),l.Rb(4,"h5",4),l.Wb(5,"div",6),l.Wb(6,"label",7),l.Kc(7,"Purpose"),l.Vb(),l.Wb(8,"textarea",8),l.ic("ngModelChange",(function(t){return l.Bc(e),l.kc().hierarchyField.purpose=t}))("keydown.control.enter",(function(){return l.Bc(e),l.kc().onSave()})),l.Vb(),l.Vb(),l.Vb(),l.Rb(9,"hr"),l.Wb(10,"app-button-panel",9),l.ic("save",(function(){return l.Bc(e),l.kc().onSave()}))("close",(function(){return l.Bc(e),l.kc().onClose(!1)}))("reset",(function(){return l.Bc(e),l.kc().onReset()})),l.Vb(),l.Vb()}if(2&e){const e=l.kc();l.Cb(2),l.Lc(e.hierarchyField.title),l.Cb(6),l.pc("ngModel",e.hierarchyField.purpose)}}let V=(()=>{class e{constructor(e,t){this.jiraService=e,this.persistenceService=t,this.close=new l.n}ngOnInit(){}onSave(){this.persistenceService.setHierarchyFieldDetails(this.hierarchyField),this.onClose(!0)}onClose(e){this.close.emit(e)}onReset(){this.persistenceService.resetHierarchyFields(),this.onClose(!0)}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(h.b),l.Qb(p.a))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-hierarchy-field"]],inputs:{hierarchyField:"hierarchyField"},outputs:{close:"close"},decls:3,vars:1,consts:[[1,"pane"],[1,"pane-body","p-3"],["class","container",4,"ngIf"],[1,"container"],[1,"mb-2"],[1,"alert","bg-light","mb-3"],[1,"form-group"],["for","name"],["rows","5",1,"form-control",3,"ngModel","ngModelChange","keydown.control.enter"],[3,"save","close","reset"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Ic(2,y,11,2,"div",2),l.Vb(),l.Vb()),2&e&&(l.Cb(2),l.pc("ngIf",t.hierarchyField))},directives:[s.l,g.a,g.e,g.f,f.a],encapsulation:2}),e})();var I=i("6NWb"),k=i("l2bN");function W(e,t){if(1&e){const e=l.Xb();l.Wb(0,"div",19),l.Wb(1,"div",20),l.Wb(2,"div",21),l.Kc(3,"Setup organization purpose here"),l.Vb(),l.Wb(4,"button",22),l.ic("click",(function(){return l.Bc(e),l.kc(3).showOrganizationSetup=!0})),l.Rb(5,"fa-icon",23),l.Kc(6," add organization purpose "),l.Vb(),l.Vb(),l.Vb()}}const C=function(e){return{"float-left":e}};function w(e,t){if(1&e){const e=l.Xb();l.Wb(0,"div",10),l.Rb(1,"div",15),l.Wb(2,"div",16),l.Wb(3,"a",12),l.ic("click",(function(){l.Bc(e);const t=l.kc(2);return t.showOrgPurposeEditor=!t.showOrgPurposeEditor})),l.Rb(4,"fa-icon",13),l.Wb(5,"span",17),l.Kc(6,"Organization purpose"),l.Vb(),l.Vb(),l.Vb(),l.Ic(7,W,7,0,"div",18),l.Vb()}if(2&e){const e=l.kc(2);l.pc("ngClass",l.tc(3,C,!e.showOrgPurposeEditor)),l.Cb(4),l.pc("icon",e.showOrgPurposeEditor?"chevron-down":"chevron-right"),l.Cb(3),l.pc("ngIf",e.showOrgPurposeEditor)}}function S(e,t){if(1&e){const e=l.Xb();l.Wb(0,"a",28),l.ic("click",(function(){l.Bc(e);const t=l.kc(2).$implicit;return l.kc(2).onEdit(t)})),l.Rb(1,"fa-icon",29),l.Vb()}}const F=function(e){return{readonly:e}};function O(e,t){if(1&e&&(l.Wb(0,"div",25),l.Wb(1,"h5",26),l.Kc(2),l.Ic(3,S,2,0,"a",27),l.Vb(),l.Wb(4,"ngx-md"),l.Kc(5),l.Vb(),l.Vb()),2&e){const e=l.kc().$implicit;l.pc("ngClass",l.tc(4,F,!e.editable)),l.Cb(2),l.Mc("",e.title," "),l.Cb(1),l.pc("ngIf",e.editable),l.Cb(2),l.Mc(" ",e.purpose," ")}}function x(e,t){if(1&e&&(l.Wb(0,"div",10),l.Rb(1,"div",15),l.Wb(2,"div",16),l.Wb(3,"a",12),l.ic("click",(function(){const e=t.$implicit;return e.show=!e.show})),l.Rb(4,"fa-icon",13),l.Wb(5,"span",17),l.Kc(6),l.Vb(),l.Vb(),l.Vb(),l.Ic(7,O,6,6,"div",24),l.Vb()),2&e){const e=t.$implicit;l.pc("ngClass",l.tc(4,C,!e.show)),l.Cb(4),l.pc("icon",e.show?"chevron-down":"chevron-right"),l.Cb(2),l.Mc("",e.issueType," purpose"),l.Cb(1),l.pc("ngIf",e.show)}}const j=function(e){return{small:e}};function $(e,t){if(1&e){const e=l.Xb();l.Wb(0,"div",10),l.Wb(1,"div",11),l.Wb(2,"a",12),l.ic("click",(function(){l.Bc(e);const t=l.kc();return t.showHideAllPurposes(!t.showAll)})),l.Rb(3,"fa-icon",13),l.Vb(),l.Vb(),l.Ic(4,w,8,5,"div",2),l.Ic(5,x,8,6,"div",14),l.Vb()}if(2&e){const e=l.kc();l.pc("ngClass",l.tc(4,j,e.fontSizeSmall)),l.Cb(3),l.pc("icon",e.showAll?"angle-double-down":"angle-double-right"),l.Cb(1),l.pc("ngIf",!e.organizationPurpose),l.Cb(1),l.pc("ngForOf",e.purpose)}}let z=(()=>{class e{constructor(e,t){this.persistenceService=e,this.store$=t,this.edit=new l.n,this.showAll=!1,this.showOrganizationSetup=!1,this.showOrgPurposeEditor=!1,this.showHierarchyFieldSetup=!1,this.fontSizeSmall=!1,this.organizationPurpose=this.persistenceService.getOrganizationDetails()}ngOnInit(){this.purpose$=this.store$.select(e=>e.purpose.item).pipe(Object(b.a)(e=>e)).subscribe(e=>{this.purpose=e,this.showHideAllPurposes(!1)}),this.orgSetupVisibility$=this.store$.select(e=>e.purpose.organizationEditorVisible).subscribe(e=>this.showOrganizationSetup=e),this.hierarchySetupVisibility$=this.store$.select(e=>e.purpose.hierarchyEditorVisible).subscribe(e=>this.showHierarchyFieldSetup=e)}ngOnDestroy(){this.purpose$&&this.purpose$.unsubscribe(),this.orgSetupVisibility$&&this.orgSetupVisibility$.unsubscribe(),this.hierarchySetupVisibility$&&this.hierarchySetupVisibility$.unsubscribe()}onEdit(e){e.issueType===d.a.Organization?this.showOrganizationSetup=!0:!0===e.editable&&(this.hierarchyFieldPurpose=a.clone(e),this.showHierarchyFieldSetup=!0),this.edit.emit(e)}setupOrganization(){this.showOrganizationSetup=!0}setupCompleted(e){e?window.location.reload():(this.showOrganizationSetup=!1,this.showHierarchyFieldSetup=!1,this.store$.dispatch(new o.c(!1)),this.store$.dispatch(new o.b(!1)))}showHideAllPurposes(e){this.showAll=e,this.purpose&&(this.purpose.forEach(e=>e.show=this.showAll),!this.showAll&&this.purpose.length>0&&(this.purpose[this.purpose.length-1].show=!0))}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(p.a),l.Qb(n.h))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-purpose"]],outputs:{edit:"edit"},decls:13,vars:6,consts:[[1,"row"],[1,"col-md-10"],[3,"ngClass",4,"ngIf"],[1,"col-md-2"],[1,"sticky-title","text-right"],[1,"btn","btn-light","btn-sm","mr-2",3,"disabled","click"],[1,"btn","btn-light",3,"disabled","click"],["styleClass","ui-sidebar-md","position","right",3,"visible","visibleChange"],[3,"close"],[3,"hierarchyField","close"],[3,"ngClass"],[1,"border-0","pb-0","mb-2","float-left"],["title","Show/hide details",1,"btn","btn-light","btn-sm","text-muted","mr-2",3,"click"],["size","fw",3,"icon"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"clearfix"],[1,"text-uppercase","text-muted"],[1,"small"],["class","ml-3 p-3 border-left","style","overflow:auto",4,"ngIf"],[1,"ml-3","p-3","border-left",2,"overflow","auto"],[1,"alert","bg-light"],[1,"mb-2"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],["icon","plus",1,"font-weight-light"],["class","ml-3 hover-container pl-3 pr-3 border-left","style","overflow:auto",3,"ngClass",4,"ngIf"],[1,"ml-3","hover-container","pl-3","pr-3","border-left",2,"overflow","auto",3,"ngClass"],[1,"text-dark","font-weight-normal","mt-1"],["class","small text-muted ml-2 hover-button",3,"click",4,"ngIf"],[1,"small","text-muted","ml-2","hover-button",3,"click"],["icon","pencil-alt","size","sm"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Ic(2,$,6,6,"div",2),l.Vb(),l.Wb(3,"div",3),l.Wb(4,"div",4),l.Wb(5,"button",5),l.ic("click",(function(){return t.fontSizeSmall=!0})),l.Kc(6,"A"),l.Vb(),l.Wb(7,"button",6),l.ic("click",(function(){return t.fontSizeSmall=!1})),l.Kc(8,"A"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Wb(9,"p-sidebar",7),l.ic("visibleChange",(function(e){return t.showOrganizationSetup=e})),l.Wb(10,"app-organization",8),l.ic("close",(function(e){return t.setupCompleted(e)})),l.Vb(),l.Vb(),l.Wb(11,"p-sidebar",7),l.ic("visibleChange",(function(e){return t.showHierarchyFieldSetup=e})),l.Wb(12,"app-hierarchy-field",9),l.ic("close",(function(e){return t.setupCompleted(e)})),l.Vb(),l.Vb()),2&e&&(l.Cb(2),l.pc("ngIf",t.purpose&&t.purpose.length>0),l.Cb(3),l.pc("disabled",t.fontSizeSmall),l.Cb(2),l.pc("disabled",!t.fontSizeSmall),l.Cb(2),l.pc("visible",t.showOrganizationSetup),l.Cb(2),l.pc("visible",t.showHierarchyFieldSetup),l.Cb(1),l.pc("hierarchyField",t.hierarchyFieldPurpose))},directives:[s.l,u.a,v,V,s.j,I.a,s.k,k.a],encapsulation:2}),e})();var K=i("tyNb"),E=i("e/fS"),T=i("itXk");function M(e,t){if(1&e){const e=l.Xb();l.Wb(0,"th",9),l.Wb(1,"a",10),l.ic("click",(function(){return l.Bc(e),l.kc(3).showHideExtendedFields()})),l.Rb(2,"fa-icon",11),l.Vb(),l.Vb()}if(2&e){const e=l.kc(3);l.Cb(2),l.pc("icon",e.hideExtendedFields?"angle-double-right":"angle-double-down")}}function L(e,t){if(1&e&&(l.Wb(0,"span",12),l.Kc(1),l.Vb()),2&e){const e=l.kc(3);l.Cb(1),l.Mc(" ",e.filteredItems.length," ")}}function R(e,t){if(1&e&&(l.Wb(0,"option",16),l.Kc(1),l.Vb()),2&e){const e=t.$implicit;l.pc("value",e.key),l.Cb(1),l.Mc(" ",e.key+" ("+e.count+")","")}}function P(e,t){if(1&e){const e=l.Xb();l.Wb(0,"select",13),l.ic("ngModelChange",(function(t){return l.Bc(e),l.kc(3).issueTypeFilter=t}))("change",(function(){return l.Bc(e),l.kc(3).onFilterChanged()})),l.Wb(1,"option",14),l.Kc(2,"All"),l.Vb(),l.Ic(3,R,2,2,"option",15),l.Vb()}if(2&e){const e=l.kc(3);l.pc("ngModel",e.issueTypeFilter),l.Cb(3),l.pc("ngForOf",e.issueTypeStats)}}function A(e,t){if(1&e&&(l.Wb(0,"option",16),l.Kc(1),l.Vb()),2&e){const e=t.$implicit;l.pc("value",e.key),l.Cb(1),l.Mc(" ",e.key+" ("+e.count+")","")}}function B(e,t){if(1&e){const e=l.Xb();l.Wb(0,"select",13),l.ic("ngModelChange",(function(t){return l.Bc(e),l.kc(3).statusFilter=t}))("change",(function(){return l.Bc(e),l.kc(3).onFilterChanged()})),l.Wb(1,"option",14),l.Kc(2,"All"),l.Vb(),l.Ic(3,A,2,2,"option",15),l.Vb()}if(2&e){const e=l.kc(3);l.pc("ngModel",e.statusFilter),l.Cb(3),l.pc("ngForOf",e.statusStats)}}function Q(e,t){if(1&e){const e=l.Xb();l.Wb(0,"td"),l.Wb(1,"a",10),l.ic("click",(function(){l.Bc(e);const t=l.kc().$implicit;return t.hideExtendedFields=!t.hideExtendedFields})),l.Rb(2,"fa-icon",11),l.Vb(),l.Vb()}if(2&e){const e=l.kc().$implicit;l.Cb(2),l.pc("icon",e.hideExtendedFields?"angle-right":"angle-down")}}function D(e,t){if(1&e&&(l.Wb(0,"tr"),l.Wb(1,"td",24),l.Kc(2),l.Vb(),l.Wb(3,"td",25),l.Kc(4),l.Vb(),l.Vb()),2&e){const e=t.$implicit;l.Cb(2),l.Mc("",e.name,":"),l.Cb(2),l.Lc(e.value)}}function X(e,t){if(1&e&&(l.Wb(0,"div",22),l.Wb(1,"table",23),l.Ic(2,D,5,2,"tr",8),l.Vb(),l.Vb()),2&e){const e=l.kc().$implicit;l.Cb(2),l.pc("ngForOf",e.extendedFields)}}function H(e,t){if(1&e&&(l.Wb(0,"tr"),l.Ic(1,Q,3,1,"td",0),l.Wb(2,"td",17),l.Kc(3),l.Vb(),l.Wb(4,"td"),l.Wb(5,"div"),l.Kc(6),l.Vb(),l.Ic(7,X,3,1,"div",18),l.Vb(),l.Wb(8,"td",19),l.Wb(9,"small",20),l.Kc(10),l.Vb(),l.Vb(),l.Wb(11,"td",19),l.Wb(12,"span",21),l.Kc(13),l.Vb(),l.Vb(),l.Vb()),2&e){const e=t.$implicit,i=l.kc(3);l.Cb(1),l.pc("ngIf",i.hasExtendedFields),l.Cb(2),l.Mc(" ",e.key," "),l.Cb(3),l.Lc(e.title),l.Cb(1),l.pc("ngIf",!e.hideExtendedFields&&e.extendedFields&&e.extendedFields.length>0),l.Cb(3),l.Lc(e.issueType),l.Cb(3),l.Lc(e.status)}}function N(e,t){if(1&e&&(l.Wb(0,"div"),l.Wb(1,"table",2),l.Wb(2,"thead"),l.Wb(3,"tr"),l.Ic(4,M,3,1,"th",3),l.Wb(5,"th",4),l.Ic(6,L,2,1,"span",5),l.Kc(7),l.Vb(),l.Wb(8,"th",6),l.Ic(9,P,4,2,"select",7),l.Vb(),l.Wb(10,"th",6),l.Ic(11,B,4,2,"select",7),l.Vb(),l.Vb(),l.Vb(),l.Ic(12,H,14,6,"tr",8),l.Vb(),l.Vb()),2&e){const e=l.kc(2);l.Cb(4),l.pc("ngIf",e.hasExtendedFields),l.Cb(2),l.pc("ngIf",e.filteredItems.length>0),l.Cb(1),l.Mc(" record",e.filteredItems.length>1?"s":""," "),l.Cb(2),l.pc("ngIf",e.issueTypeStats&&e.issueTypeStats.length>1),l.Cb(2),l.pc("ngIf",e.statusStats&&e.statusStats.length>1),l.Cb(1),l.pc("ngForOf",e.filteredItems)}}function J(e,t){1&e&&(l.Wb(0,"div",26),l.Kc(1," No detail records found. "),l.Vb())}function G(e,t){if(1&e&&(l.Wb(0,"div"),l.Ic(1,N,13,6,"div",0),l.Ic(2,J,2,0,"div",1),l.Vb()),2&e){const e=l.kc();l.Cb(1),l.pc("ngIf",e.filteredItems&&e.filteredItems.length>0),l.Cb(1),l.pc("ngIf",e.filteredItems&&0===e.filteredItems.length)}}let q=(()=>{class e{constructor(e,t,i){this.jiraService=e,this.persistenceService=t,this.store$=i,this.childIssueType="",this.hasExtendedFields=!1,this.showDetails=!1,this.hideExtendedFields=!0,this.statusFilter="all",this.issueTypeFilter="all"}ngOnInit(){const e=this.store$.select(e=>e.purpose.selectedItem).pipe(Object(b.a)(e=>e)),t=this.store$.select(e=>e.app.projects);this.issueSubscription=Object(T.a)(e,t).subscribe(([e,t])=>{this.issue=e,this.issue.project=a.find(t,{key:this.issue.project.key}),this.loadDetails(this.issue)})}ngOnDestroy(){this.issueSubscription&&this.issueSubscription.unsubscribe(),this.projectsSubscription&&this.projectsSubscription.unsubscribe()}loadDetails(e){if(e.project&&e.project.subTaskIssueTypes&&e.project.subTaskIssueTypes.length>0){const t=a.join(a.map(e.project.subTaskIssueTypes,e=>`'${e.name}'`),","),i=a.spread(a.union)(a.map(e.project.subTaskIssueTypes,"list"));this.hasExtendedFields=i&&i.length>0;const s=a.map(i,"id");this.jiraService.executeJql(`issuetype in (${t}) AND parent=${e.key}`,0,100,s,"test-cases.json").pipe(Object(b.a)(e=>e&&e.issues)).subscribe(e=>{this.childItems=Object(d.f)(e.issues),this.childItems.forEach(e=>e.hideExtendedFields=!0),Object(d.b)(this.childItems,i),this.onFilterChanged();const t=a.mapValues(a.groupBy(a.map(this.childItems,"status")),e=>e.length);this.statusStats=Object.keys(t).map(e=>({key:e,count:t[e]}));const s=a.mapValues(a.groupBy(a.map(this.childItems,"issueType")),e=>e.length);this.issueTypeStats=Object.keys(s).map(e=>({key:e,count:s[e]}))})}}onFilterChanged(){this.filteredItems=a.filter(this.childItems,e=>!(this.statusFilter&&"all"!==this.statusFilter&&e.status!==this.statusFilter||this.issueTypeFilter&&"all"!==this.issueTypeFilter&&e.issueType!==this.issueTypeFilter)),this.filteredItems=a.orderBy(this.filteredItems,"issueType")}showHideExtendedFields(){this.hideExtendedFields=!this.hideExtendedFields,this.childItems&&this.childItems.forEach(e=>e.hideExtendedFields=this.hideExtendedFields)}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(h.b),l.Qb(p.a),l.Qb(n.h))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-sub-items"]],decls:1,vars:1,consts:[[4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"table"],["width","1%",4,"ngIf"],["colspan","2",1,"text-muted"],["class","mr-1",4,"ngIf"],["width","10%"],["class","form-control form-control-sm bg-light border-0",3,"ngModel","ngModelChange","change",4,"ngIf"],[4,"ngFor","ngForOf"],["width","1%"],["title","Show/hide details",1,"text-muted",3,"click"],["size","sm",3,"icon"],[1,"mr-1"],[1,"form-control","form-control-sm","bg-light","border-0",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["width","5%",1,"text-muted","font-weight-light",2,"white-space","nowrap"],["style","overflow: auto;","class","alert mt-2 p-0 rounded-0 border-0",4,"ngIf"],[2,"white-space","nowrap"],[1,"text-muted"],[1,"pl-1","pr-1","border","rounded","bg-light","small"],[1,"alert","mt-2","p-0","rounded-0","border-0",2,"overflow","auto"],[1,"table","table-small","small","p-0","m-0","border-0","bg-light"],["width","10%",1,"p-1","text-nowrap","text-muted"],[1,"p-1","text-dark"],[1,"alert","alert-warning"]],template:function(e,t){1&e&&l.Ic(0,G,3,2,"div",0),2&e&&l.pc("ngIf",t.issue)},directives:[s.l,s.k,I.a,g.h,g.e,g.f,g.g,g.i],encapsulation:2}),e})();function U(e,t){1&e&&(l.Wb(0,"div"),l.Rb(1,"fa-icon",7),l.Kc(2," There are no extended fields. "),l.Vb())}const Z=function(e){return{small:e}};function Y(e,t){if(1&e&&(l.Wb(0,"div",10),l.Wb(1,"div",0),l.Wb(2,"div",11),l.Kc(3),l.Vb(),l.Wb(4,"div",12),l.Wb(5,"ngx-md"),l.Kc(6),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&e){const e=t.$implicit,i=l.kc(3);l.Cb(3),l.Lc(e.name),l.Cb(1),l.pc("ngClass",l.tc(3,Z,i.fontSizeSmall)),l.Cb(2),l.Mc(" ",e.value," ")}}function _(e,t){if(1&e&&(l.Wb(0,"div",8),l.Ic(1,Y,7,5,"div",9),l.Vb()),2&e){const e=l.kc(2);l.Cb(1),l.pc("ngForOf",e.issue.extendedFields)}}function ee(e,t){if(1&e&&(l.Wb(0,"div"),l.Ic(1,U,3,0,"div",2),l.Ic(2,_,2,1,"div",6),l.Vb()),2&e){const e=l.kc();l.Cb(1),l.pc("ngIf",!e.issue.extendedFields||0===e.issue.extendedFields.length),l.Cb(1),l.pc("ngIf",e.issue.extendedFields&&e.issue.extendedFields.length>0)}}let te=(()=>{class e{constructor(e){this.store$=e,this.fontSizeSmall=!1}ngOnInit(){this.issue$=this.store$.select(e=>e.purpose.selectedItem).pipe(Object(b.a)(e=>e)).subscribe(e=>this.issue=e)}ngOnDestroy(){this.issue$&&this.issue$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(n.h))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-extended-fields"]],decls:8,vars:3,consts:[[1,"row"],[1,"col-md-10"],[4,"ngIf"],[1,"col-md-2","text-right"],[1,"btn","btn-light","btn-sm","mr-2",3,"disabled","click"],[1,"btn","btn-light",3,"disabled","click"],["class","list-group list-group-flush",4,"ngIf"],["icon","exclamation-triangle",1,"text-info"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"col-md-2","small","text-muted","text-uppercase"],[1,"col-md-10",3,"ngClass"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Ic(2,ee,3,2,"div",2),l.Vb(),l.Wb(3,"div",3),l.Wb(4,"button",4),l.ic("click",(function(){return t.fontSizeSmall=!0})),l.Kc(5,"A"),l.Vb(),l.Wb(6,"button",5),l.ic("click",(function(){return t.fontSizeSmall=!1})),l.Kc(7,"A"),l.Vb(),l.Vb(),l.Vb()),2&e&&(l.Cb(2),l.pc("ngIf",t.issue),l.Cb(2),l.pc("disabled",t.fontSizeSmall),l.Cb(2),l.pc("disabled",!t.fontSizeSmall))},directives:[s.l,I.a,s.k,s.j,k.a],encapsulation:2}),e})();var ie=i("lJxs"),se=i("LvOF");function ne(e,t){if(1&e&&(l.Wb(0,"span",21),l.Kc(1),l.Vb()),2&e){const e=t.$implicit;l.Cb(1),l.Lc(e)}}function ce(e,t){if(1&e&&(l.Wb(0,"div",18),l.Wb(1,"span",19),l.Kc(2,"FIX VERSION: "),l.Vb(),l.Ic(3,ne,2,1,"span",20),l.Vb()),2&e){const e=l.kc(2);l.Cb(3),l.pc("ngForOf",e.selectedItem.fixVersions)}}function oe(e,t){if(1&e&&(l.Wb(0,"span",24),l.Kc(1),l.Vb()),2&e){const e=t.$implicit;l.Cb(1),l.Lc(e)}}function re(e,t){if(1&e&&(l.Wb(0,"div",22),l.Ic(1,oe,2,1,"span",23),l.Vb()),2&e){const e=l.kc(2);l.Cb(1),l.pc("ngForOf",e.selectedItem.labels)}}const le=function(){return["far","list-alt"]};function ae(e,t){1&e&&(l.Wb(0,"a",25),l.Rb(1,"fa-icon",13),l.Kc(2," Details "),l.Vb()),2&e&&(l.pc("routerLinkActive","active"),l.Cb(1),l.pc("icon",l.sc(2,le)))}const be=function(e){return["../../storyboard",e]};function de(e,t){if(1&e&&(l.Wb(0,"div",26),l.Wb(1,"a",27),l.Rb(2,"fa-icon",28),l.Kc(3," Storyboard "),l.Rb(4,"fa-icon",29),l.Vb(),l.Vb()),2&e){const e=l.kc(2);l.Cb(1),l.pc("routerLink",l.tc(2,be,e.selectedItem.key))("routerLinkActive","active")}}const pe=function(){return["purpose"]},ue=function(){return["far","lightbulb"]};function he(e,t){if(1&e&&(l.Wb(0,"div",2),l.Wb(1,"div",3),l.Wb(2,"div"),l.Ic(3,ce,4,1,"div",4),l.Wb(4,"sub",5),l.Kc(5),l.Vb(),l.Wb(6,"sub",6),l.Kc(7),l.Vb(),l.Vb(),l.Wb(8,"h2",7),l.Kc(9),l.Vb(),l.Ic(10,re,2,1,"div",8),l.Wb(11,"div",9),l.Wb(12,"div",10),l.Wb(13,"div",11),l.Wb(14,"a",12),l.Rb(15,"fa-icon",13),l.Kc(16," Purpose "),l.Vb(),l.Ic(17,ae,3,3,"a",14),l.Wb(18,"a",15),l.Rb(19,"fa-icon",16),l.Kc(20," Sub items "),l.Vb(),l.Vb(),l.Ic(21,de,5,4,"div",17),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&e){const e=l.kc();l.Cb(3),l.pc("ngIf",e.selectedItem.fixVersions&&e.selectedItem.fixVersions.length>0),l.Cb(2),l.Nc("",e.selectedItem.issueType,": ",e.selectedItem.key,""),l.Cb(2),l.Lc(e.selectedItem.status),l.Cb(2),l.Mc(" ",e.selectedItem.title," "),l.Cb(1),l.pc("ngIf",e.selectedItem.labels&&e.selectedItem.labels.length>0),l.Cb(4),l.pc("routerLink",l.sc(12,pe))("routerLinkActive","active"),l.Cb(1),l.pc("icon",l.sc(13,ue)),l.Cb(2),l.pc("ngIf",e.selectedItem.extendedFields&&e.selectedItem.extendedFields.length>0),l.Cb(1),l.pc("routerLinkActive","active"),l.Cb(3),l.pc("ngIf","Epic"===e.selectedItem.issueType)}}let fe=(()=>{class e{constructor(e,t,i,s){this.activatedRoute=e,this.persistenceService=t,this.jiraService=i,this.store$=s}ngOnInit(){this.localNodeType=d.a,this.selectedItem$=this.store$.select(e=>e.purpose.selectedItem).pipe(Object(b.a)(e=>e)).subscribe(e=>this.selectedItem=e),this.issueQuery$=this.store$.select(e=>e.app.hierarchicalIssue).pipe(Object(b.a)(e=>e)),this.paramsQuery$=this.activatedRoute.params.pipe(Object(b.a)(e=>e&&e.selected&&e.selected.length>0),Object(ie.a)(e=>e.selected)),this.projectsQuery$=this.store$.select(e=>e.app.projects).pipe(Object(b.a)(e=>e)),this.combined$=Object(T.a)(this.issueQuery$,this.paramsQuery$,this.projectsQuery$).subscribe(([e,t,i])=>{this.projects=i;const s=Object(d.l)(e,d.a.Project),n=Object(d.m)(e,t);if(s&&n){n.extendedFields=Object(se.a)(this.projects,s.key,n.issueType);const e=a.map(n.extendedFields,"id");this.jiraService.getIssueDetails(t,e).pipe(Object(b.a)(e=>null!=e&&e.fields)).subscribe(e=>{Object(d.d)(Object(d.j)(e),n),n.extendedFields=a.map(n.extendedFields,t=>(t.value=e.fields[t.id],t));const t=a.pick(n,["key","label","title","issueType","project","status","description","components","labels","fixVersions","extendedFields"]);this.store$.dispatch(new o.e(t))})}setTimeout(()=>this.markIssueSelected(n),500)})}ngOnDestroy(){this.combined$&&this.combined$.unsubscribe(),this.selectedItem$&&this.selectedItem$.unsubscribe()}markIssueSelected(e){if(e)if(this.projects&&e.project&&(e.extendedFields=Object(se.a)(this.projects,e.project.key,e.issueType)),!e.parent||e.parent.issueType!==d.a.RelatedLink||e.description&&0!==e.description.length)this.expandPurpose(e);else{const t=a.map(e.extendedFields,"id");this.jiraService.getIssueDetails(e.key,t).pipe(Object(b.a)(e=>null!=e)).subscribe(t=>{const i=Object(d.j)(t);i&&Object(d.d)(i,e),e.extendedFields=a.map(e.extendedFields,e=>(e.value=t.fields[e.id],e)),this.expandPurpose(e)})}}expandPurpose(e){this.purpose=[],this.populatePurpose(e),a.reverse(this.purpose),this.store$.dispatch(new o.d(this.purpose))}populatePurpose(e){e&&(e.issueType!==d.a.EpicChildren&&e.issueType!==d.a.RelatedLink&&this.purpose.push({key:e.key,issueType:e.issueType,title:e.title,purpose:e.description,editable:e.editable,hfKey:e.hfKey}),e.parent&&this.populatePurpose(e.parent))}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(K.a),l.Qb(p.a),l.Qb(h.b),l.Qb(n.h))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-container"]],decls:4,vars:1,consts:[[1,"pt-0","pr-3","pb-2","pl-3"],["class","sticky-title pb-3",4,"ngIf"],[1,"sticky-title","pb-3"],[1,"border-bottom"],["class","float-right small",4,"ngIf"],[1,"text-uppercase","mr-2"],[1,"badge","badge-light","small","text-muted","text-uppercase","font-weight-normal"],[1,"font-weight-light"],["class","small",4,"ngIf"],[1,"pb-2"],[1,"row"],[1,"col-md-8"],["title","View purpose",1,"btn","btn-link","mr-1","pl-0",3,"routerLink","routerLinkActive"],["size","sm",3,"icon"],["class","btn btn-link mr-1","routerLink","details",3,"routerLinkActive",4,"ngIf"],["routerLink","items",1,"btn","btn-link","mr-1",3,"routerLinkActive"],["icon","list-ol","size","sm"],["class","col-md-4 text-right",4,"ngIf"],[1,"float-right","small"],[1,"small","text-muted"],["class","badge badge-light ml-1",4,"ngFor","ngForOf"],[1,"badge","badge-light","ml-1"],[1,"small"],["class","mr-1 pl-1 pr-1 bg-light text-muted rounded",4,"ngFor","ngForOf"],[1,"mr-1","pl-1","pr-1","bg-light","text-muted","rounded"],["routerLink","details",1,"btn","btn-link","mr-1",3,"routerLinkActive"],[1,"col-md-4","text-right"],[1,"btn","btn-link","mr-1",3,"routerLink","routerLinkActive"],["icon","map","size","sm"],["icon","chevron-right","size","sm"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Ic(1,he,22,14,"div",1),l.Wb(2,"div"),l.Rb(3,"router-outlet"),l.Vb(),l.Vb()),2&e&&(l.Cb(1),l.pc("ngIf",t.selectedItem))},directives:[s.l,K.h,K.f,K.e,I.a,s.k],encapsulation:2}),e})();i.d(t,"PurposeModule",(function(){return me}));const ge=[{path:":selected",component:fe,children:[{path:"items",component:q},{path:"details",component:te},{path:"purpose",component:z},{path:"",redirectTo:"purpose",pathMatch:"full"}]}];let me=(()=>{class e{}return e.\u0275mod=l.Ob({type:e}),e.\u0275inj=l.Nb({factory:function(t){return new(t||e)},imports:[[s.c,K.g,g.b,k.b,I.c,u.b,E.a,n.i.forFeature("purpose",r,{initialState:c}),K.g.forChild(ge)]]}),e})()}}]);