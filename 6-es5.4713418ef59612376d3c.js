function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],s=!0,n=!1,c=void 0;try{for(var a,r=e[Symbol.iterator]();!(s=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);s=!0);}catch(o){n=!0,c=o}finally{try{s||null==r.return||r.return()}finally{if(n)throw c}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2Jat":function(e,t,i){"use strict";i.r(t);var s=i("ofXK"),n=i("kt0X"),c={primaryIssueKey:"",primaryIssue:null,selectedIssueKey:"",selectedIssue:null,timelineView:null,isSelectedIssueViewCompact:!1,hierarchicalIssue:null,subtasks:null,purpose:[],recentlyViewedItems:[],recentmostItem:null,updatedField:null},a=i("j9Al"),r={LoadPrimaryIssue:Object(a.b)("[LoadPrimaryIssue]"),LoadPrimaryIssueFailed:Object(a.b)("[LoadPrimaryIssue] Failed"),LoadPrimaryIssueSuccess:Object(a.b)("[LoadPrimaryIssue] Success"),LoadPrimaryIssueEpicChildren:Object(a.b)("[LoadPrimaryIssueEpicChildren]"),LoadPrimaryIssueEpicChildrenFailed:Object(a.b)("[LoadPrimaryIssueEpicChildren] Failed"),LoadPrimaryIssueEpicChildrenSuccess:Object(a.b)("[LoadPrimaryIssueEpicChildren] Success"),LoadPrimaryIssueRelatedLinks:Object(a.b)("[LoadPrimaryIssueRelatedLinks]"),LoadPrimaryIssueRelatedLinksFailed:Object(a.b)("[LoadPrimaryIssueRelatedLinks] Failed"),LoadPrimaryIssueRelatedLinksSuccess:Object(a.b)("[LoadPrimaryIssueRelatedLinks] Success"),SetHierarchicalIssue:Object(a.b)("[SetHierarchicalIssue]"),LoadSubtasks:Object(a.b)("[LoadSubtasks]"),LoadSubtasksFailed:Object(a.b)("[LoadSubtasks] Failed"),LoadSubtasksSuccess:Object(a.b)("[LoadSubtasks] Success"),LoadProjectDetails:Object(a.b)("[LoadProjectDetails]"),LoadProjectDetailsFailed:Object(a.b)("[LoadProjectDetails] Failed"),LoadProjectDetailsSuccess:Object(a.b)("[LoadProjectDetails] Success"),LoadSelectedIssue:Object(a.b)("[LoadSelectedIssue]"),LoadSelectedIssueFailed:Object(a.b)("[LoadSelectedIssue] Failed"),LoadSelectedIssueSuccess:Object(a.b)("[LoadSelectedIssue] Success"),ChangeSelectedIssueView:Object(a.b)("[ChangeSelectedIssueView]"),LoadSelectedIssueEpicChildren:Object(a.b)("[LoadSelectedIssueEpicChildren]"),LoadSelectedIssueEpicChildrenFailed:Object(a.b)("[LoadSelectedIssueEpicChildren] Failed"),LoadSelectedIssueEpicChildrenSuccess:Object(a.b)("[LoadSelectedIssueEpicChildren] Success"),LoadSelectedIssueRelatedLinks:Object(a.b)("[LoadSelectedIssueRelatedLinks]"),LoadSelectedIssueRelatedLinksFailed:Object(a.b)("[LoadSelectedIssueRelatedLinks] Failed"),LoadSelectedIssueRelatedLinksSuccess:Object(a.b)("[LoadSelectedIssueRelatedLinks] Success"),SetSelectedIssue:Object(a.b)("[SetSelectedIssue]"),PopulateIssueTimelineView:Object(a.b)("[PopulateIssueTimelineView]"),SetPurpose:Object(a.b)("[SetPurpose]"),UpdateOrganizationPurpose:Object(a.b)("[UpdateOrganizationPurpose]"),SetRecentlyViewed:Object(a.b)("[SetRecentlyViewed]"),UpdateFieldValue:Object(a.b)("[UpdateFieldValue]"),UpdateFieldValueFailed:Object(a.b)("[UpdateFieldValue] Failed"),UpdateFieldValueSuccess:Object(a.b)("[UpdateFieldValue] Success"),UpdateOrganizationTitle:Object(a.b)("[UpdateOrganizationTitle]"),UpdateOrganizationTitleFailed:Object(a.b)("[UpdateOrganizationTitle] Failed"),UpdateOrganizationTitleSuccess:Object(a.b)("[UpdateOrganizationTitle] Success")},o=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.LoadPrimaryIssue},l=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.LoadPrimaryIssueEpicChildren},u=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.LoadPrimaryIssueRelatedLinks},d=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.SetHierarchicalIssue},b=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.LoadSubtasks},p=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.LoadProjectDetails},h=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.LoadSelectedIssue},f=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.ChangeSelectedIssueView},g=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.LoadSelectedIssueEpicChildren},y=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.LoadSelectedIssueRelatedLinks},m=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.SetSelectedIssue},v=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.PopulateIssueTimelineView},k=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.SetPurpose},I=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.UpdateOrganizationPurpose},C=function e(t){_classCallCheck(this,e),this.payload=t,this.type=r.UpdateFieldValue},j=i("krUz"),O=i("iPf6"),L=i("LvDl");function V(e,t){switch(t.type){case r.LoadPrimaryIssue:return Object.assign(Object.assign({},e),{primaryIssue:null,primaryIssueKey:t.payload.issue});case r.LoadPrimaryIssueSuccess:return Object.assign(Object.assign({},e),{primaryIssue:S(t.payload)});case r.LoadPrimaryIssueEpicChildren:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{epicChildrenLoading:!0,epicChildrenLoaded:!1})});case r.LoadPrimaryIssueEpicChildrenSuccess:var i=L.map(t.payload.issues,(function(e){return j.p(e)}));return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{epicChildrenLoading:!1,epicChildrenLoaded:!0,epicChildren:i})});case r.LoadPrimaryIssueRelatedLinks:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{relatedLinksLoading:!0})});case r.LoadPrimaryIssueRelatedLinksSuccess:var s=function(e,t){if(!e.primaryIssue)return null;var i=e.primaryIssue.relatedLinks;if(t.payload&&t.payload.issues&&i){var s=L.map(t.payload.issues,(function(e){return L.pick(j.p(e),j.r)}));i.forEach((function(e){var t=L.find(s,{key:e.key});t&&(e.created=t.created,e.duedate=t.duedate,e.updated=t.updated,e.resolution=t.resolution,e.project=t.project,e.labels=t.labels,e.fixVersions=t.fixVersions,e.components=t.components)}))}return i}(e,t);return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{relatedLinksLoading:!1,relatedLinksLoaded:!0,relatedLinks:s})});case r.SetHierarchicalIssue:return Object.assign(Object.assign({},e),{hierarchicalIssue:t.payload});case r.LoadProjectDetails:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{projectConfigLoading:!0})});case r.LoadProjectDetailsSuccess:var n=(y=t.payload,(m=L.pick(y,["id","key","description","name","customFields","startdate"])).hierarchy=[],y.issueTypes&&(m.standardIssueTypes=w(y.issueTypes,!1),m.subTaskIssueTypes=w(y.issueTypes,!0)),m.metadata={},y.components&&(m.metadata.components=L.sortBy(L.map(y.components,(function(e){return L.pick(e,["id","name","description"])})),["name"])),y.versions&&(m.metadata.versions=L.sortBy(L.map(y.versions,(function(e){return L.pick(e,["archived","id","name","releaseDate","description"])})),["name"])),m);return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{projectConfigLoading:!1,projectConfigLoaded:!0,projectConfig:n})});case r.LoadSubtasks:return Object.assign(Object.assign({},e),{subtasks:null});case r.LoadSubtasksSuccess:var c=null;return t.payload&&t.payload.result&&t.payload.result.issues&&(c=j.m(t.payload.result.issues),j.d(c,t.payload.extendedFields)),Object.assign(Object.assign({},e),{subtasks:c});case r.LoadSelectedIssue:return Object.assign(Object.assign({},e),{selectedIssue:null,selectedIssueKey:t.payload.issue});case r.LoadSelectedIssueSuccess:return Object.assign(Object.assign({},e),{selectedIssue:S(t.payload)});case r.PopulateIssueTimelineView:var a=e.selectedIssue.projectConfig.startdate.id||"created",o=O.a(t.payload,a),l=O.b(t.payload,o.timespan,a,!1);return Object.assign(Object.assign({},e),{timelineView:{metadata:o,records:l}});case r.ChangeSelectedIssueView:return Object.assign(Object.assign({},e),{isSelectedIssueViewCompact:t.payload});case r.LoadSelectedIssueEpicChildren:return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{epicChildrenLoading:!0,epicChildrenLoaded:!1})});case r.LoadSelectedIssueEpicChildrenSuccess:var u=L.map(t.payload.issues,(function(e){return j.p(e)}));return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{epicChildrenLoading:!1,epicChildrenLoaded:!0,epicChildren:u})});case r.LoadSelectedIssueRelatedLinks:return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{relatedLinksLoading:!0,relatedLinksLoaded:!1})});case r.LoadSelectedIssueRelatedLinksSuccess:var d=L.map(t.payload.issues,(function(e){return j.p(e)})),b=e.selectedIssue.relatedLinks;return d.forEach((function(e){var t=L.find(b,{key:e.key});e.linkType=t?t.linkType:"link"})),Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{relatedLinksLoading:!1,relatedLinksLoaded:!0,relatedLinks:d})});case r.SetSelectedIssue:return Object.assign(Object.assign({},e),{selectedIssue:t.payload});case r.SetPurpose:return Object.assign(Object.assign({},e),{purpose:t.payload});case r.UpdateOrganizationPurpose:var p=t.payload||{},h=e.hierarchicalIssue,f=j.s(h,j.a.Organization);return f&&(f.label=p.name,f.title=p.name,f.description=p.purpose),Object.assign(Object.assign({},e),{hierarchicalIssue:h,purpose:e.purpose.map((function(e){return e.issueType===j.a.Organization?Object.assign(Object.assign({},e),{key:p.name,label:p.name,title:p.name,purpose:p.purpose}):e}))});case r.SetRecentlyViewed:return Object.assign(Object.assign({},e),{recentmostItem:t.payload});case r.UpdateFieldValue:return Object.assign(Object.assign({},e),{updatedField:null});case r.UpdateFieldValueSuccess:var g=t.payload;return Object.assign(Object.assign({},e),{updatedField:g});case r.UpdateOrganizationTitleSuccess:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{organization:t.payload})});default:return e}var y,m}function S(e){var t=j.q(e.issue,e.extendedFields);return t&&(t.organization=e.organization,t.projectConfig=e.projectConfig,t.projectConfigLoaded=!!e.projectConfig,t.relatedLinks=j.n(e.issue),t.epicChildrenLoading=!1,t.epicChildrenLoaded=!1,t.relatedLinksLoading=!1,t.relatedLinksLoaded=!1),t}function w(e,t){return L.map(L.filter(e,{subtask:t}),(function(e){return{name:e.name,list:[]}}))}var P=i("fXoL"),W=i("itXk"),R=i("pLZG"),x=i("cdP3"),F=i("6NWb"),E=i("tyNb"),$=i("g9iH"),T=i("7zfz"),N=function(e,t){return{"small text-muted text-uppercase font-italic":e,"font-weight-bold":t}};function z(e,t){if(1&e&&(P.Wb(0,"div",6),P.Pc(1),P.Vb()),2&e){var i=t.$implicit,s=P.kc(2);P.rc("ngClass",P.wc(3,N,s.checkIfCustomNode(i),i.key===s.issueKey))("title",s.getIssueTitle(i)),P.Cb(1),P.Rc(" ",i.label,"")}}function _(e,t){if(1&e&&(P.Wb(0,"div",7),P.Pc(1),P.Vb()),2&e){var i=t.$implicit,s=P.kc(2);P.rc("title",s.getHeaderTitle(i)),P.Cb(1),P.Rc(" ",i.label," ")}}function D(e,t){1&e&&P.Rb(0,"fa-icon",10)}function A(e,t){if(1&e&&(P.Wb(0,"i",8),P.Pc(1),P.Nc(2,D,1,0,"fa-icon",9),P.Vb()),2&e){var i=t.$implicit;P.Cb(1),P.Rc(" ",i.label," "),P.Cb(1),P.rc("ngIf",i.editable)}}var G=function(e){return[e]};function Q(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div",1),P.Wb(1,"p-tree",2),P.ic("selectionChange",(function(e){return P.Gc(i),P.kc().selectedNode=e}))("onNodeSelect",(function(e){return P.Gc(i),P.kc().nodeSelected(e)})),P.Nc(2,z,2,6,"ng-template",3),P.Nc(3,_,2,2,"ng-template",4),P.Nc(4,A,3,2,"ng-template",5),P.Vb(),P.Vb()}if(2&e){var s=P.kc();P.Cb(1),P.rc("value",P.vc(2,G,s.rootNode))("selection",s.selectedNode)}}var K,M=((K=function(){function e(t,i){_classCallCheck(this,e),this.router=t,this.activatedRoute=i,this.getIssueTitle=function(e){return Object(j.o)(e)?e.title:"[".concat(e.issueType,"] ").concat(e.linkType||""," ").concat(e.key," | ").concat(e.title)},this.getHeaderTitle=function(e){return"[".concat(e.issueType,"] ").concat(e.title)},this.checkIfCustomNode=function(e){return Object(j.o)(e)}}return _createClass(e,[{key:"nodeSelected",value:function(e){if(e.node.editable)e.node.memento={type:e.node.type,selectable:e.node.selectable},e.node.type=j.b.Editing,e.node.selectable=!1;else{var t=(i=this.router,(s=i.parseUrl(i.url)).root.children[E.c]&&s.root.children[E.c].segments&&5===s.root.children[E.c].segments.length?L.last(s.root.children[E.c].segments).path:"details");this.router.navigate(["../..",e.node.key,t],{relativeTo:this.activatedRoute})}var i,s}}]),e}()).\u0275fac=function(e){return new(e||K)(P.Qb(E.d),P.Qb(E.a))},K.\u0275cmp=P.Kb({type:K,selectors:[["app-issue-treeview"]],inputs:{issueKey:"issueKey",rootNode:"rootNode"},decls:1,vars:1,consts:[["class","pb-5",4,"ngIf"],[1,"pb-5"],["selectionMode","single",3,"value","selection","selectionChange","onNodeSelect"],["pTemplate","default"],["pTemplate","Heading"],["pTemplate","Editable"],[2,"font-size","90%",3,"ngClass","title"],[3,"title"],[1,"editable-node"],["size","sm","class","text-muted ml-1","icon","pencil-alt",4,"ngIf"],["size","sm","icon","pencil-alt",1,"text-muted","ml-1"]],template:function(e,t){1&e&&P.Nc(0,Q,5,4,"div",0),2&e&&P.rc("ngIf",t.rootNode)},directives:[s.m,$.a,T.d,s.k,F.a],encapsulation:2}),K),X=i("l2bN");function U(e,t){if(1&e&&(P.Wb(0,"div"),P.Rb(1,"app-issue-treeview",13),P.Vb()),2&e){var i=P.kc(2);P.Cb(1),P.rc("rootNode",i.hierarchicalNode)("issueKey",i.selectedIssueKey)}}function H(e,t){if(1&e&&(P.Wb(0,"div",18),P.Wb(1,"h5",19),P.Pc(2),P.Vb(),P.Rb(3,"ngx-md",20),P.Vb()),2&e){var i=P.kc().$implicit;P.Cb(2),P.Rc(" ",i.title," "),P.Cb(1),P.rc("data",i.purpose)}}var J=function(e){return{"float-left":e}};function B(e,t){if(1&e&&(P.Wb(0,"div",14),P.Rb(1,"div",9),P.Wb(2,"div",15),P.Wb(3,"a",6),P.ic("click",(function(){var e=t.$implicit;return e.show=!e.show})),P.Rb(4,"fa-icon",7),P.Wb(5,"span",16),P.Pc(6),P.Vb(),P.Vb(),P.Vb(),P.Nc(7,H,4,2,"div",17),P.Vb()),2&e){var i=t.$implicit;P.rc("ngClass",P.vc(4,J,!i.show)),P.Cb(4),P.rc("icon",i.show?"chevron-down":"chevron-right"),P.Cb(2),P.Rc("",i.issueType," purpose"),P.Cb(1),P.rc("ngIf",i.show)}}function q(e,t){if(1&e){var i=P.Xb();P.Wb(0,"as-split",1),P.ic("gutterDblClick",(function(){return P.Gc(i),P.kc().toggleFullscreen()}))("dragEnd",(function(e){return P.Gc(i),P.kc().dragEnd(e)})),P.Wb(1,"as-split-area",2),P.Nc(2,U,2,2,"div",3),P.Vb(),P.Wb(3,"as-split-area",2),P.Wb(4,"div",4),P.Wb(5,"div",5),P.Wb(6,"a",6),P.ic("click",(function(){P.Gc(i);var e=P.kc();return e.showHideAllPurposes(!e.showAll)})),P.Rb(7,"fa-icon",7),P.Vb(),P.Vb(),P.Nc(8,B,8,6,"div",8),P.Wb(9,"div",9),P.Pc(10,"\xa0"),P.Vb(),P.Wb(11,"div",10),P.Wb(12,"a",11),P.Pc(13," Proceed to workbench "),P.Rb(14,"fa-icon",12),P.Vb(),P.Vb(),P.Vb(),P.Vb(),P.Vb()}if(2&e){var s=P.kc();P.Cb(1),P.rc("size",s.columns[0].size),P.Cb(1),P.rc("ngIf",s.leftPaneSize>0),P.Cb(1),P.rc("size",s.columns[1].size),P.Cb(4),P.rc("icon",s.showAll?"angle-double-down":"angle-double-right"),P.Cb(1),P.rc("ngForOf",s.purpose)}}var Y,Z,ee=((Y=function(){function e(t){_classCallCheck(this,e),this.store$=t,this.edit=new P.n,this.showAll=!1,this.hideExtendedFields=!1,this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.purpose$=this.store$.select((function(e){return e.issue.purpose})).subscribe((function(t){return e.purpose=t}));var t=this.store$.select((function(e){return e.issue.selectedIssue})).pipe(Object(R.a)((function(e){return e}))),i=this.store$.select((function(e){return e.issue.hierarchicalIssue})).pipe(Object(R.a)((function(e){return e})));this.combined$=Object(W.a)(t,i).subscribe((function(t){var i=_slicedToArray(t,2),s=i[0],n=i[1];e.selectedIssueKey=s.key,e.hierarchicalNode=n,setTimeout((function(){var t=Object(j.t)(n,s.key);t&&(Object(j.g)(s,t),e.store$.dispatch(new k(e.expandPurpose(t))))}),200)}))}},{key:"ngOnDestroy",value:function(){this.purpose$&&this.purpose$.unsubscribe(),this.combined$&&this.combined$.unsubscribe()}},{key:"showHideAllPurposes",value:function(e){var t=this;this.showAll=e,this.purpose&&(this.purpose.forEach((function(e){return e.show=t.showAll})),!this.showAll&&this.purpose.length>0&&(this.purpose[this.purpose.length-1].show=!0))}},{key:"expandPurpose",value:function(e){var t=[];return this.populatePurpose(e,t),L.reverse(t),t.length>0&&(t[t.length-1].show=!0),t}},{key:"populatePurpose",value:function(e,t){e&&(e.issueType!==j.a.EpicChildren&&e.issueType!==j.a.RelatedLink&&t.push({key:e.key,issueType:e.issueType,title:e.title,purpose:e.description,editable:e.editable,hfKey:e.hfKey,show:!1}),e.parent&&this.populatePurpose(e.parent,t))}},{key:"dragEnd",value:function(e){this.adjustPaneSize(e.sizes[0])}},{key:"adjustPaneSize",value:function(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}},{key:"toggleFullscreen",value:function(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}]),e}()).\u0275fac=function(e){return new(e||Y)(P.Qb(n.h))},Y.\u0275cmp=P.Kb({type:Y,selectors:[["app-purpose"]],outputs:{edit:"edit"},decls:1,vars:1,consts:[["direction","horizontal",3,"gutterDblClick","dragEnd",4,"ngIf"],["direction","horizontal",3,"gutterDblClick","dragEnd"],[3,"size"],[4,"ngIf"],[1,"alert"],[1,"border-0","pb-0","mb-2","float-left"],["title","Show/hide details",1,"btn","btn-light","btn-sm","text-muted","mr-2",3,"click"],["size","fw",3,"icon"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"clearfix"],[1,"text-right","mt-3","mb-3"],["routerLink","../workbench",1,"btn","btn-sm","btn-primary"],["icon","chevron-right","size","sm"],[3,"rootNode","issueKey"],[3,"ngClass"],[1,"text-uppercase","text-muted"],[1,"small"],["class","ml-3 pl-3 pr-3 border-left","style","overflow:auto",4,"ngIf"],[1,"ml-3","pl-3","pr-3","border-left",2,"overflow","auto"],[1,"text-dark","font-weight-normal","mt-1"],[3,"data"]],template:function(e,t){1&e&&P.Nc(0,q,15,5,"as-split",0),2&e&&P.rc("ngIf",t.purpose&&t.purpose.length>0)},directives:[s.m,x.c,x.b,F.a,s.l,E.f,M,s.k,X.a],encapsulation:2}),Y),te=i("sITn"),ie=i("3Pt+"),se=i("jLSX"),ne=i("lJxs"),ce=["content"],ae=((Z=function(){function e(t,i){_classCallCheck(this,e),this.cdRef=t,this.store$=i,this.containerSize=0,this.expandableSize=57,this.contentHeight=0,this.compactView=!1}return _createClass(e,[{key:"init",value:function(e){var t=this;this.containerSize=e,this.isSelectedIssueViewCompact$=this.store$.select((function(e){return e.issue.isSelectedIssueViewCompact})).subscribe((function(e){t.compactView=e,t.containerSize+=e?-1*t.expandableSize:t.expandableSize,t.onResize()}))}},{key:"destroy",value:function(){this.isSelectedIssueViewCompact$&&this.isSelectedIssueViewCompact$.unsubscribe()}},{key:"afterViewInit",value:function(){this.onResize()}},{key:"onResize",value:function(){this.elementView&&(this.contentHeight=this.elementView.nativeElement.offsetParent.clientHeight-this.containerSize,this.cdRef.detectChanges())}}]),e}()).\u0275fac=function(e){return new(e||Z)(P.Qb(P.h),P.Qb(n.h))},Z.\u0275dir=P.Lb({type:Z,viewQuery:function(e,t){var i;1&e&&P.Tc(ce,!0),2&e&&P.Dc(i=P.jc())&&(t.elementView=i.first)},hostBindings:function(e,t){1&e&&P.ic("resize",(function(e){return t.onResize(e)}),!1,P.Fc)}}),Z),re=i("AQDj"),oe=i("XNiG"),le=i("VRyK"),ue=i("Kj3r"),de=i("/uUt"),be=i("1kSV"),pe=i("/Azu"),he=["instance"];function fe(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div",5),P.Wb(1,"button",6),P.ic("click",(function(){return P.Gc(i),P.kc().onShowEpiclist()})),P.Rb(2,"fa-icon",7),P.Vb(),P.Vb()}}function ge(e,t){if(1&e){var i=P.Xb();P.Wb(0,"button",12),P.ic("click",(function(){return P.Gc(i),P.kc(2).onCancel()})),P.Rb(1,"fa-icon",13),P.Vb()}2&e&&(P.Cb(1),P.rc("fixedWidth",!0))}function ye(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div",8),P.Wb(1,"button",9),P.ic("click",(function(){P.Gc(i);var e=P.kc();return e.navigateTo(e.issue)})),P.Rb(2,"fa-icon",10),P.Vb(),P.Nc(3,ge,2,1,"button",11),P.Vb()}if(2&e){var s=P.kc();P.Cb(2),P.rc("fixedWidth",!0),P.Cb(1),P.rc("ngIf",s.showCancel)}}var me,ve=function(e){return{"input-group-sm":e}},ke=((me=function(){function e(t,i,s){var n=this;_classCallCheck(this,e),this.router=t,this.activatedRoute=i,this.store$=s,this.showCancel=!1,this.hideIssuelistNavigator=!0,this.showIssuelist=new P.n,this.cancel=new P.n,this.canNavigate=function(){return n.issue&&n.issue.trim().length>0},this.focus$=new oe.a,this.click$=new oe.a,this.search=function(e){var t=e.pipe(Object(ue.a)(200),Object(de.a)()),i=n.click$.pipe(Object(R.a)((function(){return!n.instance.isPopupOpen()}))),s=n.focus$;return Object(le.a)(t,s,i).pipe(Object(ne.a)((function(e){return""===e?n.issueLookup:L.filter(n.issueLookup||[],(function(t){return t.toLowerCase().indexOf(e.toLowerCase())>-1}))})),Object(ne.a)((function(e){return(e||[]).slice(0,20)})))}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.store$.select((function(e){return e.issue.primaryIssueKey})).pipe(Object(R.a)((function(e){return e&&e.length>0}))).subscribe((function(t){return e.issue=t}))}},{key:"ngOnDestroy",value:function(){}},{key:"navigateTo",value:function(e){this.canNavigate()&&(this.cancel.emit(!0),this.router.navigate(["/browse",e.trim()]))}},{key:"selectTo",value:function(e){if(this.canNavigate()){var t=e.trim();this.cancel.emit(!0),L.find(this.issueLookup,(function(e){return e===t}))?this.router.navigate(["purpose",t,"details"],{relativeTo:this.activatedRoute}):this.router.navigate(["/browse",t,"purpose",t,"details"])}}},{key:"onShowEpiclist",value:function(){this.showIssuelist.emit(!0)}},{key:"onCancel",value:function(){this.cancel.emit(!0)}}]),e}()).\u0275fac=function(e){return new(e||me)(P.Qb(E.d),P.Qb(E.a),P.Qb(n.h))},me.\u0275cmp=P.Kb({type:me,selectors:[["app-issue-entry"]],viewQuery:function(e,t){var i;1&e&&P.Lc(he,!0),2&e&&P.Dc(i=P.jc())&&(t.instance=i.first)},inputs:{showCancel:"showCancel",size:"size",issueLookup:"issueLookup",hideIssuelistNavigator:"hideIssuelistNavigator"},outputs:{showIssuelist:"showIssuelist",cancel:"cancel"},decls:5,vars:8,consts:[[1,"input-group",3,"ngClass"],["class","input-group-prepend",4,"ngIf"],["type","text","name","issueByKeyId","placeholder","Jira issue key","id","typeahead-focus","type","text",1,"form-control",3,"ngModel","ngbTypeahead","appAutofocus","ngModelChange","focus","click","keydown.enter","keydown.escape","keydown.control.enter"],["instance","ngbTypeahead"],["class","input-group-append",4,"ngIf"],[1,"input-group-prepend"],[1,"btn","btn-primary",3,"click"],["icon","search"],[1,"input-group-append"],["type","button",1,"btn","btn-light","border","border-left-0","text-primary",3,"click"],["icon","chevron-right",3,"fixedWidth"],["class","btn btn-link text-muted","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-link","text-muted",3,"click"],["icon","times",3,"fixedWidth"]],template:function(e,t){1&e&&(P.Wb(0,"div",0),P.Nc(1,fe,3,0,"div",1),P.Wb(2,"input",2,3),P.ic("ngModelChange",(function(e){return t.issue=e}))("focus",(function(e){return t.focus$.next(e.target.value)}))("click",(function(e){return t.click$.next(e.target.value)}))("keydown.enter",(function(){return t.selectTo(t.issue)}))("keydown.escape",(function(){return t.onCancel()}))("keydown.control.enter",(function(){return t.navigateTo(t.issue)})),P.Vb(),P.Nc(4,ye,4,2,"div",4),P.Vb()),2&e&&(P.rc("ngClass",P.vc(6,ve,"sm"===t.size)),P.Cb(1),P.rc("ngIf",!t.hideIssuelistNavigator),P.Cb(1),P.rc("ngModel",t.issue)("ngbTypeahead",t.search)("appAutofocus",!0),P.Cb(2),P.rc("ngIf",t.canNavigate()))},directives:[s.k,s.m,ie.b,be.t,ie.f,ie.i,pe.a,F.a],encapsulation:2}),me);function Ie(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div"),P.Wb(1,"a",14),P.ic("click",(function(){return P.Gc(i),P.kc(3).showIssueEntry=!0})),P.Wb(2,"span",15),P.Pc(3),P.lc(4,"slice"),P.Vb(),P.Pc(5),P.Rb(6,"fa-icon",16),P.Vb(),P.Rb(7,"app-issue-navigation-menu",17),P.Vb()}if(2&e){var s=P.kc(3);P.Cb(2),P.rc("title",s.selectedIssue.issueType),P.Cb(1),P.Qc(P.oc(4,4,s.selectedIssue.issueType,0,6)),P.Cb(2),P.Rc(": ",s.selectedIssue.key," "),P.Cb(2),P.rc("issueKey",s.selectedIssue.key)}}function Ce(e,t){if(1&e){var i=P.Xb();P.Wb(0,"app-issue-entry",18),P.ic("cancel",(function(e){return P.Gc(i),P.kc(3).onCancelIssueEntry(e)}))("showIssuelist",(function(){return P.Gc(i),P.kc(3).onShowIssuelist()})),P.Vb()}2&e&&P.rc("hideIssuelistNavigator",!1)("showCancel",!0)}function je(e,t){if(1&e&&(P.Wb(0,"div",11),P.Nc(1,Ie,8,8,"div",12),P.Nc(2,Ce,1,2,"app-issue-entry",13),P.Vb()),2&e){var i=P.kc(2);P.Cb(1),P.rc("ngIf",!i.showIssueEntry),P.Cb(1),P.rc("ngIf",i.showIssueEntry)}}function Oe(e,t){1&e&&(P.Wb(0,"a",27),P.Rb(1,"fa-icon",28),P.Wb(2,"span",22),P.Pc(3,"Storyboard"),P.Vb(),P.Vb()),2&e&&P.rc("routerLinkActive","active")}function Le(e,t){1&e&&(P.Wb(0,"a",29),P.Rb(1,"fa-icon",30),P.Wb(2,"span",22),P.Pc(3,"Timeline"),P.Vb(),P.Vb()),2&e&&P.rc("routerLinkActive","active")}var Ve=function(){return["details"]},Se=function(){return["far","window-restore"]};function we(e,t){if(1&e&&(P.Wb(0,"div",19),P.Wb(1,"a",20),P.Rb(2,"fa-icon",21),P.Wb(3,"span",22),P.Pc(4,"Purpose"),P.Vb(),P.Vb(),P.Wb(5,"a",23),P.Rb(6,"fa-icon",24),P.Wb(7,"span",22),P.Pc(8,"Workbench"),P.Vb(),P.Vb(),P.Nc(9,Oe,4,1,"a",25),P.Nc(10,Le,4,1,"a",26),P.Vb()),2&e){var i=P.kc(2);P.Cb(1),P.rc("routerLink",P.uc(6,Ve))("routerLinkActive","active"),P.Cb(4),P.rc("routerLinkActive","active"),P.Cb(1),P.rc("icon",P.uc(7,Se)),P.Cb(3),P.rc("ngIf",i.canNavigateToStoryboard),P.Cb(1),P.rc("ngIf",i.canNavigateToStoryboard)}}function Pe(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div",3),P.Wb(1,"div",4),P.Wb(2,"button",5),P.ic("click",(function(){return P.Gc(i),P.kc().toggleView()})),P.Rb(3,"fa-icon",6),P.Vb(),P.Vb(),P.Nc(4,je,3,2,"div",7),P.Wb(5,"h2",8),P.Pc(6),P.Wb(7,"sup",9),P.Pc(8),P.Vb(),P.Vb(),P.Nc(9,we,11,8,"div",10),P.Vb()}if(2&e){var s=P.kc();P.Cb(3),P.rc("icon",s.compactView?"expand-alt":"compress-alt"),P.Cb(1),P.rc("ngIf",!s.compactView),P.Cb(2),P.Rc(" ",s.selectedIssue.title," "),P.Cb(2),P.Rc(" ",s.selectedIssue.status," "),P.Cb(1),P.rc("ngIf",!s.compactView)}}var We,Re=((We=function(e){function t(e,i,s,n){var c;return _classCallCheck(this,t),(c=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).cdRef=e,c.router=i,c.activatedRoute=s,c.store$=n,c.canNavigateToStoryboard=!1,c.checkIfCanNavigateToStoryboard=function(){return c.selectedIssue&&c.selectedIssue.key&&c.primaryIssue&&c.primaryIssue.key&&("Epic"===c.selectedIssue.issueType||c.primaryIssue.key.toLowerCase()===c.selectedIssue.key.toLowerCase())},c.showIssueEntry=!1,c}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this;this.init(55),this.localNodeType=j.a,this.updatedField$=this.store$.select((function(e){return e.issue.updatedField})).pipe(Object(R.a)((function(t){return t&&e.selectedIssue}))).subscribe((function(){e.store$.dispatch(new h({issue:e.selectedIssue.key,extendedFields:e.extendedFields}))})),this.organization$=this.store$.select((function(e){return e.app.organization})).pipe(Object(R.a)((function(e){return e}))).subscribe((function(t){return e.store$.dispatch(new I(t))})),this.selectedIssue$=this.store$.select((function(e){return e.issue.selectedIssue})).pipe(Object(R.a)((function(e){return e}))).subscribe((function(t){e.selectedIssue=t,e.canNavigateToStoryboard=e.checkIfCanNavigateToStoryboard(),e.primaryIssue&&e.primaryIssue.key&&e.selectedIssue.key.toLowerCase()===e.primaryIssue.key.toLowerCase()||(e.selectedIssue.relatedLinksLoaded||e.selectedIssue.relatedLinksLoading||e.selectedIssue.relatedLinks&&e.selectedIssue.relatedLinks.length>0&&e.store$.dispatch(new y(L.map(e.selectedIssue.relatedLinks,"key"))),e.selectedIssue.issueType!==j.a.Epic||e.selectedIssue.epicChildrenLoaded||e.selectedIssue.epicChildrenLoading||e.store$.dispatch(new g(e.selectedIssue.key)))}));var t=this.store$.select((function(e){return e.issue.primaryIssue})).pipe(Object(R.a)((function(e){return e}))),i=this.store$.select((function(e){return e.issue.hierarchicalIssue})).pipe(Object(R.a)((function(e){return e}))),s=this.activatedRoute.params.pipe(Object(R.a)((function(e){return e&&e.selected&&e.selected.length>0})),Object(ne.a)((function(e){return e.selected})));this.combined$=Object(W.a)(t,i,s).subscribe((function(t){var i=_slicedToArray(t,3),s=i[0],n=i[1],c=i[2];if(e.primaryIssue=s,e.primaryIssue.key&&c.toLowerCase()===e.primaryIssue.key.toLowerCase())e.store$.dispatch(new m(s));else if(!e.selectedIssue||e.selectedIssue.key.toLowerCase()!==c.toLowerCase()){var a=Object(j.t)(n,c);e.extendedFields=a?e.populateExtendedFields(s.projectConfig,a.issueType):[],e.store$.dispatch(new h({issue:c,extendedFields:e.extendedFields}))}}))}},{key:"populateExtendedFields",value:function(e,t){var i=[];if(e){if(e.standardIssueTypes){var s=L.find(e.standardIssueTypes,{name:t});s&&(i=L.union(i,s.list))}e.startdate&&i.push(e.startdate)}return i}},{key:"ngOnDestroy",value:function(){this.destroy(),this.updatedField$&&this.updatedField$.unsubscribe(),this.organization$&&this.organization$.unsubscribe(),this.combined$&&this.combined$.unsubscribe(),this.selectedIssue$&&this.selectedIssue$.unsubscribe()}},{key:"onShowIssuelist",value:function(){this.router.navigate(["/search/list"])}},{key:"ngAfterViewInit",value:function(){this.afterViewInit()}},{key:"toggleView",value:function(){this.store$.dispatch(new f(!this.compactView))}},{key:"onCancelIssueEntry",value:function(e){this.showIssueEntry=!1}}]),t}(ae)).\u0275fac=function(e){return new(e||We)(P.Qb(P.h),P.Qb(E.d),P.Qb(E.a),P.Qb(n.h))},We.\u0275cmp=P.Kb({type:We,selectors:[["app-selected-issue-container"]],features:[P.zb],decls:4,vars:3,consts:[["class","bg-light container-fluid pb-2 border-bottom",4,"ngIf"],[2,"overflow","auto","width","100%"],["content",""],[1,"bg-light","container-fluid","pb-2","border-bottom"],[1,"float-right","btn-group","btn-group-sm"],[1,"btn","btn-sm","btn-link","text-muted",3,"click"],[3,"icon"],["style","width:225px",4,"ngIf"],[1,"font-weight-light"],[1,"badge","badge-light","text-uppercase","text-muted",2,"font-size","small"],["class","btn-group",4,"ngIf"],[2,"width","225px"],[4,"ngIf"],["size","sm","title","Hit ENTER to navigate to issue, ESCAPE to cancel.",3,"hideIssuelistNavigator","showCancel","cancel","showIssuelist",4,"ngIf"],[1,"text-dark","text-uppercase","font-weight-bold","small","mr-3",3,"click"],[3,"title"],["icon","pencil-alt",1,"ml-1"],["icon","ellipsis-h","placement","bottom-left",3,"issueKey"],["size","sm","title","Hit ENTER to navigate to issue, ESCAPE to cancel.",3,"hideIssuelistNavigator","showCancel","cancel","showIssuelist"],[1,"btn-group"],["title","View purpose",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLink","routerLinkActive"],["icon","fire","size","sm",1,"text-brand"],[1,"ml-1"],["routerLink","workbench","title","Workbench",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLinkActive"],["size","sm",3,"icon"],["class","btn btn-default border btn-sm text-nowrap","routerLink","storyboard","title","Storyboard",3,"routerLinkActive",4,"ngIf"],["class","btn btn-default border btn-sm text-nowrap","routerLink","timeline","title","Timeline",3,"routerLinkActive",4,"ngIf"],["routerLink","storyboard","title","Storyboard",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLinkActive"],["icon","map","size","sm"],["routerLink","timeline","title","Timeline",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLinkActive"],["icon","map-signs","size","sm"]],template:function(e,t){1&e&&(P.Nc(0,Pe,10,5,"div",0),P.Wb(1,"div",1,2),P.Rb(3,"router-outlet"),P.Vb()),2&e&&(P.rc("ngIf",t.selectedIssue),P.Cb(1),P.Mc("height",t.contentHeight,"px"))},directives:[s.m,E.h,F.a,re.a,ke,E.f,E.e],pipes:[s.r],encapsulation:2}),We),xe=function(e){return{small:e}};function Fe(e,t){if(1&e&&(P.Wb(0,"div",5),P.Wb(1,"sub",6),P.Pc(2),P.Vb(),P.Rb(3,"ngx-md",7),P.Vb()),2&e){var i=P.kc().$implicit,s=P.kc(3);P.Cb(2),P.Qc(i.name),P.Cb(1),P.rc("ngClass",P.vc(3,xe,s.fontSizeSmall))("data",i.extendedValue)}}function Ee(e,t){if(1&e&&(P.Ub(0),P.Nc(1,Fe,4,5,"div",4),P.Tb()),2&e){var i=t.$implicit;P.Cb(1),P.rc("ngIf",i.extendedValue&&i.extendedValue.length>0)}}function $e(e,t){if(1&e&&(P.Wb(0,"div",2),P.Nc(1,Ee,2,1,"ng-container",3),P.Vb()),2&e){var i=P.kc(2);P.Cb(1),P.rc("ngForOf",i.issue.extendedFields)}}function Te(e,t){if(1&e&&(P.Wb(0,"div"),P.Nc(1,$e,2,1,"div",1),P.Vb()),2&e){var i=P.kc();P.Cb(1),P.rc("ngIf",i.issue.extendedFields&&i.issue.extendedFields.length>0)}}var Ne,ze=((Ne=function e(){_classCallCheck(this,e),this.fontSizeSmall=!1}).\u0275fac=function(e){return new(e||Ne)},Ne.\u0275cmp=P.Kb({type:Ne,selectors:[["app-extended-fields"]],inputs:{issue:"issue"},decls:1,vars:1,consts:[[4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"mt-5"],[4,"ngFor","ngForOf"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"text-muted","text-uppercase"],[3,"ngClass","data"]],template:function(e,t){1&e&&P.Nc(0,Te,2,1,"div",0),2&e&&P.rc("ngIf",t.issue)},directives:[s.m,s.l,X.a,s.k],encapsulation:2}),Ne);function _e(e,t){if(1&e){var i=P.Xb();P.Wb(0,"button",12),P.ic("click",(function(){P.Gc(i);var e=P.kc(3);return e.hideDetails=!e.hideDetails})),P.Pc(1),P.Vb()}if(2&e){var s=P.kc(3);P.Cb(1),P.Rc(" ",s.hideDetails?"more ...":"... less"," ")}}var De=function(e){return{"issue-resolved":e}};function Ae(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div",3),P.Rb(1,"app-issue-navigation-menu",4),P.Wb(2,"button",5),P.ic("click",(function(){return P.Gc(i),P.kc(2).onClose()})),P.Rb(3,"fa-icon",6),P.Vb(),P.Wb(4,"span",7),P.Wb(5,"span",8),P.Pc(6),P.Vb(),P.Pc(7),P.Vb(),P.Nc(8,_e,2,1,"button",9),P.Wb(9,"div",10),P.Rb(10,"ngx-md",11),P.Vb(),P.Vb()}if(2&e){var s=P.kc(2);P.Cb(1),P.rc("issueKey",s.issue.key),P.Cb(4),P.rc("ngClass",P.vc(7,De,s.issue.resolution)),P.Cb(1),P.Rc("",s.issue.key,":"),P.Cb(1),P.Rc(" ",s.issue.title," "),P.Cb(1),P.rc("ngIf",s.issue.description&&s.issue.description.length>0),P.Cb(1),P.rc("ngbCollapse",s.hideDetails),P.Cb(1),P.rc("data",s.issue.description)}}function Ge(e,t){if(1&e){var i=P.Xb();P.Wb(0,"button",23),P.ic("click",(function(){return P.Gc(i),P.kc(3).showHideExtendedFields()})),P.Rb(1,"fa-icon",24),P.Vb()}if(2&e){var s=P.kc(3);P.Cb(1),P.rc("fixedWidth",!0)("icon",s.hideExtendedFields?"angle-double-right":"angle-double-down")}}function Qe(e,t){if(1&e&&(P.Wb(0,"span",25),P.Pc(1),P.Vb()),2&e){var i=P.kc(3);P.Cb(1),P.Rc(" ",i.filteredItems.length," ")}}function Ke(e,t){if(1&e){var i=P.Xb();P.Wb(0,"button",26),P.ic("click",(function(){P.Gc(i);var e=P.kc(3);return e.tasklistFilterVisible=!e.tasklistFilterVisible})),P.Rb(1,"fa-icon",27),P.Vb()}if(2&e){var s=P.kc(3);P.Cb(1),P.rc("icon",s.tasklistFilterVisible?"chevron-up":"filter")}}function Me(e,t){if(1&e&&(P.Wb(0,"option",32),P.Pc(1),P.Vb()),2&e){var i=t.$implicit;P.rc("value",i.key),P.Cb(1),P.Rc(" ",i.key+" ("+i.count+")","")}}function Xe(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div",28),P.Wb(1,"select",29),P.ic("ngModelChange",(function(e){return P.Gc(i),P.kc(3).issueTypeFilter=e}))("change",(function(){return P.Gc(i),P.kc(3).onFilterChanged()})),P.Wb(2,"option",30),P.Pc(3,"ISSUE TYPE: All"),P.Vb(),P.Nc(4,Me,2,2,"option",31),P.Vb(),P.Vb()}if(2&e){var s=P.kc(3);P.Cb(1),P.rc("ngModel",s.issueTypeFilter),P.Cb(3),P.rc("ngForOf",s.issueTypeStats)}}function Ue(e,t){if(1&e&&(P.Wb(0,"option",32),P.Pc(1),P.Vb()),2&e){var i=t.$implicit;P.rc("value",i.key),P.Cb(1),P.Rc(" ",i.key+" ("+i.count+")","")}}function He(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div",28),P.Wb(1,"select",29),P.ic("ngModelChange",(function(e){return P.Gc(i),P.kc(3).statusFilter=e}))("change",(function(){return P.Gc(i),P.kc(3).onFilterChanged()})),P.Wb(2,"option",30),P.Pc(3,"STATUS: All"),P.Vb(),P.Nc(4,Ue,2,2,"option",31),P.Vb(),P.Vb()}if(2&e){var s=P.kc(3);P.Cb(1),P.rc("ngModel",s.statusFilter),P.Cb(3),P.rc("ngForOf",s.statusStats)}}function Je(e,t){if(1&e){var i=P.Xb();P.Wb(0,"button",41),P.ic("click",(function(){P.Gc(i);var e=P.kc().$implicit;return e.hideExtendedFields=!e.hideExtendedFields})),P.Rb(1,"fa-icon",24),P.Vb()}if(2&e){var s=P.kc().$implicit;P.Cb(1),P.rc("fixedWidth",!0)("icon",s.hideExtendedFields?"angle-right":"angle-down")}}function Be(e,t){if(1&e&&(P.Wb(0,"tr"),P.Wb(1,"td",45),P.Pc(2),P.Vb(),P.Wb(3,"td",46),P.Pc(4),P.Vb(),P.Vb()),2&e){var i=t.$implicit;P.Cb(2),P.Rc("",i.name,":"),P.Cb(2),P.Rc(" ",i.value," ")}}function qe(e,t){if(1&e&&(P.Wb(0,"div",42),P.Wb(1,"table",43),P.Nc(2,Be,5,2,"tr",44),P.Vb(),P.Vb()),2&e){var i=P.kc().$implicit;P.Cb(2),P.rc("ngForOf",i.extendedFields)}}var Ye=function(e){return{"ml-4":e}};function Ze(e,t){if(1&e&&(P.Wb(0,"div",33),P.Nc(1,Je,2,2,"button",34),P.Wb(2,"small",35),P.Pc(3),P.Vb(),P.Wb(4,"small",36),P.Wb(5,"span",37),P.Pc(6),P.Vb(),P.Pc(7,": "),P.Wb(8,"span",38),P.Pc(9),P.Vb(),P.Vb(),P.Wb(10,"div",38),P.Wb(11,"div",39),P.Pc(12),P.Vb(),P.Nc(13,qe,3,1,"div",40),P.Vb(),P.Vb()),2&e){var i=t.$implicit,s=P.kc(3);P.Cb(1),P.rc("ngIf",s.hasExtendedFields),P.Cb(2),P.Qc(i.status),P.Cb(3),P.Qc(i.issueType),P.Cb(2),P.rc("ngClass",P.vc(8,De,i.resolution)),P.Cb(1),P.Qc(i.key),P.Cb(1),P.rc("ngClass",P.vc(10,Ye,s.hasExtendedFields)),P.Cb(2),P.Qc(i.title),P.Cb(1),P.rc("ngIf",!i.hideExtendedFields&&i.extendedFields&&i.extendedFields.length>0)}}function et(e,t){if(1&e&&(P.Wb(0,"div"),P.Wb(1,"div",13),P.Wb(2,"div",14),P.Wb(3,"div",15),P.Nc(4,Ge,2,2,"button",16),P.Wb(5,"b",17),P.Nc(6,Qe,2,1,"span",18),P.Pc(7),P.Vb(),P.Nc(8,Ke,2,1,"button",19),P.Vb(),P.Wb(9,"div",20),P.Nc(10,Xe,5,2,"div",21),P.Nc(11,He,5,2,"div",21),P.Vb(),P.Vb(),P.Nc(12,Ze,14,12,"div",22),P.Vb(),P.Vb()),2&e){var i=P.kc(2);P.Cb(4),P.rc("ngIf",i.hasExtendedFields),P.Cb(2),P.rc("ngIf",i.filteredItems.length>0),P.Cb(1),P.Rc(" record",i.filteredItems.length>1?"s":"",""),P.Cb(1),P.rc("ngIf",i.issueTypeStats&&i.issueTypeStats.length>1||i.statusStats&&i.statusStats.length>1),P.Cb(1),P.rc("ngbCollapse",!i.tasklistFilterVisible),P.Cb(1),P.rc("ngIf",i.issueTypeStats&&i.issueTypeStats.length>1),P.Cb(1),P.rc("ngIf",i.statusStats&&i.statusStats.length>1),P.Cb(1),P.rc("ngForOf",i.filteredItems)}}function tt(e,t){1&e&&(P.Wb(0,"div",47),P.Pc(1," No detail records found. "),P.Vb())}function it(e,t){if(1&e&&(P.Wb(0,"div"),P.Nc(1,Ae,11,9,"div",1),P.Nc(2,et,13,8,"div",0),P.Nc(3,tt,2,0,"div",2),P.Vb()),2&e){var i=P.kc();P.Cb(1),P.rc("ngIf",i.showIssue),P.Cb(1),P.rc("ngIf",i.filteredItems&&i.filteredItems.length>0),P.Cb(1),P.rc("ngIf",i.filteredItems&&0===i.filteredItems.length)}}var st,nt=((st=function(){function e(t){_classCallCheck(this,e),this.store$=t,this.close=new P.n,this.tasklistFilterVisible=!1,this.childIssueType="",this.hasExtendedFields=!1,this.hideDetails=!0,this.hideExtendedFields=!0,this.statusFilter="all",this.issueTypeFilter="all"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.subtasks$=this.store$.select((function(e){return e.issue.subtasks})).pipe(Object(R.a)((function(e){return e}))).subscribe((function(t){e.subtasks=t,e.subtasks.forEach((function(t){return t.hideExtendedFields=e.hideExtendedFields})),e.onFilterChanged(),e.populateStatistics()}))}},{key:"ngOnDestroy",value:function(){this.subtasks$&&this.subtasks$.unsubscribe()}},{key:"loadDetails",value:function(){if(this.subtasks=null,this.issue&&this.issue.projectConfig&&this.issue.projectConfig.subTaskIssueTypes&&this.issue.projectConfig.subTaskIssueTypes.length>0){var e=L.join(L.map(this.issue.projectConfig.subTaskIssueTypes,(function(e){return"'".concat(e.name,"'")})),","),t=L.spread(L.union)(L.map(this.issue.projectConfig.subTaskIssueTypes,"list"));this.hasExtendedFields=t&&t.length>0,this.store$.dispatch(new b({issueKey:this.issue.key,subTaskIssueTypes:e,extendedFields:t}))}}},{key:"populateStatistics",value:function(){var e=L.mapValues(L.groupBy(L.map(this.subtasks,"status")),(function(e){return e.length}));this.statusStats=Object.keys(e).map((function(t){return{key:t,count:e[t]}}));var t=L.mapValues(L.groupBy(L.map(this.subtasks,"issueType")),(function(e){return e.length}));this.issueTypeStats=Object.keys(t).map((function(e){return{key:e,count:t[e]}}))}},{key:"onFilterChanged",value:function(){var e=this;this.filteredItems=L.filter(this.subtasks,(function(t){return!(e.statusFilter&&"all"!==e.statusFilter&&t.status!==e.statusFilter||e.issueTypeFilter&&"all"!==e.issueTypeFilter&&t.issueType!==e.issueTypeFilter)})),this.filteredItems=L.orderBy(this.filteredItems,["issueType","status"])}},{key:"showHideExtendedFields",value:function(){var e=this;this.hideExtendedFields=!this.hideExtendedFields,this.subtasks&&this.subtasks.forEach((function(t){return t.hideExtendedFields=e.hideExtendedFields}))}},{key:"onClose",value:function(){this.close.emit(!0)}},{key:"issue",set:function(e){this._issue=e,this.loadDetails()},get:function(){return this._issue}}]),e}()).\u0275fac=function(e){return new(e||st)(P.Qb(n.h))},st.\u0275cmp=P.Kb({type:st,selectors:[["app-task-list"]],inputs:{issue:"issue",showIssue:"showIssue"},outputs:{close:"close"},decls:1,vars:1,consts:[[4,"ngIf"],["class","alert bg-light pl-0 mb-0","style","font-size:medium;",4,"ngIf"],["class","alert alert-warning mt-2",4,"ngIf"],[1,"alert","bg-light","pl-0","mb-0",2,"font-size","medium"],[1,"float-right",3,"issueKey"],[1,"btn","btn-sm","btn-link","mr-2",3,"click"],["icon","chevron-left","size","lg"],[1,"pt-2"],[1,"mr-1",3,"ngClass"],["class","btn btn-link btn-sm",3,"click",4,"ngIf"],[1,"small","p-4",3,"ngbCollapse"],[3,"data"],[1,"btn","btn-link","btn-sm",3,"click"],[1,"list-group","list-group-flush","list-group-flush-compact"],[1,"list-group-item","list-group-item-light"],[1,"clearfix"],["class","btn btn-sm btn-link text-muted pl-0","title","Show/hide details",3,"click",4,"ngIf"],[1,"mt-1"],["class","mr-1",4,"ngIf"],["class","btn btn-link btn-sm float-right","title","Filters",3,"click",4,"ngIf"],[1,"row","ml-3",3,"ngbCollapse"],["class","col-md-6",4,"ngIf"],["class","list-group-item",4,"ngFor","ngForOf"],["title","Show/hide details",1,"btn","btn-sm","btn-link","text-muted","pl-0",3,"click"],["size","sm",3,"fixedWidth","icon"],[1,"mr-1"],["title","Filters",1,"btn","btn-link","btn-sm","float-right",3,"click"],["size","sm",3,"icon"],[1,"col-md-6"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"list-group-item"],["class","btn btn-link btn-sm text-muted pl-0 pt-0","title","Show/hide details",3,"click",4,"ngIf"],[1,"float-right","badge","badge-light","font-weight-light","text-uppercase"],[1,"text-muted"],[1,"text-uppercase"],[3,"ngClass"],[1,"text-no-wrap"],["style","overflow: auto;","class","alert mt-2 p-0 rounded-0 border-0",4,"ngIf"],["title","Show/hide details",1,"btn","btn-link","btn-sm","text-muted","pl-0","pt-0",3,"click"],[1,"alert","mt-2","p-0","rounded-0","border-0",2,"overflow","auto"],[1,"table","table-small","m-0","border-0","bg-light","extended-fields"],[4,"ngFor","ngForOf"],["width","10%",1,"p-1","text-nowrap","text-muted"],["Markdown","",1,"p-1","text-dark"],[1,"alert","alert-warning","mt-2"]],template:function(e,t){1&e&&P.Nc(0,it,4,3,"div",0),2&e&&P.rc("ngIf",t.issue)},directives:[s.m,re.a,F.a,s.k,be.b,X.a,s.l,ie.k,ie.f,ie.i,ie.j,ie.l],encapsulation:2}),st);function ct(e,t){if(1&e&&(P.Wb(0,"span",20),P.Pc(1),P.Vb()),2&e){var i=t.$implicit;P.Cb(1),P.Qc(i)}}function at(e,t){if(1&e&&(P.Wb(0,"div",17),P.Wb(1,"span",18),P.Pc(2,"FIX VERSION: "),P.Vb(),P.Nc(3,ct,2,1,"span",19),P.Vb()),2&e){var i=P.kc(2);P.Cb(3),P.rc("ngForOf",i.issue.fixVersions)}}function rt(e,t){if(1&e&&P.Rb(0,"app-extended-fields",21),2&e){var i=P.kc(2);P.rc("issue",i.issue)}}function ot(e,t){if(1&e&&P.Rb(0,"fa-icon",23),2&e){var i=P.kc(3);P.rc("icon",i.allEpicChildrenVisible?"angle-double-down":"angle-double-right")("fixedWidth",!0)}}function lt(e,t){1&e&&(P.Wb(0,"div",27),P.Pc(1," There are no issues in this epic "),P.Vb())}var ut=function(e){return{"issue-resolved":e}};function dt(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div",37),P.Rb(1,"app-issue-navigation-menu",38),P.Wb(2,"div",39),P.Wb(3,"div",40),P.Pc(4),P.Vb(),P.Wb(5,"div",41),P.Pc(6),P.lc(7,"date"),P.Vb(),P.Vb(),P.Rb(8,"i",42),P.Wb(9,"a",43),P.ic("click",(function(){P.Gc(i);var e=t.$implicit;return P.kc(8).selectEpicIssue(e)})),P.Pc(10),P.Vb(),P.Pc(11),P.Vb()}if(2&e){var s=t.$implicit;P.Cb(1),P.rc("issueKey",s.key),P.Cb(3),P.Rc(" ",s.status," "),P.Cb(2),P.Rc(" ",P.nc(7,8,s.duedate,"mediumDate")," "),P.Cb(2),P.Eb(s.icon),P.Cb(1),P.rc("ngClass",P.vc(11,ut,s.resolution)),P.Cb(1),P.Qc(s.key),P.Cb(1),P.Rc(" ",s.title," ")}}function bt(e,t){if(1&e&&(P.Wb(0,"div",35),P.Nc(1,dt,12,13,"div",36),P.Vb()),2&e){var i=P.kc().$implicit;P.Cb(1),P.rc("ngForOf",i.children)}}var pt=function(e){return{"w-100 btn-light ":e}};function ht(e,t){if(1&e&&(P.Wb(0,"div"),P.Wb(1,"div",31),P.Wb(2,"button",32),P.ic("click",(function(){var e=t.$implicit;return e.visible=!e.visible})),P.Rb(3,"fa-icon",23),P.Wb(4,"span",33),P.Pc(5),P.Vb(),P.Vb(),P.Vb(),P.Nc(6,bt,2,1,"div",34),P.Vb()),2&e){var i=t.$implicit;P.Cb(2),P.rc("ngClass",P.vc(6,pt,i.visible)),P.Cb(1),P.rc("icon",i.visible?"angle-down":"angle-right")("fixedWidth",!0),P.Cb(2),P.Sc("",i.label," / ",i.total,""),P.Cb(1),P.rc("ngIf",i.visible)}}function ft(e,t){if(1&e&&(P.Wb(0,"div"),P.Nc(1,ht,7,8,"div",28),P.Wb(2,"a",29),P.Pc(3," Storyboard view "),P.Rb(4,"fa-icon",30),P.Vb(),P.Vb()),2&e){var i=P.kc(5);P.Cb(1),P.rc("ngForOf",i.groupedEpicChildren)}}function gt(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div"),P.Wb(1,"app-task-list",44),P.ic("close",(function(){return P.Gc(i),P.kc(5).resetSelectedEpicIssue()})),P.Vb(),P.Vb()}if(2&e){var s=P.kc(5);P.Cb(1),P.rc("issue",s.selectedEpicIssue)("showIssue",!0)}}function yt(e,t){if(1&e&&(P.Wb(0,"div"),P.Nc(1,ft,5,1,"div",26),P.Nc(2,gt,2,2,"div",26),P.Vb()),2&e){var i=P.kc(4);P.Cb(1),P.rc("ngIf",!i.selectedEpicIssue),P.Cb(1),P.rc("ngIf",i.selectedEpicIssue)}}function mt(e,t){if(1&e&&(P.Wb(0,"div",24),P.Nc(1,lt,2,0,"div",25),P.Nc(2,yt,3,2,"div",26),P.Vb()),2&e){var i=P.kc(3);P.Cb(1),P.rc("ngIf",i.groupedEpicChildren&&0===i.groupedEpicChildren.length),P.Cb(1),P.rc("ngIf",i.groupedEpicChildren&&i.groupedEpicChildren.length>0)}}function vt(e,t){if(1&e){var i=P.Xb();P.Wb(0,"li",13),P.Wb(1,"a",14),P.ic("click",(function(){return P.Gc(i),P.kc(2).toggleAllEpicChildren()})),P.Nc(2,ot,1,2,"fa-icon",22),P.Pc(3," Issues in epic "),P.Vb(),P.Nc(4,mt,3,2,"ng-template",15),P.Vb()}if(2&e){var s=P.kc(2);P.rc("ngbNavItem",1),P.Cb(2),P.rc("ngIf",s.groupedEpicChildren&&s.groupedEpicChildren.length>1)}}function kt(e,t){if(1&e&&P.Rb(0,"fa-icon",23),2&e){var i=P.kc(3);P.rc("icon",i.allRelatedIssuesVisible?"angle-double-down":"angle-double-right")("fixedWidth",!0)}}function It(e,t){if(1&e&&(P.Wb(0,"span"),P.Pc(1),P.Vb()),2&e){var i=P.kc().$implicit;P.Cb(1),P.Rc(" / ",i.children.length,"")}}function Ct(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div",46),P.Rb(1,"app-issue-navigation-menu",38),P.Wb(2,"div",47),P.Pc(3),P.Vb(),P.Rb(4,"i",42),P.Wb(5,"a",48),P.ic("click",(function(){P.Gc(i);var e=t.$implicit;return P.kc(7).selectRelatedIssue(e)})),P.Pc(6),P.Vb(),P.Pc(7),P.Vb()}if(2&e){var s=t.$implicit;P.rc("title",s.issueType),P.Cb(1),P.rc("issueKey",s.key),P.Cb(2),P.Rc(" ",s.status," "),P.Cb(1),P.Eb(s.icon),P.Cb(2),P.Qc(s.key),P.Cb(1),P.Rc(" ",s.title," ")}}function jt(e,t){if(1&e&&(P.Wb(0,"div",35),P.Nc(1,Ct,8,7,"div",45),P.Vb()),2&e){var i=P.kc().$implicit;P.Cb(1),P.rc("ngForOf",i.children)}}function Ot(e,t){if(1&e&&(P.Wb(0,"div"),P.Wb(1,"div",31),P.Wb(2,"button",32),P.ic("click",(function(){var e=t.$implicit;return e.visible=!e.visible})),P.Rb(3,"fa-icon",23),P.Wb(4,"span",33),P.Pc(5),P.Nc(6,It,2,1,"span",26),P.Vb(),P.Vb(),P.Vb(),P.Nc(7,jt,2,1,"div",34),P.Vb()),2&e){var i=t.$implicit;P.Cb(2),P.rc("ngClass",P.vc(6,pt,i.visible)),P.Cb(1),P.rc("icon",i.visible?"angle-down":"angle-right")("fixedWidth",!0),P.Cb(2),P.Rc("",i.label," "),P.Cb(1),P.rc("ngIf",i.children),P.Cb(1),P.rc("ngIf",i.visible)}}function Lt(e,t){if(1&e&&(P.Wb(0,"div"),P.Nc(1,Ot,8,8,"div",28),P.Vb()),2&e){var i=P.kc(4);P.Cb(1),P.rc("ngForOf",i.groupedRelatedLinks)}}function Vt(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div"),P.Wb(1,"app-task-list",44),P.ic("close",(function(){return P.Gc(i),P.kc(4).resetSelectedRelatedIssue()})),P.Vb(),P.Vb()}if(2&e){var s=P.kc(4);P.Cb(1),P.rc("issue",s.selectedRelatedIssue)("showIssue",!0)}}function St(e,t){if(1&e&&(P.Wb(0,"div",24),P.Nc(1,Lt,2,1,"div",26),P.Nc(2,Vt,2,2,"div",26),P.Vb()),2&e){var i=P.kc(3);P.Cb(1),P.rc("ngIf",!i.selectedRelatedIssue),P.Cb(1),P.rc("ngIf",i.selectedRelatedIssue)}}function wt(e,t){if(1&e){var i=P.Xb();P.Wb(0,"li",13),P.Wb(1,"a",14),P.ic("click",(function(){return P.Gc(i),P.kc(2).toggleAllRelatedIssues()})),P.Nc(2,kt,1,2,"fa-icon",22),P.Pc(3," Related "),P.Vb(),P.Nc(4,St,3,2,"ng-template",15),P.Vb()}if(2&e){var s=P.kc(2);P.rc("ngbNavItem",2),P.Cb(2),P.rc("ngIf",s.groupedRelatedLinks.length>1)}}function Pt(e,t){if(1&e&&(P.Wb(0,"div",24),P.Rb(1,"app-task-list",49),P.Vb()),2&e){var i=P.kc(2);P.Cb(1),P.rc("issue",i.selectedIssue)("showIssue",!1)}}var Wt=function(e){return{small:e}};function Rt(e,t){if(1&e){var i=P.Xb();P.Wb(0,"as-split",1),P.ic("gutterDblClick",(function(){return P.Gc(i),P.kc().toggleFullscreen()}))("dragEnd",(function(e){return P.Gc(i),P.kc().dragEnd(e)})),P.Wb(1,"as-split-area",2),P.Wb(2,"div",3),P.Rb(3,"ngx-md",4),P.Nc(4,at,4,1,"div",5),P.Nc(5,rt,1,1,"app-extended-fields",6),P.Vb(),P.Vb(),P.Wb(6,"as-split-area",7),P.Wb(7,"button",8),P.ic("click",(function(){return P.Gc(i),P.kc().toggleFullscreen()})),P.Rb(8,"fa-icon",9),P.Vb(),P.Wb(9,"ul",10,11),P.ic("activeIdChange",(function(e){return P.Gc(i),P.kc().selectedTab=e})),P.Nc(11,vt,5,2,"li",12),P.Nc(12,wt,5,2,"li",12),P.Wb(13,"li",13),P.Wb(14,"a",14),P.ic("click",(function(){return P.Gc(i),P.kc().reloadSubtasks()})),P.Pc(15,"Task breakup"),P.Vb(),P.Nc(16,Pt,2,2,"ng-template",15),P.Vb(),P.Vb(),P.Rb(17,"div",16),P.Vb(),P.Vb()}if(2&e){var s=P.Ec(10),n=P.kc();P.Cb(1),P.rc("size",n.columns[0].size),P.Cb(2),P.rc("data",n.issue.description),P.Cb(1),P.rc("ngIf",n.issue.fixVersions&&n.issue.fixVersions.length>0),P.Cb(1),P.rc("ngIf",n.leftPaneSize>0),P.Cb(1),P.rc("size",n.columns[1].size)("ngClass",P.vc(14,Wt,0!==n.columns[0].size)),P.Cb(2),P.rc("icon",0===n.columns[0].size?"compress":"expand")("fixedWidth",!0),P.Cb(1),P.rc("activeId",n.selectedTab)("destroyOnHide",!1),P.Cb(2),P.rc("ngIf",n.issue.issueType===n.localNodeType.Epic),P.Cb(1),P.rc("ngIf",n.groupedRelatedLinks&&n.groupedRelatedLinks.length>0),P.Cb(1),P.rc("ngbNavItem",3),P.Cb(4),P.rc("ngbNavOutlet",s)}}var xt,Ft=((xt=function(){function e(t){var i=this;_classCallCheck(this,e),this.store$=t,this.allRelatedIssuesVisible=!0,this.allEpicChildrenVisible=!0,this.selectedTab=1,this.leftPaneSize=60,this.columns=[{visible:!0,size:60},{visible:!0,size:40}],this.resetSelectedRelatedIssue=function(){return i.selectedRelatedIssue=null},this.resetSelectedEpicIssue=function(){return i.selectedEpicIssue=null},this.localNodeType=j.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.selectedIssue$=this.store$.select((function(e){return e.issue.selectedIssue})).pipe(Object(R.a)((function(e){return e}))).subscribe((function(t){e.issue=t,e.selectedRelatedIssue=null,e.selectedEpicIssue=null,e.issue.relatedLinksLoaded&&!e.groupedRelatedLinks&&(e.groupedRelatedLinks=Object(a.a)(e.issue.relatedLinks,"linkType"),e.issue.relatedLinksCount=e.groupedRelatedLinks.length,e.selectedTab=e.groupedRelatedLinks.length>0?2:3,e.toggleAllRelatedIssues()),e.issue.issueType===j.a.Epic&&e.issue.epicChildrenLoaded&&e.groupEpicChildren("status")}))}},{key:"ngOnDestroy",value:function(){this.epicChildrenLoaded$&&this.epicChildrenLoaded$.unsubscribe(),this.selectedIssue$&&this.selectedIssue$.unsubscribe()}},{key:"dragEnd",value:function(e){this.adjustPaneSize(e.sizes[0])}},{key:"adjustPaneSize",value:function(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}},{key:"toggleFullscreen",value:function(){this.adjustPaneSize(0===this.leftPaneSize?60:0)}},{key:"selectRelatedIssue",value:function(e){this.selectedRelatedIssue=e,this.selectedRelatedIssue.projectConfig=this.issue.projectConfig}},{key:"selectEpicIssue",value:function(e){this.selectedEpicIssue=e,this.selectedEpicIssue.projectConfig=this.issue.projectConfig}},{key:"groupEpicChildren",value:function(e){if(this.selectedTab=1,this.issue&&!this.groupedEpicChildren){var t=this.issue.epicChildren;t&&t.length>0&&(this.groupedEpicChildren=Object(a.a)(t,e)),this.toggleAllEpicChildren()}}},{key:"toggleAllEpicChildren",value:function(){var e=this;this.selectedIssue=null,this.allEpicChildrenVisible=!this.allEpicChildrenVisible,this.groupedEpicChildren&&this.groupedEpicChildren.forEach((function(t){return t.visible=1===e.groupedEpicChildren.length||e.allEpicChildrenVisible}))}},{key:"toggleAllRelatedIssues",value:function(){var e=this;this.selectedIssue=null,this.allRelatedIssuesVisible=!this.allRelatedIssuesVisible,this.groupedRelatedLinks&&this.groupedRelatedLinks.length>0&&this.groupedRelatedLinks.forEach((function(t){return t.visible=1===e.groupedRelatedLinks.length||e.allRelatedIssuesVisible}))}},{key:"reloadSubtasks",value:function(){this.selectedEpicIssue=null,this.selectedRelatedIssue=null,this.selectedIssue=this.issue}}]),e}()).\u0275fac=function(e){return new(e||xt)(P.Qb(n.h))},xt.\u0275cmp=P.Kb({type:xt,selectors:[["app-workbench"]],decls:2,vars:1,consts:[["direction","horizontal",3,"gutterDblClick","dragEnd",4,"ngIf"],["direction","horizontal",3,"gutterDblClick","dragEnd"],[3,"size"],[1,"alert",2,"overflow","auto"],[3,"data"],["class","alert bg-light small mt-3 mb-3",4,"ngIf"],[3,"issue",4,"ngIf"],[3,"size","ngClass"],["title","expand/collapse pane",1,"btn","btn-sm","btn-link","text-muted","float-right","mt-2",3,"click"],[3,"icon","fixedWidth"],["ngbNav","",1,"nav-tabs","mt-2",3,"activeId","destroyOnHide","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngIf"],[3,"ngbNavItem"],["ngbNavLink","",3,"click"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"alert","bg-light","small","mt-3","mb-3"],[1,"text-muted"],["class","ml-1",4,"ngFor","ngForOf"],[1,"ml-1"],[3,"issue"],["size","sm",3,"icon","fixedWidth",4,"ngIf"],["size","sm",3,"icon","fixedWidth"],[1,"pl-2","pr-2","pb-2"],["class","alert alert-warning",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-warning"],[4,"ngFor","ngForOf"],["routerLink","../storyboard",1,"btn","btn-light","btn-sm","text-primary","mt-4"],["icon","chevron-right","size","sm"],[1,"text-muted","text-uppercase","mt-1","mb-1"],[1,"btn","btn-sm","btn-link","text-left","text-dark",3,"ngClass","click"],[1,"ml-2"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["class","ml-3 p-1 border-bottom text-no-wrap",4,"ngFor","ngForOf"],[1,"ml-3","p-1","border-bottom","text-no-wrap"],[1,"float-right",3,"issueKey"],[1,"text-uppercase","float-right","mt-1"],["title","status",1,"badge","badge-light","ml-2","font-weight-normal"],["title","Due date",1,"badge","badge-light","font-weight-normal"],[1,"mr-1"],[1,"text-primary","mr-2",3,"ngClass","click"],[3,"issue","showIssue","close"],["class","ml-3 p-1 border-bottom text-no-wrap",3,"title",4,"ngFor","ngForOf"],[1,"ml-3","p-1","border-bottom","text-no-wrap",3,"title"],[1,"badge","badge-light","font-weight-normal","text-uppercase","float-right","mt-1"],[1,"text-primary","mr-2",3,"click"],[3,"issue","showIssue"]],template:function(e,t){1&e&&(P.Wb(0,"div"),P.Nc(1,Rt,18,16,"as-split",0),P.Vb()),2&e&&(P.Cb(1),P.rc("ngIf",t.issue))},directives:[s.m,x.c,x.b,X.a,s.k,F.a,be.j,be.l,be.m,be.k,be.o,s.l,ze,E.f,re.a,nt],pipes:[s.e],encapsulation:2}),xt),Et=i("uAqM"),$t=i("Ewkv"),Tt=i("lVkt"),Nt=i("/RsI"),zt=i("NGyg");function _t(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div"),P.Wb(1,"input",11),P.ic("ngModelChange",(function(e){return P.Gc(i),P.kc(3).includeEpicChildren=e}))("change",(function(){return P.Gc(i),P.kc(3).plotIssuesOnStoryboard()})),P.Vb(),P.Wb(2,"b",12),P.Pc(3),P.Vb(),P.Pc(4," issues in this epic "),P.Vb()}if(2&e){var s=P.kc(3);P.Cb(1),P.rc("ngModel",s.includeEpicChildren),P.Cb(2),P.Qc(s.storyboardItem.epicChildren.length)}}function Dt(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div"),P.Wb(1,"input",11),P.ic("ngModelChange",(function(e){return P.Gc(i),P.kc(3).includeRelatedIssues=e}))("change",(function(){return P.Gc(i),P.kc(3).plotIssuesOnStoryboard()})),P.Vb(),P.Wb(2,"b",12),P.Pc(3),P.Vb(),P.Pc(4," related issues "),P.Vb()}if(2&e){var s=P.kc(3);P.Cb(1),P.rc("ngModel",s.includeRelatedIssues),P.Cb(2),P.Qc(s.storyboardItem.relatedLinks.length)}}function At(e,t){if(1&e&&(P.Ub(0),P.Nc(1,_t,5,2,"div",0),P.Nc(2,Dt,5,2,"div",0),P.Tb()),2&e){var i=P.kc(2);P.Cb(1),P.rc("ngIf",i.storyboardItem.epicChildren&&i.storyboardItem.epicChildren.length>0),P.Cb(1),P.rc("ngIf",i.storyboardItem.relatedLinks&&i.storyboardItem.relatedLinks.length>0)}}function Gt(e,t){if(1&e&&(P.Wb(0,"div",14),P.Wb(1,"span",15),P.Pc(2),P.Vb(),P.Pc(3," unplanned issues. "),P.Vb()),2&e){var i=P.kc(3);P.Cb(2),P.Qc(i.storyboardItem.metadata.backlogCount)}}function Qt(e,t){if(1&e&&(P.Wb(0,"div"),P.Wb(1,"span",15),P.Pc(2),P.Vb(),P.Pc(3," issues in unknown functional areas. "),P.Vb()),2&e){var i=P.kc(3);P.Cb(2),P.Qc(i.storyboardItem.metadata.noComponentCount)}}function Kt(e,t){if(1&e&&(P.Ub(0),P.Nc(1,Gt,4,1,"div",13),P.Nc(2,Qt,4,1,"div",0),P.Tb()),2&e){var i=P.kc(2);P.Cb(1),P.rc("ngIf",i.storyboardItem.metadata.backlogCount>0),P.Cb(1),P.rc("ngIf",i.storyboardItem.metadata.noComponentCount>0)}}function Mt(e,t){if(1&e){var i=P.Xb();P.Wb(0,"p-multiSelect",16),P.ic("ngModelChange",(function(e){return P.Gc(i),P.kc(2).selectedStatuses=e}))("onChange",(function(e){return P.Gc(i),P.kc(2).onSelectedStatusChange(e)})),P.Vb()}if(2&e){var s=P.kc(2);P.rc("options",s.statusLookup)("ngModel",s.selectedStatuses)}}var Xt=function(){return["far","chart-bar"]};function Ut(e,t){if(1&e){var i=P.Xb();P.Wb(0,"button",17),P.ic("click",(function(){return P.Gc(i),P.kc(2).showStatistics=!0})),P.Rb(1,"fa-icon",18),P.Vb()}2&e&&(P.Cb(1),P.rc("icon",P.uc(1,Xt)))}function Ht(e,t){if(1&e){var i=P.Xb();P.Wb(0,"p-dialog",19),P.ic("visibleChange",(function(e){return P.Gc(i),P.kc(2).showStatistics=e})),P.Rb(1,"app-statistics",20),P.Vb()}if(2&e){var s=P.kc(2);P.rc("header",s.storyboardItem.statistics.title)("dismissableMask",!0)("modal",!0)("visible",s.showStatistics),P.Cb(1),P.rc("statistics",s.storyboardItem.statistics)}}function Jt(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div"),P.Wb(1,"div",1),P.Wb(2,"div",2),P.Wb(3,"div",3),P.Nc(4,At,3,2,"ng-container",0),P.Vb(),P.Wb(5,"div",4),P.Nc(6,Kt,3,2,"ng-container",0),P.Vb(),P.Wb(7,"div",5),P.Nc(8,Mt,1,2,"p-multiSelect",6),P.Vb(),P.Wb(9,"div",7),P.Nc(10,Ut,2,2,"button",8),P.Vb(),P.Vb(),P.Vb(),P.Wb(11,"app-storyboard-renderer",9),P.ic("fieldValueChange",(function(e){return P.Gc(i),P.kc().onFieldValueChanged(e)})),P.Vb(),P.Nc(12,Ht,2,5,"p-dialog",10),P.Vb()}if(2&e){var s=P.kc();P.Cb(4),P.rc("ngIf",s.storyboardItem.epicChildren&&s.storyboardItem.epicChildren.length>0||s.storyboardItem.relatedLinks&&s.storyboardItem.relatedLinks.length>0),P.Cb(2),P.rc("ngIf",s.storyboardItem.metadata&&(s.storyboardItem.metadata.backlogCount>0||s.storyboardItem.metadata.noComponentCount>0)),P.Cb(2),P.rc("ngIf",s.statusLookup&&s.statusLookup.length>0),P.Cb(2),P.rc("ngIf",s.storyboardItem.epicChildren&&s.storyboardItem.epicChildren.length>0||s.storyboardItem.relatedLinks&&s.storyboardItem.relatedLinks.length>0),P.Cb(1),P.rc("storyboardItem",s.storyboardItem),P.Cb(1),P.rc("ngIf",s.storyboardItem&&s.storyboardItem.statistics)}}var Bt,qt,Yt,Zt=((Bt=function(){function e(t){_classCallCheck(this,e),this.store$=t,this.selectedStatuses=[],this.statusLookup=[],this.includeRelatedIssues=!1,this.relatedIssuesIncluded=!1,this.includeEpicChildren=!1,this.epicChildrenIncluded=!1,this.showStatistics=!1,this.filterByStatus=function(e,t){return t&&t.length>0?L.filter(e,(function(e){return void 0!==L.find(t,(function(t){return t===e.status}))})):e}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.selectedItem$=this.store$.select((function(e){return e.issue.selectedIssue})).pipe(Object(R.a)((function(e){return e}))).subscribe((function(t){e.storyboardItem=L.pick(t,L.union(j.r,["relatedLinks","epicChildren"])),t.issueType===j.a.Epic?e.includeEpicChildren=!0:e.includeRelatedIssues=!0,e.plotIssuesOnStoryboard()}))}},{key:"ngOnDestroy",value:function(){this.selectedItem$&&this.selectedItem$.unsubscribe()}},{key:"plotIssuesOnStoryboard",value:function(){this.storyboardItem.children=[],this.storyboardItem.metadata=Object(Et.b)();var e=L.map(this.selectedStatuses,"key");if(this.includeEpicChildren&&this.storyboardItem.epicChildren&&this.storyboardItem.epicChildren.length>0){this.epicChildrenIncluded=!0;var t=this.filterByStatus(this.storyboardItem.epicChildren,e);this.storyboardItem.children=L.union(this.storyboardItem.children,t),Object(Et.c)(this.storyboardItem.metadata,Object(Et.a)(t))}if(this.includeRelatedIssues&&this.storyboardItem.relatedLinks&&this.storyboardItem.relatedLinks.length>0){this.relatedIssuesIncluded=!0;var i=this.filterByStatus(this.storyboardItem.relatedLinks,e);this.storyboardItem.children=L.union(this.storyboardItem.children,i),Object(Et.c)(this.storyboardItem.metadata,Object(Et.a)(i))}this.storyboardItem.statistics=Object(Et.d)(this.storyboardItem.metadata,this.storyboardItem.children),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}},{key:"onFieldValueChanged",value:function(e){this.store$.dispatch(new C(e))}},{key:"onSelectedStatusChange",value:function(e){this.plotIssuesOnStoryboard()}}]),e}()).\u0275fac=function(e){return new(e||Bt)(P.Qb(n.h))},Bt.\u0275cmp=P.Kb({type:Bt,selectors:[["app-storyboard"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"pl-3","pt-2","pb-2","pr-2"],[1,"row","small"],[1,"col-md-3","col-lg-2"],[1,"col-md-5","col-lg-7"],[1,"col-md-3","col-lg-2","pt-1"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1","text-right"],["class","btn btn-link pr-0",3,"click",4,"ngIf"],[3,"storyboardItem","fieldValueChange"],["position","right","class","bg-light",3,"header","dismissableMask","modal","visible","visibleChange",4,"ngIf"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"badge","badge-success","ml-1"],["class","mr-4",4,"ngIf"],[1,"mr-4"],[1,"badge","badge-warning"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],[1,"btn","btn-link","pr-0",3,"click"],["size","lg",3,"icon"],["position","right",1,"bg-light",3,"header","dismissableMask","modal","visible","visibleChange"],[3,"statistics"]],template:function(e,t){1&e&&P.Nc(0,Jt,13,6,"div",0),2&e&&P.rc("ngIf",t.storyboardItem)},directives:[s.m,$t.a,ie.a,ie.f,ie.i,Tt.a,F.a,Nt.a,zt.a],encapsulation:2}),Bt),ei=i("snw9"),ti=i("mrSG"),ii=i("eIep"),si=i("JIr8"),ni=i("vkgz"),ci=i("LRne"),ai=i("F2Ol"),ri=i("yVuU"),oi=((qt=function(){function e(t,i,s){var n=this;_classCallCheck(this,e),this.actions$=t,this.jiraService=i,this.cachingService=s,this.loadPrimaryIssue=this.actions$.pipe(Object(ei.d)(r.LoadPrimaryIssue),Object(ii.a)((function(e){return n.getIssueDetails(e.payload).pipe(Object(ne.a)((function(e){return{type:r.LoadPrimaryIssueSuccess,payload:e}})),Object(si.a)((function(){return Object(ci.a)({type:r.LoadPrimaryIssueFailed})})))}))),this.loadPrimaryIssueEpicChildren=this.actions$.pipe(Object(ei.d)(r.LoadPrimaryIssueEpicChildren),Object(ii.a)((function(e){return n.jiraService.loadEpicChildren$(e.payload,0,100,j.l).pipe(Object(ne.a)((function(e){return{type:r.LoadPrimaryIssueEpicChildrenSuccess,payload:e}})),Object(si.a)((function(){return Object(ci.a)({type:r.LoadPrimaryIssueEpicChildrenFailed})})))}))),this.loadPrimaryIssueRelatedLinks=this.actions$.pipe(Object(ei.d)(r.LoadPrimaryIssueRelatedLinks),Object(ii.a)((function(e){return n.jiraService.executeJql("key in (".concat(L.join(e.payload,","),")"),0,100,j.l,"linked-issues.json").pipe(Object(ne.a)((function(e){return{type:r.LoadPrimaryIssueRelatedLinksSuccess,payload:e}})),Object(si.a)((function(){return Object(ci.a)({type:r.LoadPrimaryIssueRelatedLinksFailed})})))}))),this.loadSelectedIssue=this.actions$.pipe(Object(ei.d)(r.LoadSelectedIssue),Object(ii.a)((function(e){return n.getIssueDetails(e.payload).pipe(Object(ne.a)((function(e){return{type:r.LoadSelectedIssueSuccess,payload:e}})),Object(si.a)((function(){return Object(ci.a)({type:r.LoadSelectedIssueFailed})})))}))),this.loadSelectedIssueEpicChildren=this.actions$.pipe(Object(ei.d)(r.LoadSelectedIssueEpicChildren),Object(ii.a)((function(e){return n.jiraService.executeJql("'epic Link'=".concat(e.payload," order by duedate"),0,100,j.l,"epic-children.json").pipe(Object(ne.a)((function(e){return{type:r.LoadSelectedIssueEpicChildrenSuccess,payload:e}})),Object(si.a)((function(){return Object(ci.a)({type:r.LoadSelectedIssueEpicChildrenFailed})})))}))),this.loadSelectedIssueRelatedLinks=this.actions$.pipe(Object(ei.d)(r.LoadSelectedIssueRelatedLinks),Object(ii.a)((function(e){return n.jiraService.executeJql("key in (".concat(L.join(e.payload,","),")  order by duedate"),0,100,j.l,"linked-issues.json").pipe(Object(ne.a)((function(e){return{type:r.LoadSelectedIssueRelatedLinksSuccess,payload:e}})),Object(si.a)((function(){return Object(ci.a)({type:r.LoadSelectedIssueRelatedLinksFailed})})))}))),this.loadSubtasks=this.actions$.pipe(Object(ei.d)(r.LoadSubtasks),Object(ii.a)((function(e){return n.jiraService.executeJql("issuetype in (".concat(e.payload.subTaskIssueTypes,") AND parent=").concat(e.payload.issueKey),0,100,L.map(e.payload.extendedFields,"id"),"test-cases.json").pipe(Object(ne.a)((function(t){return{type:r.LoadSubtasksSuccess,payload:{result:t,extendedFields:e.payload.extendedFields}}})),Object(si.a)((function(){return Object(ci.a)({type:r.LoadSubtasksFailed})})))}))),this.loadProjectConfig=this.actions$.pipe(Object(ei.d)(r.LoadProjectDetails),Object(ii.a)((function(e){return n.jiraService.getProjectDetails(e.payload).pipe(Object(ne.a)((function(e){var t=null;return e&&e.length>0&&((t=e[0]).customFields=L.sortBy(L.map(L.filter(e[1],{custom:!0}),(function(e){return L.pick(e,["id","name"])})),["name"])),{type:r.LoadProjectDetailsSuccess,payload:t}})),Object(si.a)((function(){return Object(ci.a)({type:r.LoadProjectDetailsFailed})})))}))),this.updateFixVersions=this.actions$.pipe(Object(ei.d)(r.UpdateFieldValue),Object(ii.a)((function(e){return n.jiraService.updateFieldValue$(e.payload).pipe(Object(ne.a)((function(){return{type:r.UpdateFieldValueSuccess,payload:e.payload}})),Object(si.a)((function(){return Object(ci.a)({type:r.UpdateFieldValueFailed})})))}))),this.updateOrganizationTitle=this.actions$.pipe(Object(ei.d)(r.UpdateOrganizationTitle),Object(ni.a)((function(e){return n.cachingService.setOrganization(e.payload)})),Object(ii.a)((function(e){return Object(ci.a)({type:r.UpdateOrganizationTitleSuccess,payload:e.payload})})))}return _createClass(e,[{key:"getIssueDetails",value:function(e){var t=this;return this.jiraService.getIssueDetails(e.issue,L.map(e.extendedFields,"id")).pipe(Object(ne.a)((function(i){var s={issue:i,extendedFields:e.extendedFields,organization:t.cachingService.getOrganization(),projectConfig:null};return i&&i.fields&&i.fields.project&&i.fields.project.key&&i.fields.project.key.length>0&&(s.projectConfig=t.cachingService.getProjectDetails(i.fields.project.key)),s})))}}]),e}()).\u0275fac=function(e){return new(e||qt)(P.ec(ei.a),P.ec(ai.b),P.ec(ri.a))},qt.\u0275prov=P.Mb({token:qt,factory:qt.\u0275fac}),Object(ti.b)([Object(ei.b)()],qt.prototype,"loadPrimaryIssue",void 0),Object(ti.b)([Object(ei.b)()],qt.prototype,"loadPrimaryIssueEpicChildren",void 0),Object(ti.b)([Object(ei.b)()],qt.prototype,"loadPrimaryIssueRelatedLinks",void 0),Object(ti.b)([Object(ei.b)()],qt.prototype,"loadSelectedIssue",void 0),Object(ti.b)([Object(ei.b)()],qt.prototype,"loadSelectedIssueEpicChildren",void 0),Object(ti.b)([Object(ei.b)()],qt.prototype,"loadSelectedIssueRelatedLinks",void 0),Object(ti.b)([Object(ei.b)()],qt.prototype,"loadSubtasks",void 0),Object(ti.b)([Object(ei.b)()],qt.prototype,"loadProjectConfig",void 0),Object(ti.b)([Object(ei.b)()],qt.prototype,"updateFixVersions",void 0),Object(ti.b)([Object(ei.b)()],qt.prototype,"updateOrganizationTitle",void 0),qt),li=i("AytR"),ui=i("SYT+"),di=i("LvOF"),bi=i("jhN1"),pi=((Yt=function(){function e(t,i,s,n){_classCallCheck(this,e),this.router=t,this.activatedRoute=i,this.titleService=s,this.store$=n,this.extendedFields=[],this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.reloadOnChange(),this.store$.select((function(e){return e.app.organization})).pipe(Object(R.a)((function(e){return e}))).subscribe((function(t){return e.store$.dispatch(new I(t))}));var t=this.activatedRoute.params.pipe(Object(R.a)((function(e){return e&&e.issue&&e.issue.length>0})),Object(ne.a)((function(e){return e.issue}))),i=this.store$.select((function(e){return e.app.projects}));this.combined$=Object(W.a)(t,i).subscribe((function(t){var i=_slicedToArray(t,2),s=i[0],n=i[1];e.titleService.setTitle("".concat(li.a.appTitle,": ").concat(s)),e.extendedFields=n?Object(di.c)(n):[],e.store$.dispatch(new o({issue:s,extendedFields:e.extendedFields}))})),this.primaryIssue$=this.store$.select((function(e){return e.issue.primaryIssue})).pipe(Object(R.a)((function(e){return e}))).subscribe((function(t){e.primaryIssue=t,e.populateProjectConfig(),e.populateEpicChildren(),e.populateRelatedLinks(),e.buildTree()}))}},{key:"reloadOnChange",value:function(){var e=this;this.currentProject$=this.store$.select((function(e){return e.app.currentProject})).pipe(Object(R.a)((function(){return e.primaryIssue}))).subscribe((function(t){if(e.primaryIssue&&t){var i=L.find(t.standardIssueTypes,{name:e.primaryIssue.issueType});if(i){var s=L.union(i.list,L.filter(t.customFields,{name:"Epic Link"}));t.startdate&&s.push(t.startdate);var n=[];s.forEach((function(t){!L.find(e.extendedFields,{id:t.id})&&n.push(t)})),n.length>0&&(e.extendedFields=L.clone(s),e.store$.dispatch(new o({issue:e.primaryIssue.key,extendedFields:e.extendedFields})))}}})),this.updatedField$=this.store$.select((function(e){return e.issue.updatedField})).pipe(Object(R.a)((function(t){return t&&e.primaryIssue}))).subscribe((function(t){e.store$.dispatch(new o({issue:e.primaryIssue.key,extendedFields:e.extendedFields}))}))}},{key:"ngOnDestroy",value:function(){this.currentProject$&&this.currentProject$.unsubscribe(),this.updatedField$&&this.updatedField$.unsubscribe(),this.combined$&&this.combined$.unsubscribe(),this.primaryIssue$&&this.primaryIssue$.unsubscribe()}},{key:"buildTree",value:function(){if(!0===this.primaryIssue.epicChildrenLoaded&&!0===this.primaryIssue.relatedLinksLoaded&&!0===this.primaryIssue.projectConfigLoaded){var e=Object(j.j)(this.primaryIssue.organization),t=Object(j.k)(this.primaryIssue.projectConfig),i=this.primaryIssue.projectConfig.hierarchy?this.prepareHierarchyNodes():null;t=Object(j.c)(e,t),i=Object(j.c)(t,i),this.primaryIssue.expanded=!0,this.rootNode=Object(j.c)(i,this.primaryIssue),this.store$.dispatch(new d(this.rootNode))}}},{key:"prepareHierarchyNodes",value:function(){var e=this,t={children:[]};if(this.primaryIssue.projectConfig.hierarchy.forEach((function(i){var s=L.find(e.primaryIssue.extendedFields,{id:i.id});s&&s.extendedValue&&s.extendedValue.length>0&&t.children.push(Object(j.i)(s))})),t.children.length>0){var i=t.children[0];return Object(j.f)(t.children,i),i}return null}},{key:"populateEpicChildren",value:function(){this.primaryIssue.issueType===j.a.Epic?this.primaryIssue.epicChildrenLoaded?!L.find(this.primaryIssue.children,{issueType:j.a.EpicChildren})&&this.primaryIssue.epicChildren&&this.primaryIssue.epicChildren.length>0&&(this.primaryIssue.children=this.primaryIssue.children||[],this.primaryIssue.children.unshift(Object(j.h)(this.primaryIssue)),this.primaryIssue.expanded=!0):this.primaryIssue.epicChildrenLoading||this.store$.dispatch(new l(this.primaryIssue.key)):this.primaryIssue.epicChildrenLoaded=!0}},{key:"populateRelatedLinks",value:function(){var e=this;if(this.primaryIssue&&this.primaryIssue.relatedLinks&&this.primaryIssue.relatedLinks.length>0)if(this.primaryIssue.relatedLinksLoaded){if(0===L.filter(this.primaryIssue.children,{issueType:j.a.RelatedLink}).length){var t=Object(j.e)(this.primaryIssue.relatedLinks,this.primaryIssue.key);t&&(this.primaryIssue.children=this.primaryIssue.children||[],t.forEach((function(t){return e.primaryIssue.children.push(t)})))}}else!this.primaryIssue.relatedLinksLoading&&this.primaryIssue.relatedLinks&&this.primaryIssue.relatedLinks.length>0&&this.store$.dispatch(new u(L.map(this.primaryIssue.relatedLinks,"key")));else this.primaryIssue.relatedLinksLoaded=!0}},{key:"populateProjectConfig",value:function(){this.primaryIssue.projectConfigLoaded?this.primaryIssue.projectConfig&&this.store$.dispatch(new ui.n(this.primaryIssue.projectConfig)):this.primaryIssue.project&&this.primaryIssue.project.key&&this.primaryIssue.project.key.length>0&&!this.primaryIssue.projectConfigLoading&&this.store$.dispatch(new p(this.primaryIssue.project.key))}},{key:"nodeContextMenuSelect",value:function(e){console.log(e)}},{key:"dragEnd",value:function(e){this.adjustPaneSize(e.sizes[0])}},{key:"adjustPaneSize",value:function(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}},{key:"toggleFullscreen",value:function(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}]),e}()).\u0275fac=function(e){return new(e||Yt)(P.Qb(E.d),P.Qb(E.a),P.Qb(bi.c),P.Qb(n.h))},Yt.\u0275cmp=P.Kb({type:Yt,selectors:[["app-primary-issue-container"]],decls:2,vars:0,consts:[[1,"main-container"]],template:function(e,t){1&e&&(P.Wb(0,"div",0),P.Rb(1,"router-outlet"),P.Vb())},directives:[E.h],encapsulation:2}),Yt),hi=i("yNBN"),fi=i("L6qz");function gi(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div"),P.Wb(1,"div",6),P.Rb(2,"fa-icon",7),P.Pc(3," Connection details are incomplete. "),P.Vb(),P.Wb(4,"a",8),P.ic("click",(function(){return P.Gc(i),P.kc(2).onShowSetup()})),P.Pc(5," Enter credentials "),P.Rb(6,"fa-icon",9),P.Vb(),P.Vb()}}var yi=function(){return["fab","jira"]},mi=function(){return{mode:"import"}};function vi(e,t){if(1&e){var i=P.Xb();P.Wb(0,"div"),P.Wb(1,"div",10),P.Rb(2,"fa-icon",11),P.Pc(3," Please provide Jira connection details "),P.Vb(),P.Wb(4,"a",12),P.ic("click",(function(){return P.Gc(i),P.kc(2).onShowSetup()})),P.Pc(5," Manual setup "),P.Rb(6,"fa-icon",13),P.Vb(),P.Wb(7,"a",14),P.Rb(8,"fa-icon",15),P.Pc(9," Import config file "),P.Vb(),P.Vb()}2&e&&(P.Cb(2),P.rc("icon",P.uc(2,yi)),P.Cb(5),P.rc("queryParams",P.uc(3,mi)))}function ki(e,t){if(1&e&&(P.Wb(0,"div",2),P.Wb(1,"div",3),P.Nc(2,gi,7,0,"div",1),P.Nc(3,vi,10,4,"div",1),P.Vb(),P.Wb(4,"div",4),P.Wb(5,"ol"),P.Wb(6,"li"),P.Pc(7,"Setup the jira connection details"),P.Vb(),P.Wb(8,"li"),P.Pc(9,"Enter the Jira issue key"),P.Vb(),P.Wb(10,"li"),P.Pc(11,"Track purpose of issue"),P.Vb(),P.Vb(),P.Rb(12,"app-help-link",5),P.Vb(),P.Vb()),2&e){var i=P.kc();P.Cb(2),P.rc("ngIf",i.connectionDetails&&i.connectionDetails.serverUrl&&!i.connectionDetails.verified),P.Cb(1),P.rc("ngIf",!i.connectionDetails||!i.connectionDetails.serverUrl)}}function Ii(e,t){1&e&&(P.Wb(0,"div"),P.Rb(1,"router-outlet"),P.Vb())}var Ci,ji,Oi,Li=((Oi=function(){function e(t,i){_classCallCheck(this,e),this.messageService=t,this.store$=i,this.isOnlineMode=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.store$.select((function(e){return e.app.mode})).subscribe((function(t){return e.isOnlineMode=t&&t===ui.e.Online})),this.connectionDetailsSubscription=this.store$.select((function(e){return e.app.connectionDetails})).subscribe((function(t){return e.connectionDetails=t}))}},{key:"ngOnDestroy",value:function(){this.connectionDetailsSubscription&&this.connectionDetailsSubscription.unsubscribe()}},{key:"onShowSetup",value:function(){this.store$.dispatch(new ui.k(!0))}}]),e}()).\u0275fac=function(e){return new(e||Oi)(P.Qb(T.c),P.Qb(n.h))},Oi.\u0275cmp=P.Kb({type:Oi,selectors:[["app-issue-home"]],decls:2,vars:2,consts:[["class","center-text custom-shadow p-3 bg-light",4,"ngIf"],[4,"ngIf"],[1,"center-text","custom-shadow","p-3","bg-light"],[1,"alert","bg-white"],[1,"text-left"],["tag","setup",1,"float-right"],[1,"mb-2"],["icon","exclamation-triangle",1,"text-warning"],[1,"btn","btn-sm","btn-primary","text-white","mt-2",3,"click"],["icon","chevron-right"],[1,"mb-3","alert-warning","p-2","rounded"],[1,"text-primary",3,"icon"],[1,"btn","btn-primary","btn-sm","text-white","mr-2",3,"click"],["icon","angle-right"],["routerLink","../configurations",1,"btn","btn-light","border","btn-sm",3,"queryParams"],["icon","file-import",1,"text-muted"]],template:function(e,t){1&e&&(P.Nc(0,ki,13,2,"div",0),P.Nc(1,Ii,2,0,"div",1)),2&e&&(P.rc("ngIf",!(t.connectionDetails&&t.connectionDetails.verified)&&t.isOnlineMode),P.Cb(1),P.rc("ngIf",t.connectionDetails&&t.connectionDetails.verified||!1===t.isOnlineMode))},directives:[s.m,fi.a,F.a,E.f,E.h],encapsulation:2}),Oi),Vi=((ji=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||ji)},ji.\u0275cmp=P.Kb({type:ji,selectors:[["app-issue-not-entered"]],decls:9,vars:0,consts:[[1,"center-text"],[1,"custom-shadow","p-4","rounded"],[1,"mt-3","mb-2"],[1,"text-right","small"],["routerLink","/search/list",1,"btn","btn-sm","btn-link"],["icon","angle-right"]],template:function(e,t){1&e&&(P.Wb(0,"div",0),P.Wb(1,"div",1),P.Pc(2," Proceed by entering Jira issue key "),P.Wb(3,"div",2),P.Rb(4,"app-issue-entry"),P.Vb(),P.Vb(),P.Wb(5,"div",3),P.Wb(6,"a",4),P.Pc(7," Instead go to query builder "),P.Rb(8,"fa-icon",5),P.Vb(),P.Vb(),P.Vb())},directives:[ke,E.f,F.a],encapsulation:2}),ji),Si=((Ci=function(){function e(t,i){var s=this;_classCallCheck(this,e),this.router=t,this.activatedRoute=i,this.router.events.subscribe((function(e){e instanceof E.b&&s.autoRedirect()}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.autoRedirect()}},{key:"autoRedirect",value:function(){0===this.activatedRoute.children.length&&this.router.navigate([this.activatedRoute.parent.snapshot.params.issue],{relativeTo:this.activatedRoute})}}]),e}()).\u0275fac=function(e){return new(e||Ci)(P.Qb(E.d),P.Qb(E.a))},Ci.\u0275cmp=P.Kb({type:Ci,selectors:[["app-selected-issue-home"]],decls:1,vars:0,template:function(e,t){1&e&&P.Rb(0,"router-outlet")},directives:[E.h],encapsulation:2}),Ci),wi=i("5fYs");function Pi(e,t){if(1&e&&P.Rb(0,"app-timeline-renderer",3),2&e){var i=P.kc();P.rc("timeline",i.timeline)("contentHeight",i.contentHeight)}}var Wi,Ri=((Wi=function(e){function t(e,i){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,i))).cdRef=e,s.store$=i,s}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this;this.init(92),this.selectedIssue$=this.store$.select((function(e){return e.issue.selectedIssue})).pipe(Object(R.a)((function(e){return e}))).subscribe((function(t){t.projectConfig&&t.projectConfig.startdate&&!L.find(j.r,t.projectConfig.startdate.id)&&j.r.push(t.projectConfig.startdate.id),e.selectedIssue=L.pick(t,L.union(j.r,["children"])),e.store$.dispatch(new v(e.selectedIssue.children))})),this.timeline$=this.store$.select((function(e){return e.issue.timelineView})).pipe(Object(R.a)((function(e){return e}))).subscribe((function(t){return e.timeline=t}))}},{key:"ngOnDestroy",value:function(){this.destroy(),this.selectedIssue$&&this.selectedIssue$.unsubscribe(),this.timeline$&&this.timeline$.unsubscribe()}},{key:"ngAfterViewInit",value:function(){this.afterViewInit()}}]),t}(ae)).\u0275fac=function(e){return new(e||Wi)(P.Qb(P.h),P.Qb(n.h))},Wi.\u0275cmp=P.Kb({type:Wi,selectors:[["app-timeline"]],features:[P.zb],decls:3,vars:1,consts:[[1,"selectedIssue"],["content",""],[3,"timeline","contentHeight",4,"ngIf"],[3,"timeline","contentHeight"]],template:function(e,t){1&e&&(P.Wb(0,"div",0,1),P.Nc(2,Pi,1,2,"app-timeline-renderer",2),P.Vb()),2&e&&(P.Cb(2),P.rc("ngIf",t.timeline))},directives:[s.m,wi.a],encapsulation:2}),Wi),xi=i("EVgl");i.d(t,"IssueModule",(function(){return $i}));var Fi,Ei=[{path:"",component:Li,children:[{path:":issue",component:pi,children:[{path:"purpose",component:Si,children:[{path:":selected",component:Re,children:[{path:"details",component:ee},{path:"workbench",component:Ft},{path:"storyboard",component:Zt},{path:"timeline",component:Ri},{path:"",redirectTo:"details",pathMatch:"full"}]}]},{path:"",redirectTo:"purpose",pathMatch:"full"}]},{path:"",component:Vi}]}],$i=((Fi=function e(){_classCallCheck(this,e)}).\u0275mod=P.Ob({type:Fi}),Fi.\u0275inj=P.Nb({factory:function(e){return new(e||Fi)},imports:[[s.c,E.g,ie.c,X.b,$.b,xi.c,hi.a,Nt.b,se.b,Tt.b,be.g,be.c,be.n,be.u,F.c,x.a,te.a,n.j.forFeature("issue",V,{initialState:c}),ei.c.forFeature([oi]),E.g.forChild(Ei)]]}),Fi)}}]);