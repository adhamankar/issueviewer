function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],s=!0,n=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(s=(r=c.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(o){n=!0,a=o}finally{try{s||null==c.return||c.return()}finally{if(n)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(e,t,i){"use strict";i.r(t);var s=i("ofXK"),n=i("kt0X"),a=i("l2bN"),r=i("6NWb"),c=i("tyNb"),o=i("sITn"),l=i("3Pt+"),u=i("jLSX"),b=i("EVgl"),d=i("LPYB"),h=(i("hSFZ"),i("/RsI")),p={queryContext:null,issuelist:null,timelineView:null,savedSearchlist:null},f=i("LvDl"),g=i("j9Al"),m={SetQueryContext:Object(g.b)("[SetQueryContext]"),LoadSearchResults:Object(g.b)("[LoadSearchResults]"),LoadSearchResultsFailed:Object(g.b)("[LoadSearchResults] Failed"),LoadSearchResultsSuccess:Object(g.b)("[LoadSearchResults] Success"),LoadSavedSearchlist:Object(g.b)("[LoadSavedSearchlist]"),LoadSavedSearchlistFailed:Object(g.b)("[LoadSavedSearchlist] Failed"),LoadSavedSearchlistSuccess:Object(g.b)("[LoadSavedSearchlist] Success"),PopulateSearchResultTimelineView:Object(g.b)("[PopulateSearchResultTimelineView]"),LoadSearchResultTimelineNode:Object(g.b)("[LoadSearchResultTimelineNode]"),LoadSearchResultTimelineNodeFailed:Object(g.b)("[LoadSearchResultTimelineNode] Failed"),LoadSearchResultTimelineNodeSuccess:Object(g.b)("[LoadSearchResultTimelineNode] Success")},y=function e(t){_classCallCheck(this,e),this.payload=t,this.type=m.PopulateSearchResultTimelineView},v=function e(t){_classCallCheck(this,e),this.payload=t,this.type=m.LoadSearchResultTimelineNode},S=function e(t){_classCallCheck(this,e),this.payload=t,this.type=m.LoadSearchResults},C=function e(t){_classCallCheck(this,e),this.payload=t,this.type=m.LoadSavedSearchlist},k=i("iPf6"),O=i("krUz"),j=i("uAqM");function V(e,t){switch(t.type){case m.SetQueryContext:return Object.assign(Object.assign({},e),{queryContext:t.payload});case m.LoadSearchResults:return Object.assign(Object.assign({},e),{issuelist:[]});case m.LoadSearchResultsSuccess:return Object.assign(Object.assign({},e),{issuelist:t.payload});case m.LoadSavedSearchlist:return Object.assign(Object.assign({},e),{savedSearchlist:[]});case m.LoadSavedSearchlistSuccess:var i=f.map(t.payload,(function(e){return f.pick(e,["id","name","jql"])}));return Object.assign(Object.assign({},e),{savedSearchlist:i});case m.PopulateSearchResultTimelineView:var s=t.payload.startdateField,n=t.payload.results,a=k.a(n,s),r=k.b(n,a.timespan,s,!0);return Object.assign(Object.assign({},e),{timelineView:{metadata:a,records:r}});case m.LoadSearchResultTimelineNodeSuccess:var c=t.payload.issueKey,o=t.payload.payload&&t.payload.payload.issues?f.map(t.payload.payload.issues,(function(e){return Object(O.r)(e)})):[],l=k.b(o,e.timelineView.metadata.timespan,"created",!1);return Object.assign(Object.assign({},e),{timelineView:Object.assign(Object.assign({},e.timelineView),{records:e.timelineView.records.map((function(e){return e&&e.data&&e.data.key===c?Object.assign(Object.assign({},e),{children:l,data:Object.assign(Object.assign({},e.data),{isHeading:l&&l.length>0,statistics:Object(j.d)(Object(j.a)(o,"components"),o,e.data.label,"components")})}):e}))})});default:return e}}var w=i("1kSV"),x=i("itXk"),I=i("pLZG"),L=i("lJxs"),W=i("SYT+"),R=i("fXoL"),q=function(){return["/search/list"]},F=function(e){return{query:e}};function $(e,t){if(1&e&&(R.Wb(0,"div",9),R.Wb(1,"a",10),R.Oc(2),R.Vb(),R.Vb()),2&e){var i=t.$implicit;R.Cb(1),R.qc("routerLink",R.tc(3,q))("queryParams",R.uc(4,F,i.jql)),R.Cb(1),R.Qc(" ",i.name," ")}}function T(e,t){if(1&e&&(R.Wb(0,"div",7),R.Mc(1,$,3,6,"div",8),R.Vb()),2&e){var i=R.kc();R.Cb(1),R.qc("ngForOf",i.searchlist)}}var M,P=((M=function(){function e(t){_classCallCheck(this,e),this.store$=t,this.close=new R.n}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchlist$=this.store$.select((function(e){return e.search.savedSearchlist})).pipe(Object(I.a)((function(e){return e}))).subscribe((function(t){return e.searchlist=t})),this.store$.dispatch(new C(null))}},{key:"ngOnDestroy",value:function(){}},{key:"onClose",value:function(){this.close.emit(null)}}]),e}()).\u0275fac=function(e){return new(e||M)(R.Qb(n.h))},M.\u0275cmp=R.Kb({type:M,selectors:[["app-favourite-searches"]],outputs:{close:"close"},decls:10,vars:1,consts:[[1,"pane"],[1,"pane-header"],[1,"pane-body","pl-4","pr-4"],["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"pane-footer","text-right"],[1,"btn","btn-default","btn-sm",3,"click"],["icon","times",1,"mr-1"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted","text-nowrap",3,"routerLink","queryParams"]],template:function(e,t){1&e&&(R.Wb(0,"div",0),R.Wb(1,"div",1),R.Wb(2,"h4"),R.Oc(3,"Favorite"),R.Vb(),R.Vb(),R.Wb(4,"div",2),R.Mc(5,T,2,1,"div",3),R.Vb(),R.Wb(6,"div",4),R.Wb(7,"button",5),R.ic("click",(function(){return t.onClose()})),R.Rb(8,"fa-icon",6),R.Oc(9," Close "),R.Vb(),R.Vb(),R.Vb()),2&e&&(R.Cb(5),R.qc("ngIf",t.searchlist))},directives:[s.m,r.a,s.l,c.f],encapsulation:2}),M);function _(e,t){if(1&e){var i=R.Xb();R.Wb(0,"div",13),R.Wb(1,"ngb-pagination",14),R.ic("pageChange",(function(e){return R.Fc(i),R.kc().currentPageIndex=e}))("pageChange",(function(){return R.Fc(i),R.kc().onPageChange()})),R.Vb(),R.Vb()}if(2&e){var s=R.kc();R.Cb(1),R.qc("maxSize",3)("page",s.currentPageIndex)("boundaryLinks",!0)("pageSize",s.issuelist.pageSize)("collectionSize",s.issuelist.total)}}function N(e,t){if(1&e&&(R.Wb(0,"div",15),R.Oc(1),R.Wb(2,"b"),R.Oc(3),R.Vb(),R.Vb()),2&e){var i=R.kc();R.Cb(1),R.Rc(" ",i.issuelist.startAt+1," - ",i.issuelist.endAt," / "),R.Cb(2),R.Pc(i.issuelist.total)}}function A(e,t){1&e&&(R.Wb(0,"div",16),R.Wb(1,"a",17),R.Rb(2,"fa-icon",18),R.Oc(3," List "),R.Vb(),R.Wb(4,"a",19),R.Rb(5,"fa-icon",20),R.Oc(6," Storyboard "),R.Vb(),R.Wb(7,"a",21),R.Rb(8,"fa-icon",22),R.Wb(9,"span",23),R.Oc(10,"Timeline"),R.Vb(),R.Vb(),R.Vb()),2&e&&(R.Cb(2),R.qc("fixedWidth",!0),R.Cb(2),R.qc("routerLinkActive","active"),R.Cb(1),R.qc("fixedWidth",!0),R.Cb(2),R.qc("routerLinkActive","active"))}function Q(e,t){1&e&&(R.Wb(0,"h4",24),R.Rb(1,"fa-icon",25),R.Oc(2," No Records found. "),R.Vb())}var E,z=((E=function(){function e(t,i,s){var n=this;_classCallCheck(this,e),this.router=t,this.activatedRoute=i,this.store$=s,this.selectedTab=1,this.currentPageIndex=1,this.showSavedSearches=!1,this.canNavigate=function(){return n.issuelist&&n.issuelist.trim().length>0},this.canExecuteQuery=function(){return n.query&&n.query.trim().length>0}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.store$.dispatch(new W.m(!0));var t=this.activatedRoute.queryParams.pipe(Object(I.a)((function(e){return e&&e.query&&e.query.length>0})),Object(L.a)((function(e){return e.query}))),i=this.store$.select((function(e){return e.app.allExtendedFields}));this.combined$=Object(x.a)(t,i).subscribe((function(t){var i=_slicedToArray(t,2),s=i[0],n=i[1];e.query=s,e.allExtendedFields=n,e.executeQuery()})),this.issuelist$=this.store$.select((function(e){return e.search.issuelist})).pipe(Object(I.a)((function(e){return e}))).subscribe((function(t){return e.issuelist=t}))}},{key:"ngOnDestroy",value:function(){this.combined$&&this.combined$.unsubscribe()}},{key:"parseQueryContext",value:function(e,t){if(e)return e.issueType!==O.a.Organization&&t.push({key:e.issueType,value:e.key}),e.parent?this.parseQueryContext(e.parent,t):null}},{key:"navigateTo",value:function(e){this.canNavigate()&&this.router.navigate(["/browse",e.trim()])}},{key:"executeQuery",value:function(){this.canExecuteQuery()&&(this.showSavedSearches=!1,this.store$.dispatch(new S({query:this.query,allExtendedFields:this.allExtendedFields,currentPageIndex:this.currentPageIndex})))}},{key:"onPageChange",value:function(){this.executeQuery()}}]),e}()).\u0275fac=function(e){return new(e||E)(R.Qb(c.d),R.Qb(c.a),R.Qb(n.h))},E.\u0275cmp=R.Kb({type:E,selectors:[["app-result-container"]],decls:14,vars:6,consts:[[1,"main-container"],[1,"bg-light","pb-1","border-bottom"],["class","float-right mb-0 mt-1 mr-3",4,"ngIf"],["class","float-right small mt-2 mr-3",4,"ngIf"],[1,"clearfix"],["title","Show/hide saved searches",1,"btn","btn-link","mr-1",3,"click"],["icon","bars",3,"fixedWidth"],["class","btn-group btn-group-sm mr-2",4,"ngIf"],[1,"body-container"],[1,"w-100"],["class","center-text font-weight-light p-3",4,"ngIf"],["styleClass","ui-sidebar-sm","position","left",3,"visible","visibleChange","onHide"],[3,"close"],[1,"float-right","mb-0","mt-1","mr-3"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"],[1,"float-right","small","mt-2","mr-3"],[1,"btn-group","btn-group-sm","mr-2"],["routerLink","list","routerLinkActive","active","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap"],["icon","list",3,"fixedWidth"],["routerLink","storyboard","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map",3,"fixedWidth"],["routerLink","timeline","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map-signs","size","sm"],[1,"ml-1"],[1,"center-text","font-weight-light","p-3"],["icon","exclamation-triangle","size","xs",1,"mr-2","text-muted"]],template:function(e,t){1&e&&(R.Wb(0,"div",0),R.Wb(1,"div",1),R.Mc(2,_,2,5,"div",2),R.Mc(3,N,4,3,"div",3),R.Wb(4,"div",4),R.Wb(5,"button",5),R.ic("click",(function(){return t.showSavedSearches=!t.showSavedSearches})),R.Rb(6,"fa-icon",6),R.Vb(),R.Mc(7,A,11,4,"div",7),R.Vb(),R.Vb(),R.Wb(8,"div",8),R.Wb(9,"div",9),R.Rb(10,"router-outlet"),R.Mc(11,Q,3,0,"h4",10),R.Vb(),R.Vb(),R.Vb(),R.Wb(12,"p-sidebar",11),R.ic("visibleChange",(function(e){return t.showSavedSearches=e}))("onHide",(function(){return t.showSavedSearches=!1})),R.Wb(13,"app-favourite-searches",12),R.ic("close",(function(){return t.showSavedSearches=!1})),R.Vb(),R.Vb()),2&e&&(R.Cb(2),R.qc("ngIf",t.issuelist&&t.issuelist.total>t.issuelist.pageSize),R.Cb(1),R.qc("ngIf",t.issuelist&&t.issuelist.total),R.Cb(3),R.qc("fixedWidth",!0),R.Cb(1),R.qc("ngIf",t.issuelist&&t.issuelist.results&&t.issuelist.results.length>1),R.Cb(4),R.qc("ngIf",t.issuelist&&0===t.issuelist.total),R.Cb(1),R.qc("visible",t.showSavedSearches))},directives:[s.m,r.a,c.h,u.a,P,w.q,c.f,c.e],encapsulation:2}),E),B=i("AQDj"),D=i("qUTn"),H=function(e){return{"issue-resolved":e}},X=function(e,t){return["/browse",e,"purpose",t]};function K(e,t){if(1&e){var i=R.Xb();R.Wb(0,"tr"),R.Wb(1,"td"),R.Rb(2,"i",9),R.Vb(),R.Wb(3,"td"),R.Wb(4,"a",10),R.Oc(5),R.Vb(),R.Vb(),R.Wb(6,"td",11),R.Oc(7),R.Vb(),R.Wb(8,"td",11),R.Oc(9),R.lc(10,"date"),R.Vb(),R.Wb(11,"td",11),R.Oc(12),R.Vb(),R.Wb(13,"td"),R.Wb(14,"a",12),R.ic("click",(function(){R.Fc(i);var e=t.index;return R.kc(2).openIssueAtIndex(e)})),R.Rb(15,"fa-icon",13),R.Vb(),R.Vb(),R.Wb(16,"td"),R.Rb(17,"app-issue-navigation-menu",14),R.Vb(),R.Vb()}if(2&e){var s=t.$implicit;R.Cb(2),R.Fb("",s.icon," text-muted"),R.qc("title",s.issueType),R.Cb(2),R.qc("ngClass",R.uc(15,H,s.resolution))("routerLink",R.vc(17,X,s.key,s.key)),R.Cb(1),R.Qc(" ",s.key," "),R.Cb(2),R.Pc(s.title),R.Cb(2),R.Pc(R.nc(10,12,s.duedate,"MMM dd, yyyy")),R.Cb(3),R.Pc(s.status),R.Cb(2),R.qc("ngClass",R.uc(20,H,s.resolution)),R.Cb(3),R.qc("issueKey",s.key)}}function G(e,t){if(1&e&&(R.Wb(0,"table",3),R.Wb(1,"thead"),R.Wb(2,"tr",4),R.Wb(3,"th",5),R.Oc(4,"\xa0"),R.Vb(),R.Wb(5,"th",6),R.Oc(6,"Key"),R.Vb(),R.Wb(7,"th"),R.Oc(8,"Summary"),R.Vb(),R.Wb(9,"th",7),R.Oc(10,"Duedate"),R.Vb(),R.Wb(11,"th",6),R.Oc(12,"Status"),R.Vb(),R.Wb(13,"th",5),R.Oc(14,"\xa0"),R.Vb(),R.Wb(15,"td",5),R.Oc(16,"\xa0"),R.Vb(),R.Vb(),R.Vb(),R.Mc(17,K,18,22,"tr",8),R.Vb()),2&e){var i=R.kc();R.Cb(17),R.qc("ngForOf",i.issuelist.results)}}function J(e,t){if(1&e){var i=R.Xb();R.Wb(0,"app-issue-details",15),R.ic("close",(function(){return R.Fc(i),R.kc().issueDetailsVisible=!1})),R.Vb()}if(2&e){var s=R.kc();R.qc("list",s.issuelist.results)("currentIndex",s.currentIndex)}}var Y,U=((Y=function(){function e(t,i,s){var n=this;_classCallCheck(this,e),this.router=t,this.activatedRoute=i,this.store$=s,this.currentPageIndex=1,this.canNavigate=function(){return n.issuelist&&n.issuelist.trim().length>0},this.issueDetailsVisible=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.issuelist$=this.store$.select((function(e){return e.search.issuelist})).pipe(Object(I.a)((function(e){return e}))).subscribe((function(t){return e.issuelist=t}))}},{key:"ngOnDestroy",value:function(){}},{key:"navigateTo",value:function(e){this.canNavigate()&&this.router.navigate(["/browse",e.trim()])}},{key:"printExtendedValue",value:function(e){return console.log(Date.parse(e)),e?isNaN(Date.parse(e))?e:new Date(e).toDateString():""}},{key:"openIssueAtIndex",value:function(e){this.issueDetailsVisible=!0,this.currentIndex=e}}]),e}()).\u0275fac=function(e){return new(e||Y)(R.Qb(c.d),R.Qb(c.a),R.Qb(n.h))},Y.\u0275cmp=R.Kb({type:Y,selectors:[["app-search-listview"]],decls:3,vars:5,consts:[["class","table table-striped table-sm issuelist small",4,"ngIf"],["styleClass","bg-light",3,"visible","fullScreen","showCloseIcon","visibleChange"],[3,"list","currentIndex","close",4,"ngIf"],[1,"table","table-striped","table-sm","issuelist","small"],[2,"background-color","#eee"],["width","1%"],["width","5%"],["width","10%"],[4,"ngFor","ngForOf"],[3,"title"],[1,"text-primary","text-nowrap",3,"ngClass","routerLink"],[1,"text-truncate"],[1,"text-primary","text-nowrap","ml-2",3,"ngClass","click"],["icon","external-link-alt","size","sm"],[1,"mr-2",3,"issueKey"],[3,"list","currentIndex","close"]],template:function(e,t){1&e&&(R.Mc(0,G,18,1,"table",0),R.Wb(1,"p-sidebar",1),R.ic("visibleChange",(function(e){return t.issueDetailsVisible=e})),R.Mc(2,J,1,2,"app-issue-details",2),R.Vb()),2&e&&(R.qc("ngIf",t.issuelist&&t.issuelist.total>0),R.Cb(1),R.qc("visible",t.issueDetailsVisible)("fullScreen",!0)("showCloseIcon",!1),R.Cb(1),R.qc("ngIf",t.issuelist))},directives:[s.m,u.a,s.l,c.f,s.k,r.a,B.a,D.a],pipes:[s.e],encapsulation:2}),Y),Z=i("Ewkv"),ee=i("lVkt"),te=i("NGyg"),ie=function(){return["far","chart-bar"]};function se(e,t){if(1&e){var i=R.Xb();R.Wb(0,"button",11),R.ic("click",(function(){return R.Fc(i),R.kc(2).showStatistics=!0})),R.Rb(1,"fa-icon",12),R.Vb()}2&e&&(R.Cb(1),R.qc("icon",R.tc(1,ie)))}function ne(e,t){if(1&e){var i=R.Xb();R.Wb(0,"p-multiSelect",13),R.ic("ngModelChange",(function(e){return R.Fc(i),R.kc(2).selectedStatuses=e}))("onChange",(function(){return R.Fc(i),R.kc(2).onSelectedStatusChange()})),R.Vb()}if(2&e){var s=R.kc(2);R.qc("options",s.statusLookup)("ngModel",s.selectedStatuses)}}function ae(e,t){if(1&e){var i=R.Xb();R.Wb(0,"p-dialog",14),R.ic("visibleChange",(function(e){return R.Fc(i),R.kc(2).showStatistics=e})),R.Rb(1,"app-statistics",15),R.Vb()}if(2&e){var s=R.kc(2);R.qc("header",s.storyboardItem.statistics.title)("dismissableMask",!0)("modal",!0)("visible",s.showStatistics),R.Cb(1),R.qc("groupByColumn",s.groupByColumn)("statistics",s.storyboardItem.statistics)}}function re(e,t){if(1&e){var i=R.Xb();R.Wb(0,"div"),R.Mc(1,se,2,2,"button",1),R.Wb(2,"div",2),R.Wb(3,"div",3),R.Wb(4,"select",4),R.ic("ngModelChange",(function(e){return R.Fc(i),R.kc().groupByColumn=e}))("change",(function(){return R.Fc(i),R.kc().onGroupByColumnChanged()})),R.Wb(5,"option",5),R.Oc(6,"Components"),R.Vb(),R.Wb(7,"option",6),R.Oc(8,"Labels"),R.Vb(),R.Vb(),R.Vb(),R.Wb(9,"div",7),R.Mc(10,ne,1,2,"p-multiSelect",8),R.Vb(),R.Vb(),R.Rb(11,"app-storyboard-renderer",9),R.Mc(12,ae,2,6,"p-dialog",10),R.Vb()}if(2&e){var s=R.kc();R.Cb(1),R.qc("ngIf",s.storyboardItem.statistics),R.Cb(3),R.qc("ngModel",s.groupByColumn),R.Cb(6),R.qc("ngIf",s.statusLookup&&s.statusLookup.length>0),R.Cb(1),R.qc("groupByColumn",s.groupByColumn)("storyboardItem",s.storyboardItem),R.Cb(1),R.qc("ngIf",s.storyboardItem.statistics)}}var ce,oe,le=((ce=function(){function e(t,i){_classCallCheck(this,e),this.activatedRoute=t,this.store$=i,this.selectedStatuses=[],this.statusLookup=[],this.showStatistics=!1,this.groupByColumn="components",this.filterByStatus=function(e,t){return t&&t.length>0?f.filter(e,(function(e){return void 0!==f.find(t,(function(t){return t===e.status}))})):e}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select((function(e){return e.search.issuelist})).pipe(Object(I.a)((function(e){return e}))).subscribe((function(t){e.issuelist=t,e.plotStoryboard()}))}},{key:"ngOnDestroy",value:function(){this.issuelist$&&this.issuelist$.unsubscribe()}},{key:"onGroupByColumnChanged",value:function(){this.plotStoryboard()}},{key:"plotStoryboard",value:function(){var e=f.map(this.selectedStatuses,"key");this.storyboardItem.metadata=Object(j.b)(this.groupByColumn),this.storyboardItem.children=this.filterByStatus(this.issuelist.results,e),Object(j.c)(this.storyboardItem.metadata,Object(j.a)(this.storyboardItem.children,this.groupByColumn),this.groupByColumn),this.storyboardItem.statistics=Object(j.d)(this.storyboardItem.metadata,this.storyboardItem.children,"Statistics",this.groupByColumn),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}},{key:"onSelectedStatusChange",value:function(){this.plotStoryboard()}}]),e}()).\u0275fac=function(e){return new(e||ce)(R.Qb(c.a),R.Qb(n.h))},ce.\u0275cmp=R.Kb({type:ce,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],["class","btn btn-link float-right",3,"click",4,"ngIf"],[1,"row","mt-1"],[1,"col-md-2"],[1,"form-control","form-control-sm",2,"width","150px",3,"ngModel","ngModelChange","change"],["value","components"],["value","labels"],[1,"offset-md-8","col-md-2","text-right"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[3,"groupByColumn","storyboardItem"],["position","topright","class","bg-light",3,"header","dismissableMask","modal","visible","visibleChange",4,"ngIf"],[1,"btn","btn-link","float-right",3,"click"],["size","lg",3,"icon"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],["position","topright",1,"bg-light",3,"header","dismissableMask","modal","visible","visibleChange"],[3,"groupByColumn","statistics"]],template:function(e,t){1&e&&R.Mc(0,re,13,6,"div",0),2&e&&R.qc("ngIf",t.storyboardItem&&t.storyboardItem.children)},directives:[s.m,l.k,l.f,l.i,l.j,l.l,Z.a,r.a,ee.a,h.a,te.a],encapsulation:2}),ce),ue=i("cdP3"),be=i("snw9"),de=i("mrSG"),he=i("eIep"),pe=i("JIr8"),fe=i("LRne"),ge=i("F2Ol"),me=((oe=function e(t,i){var s=this;_classCallCheck(this,e),this.actions$=t,this.jiraService=i,this.loadSearchlist=this.actions$.pipe(Object(be.d)(m.LoadSearchResults),Object(he.a)((function(e){var t=e.payload.allExtendedFields&&e.payload.allExtendedFields.length>0?f.map(e.payload.allExtendedFields,"id"):[];return s.jiraService.executeJql(e.payload.query,e.payload.currentPageIndex-1,50,f.union(O.t,t),"issuelist.json").pipe(Object(L.a)((function(t){return{total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,extendedFields:e.payload.allExtendedFields,results:f.map(t.issues,(function(t){return Object(O.s)(t,e.payload.allExtendedFields)}))}}))).pipe(Object(L.a)((function(e){return{type:m.LoadSearchResultsSuccess,payload:e}})),Object(pe.a)((function(){return Object(fe.a)({type:m.LoadSearchResultsFailed})})))}))),this.loadSaveSearchlist=this.actions$.pipe(Object(be.d)(m.LoadSavedSearchlist),Object(he.a)((function(){return s.jiraService.favouriteSearches("favourite-search.json").pipe(Object(L.a)((function(e){return{type:m.LoadSavedSearchlistSuccess,payload:e}})),Object(pe.a)((function(){return Object(fe.a)({type:m.LoadSavedSearchlistFailed})})))}))),this.loadSearchResultTimelineNode=this.actions$.pipe(Object(be.d)(m.LoadSearchResultTimelineNode),Object(he.a)((function(e){return s.jiraService.loadEpicChildren$(e.payload).pipe(Object(L.a)((function(t){return{type:m.LoadSearchResultTimelineNodeSuccess,payload:{issueKey:e.payload,payload:t}}})),Object(pe.a)((function(){return Object(fe.a)({type:m.LoadSearchResultTimelineNodeFailed})})))})))}).\u0275fac=function(e){return new(e||oe)(R.ec(be.a),R.ec(ge.b))},oe.\u0275prov=R.Mb({token:oe,factory:oe.\u0275fac}),Object(de.b)([Object(be.b)()],oe.prototype,"loadSearchlist",void 0),Object(de.b)([Object(be.b)()],oe.prototype,"loadSaveSearchlist",void 0),Object(de.b)([Object(be.b)()],oe.prototype,"loadSearchResultTimelineNode",void 0),oe),ye=i("5fYs"),ve=["content"];function Se(e,t){if(1&e){var i=R.Xb();R.Wb(0,"app-timeline-renderer",3),R.ic("nodeExpand",(function(e){return R.Fc(i),R.kc().onNodeExpand(e)})),R.Vb()}if(2&e){var s=R.kc();R.qc("timeline",s.timeline)("contentHeight",s.contentHeight)}}var Ce,ke=((Ce=function(){function e(t,i,s){_classCallCheck(this,e),this.cdRef=t,this.activatedRoute=i,this.store$=s,this.containerSize=80,this.contentHeight=0,this.startdateField="created"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.store$.select((function(e){return e.search.issuelist})).pipe(Object(I.a)((function(e){return e&&e.results})),Object(L.a)((function(e){return e.results}))),i=this.store$.select((function(e){return e.app.projects}));this.combined$=Object(x.a)(t,i).subscribe((function(t){var i=_slicedToArray(t,2),s=i[0],n=i[1];if(console.log("projects",n),n){var a=f.head(n);e.startdateField=a&&a.startdate?a.startdate.id:"created"}e.store$.dispatch(new y({results:s,startdateField:e.startdateField}))})),this.timeline$=this.store$.select((function(e){return e.search.timelineView})).pipe(Object(I.a)((function(e){return e}))).subscribe((function(t){return e.timeline=t}))}},{key:"ngOnDestroy",value:function(){this.combined$&&this.combined$.unsubscribe(),this.timeline$&&this.timeline$.unsubscribe()}},{key:"ngAfterViewInit",value:function(){this.onResize()}},{key:"onResize",value:function(){this.elementView&&(this.contentHeight=this.elementView.nativeElement.offsetParent.clientHeight-this.containerSize,this.cdRef.detectChanges())}},{key:"onNodeExpand",value:function(e){this.store$.dispatch(new v(e))}}]),e}()).\u0275fac=function(e){return new(e||Ce)(R.Qb(R.h),R.Qb(c.a),R.Qb(n.h))},Ce.\u0275cmp=R.Kb({type:Ce,selectors:[["app-timeline-view"]],viewQuery:function(e,t){var i;1&e&&R.Sc(ve,!0),2&e&&R.Cc(i=R.jc())&&(t.elementView=i.first)},hostBindings:function(e,t){1&e&&R.ic("resize",(function(e){return t.onResize(e)}),!1,R.Ec)},decls:3,vars:1,consts:[[1,"issuelist"],["content",""],[3,"timeline","contentHeight","nodeExpand",4,"ngIf"],[3,"timeline","contentHeight","nodeExpand"]],template:function(e,t){1&e&&(R.Wb(0,"div",0,1),R.Mc(2,Se,1,2,"app-timeline-renderer",2),R.Vb()),2&e&&(R.Cb(2),R.qc("ngIf",t.timeline))},directives:[s.m,ye.a],encapsulation:2}),Ce);i.d(t,"SearchModule",(function(){return Ve}));var Oe,je=[{path:"",component:z,children:[{path:"list",component:U},{path:"storyboard",component:le},{path:"timeline",component:ke}]}],Ve=((Oe=function e(){_classCallCheck(this,e)}).\u0275mod=R.Ob({type:Oe}),Oe.\u0275inj=R.Nb({factory:function(e){return new(e||Oe)},imports:[[s.c,c.g,l.c,a.b,r.c,u.b,b.c,h.b,d.b,ee.b,ue.a,w.i,o.a,n.j.forFeature("search",V,{initialState:p}),be.c.forFeature([me]),c.g.forChild(je)]]}),Oe)}}]);