function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,s){"use strict";s.r(e);var i=s("ofXK"),n=s("kt0X"),a=s("l2bN"),r=s("6NWb"),c=s("tyNb"),o=s("sITn"),u=s("3Pt+"),l=s("jLSX"),b=s("EVgl"),h=s("LPYB"),d=(s("hSFZ"),s("/RsI")),f=s("j9Al"),p={LIST:"LIST",STORYBOARD:"STORYBOARD",ROADMAP:"ROADMAP"},g={SwitchViewmode:Object(f.b)("[SwitchViewmode]"),SetQueryContext:Object(f.b)("[SetQueryContext]"),LoadSearchResults:Object(f.b)("[LoadSearchResults]"),LoadSearchResultsFailed:Object(f.b)("[LoadSearchResults] Failed"),LoadSearchResultsSuccess:Object(f.b)("[LoadSearchResults] Success"),LoadSavedSearchlist:Object(f.b)("[LoadSavedSearchlist]"),LoadSavedSearchlistFailed:Object(f.b)("[LoadSavedSearchlist] Failed"),LoadSavedSearchlistSuccess:Object(f.b)("[LoadSavedSearchlist] Success")},v=function t(e){_classCallCheck(this,t),this.payload=e,this.type=g.SwitchViewmode},y=function t(e){_classCallCheck(this,t),this.payload=e,this.type=g.LoadSearchResults},m=function t(e){_classCallCheck(this,t),this.payload=e,this.type=g.LoadSavedSearchlist},S={queryContext:null,issuelist:null,viewmode:p.LIST,savedSearchlist:null},k=s("LvDl");function C(t,e){switch(e.type){case g.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case g.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case g.LoadSearchResults:return Object.assign(Object.assign({},t),{issuelist:[]});case g.LoadSearchResultsSuccess:return Object.assign(Object.assign({},t),{issuelist:e.payload});case g.LoadSavedSearchlist:return Object.assign(Object.assign({},t),{savedSearchlist:[]});case g.LoadSavedSearchlistSuccess:var s=k.map(e.payload,(function(t){return k.pick(t,["id","name","jql"])}));return Object.assign(Object.assign({},t),{savedSearchlist:s});default:return t}}var O=s("1kSV"),w=s("pLZG"),j=s("lJxs"),L=s("krUz"),V=s("SYT+"),I=s("fXoL"),q=s("cdP3"),W=function(){return["/search/list"]},R=function(t){return{query:t}};function x(t,e){if(1&t&&(I.Wb(0,"div",3),I.Wb(1,"a",4),I.Mc(2),I.Vb(),I.Vb()),2&t){var s=e.$implicit;I.Cb(1),I.qc("routerLink",I.tc(3,W))("queryParams",I.uc(4,R,s.jql)),I.Cb(1),I.Oc(" ",s.name," ")}}function z(t,e){if(1&t&&(I.Wb(0,"div",1),I.Kc(1,x,3,6,"div",2),I.Vb()),2&t){var s=I.kc();I.Cb(1),I.qc("ngForOf",s.searchlist)}}var P,$=((P=function(){function t(e){_classCallCheck(this,t),this.store$=e}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.searchlist$=this.store$.select((function(t){return t.search.savedSearchlist})).pipe(Object(w.a)((function(t){return t}))).subscribe((function(e){return t.searchlist=e})),this.store$.dispatch(new m(null))}},{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||P)(I.Qb(n.h))},P.\u0275cmp=I.Kb({type:P,selectors:[["app-favourite-searches"]],decls:3,vars:1,consts:[["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(I.Wb(0,"h6"),I.Mc(1,"Favourite"),I.Vb(),I.Kc(2,z,2,1,"div",0)),2&t&&(I.Cb(2),I.qc("ngIf",e.searchlist))},directives:[i.m,i.l,c.f],encapsulation:2}),P);function M(t,e){1&t&&(I.Wb(0,"div"),I.Rb(1,"app-favourite-searches"),I.Vb())}function Q(t,e){if(1&t){var s=I.Xb();I.Wb(0,"div",16),I.Wb(1,"ngb-pagination",17),I.ic("pageChange",(function(t){return I.Dc(s),I.kc(2).currentPageIndex=t}))("pageChange",(function(){return I.Dc(s),I.kc(2).onPageChange()})),I.Vb(),I.Vb()}if(2&t){var i=I.kc(2);I.Cb(1),I.qc("maxSize",3)("page",i.currentPageIndex)("boundaryLinks",!0)("pageSize",i.issuelist.pageSize)("collectionSize",i.issuelist.total)}}function A(t,e){1&t&&(I.Wb(0,"div",18),I.Wb(1,"a",19),I.Rb(2,"fa-icon",20),I.Mc(3," List "),I.Vb(),I.Wb(4,"a",21),I.Rb(5,"fa-icon",22),I.Mc(6," Storyboard "),I.Vb(),I.Wb(7,"a",23),I.Rb(8,"fa-icon",24),I.Wb(9,"span",25),I.Mc(10,"Roadmap"),I.Vb(),I.Vb(),I.Vb()),2&t&&(I.Cb(2),I.qc("fixedWidth",!0),I.Cb(2),I.qc("routerLinkActive","active"),I.Cb(1),I.qc("fixedWidth",!0),I.Cb(2),I.qc("routerLinkActive","active"))}function F(t,e){if(1&t){var s=I.Xb();I.Wb(0,"div",9),I.Kc(1,Q,2,5,"div",10),I.Wb(2,"div",11),I.Mc(3),I.Wb(4,"b"),I.Mc(5),I.Vb(),I.Vb(),I.Wb(6,"div",12),I.Wb(7,"button",13),I.ic("click",(function(){return I.Dc(s),I.kc().toggleFullscreen()})),I.Rb(8,"fa-icon",14),I.Vb(),I.Kc(9,A,11,4,"div",15),I.Vb(),I.Vb()}if(2&t){var i=I.kc();I.Cb(1),I.qc("ngIf",i.issuelist.total>i.issuelist.pageSize),I.Cb(2),I.Pc(" ",i.issuelist.startAt+1," - ",i.issuelist.endAt," / "),I.Cb(2),I.Nc(i.issuelist.total),I.Cb(3),I.qc("icon",0===i.columns[0].size?"angle-double-right":"angle-double-left")("fixedWidth",!0),I.Cb(1),I.qc("ngIf",i.issuelist&&i.issuelist.results&&i.issuelist.results.length>1)}}function T(t,e){1&t&&(I.Wb(0,"div",26),I.Mc(1," No Records found. "),I.Vb())}var _,D=((_=function(){function t(e,s,i){var n=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=s,this.store$=i,this.selectedTab=1,this.currentPageIndex=1,this.canNavigate=function(){return n.issuelist&&n.issuelist.trim().length>0},this.canExecuteQuery=function(){return n.query&&n.query.trim().length>0},this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.localViewmode=p,this.searchViewmode$=this.store$.select((function(t){return t.search.viewmode})).subscribe((function(e){return t.searchViewmode=e})),this.store$.dispatch(new V.l(!0)),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(w.a)((function(t){return t&&t.query&&t.query.length>0})),Object(j.a)((function(t){return t.query}))).subscribe((function(e){t.query=e,t.executeQuery()})),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(w.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"parseQueryContext",value:function(t,e){if(t)return t.issueType!==L.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}},{key:"executeQuery",value:function(){this.canExecuteQuery()&&this.store$.dispatch(new y({query:this.query,currentPageIndex:this.currentPageIndex}))}},{key:"onPageChange",value:function(){this.executeQuery()}},{key:"dragEnd",value:function(t){this.adjustPaneSize(t.sizes[0])}},{key:"adjustPaneSize",value:function(t){this.leftPaneSize=t,this.columns[0].size=t,this.columns[1].size=100-t}},{key:"toggleFullscreen",value:function(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}]),t}()).\u0275fac=function(t){return new(t||_)(I.Qb(c.d),I.Qb(c.a),I.Qb(n.h))},_.\u0275cmp=I.Kb({type:_,selectors:[["app-result-container"]],decls:10,vars:5,consts:[[1,"main-container"],["direction","horizontal"],[1,"small","pt-2","pl-3",3,"size"],[4,"ngIf"],[3,"size"],["class","bg-light pb-1 border-bottom",4,"ngIf"],[1,"body-container"],[1,"w-100"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],[1,"bg-light","pb-1","border-bottom"],["class","float-right mb-0 mt-0 mr-3",4,"ngIf"],[1,"float-right","small","mt-2","mr-3"],[1,"clearfix"],["title","expand/collapse pane",1,"btn","btn-link","btn-sm","text-muted","mr-2",3,"click"],[3,"icon","fixedWidth"],["class","btn-group btn-group-sm mr-2",4,"ngIf"],[1,"float-right","mb-0","mt-0","mr-3"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"],[1,"btn-group","btn-group-sm","mr-2"],["routerLink","list","routerLinkActive","active","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap"],["icon","list",3,"fixedWidth"],["routerLink","storyboard","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map",3,"fixedWidth"],["routerLink","roadmap","queryParamsHandling","preserve",1,"btn","btn-default","border","text-nowrap",3,"routerLinkActive"],["icon","map-signs","size","sm"],[1,"ml-1"],[1,"center-text","custom-shadow","alert-warning","p-4"]],template:function(t,e){1&t&&(I.Wb(0,"div",0),I.Wb(1,"as-split",1),I.Wb(2,"as-split-area",2),I.Kc(3,M,2,0,"div",3),I.Vb(),I.Wb(4,"as-split-area",4),I.Kc(5,F,10,7,"div",5),I.Wb(6,"div",6),I.Wb(7,"div",7),I.Rb(8,"router-outlet"),I.Kc(9,T,2,0,"div",8),I.Vb(),I.Vb(),I.Vb(),I.Vb(),I.Vb()),2&t&&(I.Cb(2),I.qc("size",e.columns[0].size),I.Cb(1),I.qc("ngIf",e.leftPaneSize>0),I.Cb(1),I.qc("size",e.columns[1].size),I.Cb(1),I.qc("ngIf",e.issuelist&&e.issuelist.total>0),I.Cb(4),I.qc("ngIf",e.issuelist&&0===e.issuelist.total))},directives:[q.c,q.b,i.m,c.h,$,r.a,O.q,c.f,c.e],encapsulation:2}),_),K=function(t,e){return["/browse",t,"purpose",e]};function N(t,e){if(1&t&&(I.Wb(0,"tr"),I.Wb(1,"td",5),I.Mc(2),I.Vb(),I.Wb(3,"td",2),I.Wb(4,"a",6),I.Mc(5),I.Vb(),I.Vb(),I.Wb(6,"td"),I.Mc(7),I.Vb(),I.Wb(8,"td",3),I.Wb(9,"span",7),I.Mc(10),I.Vb(),I.Vb(),I.Vb()),2&t){var s=e.$implicit;I.Cb(2),I.Nc(s.issueType),I.Cb(2),I.qc("routerLink",I.vc(5,K,s.key,s.key)),I.Cb(1),I.Oc(" ",s.key," "),I.Cb(2),I.Oc(" ",s.title," "),I.Cb(3),I.Nc(s.status)}}function X(t,e){if(1&t&&(I.Wb(0,"table",1),I.Wb(1,"thead"),I.Wb(2,"tr"),I.Wb(3,"th",2),I.Mc(4,"Issue type"),I.Vb(),I.Wb(5,"th",2),I.Mc(6,"Key"),I.Vb(),I.Wb(7,"th"),I.Mc(8,"Summary"),I.Vb(),I.Wb(9,"th",3),I.Mc(10,"Status"),I.Vb(),I.Vb(),I.Vb(),I.Kc(11,N,11,8,"tr",4),I.Vb()),2&t){var s=I.kc();I.Cb(11),I.qc("ngForOf",s.issuelist.results)}}var H,B=((H=function(){function t(e,s,i){var n=this;_classCallCheck(this,t),this.router=e,this.activatedRoute=s,this.store$=i,this.currentPageIndex=1,this.canNavigate=function(){return n.issuelist&&n.issuelist.trim().length>0}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new v(p.LIST)),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(w.a)((function(t){return t}))).subscribe((function(e){return t.issuelist=e}))}},{key:"ngOnDestroy",value:function(){}},{key:"navigateTo",value:function(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}]),t}()).\u0275fac=function(t){return new(t||H)(I.Qb(c.d),I.Qb(c.a),I.Qb(n.h))},H.\u0275cmp=I.Kb({type:H,selectors:[["app-search-listview"]],decls:1,vars:1,consts:[["class","table table-striped table-sm",4,"ngIf"],[1,"table","table-striped","table-sm"],["width","10%"],["width","10%",1,"text-right"],[4,"ngFor","ngForOf"],[1,"small","text-uppercase"],[1,"text-primary",3,"routerLink"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&I.Kc(0,X,12,1,"table",0),2&t&&I.qc("ngIf",e.issuelist&&e.issuelist.total>0)},directives:[i.m,i.l,c.f],encapsulation:2}),H),E=s("iLqC"),Y=s("Ewkv"),J=s("lVkt"),G=s("NGyg");function Z(t,e){if(1&t){var s=I.Xb();I.Wb(0,"p-multiSelect",10),I.ic("ngModelChange",(function(t){return I.Dc(s),I.kc(2).selectedStatuses=t}))("onChange",(function(t){return I.Dc(s),I.kc(2).onSelectedStatusChange(t)})),I.Vb()}if(2&t){var i=I.kc(2);I.qc("options",i.statusLookup)("ngModel",i.selectedStatuses)}}function U(t,e){if(1&t){var s=I.Xb();I.Wb(0,"p-dialog",11),I.ic("visibleChange",(function(t){return I.Dc(s),I.kc(2).showStatistics=t})),I.Rb(1,"app-statistics",12),I.Vb()}if(2&t){var i=I.kc(2);I.qc("visible",i.showStatistics),I.Cb(1),I.qc("statusStats",i.storyboardItem.statistics.status)("issueTypeStats",i.storyboardItem.statistics.issueTypes)("componentStats",i.storyboardItem.statistics.components)}}var tt=function(){return["far","chart-bar"]};function et(t,e){if(1&t){var s=I.Xb();I.Wb(0,"div"),I.Wb(1,"div",1),I.Rb(2,"div",2),I.Wb(3,"div",3),I.Kc(4,Z,1,2,"p-multiSelect",4),I.Vb(),I.Wb(5,"div",5),I.Wb(6,"button",6),I.ic("click",(function(){return I.Dc(s),I.kc().showStatistics=!0})),I.Rb(7,"fa-icon",7),I.Vb(),I.Vb(),I.Vb(),I.Rb(8,"app-storyboard-renderer",8),I.Kc(9,U,2,4,"p-dialog",9),I.Vb()}if(2&t){var i=I.kc();I.Cb(4),I.qc("ngIf",i.statusLookup&&i.statusLookup.length>0),I.Cb(3),I.qc("icon",I.tc(4,tt)),I.Cb(1),I.qc("storyboardItem",i.storyboardItem),I.Cb(1),I.qc("ngIf",i.storyboardItem.statistics)}}var st,it,nt,at=((st=function(){function t(e,s){_classCallCheck(this,t),this.activatedRoute=e,this.store$=s,this.selectedStatuses=[],this.statusLookup=[],this.showStatistics=!1,this.filterByStatus=function(t,e){return e&&e.length>0?k.filter(t,(function(t){return void 0!==k.find(e,(function(e){return e===t.status}))})):t}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new v(p.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(w.a)((function(t){return t}))).subscribe((function(e){t.issuelist=e,t.plotStoryboard()}))}},{key:"ngOnDestroy",value:function(){this.issuelist$&&this.issuelist$.unsubscribe()}},{key:"plotStoryboard",value:function(){var t=k.map(this.selectedStatuses,"key");this.storyboardItem.metadata=Object(E.b)(),this.storyboardItem.children=this.filterByStatus(this.issuelist.results,t),Object(E.c)(this.storyboardItem.metadata,Object(E.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(E.d)(this.storyboardItem),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}},{key:"onSelectedStatusChange",value:function(t){this.plotStoryboard()}}]),t}()).\u0275fac=function(t){return new(t||st)(I.Qb(c.a),I.Qb(n.h))},st.\u0275cmp=I.Kb({type:st,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","mt-1","mb-1"],[1,"col-md-8"],[1,"col-md-3"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1"],[1,"btn","btn-link",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&I.Kc(0,et,10,5,"div",0),2&t&&I.qc("ngIf",e.storyboardItem)},directives:[i.m,r.a,Y.a,J.a,u.f,u.i,d.a,G.a],encapsulation:2}),st),rt=s("snw9"),ct=s("mrSG"),ot=s("eIep"),ut=s("JIr8"),lt=s("LRne"),bt=s("F2Ol"),ht=((it=function t(e,s){var i=this;_classCallCheck(this,t),this.actions$=e,this.jiraService=s,this.loadSearchlist=this.actions$.pipe(Object(rt.d)(g.LoadSearchResults),Object(ot.a)((function(t){return i.jiraService.executeJql(t.payload.query,t.payload.currentPageIndex-1,50,L.r,"issuelist.json").pipe(Object(j.a)((function(t){return{total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:k.map(t.issues,(function(t){return Object(L.q)(t)}))}}))).pipe(Object(j.a)((function(t){return{type:g.LoadSearchResultsSuccess,payload:t}})),Object(ut.a)((function(){return Object(lt.a)({type:g.LoadSearchResultsFailed})})))}))),this.loadSaveSearchlist=this.actions$.pipe(Object(rt.d)(g.LoadSavedSearchlist),Object(ot.a)((function(){return i.jiraService.favouriteSearches("favourite-search.json").pipe(Object(j.a)((function(t){return{type:g.LoadSavedSearchlistSuccess,payload:t}})),Object(ut.a)((function(){return Object(lt.a)({type:g.LoadSavedSearchlistFailed})})))})))}).\u0275fac=function(t){return new(t||it)(I.ec(rt.a),I.ec(bt.b))},it.\u0275prov=I.Mb({token:it,factory:it.\u0275fac}),Object(ct.b)([Object(rt.b)()],it.prototype,"loadSearchlist",void 0),Object(ct.b)([Object(rt.b)()],it.prototype,"loadSaveSearchlist",void 0),it),dt=s("VMLX"),ft=["content"],pt=((nt=function(){function t(e,s,i){_classCallCheck(this,t),this.cdRef=e,this.activatedRoute=s,this.store$=i,this.containerSize=80,this.contentHeight=0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.dispatch(new v(p.STORYBOARD)),this.issuelist$=this.store$.select((function(t){return t.search.issuelist})).pipe(Object(w.a)((function(t){return t}))).subscribe((function(e){t.issuelist=e,console.log(t.issuelist)}))}},{key:"ngOnDestroy",value:function(){this.issuelist$&&this.issuelist$.unsubscribe()}},{key:"ngAfterViewInit",value:function(){this.onResize()}},{key:"onResize",value:function(){this.elementView&&(this.contentHeight=this.elementView.nativeElement.offsetParent.clientHeight-this.containerSize,this.cdRef.detectChanges())}}]),t}()).\u0275fac=function(t){return new(t||nt)(I.Qb(I.h),I.Qb(c.a),I.Qb(n.h))},nt.\u0275cmp=I.Kb({type:nt,selectors:[["app-roadmap-view"]],viewQuery:function(t,e){var s;1&t&&I.Qc(ft,!0),2&t&&I.Ac(s=I.jc())&&(e.elementView=s.first)},hostBindings:function(t,e){1&t&&I.ic("resize",(function(t){return e.onResize(t)}),!1,I.Cc)},decls:3,vars:2,consts:[[1,"issuelist"],["content",""],[3,"records","contentHeight"]],template:function(t,e){1&t&&(I.Wb(0,"div",0,1),I.Rb(2,"app-roadmap-renderer",2),I.Vb()),2&t&&(I.Cb(2),I.qc("records",e.issuelist.results)("contentHeight",e.contentHeight))},directives:[dt.a],encapsulation:2}),nt);s.d(e,"SearchModule",(function(){return yt}));var gt,vt=[{path:"",component:D,children:[{path:"list",component:B},{path:"storyboard",component:at},{path:"roadmap",component:pt}]}],yt=((gt=function t(){_classCallCheck(this,t)}).\u0275mod=I.Ob({type:gt}),gt.\u0275inj=I.Nb({factory:function(t){return new(t||gt)},imports:[[i.c,c.g,u.c,a.b,r.c,l.b,b.b,d.b,h.b,J.b,q.a,O.i,o.a,n.j.forFeature("search",C,{initialState:S}),rt.c.forFeature([ht]),c.g.forChild(vt)]]}),gt)}}]);