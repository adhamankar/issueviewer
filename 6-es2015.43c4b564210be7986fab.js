(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2Jat":function(e,t,s){"use strict";s.r(t);var i=s("ofXK"),n=s("kt0X");const c={primaryIssueKey:"",primaryIssue:null,selectedIssueKey:"",selectedIssue:null,timelineView:null,isSelectedIssueViewCompact:!1,hierarchicalIssue:null,subtasks:null,purpose:[],recentlyViewedItems:[],recentmostItem:null,updatedField:null};var a=s("j9Al");const o={LoadPrimaryIssue:Object(a.b)("[LoadPrimaryIssue]"),LoadPrimaryIssueFailed:Object(a.b)("[LoadPrimaryIssue] Failed"),LoadPrimaryIssueSuccess:Object(a.b)("[LoadPrimaryIssue] Success"),LoadPrimaryIssueEpicChildren:Object(a.b)("[LoadPrimaryIssueEpicChildren]"),LoadPrimaryIssueEpicChildrenFailed:Object(a.b)("[LoadPrimaryIssueEpicChildren] Failed"),LoadPrimaryIssueEpicChildrenSuccess:Object(a.b)("[LoadPrimaryIssueEpicChildren] Success"),LoadPrimaryIssueRelatedLinks:Object(a.b)("[LoadPrimaryIssueRelatedLinks]"),LoadPrimaryIssueRelatedLinksFailed:Object(a.b)("[LoadPrimaryIssueRelatedLinks] Failed"),LoadPrimaryIssueRelatedLinksSuccess:Object(a.b)("[LoadPrimaryIssueRelatedLinks] Success"),SetHierarchicalIssue:Object(a.b)("[SetHierarchicalIssue]"),LoadSubtasks:Object(a.b)("[LoadSubtasks]"),LoadSubtasksFailed:Object(a.b)("[LoadSubtasks] Failed"),LoadSubtasksSuccess:Object(a.b)("[LoadSubtasks] Success"),LoadProjectDetails:Object(a.b)("[LoadProjectDetails]"),LoadProjectDetailsFailed:Object(a.b)("[LoadProjectDetails] Failed"),LoadProjectDetailsSuccess:Object(a.b)("[LoadProjectDetails] Success"),LoadSelectedIssue:Object(a.b)("[LoadSelectedIssue]"),LoadSelectedIssueFailed:Object(a.b)("[LoadSelectedIssue] Failed"),LoadSelectedIssueSuccess:Object(a.b)("[LoadSelectedIssue] Success"),ChangeSelectedIssueView:Object(a.b)("[ChangeSelectedIssueView]"),LoadSelectedIssueEpicChildren:Object(a.b)("[LoadSelectedIssueEpicChildren]"),LoadSelectedIssueEpicChildrenFailed:Object(a.b)("[LoadSelectedIssueEpicChildren] Failed"),LoadSelectedIssueEpicChildrenSuccess:Object(a.b)("[LoadSelectedIssueEpicChildren] Success"),LoadSelectedIssueRelatedLinks:Object(a.b)("[LoadSelectedIssueRelatedLinks]"),LoadSelectedIssueRelatedLinksFailed:Object(a.b)("[LoadSelectedIssueRelatedLinks] Failed"),LoadSelectedIssueRelatedLinksSuccess:Object(a.b)("[LoadSelectedIssueRelatedLinks] Success"),SetSelectedIssue:Object(a.b)("[SetSelectedIssue]"),PopulateIssueTimelineView:Object(a.b)("[PopulateIssueTimelineView]"),SetPurpose:Object(a.b)("[SetPurpose]"),UpdateOrganizationPurpose:Object(a.b)("[UpdateOrganizationPurpose]"),SetRecentlyViewed:Object(a.b)("[SetRecentlyViewed]"),UpdateFieldValue:Object(a.b)("[UpdateFieldValue]"),UpdateFieldValueFailed:Object(a.b)("[UpdateFieldValue] Failed"),UpdateFieldValueSuccess:Object(a.b)("[UpdateFieldValue] Success"),UpdateOrganizationTitle:Object(a.b)("[UpdateOrganizationTitle]"),UpdateOrganizationTitleFailed:Object(a.b)("[UpdateOrganizationTitle] Failed"),UpdateOrganizationTitleSuccess:Object(a.b)("[UpdateOrganizationTitle] Success")};class r{constructor(e){this.payload=e,this.type=o.LoadPrimaryIssue}}class l{constructor(e){this.payload=e,this.type=o.LoadPrimaryIssueEpicChildren}}class d{constructor(e){this.payload=e,this.type=o.LoadPrimaryIssueRelatedLinks}}class u{constructor(e){this.payload=e,this.type=o.SetHierarchicalIssue}}class b{constructor(e){this.payload=e,this.type=o.LoadSubtasks}}class p{constructor(e){this.payload=e,this.type=o.LoadProjectDetails}}class h{constructor(e){this.payload=e,this.type=o.LoadSelectedIssue}}class g{constructor(e){this.payload=e,this.type=o.ChangeSelectedIssueView}}class f{constructor(e){this.payload=e,this.type=o.LoadSelectedIssueEpicChildren}}class m{constructor(e){this.payload=e,this.type=o.LoadSelectedIssueRelatedLinks}}class y{constructor(e){this.payload=e,this.type=o.SetSelectedIssue}}class I{constructor(e){this.payload=e,this.type=o.PopulateIssueTimelineView}}class k{constructor(e){this.payload=e,this.type=o.SetPurpose}}class C{constructor(e){this.payload=e,this.type=o.UpdateOrganizationPurpose}}class v{constructor(e){this.payload=e,this.type=o.UpdateFieldValue}}var j=s("krUz"),O=s("iPf6"),V=s("LvDl");function L(e,t){switch(t.type){case o.LoadPrimaryIssue:return Object.assign(Object.assign({},e),{primaryIssue:null,primaryIssueKey:t.payload.issue});case o.LoadPrimaryIssueSuccess:return Object.assign(Object.assign({},e),{primaryIssue:S(t.payload)});case o.LoadPrimaryIssueEpicChildren:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{epicChildrenLoading:!0,epicChildrenLoaded:!1})});case o.LoadPrimaryIssueEpicChildrenSuccess:{const s=V.map(t.payload.issues,e=>j.p(e));return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{epicChildrenLoading:!1,epicChildrenLoaded:!0,epicChildren:s})})}case o.LoadPrimaryIssueRelatedLinks:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{relatedLinksLoading:!0})});case o.LoadPrimaryIssueRelatedLinksSuccess:{const s=function(e,t){if(!e.primaryIssue)return null;const s=e.primaryIssue.relatedLinks;if(t.payload&&t.payload.issues&&s){const e=V.map(t.payload.issues,e=>V.pick(j.p(e),j.r));s.forEach(t=>{const s=V.find(e,{key:t.key});s&&(t.created=s.created,t.duedate=s.duedate,t.updated=s.updated,t.resolution=s.resolution,t.project=s.project,t.labels=s.labels,t.fixVersions=s.fixVersions,t.components=s.components)})}return s}(e,t);return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{relatedLinksLoading:!1,relatedLinksLoaded:!0,relatedLinks:s})})}case o.SetHierarchicalIssue:return Object.assign(Object.assign({},e),{hierarchicalIssue:t.payload});case o.LoadProjectDetails:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{projectConfigLoading:!0})});case o.LoadProjectDetailsSuccess:{const s=function(e){const t=V.pick(e,["id","key","description","name","customFields","startdate"]);return t.hierarchy=[],t.storyboardFields=[],e.issueTypes&&(t.standardIssueTypes=w(e.issueTypes,!1),t.subTaskIssueTypes=w(e.issueTypes,!0)),t.metadata={},e.components&&(t.metadata.components=V.sortBy(V.map(e.components,e=>V.pick(e,["id","name","description"])),["name"])),e.versions&&(t.metadata.versions=V.sortBy(V.map(e.versions,e=>V.pick(e,["archived","id","name","releaseDate","description"])),["name"])),t}(t.payload);return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{projectConfigLoading:!1,projectConfigLoaded:!0,projectConfig:s})})}case o.LoadSubtasks:return Object.assign(Object.assign({},e),{subtasks:null});case o.LoadSubtasksSuccess:{let s=null;return t.payload&&t.payload.result&&t.payload.result.issues&&(s=j.m(t.payload.result.issues),j.d(s,t.payload.extendedFields)),Object.assign(Object.assign({},e),{subtasks:s})}case o.LoadSelectedIssue:return Object.assign(Object.assign({},e),{selectedIssue:null,selectedIssueKey:t.payload.issue});case o.LoadSelectedIssueSuccess:return Object.assign(Object.assign({},e),{selectedIssue:S(t.payload)});case o.PopulateIssueTimelineView:{const s=e.selectedIssue.projectConfig.startdate.id||"created",i=O.a(t.payload,s),n=O.b(t.payload,i.timespan,s,!1);return Object.assign(Object.assign({},e),{timelineView:{metadata:i,records:n}})}case o.ChangeSelectedIssueView:return Object.assign(Object.assign({},e),{isSelectedIssueViewCompact:t.payload});case o.LoadSelectedIssueEpicChildren:return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{epicChildrenLoading:!0,epicChildrenLoaded:!1})});case o.LoadSelectedIssueEpicChildrenSuccess:{const s=V.map(t.payload.issues,e=>j.p(e));return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{epicChildrenLoading:!1,epicChildrenLoaded:!0,epicChildren:s})})}case o.LoadSelectedIssueRelatedLinks:return Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{relatedLinksLoading:!0,relatedLinksLoaded:!1})});case o.LoadSelectedIssueRelatedLinksSuccess:{const s=V.map(t.payload.issues,e=>j.p(e)),i=e.selectedIssue.relatedLinks;return s.forEach(e=>{const t=V.find(i,{key:e.key});e.linkType=t?t.linkType:"link"}),Object.assign(Object.assign({},e),{selectedIssue:Object.assign(Object.assign({},e.selectedIssue),{relatedLinksLoading:!1,relatedLinksLoaded:!0,relatedLinks:s})})}case o.SetSelectedIssue:return Object.assign(Object.assign({},e),{selectedIssue:t.payload});case o.SetPurpose:return Object.assign(Object.assign({},e),{purpose:t.payload});case o.UpdateOrganizationPurpose:{const s=t.payload||{},i=e.hierarchicalIssue,n=j.s(i,j.a.Organization);return n&&(n.label=s.name,n.title=s.name,n.description=s.purpose),Object.assign(Object.assign({},e),{hierarchicalIssue:i,purpose:e.purpose.map(e=>e.issueType===j.a.Organization?Object.assign(Object.assign({},e),{key:s.name,label:s.name,title:s.name,purpose:s.purpose}):e)})}case o.SetRecentlyViewed:return Object.assign(Object.assign({},e),{recentmostItem:t.payload});case o.UpdateFieldValue:return Object.assign(Object.assign({},e),{updatedField:null});case o.UpdateFieldValueSuccess:{const s=t.payload;return Object.assign(Object.assign({},e),{updatedField:s})}case o.UpdateOrganizationTitleSuccess:return Object.assign(Object.assign({},e),{primaryIssue:Object.assign(Object.assign({},e.primaryIssue),{organization:t.payload})});default:return e}}function S(e){const t=j.q(e.issue,e.extendedFields);return t&&(t.organization=e.organization,t.projectConfig=e.projectConfig,t.projectConfigLoaded=!!e.projectConfig,t.relatedLinks=j.n(e.issue),t.epicChildrenLoading=!1,t.epicChildrenLoaded=!1,t.relatedLinksLoading=!1,t.relatedLinksLoaded=!1),t}function w(e,t){return V.map(V.filter(e,{subtask:t}),e=>({name:e.name,list:[]}))}var W=s("fXoL"),P=s("itXk"),x=s("pLZG"),R=s("cdP3"),F=s("6NWb"),$=s("tyNb"),N=s("g9iH"),E=s("7zfz");const T=function(e,t){return{"small text-muted text-uppercase font-italic":e,"font-weight-bold":t}};function z(e,t){if(1&e&&(W.Wb(0,"div",6),W.Pc(1),W.Vb()),2&e){const e=t.$implicit,s=W.kc(2);W.rc("ngClass",W.wc(3,T,s.checkIfCustomNode(e),e.key===s.issueKey))("title",s.getIssueTitle(e)),W.Cb(1),W.Rc(" ",e.label,"")}}function D(e,t){if(1&e&&(W.Wb(0,"div",7),W.Pc(1),W.Vb()),2&e){const e=t.$implicit,s=W.kc(2);W.rc("title",s.getHeaderTitle(e)),W.Cb(1),W.Rc(" ",e.label," ")}}function G(e,t){1&e&&W.Rb(0,"fa-icon",10)}function M(e,t){if(1&e&&(W.Wb(0,"i",8),W.Pc(1),W.Nc(2,G,1,0,"fa-icon",9),W.Vb()),2&e){const e=t.$implicit;W.Cb(1),W.Rc(" ",e.label," "),W.Cb(1),W.rc("ngIf",e.editable)}}const Q=function(e){return[e]};function K(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",1),W.Wb(1,"p-tree",2),W.ic("selectionChange",(function(t){return W.Gc(e),W.kc().selectedNode=t}))("onNodeSelect",(function(t){return W.Gc(e),W.kc().nodeSelected(t)})),W.Nc(2,z,2,6,"ng-template",3),W.Nc(3,D,2,2,"ng-template",4),W.Nc(4,M,3,2,"ng-template",5),W.Vb(),W.Vb()}if(2&e){const e=W.kc();W.Cb(1),W.rc("value",W.vc(2,Q,e.rootNode))("selection",e.selectedNode)}}let A=(()=>{class e{constructor(e,t){this.router=e,this.activatedRoute=t,this.getIssueTitle=e=>Object(j.o)(e)?e.title:`[${e.issueType}] ${e.linkType||""} ${e.key} | ${e.title}`,this.getHeaderTitle=e=>`[${e.issueType}] ${e.title}`,this.checkIfCustomNode=e=>Object(j.o)(e)}nodeSelected(e){if(e.node.editable)e.node.memento={type:e.node.type,selectable:e.node.selectable},e.node.type=j.b.Editing,e.node.selectable=!1;else{let t=function(e,t){const s=e.parseUrl(e.url);return s.root.children[$.c]&&s.root.children[$.c].segments&&5===s.root.children[$.c].segments.length?V.last(s.root.children[$.c].segments).path:"details"}(this.router);this.router.navigate(["../..",e.node.key,t],{relativeTo:this.activatedRoute})}}}return e.\u0275fac=function(t){return new(t||e)(W.Qb($.d),W.Qb($.a))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-issue-treeview"]],inputs:{issueKey:"issueKey",rootNode:"rootNode"},decls:1,vars:1,consts:[["class","pb-5",4,"ngIf"],[1,"pb-5"],["selectionMode","single",3,"value","selection","selectionChange","onNodeSelect"],["pTemplate","default"],["pTemplate","Heading"],["pTemplate","Editable"],[2,"font-size","90%",3,"ngClass","title"],[3,"title"],[1,"editable-node"],["size","sm","class","text-muted ml-1","icon","pencil-alt",4,"ngIf"],["size","sm","icon","pencil-alt",1,"text-muted","ml-1"]],template:function(e,t){1&e&&W.Nc(0,K,5,4,"div",0),2&e&&W.rc("ngIf",t.rootNode)},directives:[i.m,N.a,E.d,i.k,F.a],encapsulation:2}),e})();var X=s("l2bN");function H(e,t){if(1&e&&(W.Wb(0,"div"),W.Rb(1,"app-issue-treeview",13),W.Vb()),2&e){const e=W.kc(2);W.Cb(1),W.rc("rootNode",e.hierarchicalNode)("issueKey",e.selectedIssueKey)}}function U(e,t){if(1&e&&(W.Wb(0,"div",18),W.Wb(1,"h5",19),W.Pc(2),W.Vb(),W.Rb(3,"ngx-md",20),W.Vb()),2&e){const e=W.kc().$implicit;W.Cb(2),W.Rc(" ",e.title," "),W.Cb(1),W.rc("data",e.purpose)}}const B=function(e){return{"float-left":e}};function q(e,t){if(1&e&&(W.Wb(0,"div",14),W.Rb(1,"div",9),W.Wb(2,"div",15),W.Wb(3,"a",6),W.ic("click",(function(){const e=t.$implicit;return e.show=!e.show})),W.Rb(4,"fa-icon",7),W.Wb(5,"span",16),W.Pc(6),W.Vb(),W.Vb(),W.Vb(),W.Nc(7,U,4,2,"div",17),W.Vb()),2&e){const e=t.$implicit;W.rc("ngClass",W.vc(4,B,!e.show)),W.Cb(4),W.rc("icon",e.show?"chevron-down":"chevron-right"),W.Cb(2),W.Rc("",e.issueType," purpose"),W.Cb(1),W.rc("ngIf",e.show)}}function J(e,t){if(1&e){const e=W.Xb();W.Wb(0,"as-split",1),W.ic("gutterDblClick",(function(){return W.Gc(e),W.kc().toggleFullscreen()}))("dragEnd",(function(t){return W.Gc(e),W.kc().dragEnd(t)})),W.Wb(1,"as-split-area",2),W.Nc(2,H,2,2,"div",3),W.Vb(),W.Wb(3,"as-split-area",2),W.Wb(4,"div",4),W.Wb(5,"div",5),W.Wb(6,"a",6),W.ic("click",(function(){W.Gc(e);const t=W.kc();return t.showHideAllPurposes(!t.showAll)})),W.Rb(7,"fa-icon",7),W.Vb(),W.Vb(),W.Nc(8,q,8,6,"div",8),W.Wb(9,"div",9),W.Pc(10,"\xa0"),W.Vb(),W.Wb(11,"div",10),W.Wb(12,"a",11),W.Pc(13," Proceed to workbench "),W.Rb(14,"fa-icon",12),W.Vb(),W.Vb(),W.Vb(),W.Vb(),W.Vb()}if(2&e){const e=W.kc();W.Cb(1),W.rc("size",e.columns[0].size),W.Cb(1),W.rc("ngIf",e.leftPaneSize>0),W.Cb(1),W.rc("size",e.columns[1].size),W.Cb(4),W.rc("icon",e.showAll?"angle-double-down":"angle-double-right"),W.Cb(1),W.rc("ngForOf",e.purpose)}}let Y=(()=>{class e{constructor(e){this.store$=e,this.edit=new W.n,this.showAll=!1,this.hideExtendedFields=!1,this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}ngOnInit(){this.purpose$=this.store$.select(e=>e.issue.purpose).subscribe(e=>this.purpose=e);const e=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(x.a)(e=>e)),t=this.store$.select(e=>e.issue.hierarchicalIssue).pipe(Object(x.a)(e=>e));this.combined$=Object(P.a)(e,t).subscribe(([e,t])=>{this.selectedIssueKey=e.key,this.hierarchicalNode=t,setTimeout(()=>{const s=Object(j.t)(t,e.key);s&&(Object(j.g)(e,s),this.store$.dispatch(new k(this.expandPurpose(s))))},200)})}ngOnDestroy(){this.purpose$&&this.purpose$.unsubscribe(),this.combined$&&this.combined$.unsubscribe()}showHideAllPurposes(e){this.showAll=e,this.purpose&&(this.purpose.forEach(e=>e.show=this.showAll),!this.showAll&&this.purpose.length>0&&(this.purpose[this.purpose.length-1].show=!0))}expandPurpose(e){const t=[];return this.populatePurpose(e,t),V.reverse(t),t.length>0&&(t[t.length-1].show=!0),t}populatePurpose(e,t){e&&(e.issueType!==j.a.EpicChildren&&e.issueType!==j.a.RelatedLink&&t.push({key:e.key,issueType:e.issueType,title:e.title,purpose:e.description,editable:e.editable,hfKey:e.hfKey,show:!1}),e.parent&&this.populatePurpose(e.parent,t))}dragEnd(e){this.adjustPaneSize(e.sizes[0])}adjustPaneSize(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}return e.\u0275fac=function(t){return new(t||e)(W.Qb(n.h))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-purpose"]],outputs:{edit:"edit"},decls:1,vars:1,consts:[["direction","horizontal",3,"gutterDblClick","dragEnd",4,"ngIf"],["direction","horizontal",3,"gutterDblClick","dragEnd"],[3,"size"],[4,"ngIf"],[1,"alert"],[1,"border-0","pb-0","mb-2","float-left"],["title","Show/hide details",1,"btn","btn-light","btn-sm","text-muted","mr-2",3,"click"],["size","fw",3,"icon"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"clearfix"],[1,"text-right","mt-3","mb-3"],["routerLink","../workbench",1,"btn","btn-sm","btn-primary"],["icon","chevron-right","size","sm"],[3,"rootNode","issueKey"],[3,"ngClass"],[1,"text-uppercase","text-muted"],[1,"small"],["class","ml-3 pl-3 pr-3 border-left","style","overflow:auto",4,"ngIf"],[1,"ml-3","pl-3","pr-3","border-left",2,"overflow","auto"],[1,"text-dark","font-weight-normal","mt-1"],[3,"data"]],template:function(e,t){1&e&&W.Nc(0,J,15,5,"as-split",0),2&e&&W.rc("ngIf",t.purpose&&t.purpose.length>0)},directives:[i.m,R.c,R.b,F.a,i.l,$.f,A,i.k,X.a],encapsulation:2}),e})();var _=s("sITn"),Z=s("3Pt+"),ee=s("jLSX"),te=s("lJxs");const se=["content"];let ie=(()=>{class e{constructor(e,t){this.cdRef=e,this.store$=t,this.containerSize=0,this.expandableSize=57,this.contentHeight=0,this.compactView=!1}init(e){this.containerSize=e,this.isSelectedIssueViewCompact$=this.store$.select(e=>e.issue.isSelectedIssueViewCompact).subscribe(e=>{this.compactView=e,this.containerSize+=e?-1*this.expandableSize:this.expandableSize,this.onResize()})}destroy(){this.isSelectedIssueViewCompact$&&this.isSelectedIssueViewCompact$.unsubscribe()}afterViewInit(){this.onResize()}onResize(){this.elementView&&(this.contentHeight=this.elementView.nativeElement.offsetParent.clientHeight-this.containerSize,this.cdRef.detectChanges())}}return e.\u0275fac=function(t){return new(t||e)(W.Qb(W.h),W.Qb(n.h))},e.\u0275dir=W.Lb({type:e,viewQuery:function(e,t){var s;1&e&&W.Tc(se,!0),2&e&&W.Dc(s=W.jc())&&(t.elementView=s.first)},hostBindings:function(e,t){1&e&&W.ic("resize",(function(e){return t.onResize(e)}),!1,W.Fc)}}),e})();var ne=s("AQDj"),ce=s("XNiG"),ae=s("VRyK"),oe=s("Kj3r"),re=s("/uUt"),le=s("1kSV"),de=s("/Azu");const ue=["instance"];function be(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",5),W.Wb(1,"button",6),W.ic("click",(function(){return W.Gc(e),W.kc().onShowEpiclist()})),W.Rb(2,"fa-icon",7),W.Vb(),W.Vb()}}function pe(e,t){if(1&e){const e=W.Xb();W.Wb(0,"button",12),W.ic("click",(function(){return W.Gc(e),W.kc(2).onCancel()})),W.Rb(1,"fa-icon",13),W.Vb()}2&e&&(W.Cb(1),W.rc("fixedWidth",!0))}function he(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",8),W.Wb(1,"button",9),W.ic("click",(function(){W.Gc(e);const t=W.kc();return t.navigateTo(t.issue)})),W.Rb(2,"fa-icon",10),W.Vb(),W.Nc(3,pe,2,1,"button",11),W.Vb()}if(2&e){const e=W.kc();W.Cb(2),W.rc("fixedWidth",!0),W.Cb(1),W.rc("ngIf",e.showCancel)}}const ge=function(e){return{"input-group-sm":e}};let fe=(()=>{class e{constructor(e,t,s){this.router=e,this.activatedRoute=t,this.store$=s,this.showCancel=!1,this.hideIssuelistNavigator=!0,this.showIssuelist=new W.n,this.cancel=new W.n,this.canNavigate=()=>this.issue&&this.issue.trim().length>0,this.focus$=new ce.a,this.click$=new ce.a,this.search=e=>{const t=e.pipe(Object(oe.a)(200),Object(re.a)()),s=this.click$.pipe(Object(x.a)(()=>!this.instance.isPopupOpen())),i=this.focus$;return Object(ae.a)(t,i,s).pipe(Object(te.a)(e=>""===e?this.issueLookup:V.filter(this.issueLookup||[],t=>t.toLowerCase().indexOf(e.toLowerCase())>-1)),Object(te.a)(e=>(e||[]).slice(0,20)))}}ngOnInit(){this.subscription=this.store$.select(e=>e.issue.primaryIssueKey).pipe(Object(x.a)(e=>e&&e.length>0)).subscribe(e=>this.issue=e)}ngOnDestroy(){}navigateTo(e){this.canNavigate()&&(this.cancel.emit(!0),this.router.navigate(["/browse",e.trim()]))}selectTo(e){if(this.canNavigate()){const t=e.trim();this.cancel.emit(!0),V.find(this.issueLookup,e=>e===t)?this.router.navigate(["purpose",t,"details"],{relativeTo:this.activatedRoute}):this.router.navigate(["/browse",t,"purpose",t,"details"])}}onShowEpiclist(){this.showIssuelist.emit(!0)}onCancel(){this.cancel.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(W.Qb($.d),W.Qb($.a),W.Qb(n.h))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-issue-entry"]],viewQuery:function(e,t){var s;1&e&&W.Lc(ue,!0),2&e&&W.Dc(s=W.jc())&&(t.instance=s.first)},inputs:{showCancel:"showCancel",size:"size",issueLookup:"issueLookup",hideIssuelistNavigator:"hideIssuelistNavigator"},outputs:{showIssuelist:"showIssuelist",cancel:"cancel"},decls:5,vars:8,consts:[[1,"input-group",3,"ngClass"],["class","input-group-prepend",4,"ngIf"],["type","text","name","issueByKeyId","placeholder","Jira issue key","id","typeahead-focus","type","text",1,"form-control",3,"ngModel","ngbTypeahead","appAutofocus","ngModelChange","focus","click","keydown.enter","keydown.escape","keydown.control.enter"],["instance","ngbTypeahead"],["class","input-group-append",4,"ngIf"],[1,"input-group-prepend"],[1,"btn","btn-primary",3,"click"],["icon","search"],[1,"input-group-append"],["type","button",1,"btn","btn-light","border","border-left-0","text-primary",3,"click"],["icon","chevron-right",3,"fixedWidth"],["class","btn btn-link text-muted","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-link","text-muted",3,"click"],["icon","times",3,"fixedWidth"]],template:function(e,t){1&e&&(W.Wb(0,"div",0),W.Nc(1,be,3,0,"div",1),W.Wb(2,"input",2,3),W.ic("ngModelChange",(function(e){return t.issue=e}))("focus",(function(e){return t.focus$.next(e.target.value)}))("click",(function(e){return t.click$.next(e.target.value)}))("keydown.enter",(function(){return t.selectTo(t.issue)}))("keydown.escape",(function(){return t.onCancel()}))("keydown.control.enter",(function(){return t.navigateTo(t.issue)})),W.Vb(),W.Nc(4,he,4,2,"div",4),W.Vb()),2&e&&(W.rc("ngClass",W.vc(6,ge,"sm"===t.size)),W.Cb(1),W.rc("ngIf",!t.hideIssuelistNavigator),W.Cb(1),W.rc("ngModel",t.issue)("ngbTypeahead",t.search)("appAutofocus",!0),W.Cb(2),W.rc("ngIf",t.canNavigate()))},directives:[i.k,i.m,Z.b,le.t,Z.f,Z.i,de.a,F.a],encapsulation:2}),e})();function me(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div"),W.Wb(1,"a",14),W.ic("click",(function(){return W.Gc(e),W.kc(3).showIssueEntry=!0})),W.Wb(2,"span",15),W.Pc(3),W.lc(4,"slice"),W.Vb(),W.Pc(5),W.Rb(6,"fa-icon",16),W.Vb(),W.Rb(7,"app-issue-navigation-menu",17),W.Vb()}if(2&e){const e=W.kc(3);W.Cb(2),W.rc("title",e.selectedIssue.issueType),W.Cb(1),W.Qc(W.oc(4,4,e.selectedIssue.issueType,0,6)),W.Cb(2),W.Rc(": ",e.selectedIssue.key," "),W.Cb(2),W.rc("issueKey",e.selectedIssue.key)}}function ye(e,t){if(1&e){const e=W.Xb();W.Wb(0,"app-issue-entry",18),W.ic("cancel",(function(t){return W.Gc(e),W.kc(3).onCancelIssueEntry(t)}))("showIssuelist",(function(){return W.Gc(e),W.kc(3).onShowIssuelist()})),W.Vb()}2&e&&W.rc("hideIssuelistNavigator",!1)("showCancel",!0)}function Ie(e,t){if(1&e&&(W.Wb(0,"div",11),W.Nc(1,me,8,8,"div",12),W.Nc(2,ye,1,2,"app-issue-entry",13),W.Vb()),2&e){const e=W.kc(2);W.Cb(1),W.rc("ngIf",!e.showIssueEntry),W.Cb(1),W.rc("ngIf",e.showIssueEntry)}}function ke(e,t){1&e&&(W.Wb(0,"a",27),W.Rb(1,"fa-icon",28),W.Wb(2,"span",22),W.Pc(3,"Storyboard"),W.Vb(),W.Vb()),2&e&&W.rc("routerLinkActive","active")}function Ce(e,t){1&e&&(W.Wb(0,"a",29),W.Rb(1,"fa-icon",30),W.Wb(2,"span",22),W.Pc(3,"Timeline"),W.Vb(),W.Vb()),2&e&&W.rc("routerLinkActive","active")}const ve=function(){return["details"]},je=function(){return["far","window-restore"]};function Oe(e,t){if(1&e&&(W.Wb(0,"div",19),W.Wb(1,"a",20),W.Rb(2,"fa-icon",21),W.Wb(3,"span",22),W.Pc(4,"Purpose"),W.Vb(),W.Vb(),W.Wb(5,"a",23),W.Rb(6,"fa-icon",24),W.Wb(7,"span",22),W.Pc(8,"Workbench"),W.Vb(),W.Vb(),W.Nc(9,ke,4,1,"a",25),W.Nc(10,Ce,4,1,"a",26),W.Vb()),2&e){const e=W.kc(2);W.Cb(1),W.rc("routerLink",W.uc(6,ve))("routerLinkActive","active"),W.Cb(4),W.rc("routerLinkActive","active"),W.Cb(1),W.rc("icon",W.uc(7,je)),W.Cb(3),W.rc("ngIf",e.canNavigateToStoryboard),W.Cb(1),W.rc("ngIf",e.canNavigateToStoryboard)}}function Ve(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",3),W.Wb(1,"div",4),W.Wb(2,"button",5),W.ic("click",(function(){return W.Gc(e),W.kc().toggleView()})),W.Rb(3,"fa-icon",6),W.Vb(),W.Vb(),W.Nc(4,Ie,3,2,"div",7),W.Wb(5,"h2",8),W.Pc(6),W.Wb(7,"sup",9),W.Pc(8),W.Vb(),W.Vb(),W.Nc(9,Oe,11,8,"div",10),W.Vb()}if(2&e){const e=W.kc();W.Cb(3),W.rc("icon",e.compactView?"expand-alt":"compress-alt"),W.Cb(1),W.rc("ngIf",!e.compactView),W.Cb(2),W.Rc(" ",e.selectedIssue.title," "),W.Cb(2),W.Rc(" ",e.selectedIssue.status," "),W.Cb(1),W.rc("ngIf",!e.compactView)}}let Le=(()=>{class e extends ie{constructor(e,t,s,i){super(e,i),this.cdRef=e,this.router=t,this.activatedRoute=s,this.store$=i,this.canNavigateToStoryboard=!1,this.checkIfCanNavigateToStoryboard=()=>this.selectedIssue&&this.selectedIssue.key&&this.primaryIssue&&this.primaryIssue.key&&("Epic"===this.selectedIssue.issueType||this.primaryIssue.key.toLowerCase()===this.selectedIssue.key.toLowerCase()),this.showIssueEntry=!1}ngOnInit(){this.init(55),this.localNodeType=j.a,this.updatedField$=this.store$.select(e=>e.issue.updatedField).pipe(Object(x.a)(e=>e&&this.selectedIssue)).subscribe(()=>{this.store$.dispatch(new h({issue:this.selectedIssue.key,extendedFields:this.extendedFields}))}),this.organization$=this.store$.select(e=>e.app.organization).pipe(Object(x.a)(e=>e)).subscribe(e=>this.store$.dispatch(new C(e))),this.selectedIssue$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(x.a)(e=>e)).subscribe(e=>{this.selectedIssue=e,this.canNavigateToStoryboard=this.checkIfCanNavigateToStoryboard(),this.primaryIssue&&this.primaryIssue.key&&this.selectedIssue.key.toLowerCase()===this.primaryIssue.key.toLowerCase()||(this.selectedIssue.relatedLinksLoaded||this.selectedIssue.relatedLinksLoading||this.selectedIssue.relatedLinks&&this.selectedIssue.relatedLinks.length>0&&this.store$.dispatch(new m(V.map(this.selectedIssue.relatedLinks,"key"))),this.selectedIssue.issueType!==j.a.Epic||this.selectedIssue.epicChildrenLoaded||this.selectedIssue.epicChildrenLoading||this.store$.dispatch(new f(this.selectedIssue.key)))});const e=this.store$.select(e=>e.issue.primaryIssue).pipe(Object(x.a)(e=>e)),t=this.store$.select(e=>e.issue.hierarchicalIssue).pipe(Object(x.a)(e=>e)),s=this.activatedRoute.params.pipe(Object(x.a)(e=>e&&e.selected&&e.selected.length>0),Object(te.a)(e=>e.selected));this.combined$=Object(P.a)(e,t,s).subscribe(([e,t,s])=>{if(this.primaryIssue=e,this.primaryIssue.key&&s.toLowerCase()===this.primaryIssue.key.toLowerCase())this.store$.dispatch(new y(e));else if(!this.selectedIssue||this.selectedIssue.key.toLowerCase()!==s.toLowerCase()){const i=Object(j.t)(t,s);this.extendedFields=i?this.populateExtendedFields(e.projectConfig,i.issueType):[],this.store$.dispatch(new h({issue:s,extendedFields:this.extendedFields}))}})}populateExtendedFields(e,t){let s=[];if(e){if(e.standardIssueTypes){const i=V.find(e.standardIssueTypes,{name:t});i&&(s=V.union(s,i.list))}e.startdate&&s.push(e.startdate)}return s}ngOnDestroy(){this.destroy(),this.updatedField$&&this.updatedField$.unsubscribe(),this.organization$&&this.organization$.unsubscribe(),this.combined$&&this.combined$.unsubscribe(),this.selectedIssue$&&this.selectedIssue$.unsubscribe()}onShowIssuelist(){this.router.navigate(["/search/list"])}ngAfterViewInit(){this.afterViewInit()}toggleView(){this.store$.dispatch(new g(!this.compactView))}onCancelIssueEntry(e){this.showIssueEntry=!1}}return e.\u0275fac=function(t){return new(t||e)(W.Qb(W.h),W.Qb($.d),W.Qb($.a),W.Qb(n.h))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-selected-issue-container"]],features:[W.zb],decls:4,vars:3,consts:[["class","bg-light container-fluid pb-2 border-bottom",4,"ngIf"],[2,"overflow","auto","width","100%"],["content",""],[1,"bg-light","container-fluid","pb-2","border-bottom"],[1,"float-right","btn-group","btn-group-sm"],[1,"btn","btn-sm","btn-link","text-muted",3,"click"],[3,"icon"],["style","width:225px",4,"ngIf"],[1,"font-weight-light"],[1,"badge","badge-light","text-uppercase","text-muted",2,"font-size","small"],["class","btn-group",4,"ngIf"],[2,"width","225px"],[4,"ngIf"],["size","sm","title","Hit ENTER to navigate to issue, ESCAPE to cancel.",3,"hideIssuelistNavigator","showCancel","cancel","showIssuelist",4,"ngIf"],[1,"text-dark","text-uppercase","font-weight-bold","small","mr-3",3,"click"],[3,"title"],["icon","pencil-alt",1,"ml-1"],["icon","ellipsis-h","placement","bottom-left",3,"issueKey"],["size","sm","title","Hit ENTER to navigate to issue, ESCAPE to cancel.",3,"hideIssuelistNavigator","showCancel","cancel","showIssuelist"],[1,"btn-group"],["title","View purpose",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLink","routerLinkActive"],["icon","fire","size","sm",1,"text-brand"],[1,"ml-1"],["routerLink","workbench","title","Workbench",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLinkActive"],["size","sm",3,"icon"],["class","btn btn-default border btn-sm text-nowrap","routerLink","storyboard","title","Storyboard",3,"routerLinkActive",4,"ngIf"],["class","btn btn-default border btn-sm text-nowrap","routerLink","timeline","title","Timeline",3,"routerLinkActive",4,"ngIf"],["routerLink","storyboard","title","Storyboard",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLinkActive"],["icon","map","size","sm"],["routerLink","timeline","title","Timeline",1,"btn","btn-default","border","btn-sm","text-nowrap",3,"routerLinkActive"],["icon","map-signs","size","sm"]],template:function(e,t){1&e&&(W.Nc(0,Ve,10,5,"div",0),W.Wb(1,"div",1,2),W.Rb(3,"router-outlet"),W.Vb()),2&e&&(W.rc("ngIf",t.selectedIssue),W.Cb(1),W.Mc("height",t.contentHeight,"px"))},directives:[i.m,$.h,F.a,ne.a,fe,$.f,$.e],pipes:[i.r],encapsulation:2}),e})();const Se=function(e){return{small:e}};function we(e,t){if(1&e&&(W.Wb(0,"div",5),W.Wb(1,"sub",6),W.Pc(2),W.Vb(),W.Rb(3,"ngx-md",7),W.Vb()),2&e){const e=W.kc().$implicit,t=W.kc(3);W.Cb(2),W.Qc(e.name),W.Cb(1),W.rc("ngClass",W.vc(3,Se,t.fontSizeSmall))("data",e.extendedValue)}}function We(e,t){if(1&e&&(W.Ub(0),W.Nc(1,we,4,5,"div",4),W.Tb()),2&e){const e=t.$implicit;W.Cb(1),W.rc("ngIf",e.extendedValue&&e.extendedValue.length>0)}}function Pe(e,t){if(1&e&&(W.Wb(0,"div",2),W.Nc(1,We,2,1,"ng-container",3),W.Vb()),2&e){const e=W.kc(2);W.Cb(1),W.rc("ngForOf",e.issue.extendedFields)}}function xe(e,t){if(1&e&&(W.Wb(0,"div"),W.Nc(1,Pe,2,1,"div",1),W.Vb()),2&e){const e=W.kc();W.Cb(1),W.rc("ngIf",e.issue.extendedFields&&e.issue.extendedFields.length>0)}}let Re=(()=>{class e{constructor(){this.fontSizeSmall=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=W.Kb({type:e,selectors:[["app-extended-fields"]],inputs:{issue:"issue"},decls:1,vars:1,consts:[[4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"mt-5"],[4,"ngFor","ngForOf"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"text-muted","text-uppercase"],[3,"ngClass","data"]],template:function(e,t){1&e&&W.Nc(0,xe,2,1,"div",0),2&e&&W.rc("ngIf",t.issue)},directives:[i.m,i.l,X.a,i.k],encapsulation:2}),e})();function Fe(e,t){if(1&e){const e=W.Xb();W.Wb(0,"button",12),W.ic("click",(function(){W.Gc(e);const t=W.kc(3);return t.hideDetails=!t.hideDetails})),W.Pc(1),W.Vb()}if(2&e){const e=W.kc(3);W.Cb(1),W.Rc(" ",e.hideDetails?"more ...":"... less"," ")}}const $e=function(e){return{"issue-resolved":e}};function Ne(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",3),W.Rb(1,"app-issue-navigation-menu",4),W.Wb(2,"button",5),W.ic("click",(function(){return W.Gc(e),W.kc(2).onClose()})),W.Rb(3,"fa-icon",6),W.Vb(),W.Wb(4,"span",7),W.Wb(5,"span",8),W.Pc(6),W.Vb(),W.Pc(7),W.Vb(),W.Nc(8,Fe,2,1,"button",9),W.Wb(9,"div",10),W.Rb(10,"ngx-md",11),W.Vb(),W.Vb()}if(2&e){const e=W.kc(2);W.Cb(1),W.rc("issueKey",e.issue.key),W.Cb(4),W.rc("ngClass",W.vc(7,$e,e.issue.resolution)),W.Cb(1),W.Rc("",e.issue.key,":"),W.Cb(1),W.Rc(" ",e.issue.title," "),W.Cb(1),W.rc("ngIf",e.issue.description&&e.issue.description.length>0),W.Cb(1),W.rc("ngbCollapse",e.hideDetails),W.Cb(1),W.rc("data",e.issue.description)}}function Ee(e,t){if(1&e){const e=W.Xb();W.Wb(0,"button",23),W.ic("click",(function(){return W.Gc(e),W.kc(3).showHideExtendedFields()})),W.Rb(1,"fa-icon",24),W.Vb()}if(2&e){const e=W.kc(3);W.Cb(1),W.rc("fixedWidth",!0)("icon",e.hideExtendedFields?"angle-double-right":"angle-double-down")}}function Te(e,t){if(1&e&&(W.Wb(0,"span",25),W.Pc(1),W.Vb()),2&e){const e=W.kc(3);W.Cb(1),W.Rc(" ",e.filteredItems.length," ")}}function ze(e,t){if(1&e){const e=W.Xb();W.Wb(0,"button",26),W.ic("click",(function(){W.Gc(e);const t=W.kc(3);return t.tasklistFilterVisible=!t.tasklistFilterVisible})),W.Rb(1,"fa-icon",27),W.Vb()}if(2&e){const e=W.kc(3);W.Cb(1),W.rc("icon",e.tasklistFilterVisible?"chevron-up":"filter")}}function De(e,t){if(1&e&&(W.Wb(0,"option",32),W.Pc(1),W.Vb()),2&e){const e=t.$implicit;W.rc("value",e.key),W.Cb(1),W.Rc(" ",e.key+" ("+e.count+")","")}}function Ge(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",28),W.Wb(1,"select",29),W.ic("ngModelChange",(function(t){return W.Gc(e),W.kc(3).issueTypeFilter=t}))("change",(function(){return W.Gc(e),W.kc(3).onFilterChanged()})),W.Wb(2,"option",30),W.Pc(3,"ISSUE TYPE: All"),W.Vb(),W.Nc(4,De,2,2,"option",31),W.Vb(),W.Vb()}if(2&e){const e=W.kc(3);W.Cb(1),W.rc("ngModel",e.issueTypeFilter),W.Cb(3),W.rc("ngForOf",e.issueTypeStats)}}function Me(e,t){if(1&e&&(W.Wb(0,"option",32),W.Pc(1),W.Vb()),2&e){const e=t.$implicit;W.rc("value",e.key),W.Cb(1),W.Rc(" ",e.key+" ("+e.count+")","")}}function Qe(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",28),W.Wb(1,"select",29),W.ic("ngModelChange",(function(t){return W.Gc(e),W.kc(3).statusFilter=t}))("change",(function(){return W.Gc(e),W.kc(3).onFilterChanged()})),W.Wb(2,"option",30),W.Pc(3,"STATUS: All"),W.Vb(),W.Nc(4,Me,2,2,"option",31),W.Vb(),W.Vb()}if(2&e){const e=W.kc(3);W.Cb(1),W.rc("ngModel",e.statusFilter),W.Cb(3),W.rc("ngForOf",e.statusStats)}}function Ke(e,t){if(1&e){const e=W.Xb();W.Wb(0,"button",41),W.ic("click",(function(){W.Gc(e);const t=W.kc().$implicit;return t.hideExtendedFields=!t.hideExtendedFields})),W.Rb(1,"fa-icon",24),W.Vb()}if(2&e){const e=W.kc().$implicit;W.Cb(1),W.rc("fixedWidth",!0)("icon",e.hideExtendedFields?"angle-right":"angle-down")}}function Ae(e,t){if(1&e&&(W.Wb(0,"tr"),W.Wb(1,"td",45),W.Pc(2),W.Vb(),W.Wb(3,"td",46),W.Pc(4),W.Vb(),W.Vb()),2&e){const e=t.$implicit;W.Cb(2),W.Rc("",e.name,":"),W.Cb(2),W.Rc(" ",e.value," ")}}function Xe(e,t){if(1&e&&(W.Wb(0,"div",42),W.Wb(1,"table",43),W.Nc(2,Ae,5,2,"tr",44),W.Vb(),W.Vb()),2&e){const e=W.kc().$implicit;W.Cb(2),W.rc("ngForOf",e.extendedFields)}}const He=function(e){return{"ml-4":e}};function Ue(e,t){if(1&e&&(W.Wb(0,"div",33),W.Nc(1,Ke,2,2,"button",34),W.Wb(2,"small",35),W.Pc(3),W.Vb(),W.Wb(4,"small",36),W.Wb(5,"span",37),W.Pc(6),W.Vb(),W.Pc(7,": "),W.Wb(8,"span",38),W.Pc(9),W.Vb(),W.Vb(),W.Wb(10,"div",38),W.Wb(11,"div",39),W.Pc(12),W.Vb(),W.Nc(13,Xe,3,1,"div",40),W.Vb(),W.Vb()),2&e){const e=t.$implicit,s=W.kc(3);W.Cb(1),W.rc("ngIf",s.hasExtendedFields),W.Cb(2),W.Qc(e.status),W.Cb(3),W.Qc(e.issueType),W.Cb(2),W.rc("ngClass",W.vc(8,$e,e.resolution)),W.Cb(1),W.Qc(e.key),W.Cb(1),W.rc("ngClass",W.vc(10,He,s.hasExtendedFields)),W.Cb(2),W.Qc(e.title),W.Cb(1),W.rc("ngIf",!e.hideExtendedFields&&e.extendedFields&&e.extendedFields.length>0)}}function Be(e,t){if(1&e&&(W.Wb(0,"div"),W.Wb(1,"div",13),W.Wb(2,"div",14),W.Wb(3,"div",15),W.Nc(4,Ee,2,2,"button",16),W.Wb(5,"b",17),W.Nc(6,Te,2,1,"span",18),W.Pc(7),W.Vb(),W.Nc(8,ze,2,1,"button",19),W.Vb(),W.Wb(9,"div",20),W.Nc(10,Ge,5,2,"div",21),W.Nc(11,Qe,5,2,"div",21),W.Vb(),W.Vb(),W.Nc(12,Ue,14,12,"div",22),W.Vb(),W.Vb()),2&e){const e=W.kc(2);W.Cb(4),W.rc("ngIf",e.hasExtendedFields),W.Cb(2),W.rc("ngIf",e.filteredItems.length>0),W.Cb(1),W.Rc(" record",e.filteredItems.length>1?"s":"",""),W.Cb(1),W.rc("ngIf",e.issueTypeStats&&e.issueTypeStats.length>1||e.statusStats&&e.statusStats.length>1),W.Cb(1),W.rc("ngbCollapse",!e.tasklistFilterVisible),W.Cb(1),W.rc("ngIf",e.issueTypeStats&&e.issueTypeStats.length>1),W.Cb(1),W.rc("ngIf",e.statusStats&&e.statusStats.length>1),W.Cb(1),W.rc("ngForOf",e.filteredItems)}}function qe(e,t){1&e&&(W.Wb(0,"div",47),W.Pc(1," No detail records found. "),W.Vb())}function Je(e,t){if(1&e&&(W.Wb(0,"div"),W.Nc(1,Ne,11,9,"div",1),W.Nc(2,Be,13,8,"div",0),W.Nc(3,qe,2,0,"div",2),W.Vb()),2&e){const e=W.kc();W.Cb(1),W.rc("ngIf",e.showIssue),W.Cb(1),W.rc("ngIf",e.filteredItems&&e.filteredItems.length>0),W.Cb(1),W.rc("ngIf",e.filteredItems&&0===e.filteredItems.length)}}let Ye=(()=>{class e{constructor(e){this.store$=e,this.close=new W.n,this.tasklistFilterVisible=!1,this.childIssueType="",this.hasExtendedFields=!1,this.hideDetails=!0,this.hideExtendedFields=!0,this.statusFilter="all",this.issueTypeFilter="all"}set issue(e){this._issue=e,this.loadDetails()}get issue(){return this._issue}ngOnInit(){this.subtasks$=this.store$.select(e=>e.issue.subtasks).pipe(Object(x.a)(e=>e)).subscribe(e=>{this.subtasks=e,this.subtasks.forEach(e=>e.hideExtendedFields=this.hideExtendedFields),this.onFilterChanged(),this.populateStatistics()})}ngOnDestroy(){this.subtasks$&&this.subtasks$.unsubscribe()}loadDetails(){if(this.subtasks=null,this.issue&&this.issue.projectConfig&&this.issue.projectConfig.subTaskIssueTypes&&this.issue.projectConfig.subTaskIssueTypes.length>0){const e=V.join(V.map(this.issue.projectConfig.subTaskIssueTypes,e=>`'${e.name}'`),","),t=V.spread(V.union)(V.map(this.issue.projectConfig.subTaskIssueTypes,"list"));this.hasExtendedFields=t&&t.length>0,this.store$.dispatch(new b({issueKey:this.issue.key,subTaskIssueTypes:e,extendedFields:t}))}}populateStatistics(){const e=V.mapValues(V.groupBy(V.map(this.subtasks,"status")),e=>e.length);this.statusStats=Object.keys(e).map(t=>({key:t,count:e[t]}));const t=V.mapValues(V.groupBy(V.map(this.subtasks,"issueType")),e=>e.length);this.issueTypeStats=Object.keys(t).map(e=>({key:e,count:t[e]}))}onFilterChanged(){this.filteredItems=V.filter(this.subtasks,e=>!(this.statusFilter&&"all"!==this.statusFilter&&e.status!==this.statusFilter||this.issueTypeFilter&&"all"!==this.issueTypeFilter&&e.issueType!==this.issueTypeFilter)),this.filteredItems=V.orderBy(this.filteredItems,["issueType","status"])}showHideExtendedFields(){this.hideExtendedFields=!this.hideExtendedFields,this.subtasks&&this.subtasks.forEach(e=>e.hideExtendedFields=this.hideExtendedFields)}onClose(){this.close.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(W.Qb(n.h))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-task-list"]],inputs:{issue:"issue",showIssue:"showIssue"},outputs:{close:"close"},decls:1,vars:1,consts:[[4,"ngIf"],["class","alert bg-light pl-0 mb-0","style","font-size:medium;",4,"ngIf"],["class","alert alert-warning mt-2",4,"ngIf"],[1,"alert","bg-light","pl-0","mb-0",2,"font-size","medium"],[1,"float-right",3,"issueKey"],[1,"btn","btn-sm","btn-link","mr-2",3,"click"],["icon","chevron-left","size","lg"],[1,"pt-2"],[1,"mr-1",3,"ngClass"],["class","btn btn-link btn-sm",3,"click",4,"ngIf"],[1,"small","p-4",3,"ngbCollapse"],[3,"data"],[1,"btn","btn-link","btn-sm",3,"click"],[1,"list-group","list-group-flush","list-group-flush-compact"],[1,"list-group-item","list-group-item-light"],[1,"clearfix"],["class","btn btn-sm btn-link text-muted pl-0","title","Show/hide details",3,"click",4,"ngIf"],[1,"mt-1"],["class","mr-1",4,"ngIf"],["class","btn btn-link btn-sm float-right","title","Filters",3,"click",4,"ngIf"],[1,"row","ml-3",3,"ngbCollapse"],["class","col-md-6",4,"ngIf"],["class","list-group-item",4,"ngFor","ngForOf"],["title","Show/hide details",1,"btn","btn-sm","btn-link","text-muted","pl-0",3,"click"],["size","sm",3,"fixedWidth","icon"],[1,"mr-1"],["title","Filters",1,"btn","btn-link","btn-sm","float-right",3,"click"],["size","sm",3,"icon"],[1,"col-md-6"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"list-group-item"],["class","btn btn-link btn-sm text-muted pl-0 pt-0","title","Show/hide details",3,"click",4,"ngIf"],[1,"float-right","badge","badge-light","font-weight-light","text-uppercase"],[1,"text-muted"],[1,"text-uppercase"],[3,"ngClass"],[1,"text-no-wrap"],["style","overflow: auto;","class","alert mt-2 p-0 rounded-0 border-0",4,"ngIf"],["title","Show/hide details",1,"btn","btn-link","btn-sm","text-muted","pl-0","pt-0",3,"click"],[1,"alert","mt-2","p-0","rounded-0","border-0",2,"overflow","auto"],[1,"table","table-small","m-0","border-0","bg-light","extended-fields"],[4,"ngFor","ngForOf"],["width","10%",1,"p-1","text-nowrap","text-muted"],["Markdown","",1,"p-1","text-dark"],[1,"alert","alert-warning","mt-2"]],template:function(e,t){1&e&&W.Nc(0,Je,4,3,"div",0),2&e&&W.rc("ngIf",t.issue)},directives:[i.m,ne.a,F.a,i.k,le.b,X.a,i.l,Z.k,Z.f,Z.i,Z.j,Z.l],encapsulation:2}),e})();function _e(e,t){if(1&e&&(W.Wb(0,"span",20),W.Pc(1),W.Vb()),2&e){const e=t.$implicit;W.Cb(1),W.Qc(e)}}function Ze(e,t){if(1&e&&(W.Wb(0,"div",17),W.Wb(1,"span",18),W.Pc(2,"FIX VERSION: "),W.Vb(),W.Nc(3,_e,2,1,"span",19),W.Vb()),2&e){const e=W.kc(2);W.Cb(3),W.rc("ngForOf",e.issue.fixVersions)}}function et(e,t){if(1&e&&W.Rb(0,"app-extended-fields",21),2&e){const e=W.kc(2);W.rc("issue",e.issue)}}function tt(e,t){if(1&e&&W.Rb(0,"fa-icon",23),2&e){const e=W.kc(3);W.rc("icon",e.allEpicChildrenVisible?"angle-double-down":"angle-double-right")("fixedWidth",!0)}}function st(e,t){1&e&&(W.Wb(0,"div",27),W.Pc(1," There are no issues in this epic "),W.Vb())}const it=function(e){return{"issue-resolved":e}};function nt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",37),W.Rb(1,"app-issue-navigation-menu",38),W.Wb(2,"div",39),W.Wb(3,"div",40),W.Pc(4),W.Vb(),W.Wb(5,"div",41),W.Pc(6),W.lc(7,"date"),W.Vb(),W.Vb(),W.Rb(8,"i",42),W.Wb(9,"a",43),W.ic("click",(function(){W.Gc(e);const s=t.$implicit;return W.kc(8).selectEpicIssue(s)})),W.Pc(10),W.Vb(),W.Pc(11),W.Vb()}if(2&e){const e=t.$implicit;W.Cb(1),W.rc("issueKey",e.key),W.Cb(3),W.Rc(" ",e.status," "),W.Cb(2),W.Rc(" ",W.nc(7,8,e.duedate,"mediumDate")," "),W.Cb(2),W.Eb(e.icon),W.Cb(1),W.rc("ngClass",W.vc(11,it,e.resolution)),W.Cb(1),W.Qc(e.key),W.Cb(1),W.Rc(" ",e.title," ")}}function ct(e,t){if(1&e&&(W.Wb(0,"div",35),W.Nc(1,nt,12,13,"div",36),W.Vb()),2&e){const e=W.kc().$implicit;W.Cb(1),W.rc("ngForOf",e.children)}}const at=function(e){return{"w-100 btn-light ":e}};function ot(e,t){if(1&e&&(W.Wb(0,"div"),W.Wb(1,"div",31),W.Wb(2,"button",32),W.ic("click",(function(){const e=t.$implicit;return e.visible=!e.visible})),W.Rb(3,"fa-icon",23),W.Wb(4,"span",33),W.Pc(5),W.Vb(),W.Vb(),W.Vb(),W.Nc(6,ct,2,1,"div",34),W.Vb()),2&e){const e=t.$implicit;W.Cb(2),W.rc("ngClass",W.vc(6,at,e.visible)),W.Cb(1),W.rc("icon",e.visible?"angle-down":"angle-right")("fixedWidth",!0),W.Cb(2),W.Sc("",e.label," / ",e.total,""),W.Cb(1),W.rc("ngIf",e.visible)}}function rt(e,t){if(1&e&&(W.Wb(0,"div"),W.Nc(1,ot,7,8,"div",28),W.Wb(2,"a",29),W.Pc(3," Storyboard view "),W.Rb(4,"fa-icon",30),W.Vb(),W.Vb()),2&e){const e=W.kc(5);W.Cb(1),W.rc("ngForOf",e.groupedEpicChildren)}}function lt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div"),W.Wb(1,"app-task-list",44),W.ic("close",(function(){return W.Gc(e),W.kc(5).resetSelectedEpicIssue()})),W.Vb(),W.Vb()}if(2&e){const e=W.kc(5);W.Cb(1),W.rc("issue",e.selectedEpicIssue)("showIssue",!0)}}function dt(e,t){if(1&e&&(W.Wb(0,"div"),W.Nc(1,rt,5,1,"div",26),W.Nc(2,lt,2,2,"div",26),W.Vb()),2&e){const e=W.kc(4);W.Cb(1),W.rc("ngIf",!e.selectedEpicIssue),W.Cb(1),W.rc("ngIf",e.selectedEpicIssue)}}function ut(e,t){if(1&e&&(W.Wb(0,"div",24),W.Nc(1,st,2,0,"div",25),W.Nc(2,dt,3,2,"div",26),W.Vb()),2&e){const e=W.kc(3);W.Cb(1),W.rc("ngIf",e.groupedEpicChildren&&0===e.groupedEpicChildren.length),W.Cb(1),W.rc("ngIf",e.groupedEpicChildren&&e.groupedEpicChildren.length>0)}}function bt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"li",13),W.Wb(1,"a",14),W.ic("click",(function(){return W.Gc(e),W.kc(2).toggleAllEpicChildren()})),W.Nc(2,tt,1,2,"fa-icon",22),W.Pc(3," Issues in epic "),W.Vb(),W.Nc(4,ut,3,2,"ng-template",15),W.Vb()}if(2&e){const e=W.kc(2);W.rc("ngbNavItem",1),W.Cb(2),W.rc("ngIf",e.groupedEpicChildren&&e.groupedEpicChildren.length>1)}}function pt(e,t){if(1&e&&W.Rb(0,"fa-icon",23),2&e){const e=W.kc(3);W.rc("icon",e.allRelatedIssuesVisible?"angle-double-down":"angle-double-right")("fixedWidth",!0)}}function ht(e,t){if(1&e&&(W.Wb(0,"span"),W.Pc(1),W.Vb()),2&e){const e=W.kc().$implicit;W.Cb(1),W.Rc(" / ",e.children.length,"")}}function gt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",46),W.Rb(1,"app-issue-navigation-menu",38),W.Wb(2,"div",47),W.Pc(3),W.Vb(),W.Rb(4,"i",42),W.Wb(5,"a",48),W.ic("click",(function(){W.Gc(e);const s=t.$implicit;return W.kc(7).selectRelatedIssue(s)})),W.Pc(6),W.Vb(),W.Pc(7),W.Vb()}if(2&e){const e=t.$implicit;W.rc("title",e.issueType),W.Cb(1),W.rc("issueKey",e.key),W.Cb(2),W.Rc(" ",e.status," "),W.Cb(1),W.Eb(e.icon),W.Cb(2),W.Qc(e.key),W.Cb(1),W.Rc(" ",e.title," ")}}function ft(e,t){if(1&e&&(W.Wb(0,"div",35),W.Nc(1,gt,8,7,"div",45),W.Vb()),2&e){const e=W.kc().$implicit;W.Cb(1),W.rc("ngForOf",e.children)}}function mt(e,t){if(1&e&&(W.Wb(0,"div"),W.Wb(1,"div",31),W.Wb(2,"button",32),W.ic("click",(function(){const e=t.$implicit;return e.visible=!e.visible})),W.Rb(3,"fa-icon",23),W.Wb(4,"span",33),W.Pc(5),W.Nc(6,ht,2,1,"span",26),W.Vb(),W.Vb(),W.Vb(),W.Nc(7,ft,2,1,"div",34),W.Vb()),2&e){const e=t.$implicit;W.Cb(2),W.rc("ngClass",W.vc(6,at,e.visible)),W.Cb(1),W.rc("icon",e.visible?"angle-down":"angle-right")("fixedWidth",!0),W.Cb(2),W.Rc("",e.label," "),W.Cb(1),W.rc("ngIf",e.children),W.Cb(1),W.rc("ngIf",e.visible)}}function yt(e,t){if(1&e&&(W.Wb(0,"div"),W.Nc(1,mt,8,8,"div",28),W.Vb()),2&e){const e=W.kc(4);W.Cb(1),W.rc("ngForOf",e.groupedRelatedLinks)}}function It(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div"),W.Wb(1,"app-task-list",44),W.ic("close",(function(){return W.Gc(e),W.kc(4).resetSelectedRelatedIssue()})),W.Vb(),W.Vb()}if(2&e){const e=W.kc(4);W.Cb(1),W.rc("issue",e.selectedRelatedIssue)("showIssue",!0)}}function kt(e,t){if(1&e&&(W.Wb(0,"div",24),W.Nc(1,yt,2,1,"div",26),W.Nc(2,It,2,2,"div",26),W.Vb()),2&e){const e=W.kc(3);W.Cb(1),W.rc("ngIf",!e.selectedRelatedIssue),W.Cb(1),W.rc("ngIf",e.selectedRelatedIssue)}}function Ct(e,t){if(1&e){const e=W.Xb();W.Wb(0,"li",13),W.Wb(1,"a",14),W.ic("click",(function(){return W.Gc(e),W.kc(2).toggleAllRelatedIssues()})),W.Nc(2,pt,1,2,"fa-icon",22),W.Pc(3," Related "),W.Vb(),W.Nc(4,kt,3,2,"ng-template",15),W.Vb()}if(2&e){const e=W.kc(2);W.rc("ngbNavItem",2),W.Cb(2),W.rc("ngIf",e.groupedRelatedLinks.length>1)}}function vt(e,t){if(1&e&&(W.Wb(0,"div",24),W.Rb(1,"app-task-list",49),W.Vb()),2&e){const e=W.kc(2);W.Cb(1),W.rc("issue",e.selectedIssue)("showIssue",!1)}}const jt=function(e){return{small:e}};function Ot(e,t){if(1&e){const e=W.Xb();W.Wb(0,"as-split",1),W.ic("gutterDblClick",(function(){return W.Gc(e),W.kc().toggleFullscreen()}))("dragEnd",(function(t){return W.Gc(e),W.kc().dragEnd(t)})),W.Wb(1,"as-split-area",2),W.Wb(2,"div",3),W.Rb(3,"ngx-md",4),W.Nc(4,Ze,4,1,"div",5),W.Nc(5,et,1,1,"app-extended-fields",6),W.Vb(),W.Vb(),W.Wb(6,"as-split-area",7),W.Wb(7,"button",8),W.ic("click",(function(){return W.Gc(e),W.kc().toggleFullscreen()})),W.Rb(8,"fa-icon",9),W.Vb(),W.Wb(9,"ul",10,11),W.ic("activeIdChange",(function(t){return W.Gc(e),W.kc().selectedTab=t})),W.Nc(11,bt,5,2,"li",12),W.Nc(12,Ct,5,2,"li",12),W.Wb(13,"li",13),W.Wb(14,"a",14),W.ic("click",(function(){return W.Gc(e),W.kc().reloadSubtasks()})),W.Pc(15,"Task breakup"),W.Vb(),W.Nc(16,vt,2,2,"ng-template",15),W.Vb(),W.Vb(),W.Rb(17,"div",16),W.Vb(),W.Vb()}if(2&e){const e=W.Ec(10),t=W.kc();W.Cb(1),W.rc("size",t.columns[0].size),W.Cb(2),W.rc("data",t.issue.description),W.Cb(1),W.rc("ngIf",t.issue.fixVersions&&t.issue.fixVersions.length>0),W.Cb(1),W.rc("ngIf",t.leftPaneSize>0),W.Cb(1),W.rc("size",t.columns[1].size)("ngClass",W.vc(14,jt,0!==t.columns[0].size)),W.Cb(2),W.rc("icon",0===t.columns[0].size?"compress":"expand")("fixedWidth",!0),W.Cb(1),W.rc("activeId",t.selectedTab)("destroyOnHide",!1),W.Cb(2),W.rc("ngIf",t.issue.issueType===t.localNodeType.Epic),W.Cb(1),W.rc("ngIf",t.groupedRelatedLinks&&t.groupedRelatedLinks.length>0),W.Cb(1),W.rc("ngbNavItem",3),W.Cb(4),W.rc("ngbNavOutlet",e)}}let Vt=(()=>{class e{constructor(e){this.store$=e,this.allRelatedIssuesVisible=!0,this.allEpicChildrenVisible=!0,this.selectedTab=1,this.leftPaneSize=60,this.columns=[{visible:!0,size:60},{visible:!0,size:40}],this.resetSelectedRelatedIssue=()=>this.selectedRelatedIssue=null,this.resetSelectedEpicIssue=()=>this.selectedEpicIssue=null,this.localNodeType=j.a}ngOnInit(){this.selectedIssue$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(x.a)(e=>e)).subscribe(e=>{this.issue=e,this.selectedRelatedIssue=null,this.selectedEpicIssue=null,this.issue.relatedLinksLoaded&&!this.groupedRelatedLinks&&(this.groupedRelatedLinks=Object(a.a)(this.issue.relatedLinks,"linkType"),this.issue.relatedLinksCount=this.groupedRelatedLinks.length,this.selectedTab=this.groupedRelatedLinks.length>0?2:3,this.toggleAllRelatedIssues()),this.issue.issueType===j.a.Epic&&this.issue.epicChildrenLoaded&&this.groupEpicChildren("status")})}ngOnDestroy(){this.epicChildrenLoaded$&&this.epicChildrenLoaded$.unsubscribe(),this.selectedIssue$&&this.selectedIssue$.unsubscribe()}dragEnd(e){this.adjustPaneSize(e.sizes[0])}adjustPaneSize(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?60:0)}selectRelatedIssue(e){this.selectedRelatedIssue=e,this.selectedRelatedIssue.projectConfig=this.issue.projectConfig}selectEpicIssue(e){this.selectedEpicIssue=e,this.selectedEpicIssue.projectConfig=this.issue.projectConfig}groupEpicChildren(e){if(this.selectedTab=1,this.issue&&!this.groupedEpicChildren){const t=this.issue.epicChildren;t&&t.length>0&&(this.groupedEpicChildren=Object(a.a)(t,e)),this.toggleAllEpicChildren()}}toggleAllEpicChildren(){this.selectedIssue=null,this.allEpicChildrenVisible=!this.allEpicChildrenVisible,this.groupedEpicChildren&&this.groupedEpicChildren.forEach(e=>e.visible=1===this.groupedEpicChildren.length||this.allEpicChildrenVisible)}toggleAllRelatedIssues(){this.selectedIssue=null,this.allRelatedIssuesVisible=!this.allRelatedIssuesVisible,this.groupedRelatedLinks&&this.groupedRelatedLinks.length>0&&this.groupedRelatedLinks.forEach(e=>e.visible=1===this.groupedRelatedLinks.length||this.allRelatedIssuesVisible)}reloadSubtasks(){this.selectedEpicIssue=null,this.selectedRelatedIssue=null,this.selectedIssue=this.issue}}return e.\u0275fac=function(t){return new(t||e)(W.Qb(n.h))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-workbench"]],decls:2,vars:1,consts:[["direction","horizontal",3,"gutterDblClick","dragEnd",4,"ngIf"],["direction","horizontal",3,"gutterDblClick","dragEnd"],[3,"size"],[1,"alert",2,"overflow","auto"],[3,"data"],["class","alert bg-light small mt-3 mb-3",4,"ngIf"],[3,"issue",4,"ngIf"],[3,"size","ngClass"],["title","expand/collapse pane",1,"btn","btn-sm","btn-link","text-muted","float-right","mt-2",3,"click"],[3,"icon","fixedWidth"],["ngbNav","",1,"nav-tabs","mt-2",3,"activeId","destroyOnHide","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngIf"],[3,"ngbNavItem"],["ngbNavLink","",3,"click"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"alert","bg-light","small","mt-3","mb-3"],[1,"text-muted"],["class","ml-1",4,"ngFor","ngForOf"],[1,"ml-1"],[3,"issue"],["size","sm",3,"icon","fixedWidth",4,"ngIf"],["size","sm",3,"icon","fixedWidth"],[1,"pl-2","pr-2","pb-2"],["class","alert alert-warning",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-warning"],[4,"ngFor","ngForOf"],["routerLink","../storyboard",1,"btn","btn-light","btn-sm","text-primary","mt-4"],["icon","chevron-right","size","sm"],[1,"text-muted","text-uppercase","mt-1","mb-1"],[1,"btn","btn-sm","btn-link","text-left","text-dark",3,"ngClass","click"],[1,"ml-2"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["class","ml-3 p-1 border-bottom text-no-wrap",4,"ngFor","ngForOf"],[1,"ml-3","p-1","border-bottom","text-no-wrap"],[1,"float-right",3,"issueKey"],[1,"text-uppercase","float-right","mt-1"],["title","status",1,"badge","badge-light","ml-2","font-weight-normal"],["title","Due date",1,"badge","badge-light","font-weight-normal"],[1,"mr-1"],[1,"text-primary","mr-2",3,"ngClass","click"],[3,"issue","showIssue","close"],["class","ml-3 p-1 border-bottom text-no-wrap",3,"title",4,"ngFor","ngForOf"],[1,"ml-3","p-1","border-bottom","text-no-wrap",3,"title"],[1,"badge","badge-light","font-weight-normal","text-uppercase","float-right","mt-1"],[1,"text-primary","mr-2",3,"click"],[3,"issue","showIssue"]],template:function(e,t){1&e&&(W.Wb(0,"div"),W.Nc(1,Ot,18,16,"as-split",0),W.Vb()),2&e&&(W.Cb(1),W.rc("ngIf",t.issue))},directives:[i.m,R.c,R.b,X.a,i.k,F.a,le.j,le.l,le.m,le.k,le.o,i.l,Re,$.f,ne.a,Ye],pipes:[i.e],encapsulation:2}),e})();var Lt=s("uAqM"),St=s("Ewkv"),wt=s("lVkt"),Wt=s("/RsI"),Pt=s("NGyg");function xt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div"),W.Wb(1,"input",15),W.ic("ngModelChange",(function(t){return W.Gc(e),W.kc(3).includeEpicChildren=t}))("change",(function(){return W.Gc(e),W.kc(3).plotIssuesOnStoryboard()})),W.Vb(),W.Wb(2,"b",16),W.Pc(3),W.Vb(),W.Pc(4," issues in this epic "),W.Vb()}if(2&e){const e=W.kc(3);W.Cb(1),W.rc("ngModel",e.includeEpicChildren),W.Cb(2),W.Qc(e.storyboardItem.epicChildren.length)}}function Rt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div"),W.Wb(1,"input",15),W.ic("ngModelChange",(function(t){return W.Gc(e),W.kc(3).includeRelatedIssues=t}))("change",(function(){return W.Gc(e),W.kc(3).plotIssuesOnStoryboard()})),W.Vb(),W.Wb(2,"b",16),W.Pc(3),W.Vb(),W.Pc(4," related issues "),W.Vb()}if(2&e){const e=W.kc(3);W.Cb(1),W.rc("ngModel",e.includeRelatedIssues),W.Cb(2),W.Qc(e.storyboardItem.relatedLinks.length)}}function Ft(e,t){if(1&e&&(W.Ub(0),W.Nc(1,xt,5,2,"div",0),W.Nc(2,Rt,5,2,"div",0),W.Tb()),2&e){const e=W.kc(2);W.Cb(1),W.rc("ngIf",e.storyboardItem.epicChildren&&e.storyboardItem.epicChildren.length>0),W.Cb(1),W.rc("ngIf",e.storyboardItem.relatedLinks&&e.storyboardItem.relatedLinks.length>0)}}function $t(e,t){if(1&e&&(W.Wb(0,"div",18),W.Wb(1,"span",19),W.Pc(2),W.Vb(),W.Pc(3," unplanned issues. "),W.Vb()),2&e){const e=W.kc(3);W.Cb(2),W.Qc(e.storyboardItem.metadata.backlogCount)}}function Nt(e,t){if(1&e&&(W.Wb(0,"div"),W.Wb(1,"span",19),W.Pc(2),W.Vb(),W.Pc(3),W.Vb()),2&e){const e=W.kc(3);W.Cb(2),W.Qc(e.storyboardItem.metadata.emptyRecordCount),W.Cb(1),W.Rc(" issues with unassigned ",e.groupByColumn,". ")}}function Et(e,t){if(1&e&&(W.Ub(0),W.Nc(1,$t,4,1,"div",17),W.Nc(2,Nt,4,2,"div",0),W.Tb()),2&e){const e=W.kc(2);W.Cb(1),W.rc("ngIf",e.storyboardItem.metadata.backlogCount>0),W.Cb(1),W.rc("ngIf",e.storyboardItem.metadata.emptyRecordCount>0)}}function Tt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"p-multiSelect",20),W.ic("ngModelChange",(function(t){return W.Gc(e),W.kc(2).selectedStatuses=t}))("onChange",(function(t){return W.Gc(e),W.kc(2).onSelectedStatusChange(t)})),W.Vb()}if(2&e){const e=W.kc(2);W.rc("options",e.statusLookup)("ngModel",e.selectedStatuses)}}const zt=function(){return["far","chart-bar"]};function Dt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"button",21),W.ic("click",(function(){return W.Gc(e),W.kc(2).showStatistics=!0})),W.Rb(1,"fa-icon",22),W.Vb()}2&e&&(W.Cb(1),W.rc("icon",W.uc(1,zt)))}function Gt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"p-dialog",23),W.ic("visibleChange",(function(t){return W.Gc(e),W.kc(2).showStatistics=t})),W.Rb(1,"app-statistics",24),W.Vb()}if(2&e){const e=W.kc(2);W.rc("header",e.storyboardItem.statistics.title)("dismissableMask",!0)("modal",!0)("visible",e.showStatistics),W.Cb(1),W.rc("groupByColumn",e.groupByColumn)("statistics",e.storyboardItem.statistics)}}function Mt(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div"),W.Wb(1,"div",1),W.Wb(2,"div",2),W.Wb(3,"div",3),W.Wb(4,"select",4),W.ic("ngModelChange",(function(t){return W.Gc(e),W.kc().groupByColumn=t}))("change",(function(){return W.Gc(e),W.kc().onGroupByColumnChanged()})),W.Wb(5,"option",5),W.Pc(6,"Components"),W.Vb(),W.Wb(7,"option",6),W.Pc(8,"Labels"),W.Vb(),W.Vb(),W.Vb(),W.Wb(9,"div",7),W.Nc(10,Ft,3,2,"ng-container",0),W.Vb(),W.Wb(11,"div",8),W.Nc(12,Et,3,2,"ng-container",0),W.Vb(),W.Wb(13,"div",9),W.Nc(14,Tt,1,2,"p-multiSelect",10),W.Vb(),W.Wb(15,"div",11),W.Nc(16,Dt,2,2,"button",12),W.Vb(),W.Vb(),W.Vb(),W.Wb(17,"app-storyboard-renderer",13),W.ic("fieldValueChange",(function(t){return W.Gc(e),W.kc().onFieldValueChanged(t)})),W.Vb(),W.Nc(18,Gt,2,6,"p-dialog",14),W.Vb()}if(2&e){const e=W.kc();W.Cb(4),W.rc("ngModel",e.groupByColumn),W.Cb(6),W.rc("ngIf",e.storyboardItem.epicChildren&&e.storyboardItem.epicChildren.length>0||e.storyboardItem.relatedLinks&&e.storyboardItem.relatedLinks.length>0),W.Cb(2),W.rc("ngIf",e.storyboardItem.metadata&&(e.storyboardItem.metadata.backlogCount>0||e.storyboardItem.metadata.emptyRecordCount>0)),W.Cb(2),W.rc("ngIf",e.statusLookup&&e.statusLookup.length>0),W.Cb(2),W.rc("ngIf",e.storyboardItem.epicChildren&&e.storyboardItem.epicChildren.length>0||e.storyboardItem.relatedLinks&&e.storyboardItem.relatedLinks.length>0),W.Cb(1),W.rc("groupByColumn",e.groupByColumn)("storyboardItem",e.storyboardItem),W.Cb(1),W.rc("ngIf",e.storyboardItem&&e.storyboardItem.statistics)}}let Qt=(()=>{class e{constructor(e){this.store$=e,this.selectedStatuses=[],this.statusLookup=[],this.includeRelatedIssues=!1,this.relatedIssuesIncluded=!1,this.includeEpicChildren=!1,this.epicChildrenIncluded=!1,this.showStatistics=!1,this.groupByColumn="components",this.filterByStatus=(e,t)=>t&&t.length>0?V.filter(e,e=>void 0!==V.find(t,t=>t===e.status)):e}ngOnInit(){this.selectedItem$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(x.a)(e=>e)).subscribe(e=>{this.storyboardItem=V.pick(e,V.union(j.r,["relatedLinks","epicChildren"])),e.issueType===j.a.Epic?this.includeEpicChildren=!0:this.includeRelatedIssues=!0,this.plotIssuesOnStoryboard()})}ngOnDestroy(){this.selectedItem$&&this.selectedItem$.unsubscribe()}onGroupByColumnChanged(){this.plotIssuesOnStoryboard()}plotIssuesOnStoryboard(){this.storyboardItem.children=[],this.storyboardItem.metadata=Object(Lt.b)(this.groupByColumn);const e=V.map(this.selectedStatuses,"key");if(this.includeEpicChildren&&this.storyboardItem.epicChildren&&this.storyboardItem.epicChildren.length>0){this.epicChildrenIncluded=!0;const t=this.filterByStatus(this.storyboardItem.epicChildren,e);this.storyboardItem.children=V.union(this.storyboardItem.children,t),Object(Lt.c)(this.storyboardItem.metadata,Object(Lt.a)(t,this.groupByColumn),this.groupByColumn)}if(this.includeRelatedIssues&&this.storyboardItem.relatedLinks&&this.storyboardItem.relatedLinks.length>0){this.relatedIssuesIncluded=!0;const t=this.filterByStatus(this.storyboardItem.relatedLinks,e);this.storyboardItem.children=V.union(this.storyboardItem.children,t),Object(Lt.c)(this.storyboardItem.metadata,Object(Lt.a)(t,this.groupByColumn),this.groupByColumn)}this.storyboardItem.statistics=Object(Lt.d)(this.storyboardItem.metadata,this.storyboardItem.children,"Statistics",this.groupByColumn),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}onFieldValueChanged(e){this.store$.dispatch(new v(e))}onSelectedStatusChange(e){this.plotIssuesOnStoryboard()}}return e.\u0275fac=function(t){return new(t||e)(W.Qb(n.h))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-storyboard"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"pl-3","pt-2","pb-2","pr-2"],[1,"row","small"],[1,"col-md-2","col-lg-2","pt-1"],[1,"form-control","form-control-sm",2,"width","150px",3,"ngModel","ngModelChange","change"],["value","components"],["value","labels"],[1,"col-md-3","offset-lg-1","col-lg-2"],[1,"col-md-3","col-lg-4","text-truncate"],[1,"col-md-3","col-lg-2","pt-1"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1","text-right"],["class","btn btn-link pr-0",3,"click",4,"ngIf"],[3,"groupByColumn","storyboardItem","fieldValueChange"],["position","right","class","bg-light",3,"header","dismissableMask","modal","visible","visibleChange",4,"ngIf"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"badge","badge-success","ml-1"],["class","mr-4",4,"ngIf"],[1,"mr-4"],[1,"badge","badge-warning"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],[1,"btn","btn-link","pr-0",3,"click"],["size","lg",3,"icon"],["position","right",1,"bg-light",3,"header","dismissableMask","modal","visible","visibleChange"],[3,"groupByColumn","statistics"]],template:function(e,t){1&e&&W.Nc(0,Mt,19,8,"div",0),2&e&&W.rc("ngIf",t.storyboardItem)},directives:[i.m,Z.k,Z.f,Z.i,Z.j,Z.l,St.a,Z.a,wt.a,F.a,Wt.a,Pt.a],encapsulation:2}),e})();var Kt=s("snw9"),At=s("mrSG"),Xt=s("eIep"),Ht=s("JIr8"),Ut=s("vkgz"),Bt=s("LRne"),qt=s("F2Ol"),Jt=s("yVuU");let Yt=(()=>{class e{constructor(e,t,s){this.actions$=e,this.jiraService=t,this.cachingService=s,this.loadPrimaryIssue=this.actions$.pipe(Object(Kt.d)(o.LoadPrimaryIssue),Object(Xt.a)(e=>this.getIssueDetails(e.payload).pipe(Object(te.a)(e=>({type:o.LoadPrimaryIssueSuccess,payload:e})),Object(Ht.a)(()=>Object(Bt.a)({type:o.LoadPrimaryIssueFailed}))))),this.loadPrimaryIssueEpicChildren=this.actions$.pipe(Object(Kt.d)(o.LoadPrimaryIssueEpicChildren),Object(Xt.a)(e=>this.jiraService.loadEpicChildren$(e.payload,0,100,j.l).pipe(Object(te.a)(e=>({type:o.LoadPrimaryIssueEpicChildrenSuccess,payload:e})),Object(Ht.a)(()=>Object(Bt.a)({type:o.LoadPrimaryIssueEpicChildrenFailed}))))),this.loadPrimaryIssueRelatedLinks=this.actions$.pipe(Object(Kt.d)(o.LoadPrimaryIssueRelatedLinks),Object(Xt.a)(e=>this.jiraService.executeJql(`key in (${V.join(e.payload,",")})`,0,100,j.l,"linked-issues.json").pipe(Object(te.a)(e=>({type:o.LoadPrimaryIssueRelatedLinksSuccess,payload:e})),Object(Ht.a)(()=>Object(Bt.a)({type:o.LoadPrimaryIssueRelatedLinksFailed}))))),this.loadSelectedIssue=this.actions$.pipe(Object(Kt.d)(o.LoadSelectedIssue),Object(Xt.a)(e=>this.getIssueDetails(e.payload).pipe(Object(te.a)(e=>({type:o.LoadSelectedIssueSuccess,payload:e})),Object(Ht.a)(()=>Object(Bt.a)({type:o.LoadSelectedIssueFailed}))))),this.loadSelectedIssueEpicChildren=this.actions$.pipe(Object(Kt.d)(o.LoadSelectedIssueEpicChildren),Object(Xt.a)(e=>this.jiraService.executeJql(`'epic Link'=${e.payload} order by duedate`,0,100,j.l,"epic-children.json").pipe(Object(te.a)(e=>({type:o.LoadSelectedIssueEpicChildrenSuccess,payload:e})),Object(Ht.a)(()=>Object(Bt.a)({type:o.LoadSelectedIssueEpicChildrenFailed}))))),this.loadSelectedIssueRelatedLinks=this.actions$.pipe(Object(Kt.d)(o.LoadSelectedIssueRelatedLinks),Object(Xt.a)(e=>this.jiraService.executeJql(`key in (${V.join(e.payload,",")})  order by duedate`,0,100,j.l,"linked-issues.json").pipe(Object(te.a)(e=>({type:o.LoadSelectedIssueRelatedLinksSuccess,payload:e})),Object(Ht.a)(()=>Object(Bt.a)({type:o.LoadSelectedIssueRelatedLinksFailed}))))),this.loadSubtasks=this.actions$.pipe(Object(Kt.d)(o.LoadSubtasks),Object(Xt.a)(e=>this.jiraService.executeJql(`issuetype in (${e.payload.subTaskIssueTypes}) AND parent=${e.payload.issueKey}`,0,100,V.map(e.payload.extendedFields,"id"),"test-cases.json").pipe(Object(te.a)(t=>({type:o.LoadSubtasksSuccess,payload:{result:t,extendedFields:e.payload.extendedFields}})),Object(Ht.a)(()=>Object(Bt.a)({type:o.LoadSubtasksFailed}))))),this.loadProjectConfig=this.actions$.pipe(Object(Kt.d)(o.LoadProjectDetails),Object(Xt.a)(e=>this.jiraService.getProjectDetails(e.payload).pipe(Object(te.a)(e=>{let t=null;return e&&e.length>0&&(t=e[0],t.customFields=V.sortBy(V.map(V.filter(e[1],{custom:!0}),e=>V.pick(e,["id","name"])),["name"])),{type:o.LoadProjectDetailsSuccess,payload:t}}),Object(Ht.a)(()=>Object(Bt.a)({type:o.LoadProjectDetailsFailed}))))),this.updateFixVersions=this.actions$.pipe(Object(Kt.d)(o.UpdateFieldValue),Object(Xt.a)(e=>this.jiraService.updateFieldValue$(e.payload).pipe(Object(te.a)(()=>({type:o.UpdateFieldValueSuccess,payload:e.payload})),Object(Ht.a)(()=>Object(Bt.a)({type:o.UpdateFieldValueFailed}))))),this.updateOrganizationTitle=this.actions$.pipe(Object(Kt.d)(o.UpdateOrganizationTitle),Object(Ut.a)(e=>this.cachingService.setOrganization(e.payload)),Object(Xt.a)(e=>Object(Bt.a)({type:o.UpdateOrganizationTitleSuccess,payload:e.payload})))}getIssueDetails(e){return this.jiraService.getIssueDetails(e.issue,V.map(e.extendedFields,"id")).pipe(Object(te.a)(t=>{const s={issue:t,extendedFields:e.extendedFields,organization:this.cachingService.getOrganization(),projectConfig:null};return t&&t.fields&&t.fields.project&&t.fields.project.key&&t.fields.project.key.length>0&&(s.projectConfig=this.cachingService.getProjectDetails(t.fields.project.key)),s}))}}return e.\u0275fac=function(t){return new(t||e)(W.ec(Kt.a),W.ec(qt.b),W.ec(Jt.a))},e.\u0275prov=W.Mb({token:e,factory:e.\u0275fac}),Object(At.b)([Object(Kt.b)()],e.prototype,"loadPrimaryIssue",void 0),Object(At.b)([Object(Kt.b)()],e.prototype,"loadPrimaryIssueEpicChildren",void 0),Object(At.b)([Object(Kt.b)()],e.prototype,"loadPrimaryIssueRelatedLinks",void 0),Object(At.b)([Object(Kt.b)()],e.prototype,"loadSelectedIssue",void 0),Object(At.b)([Object(Kt.b)()],e.prototype,"loadSelectedIssueEpicChildren",void 0),Object(At.b)([Object(Kt.b)()],e.prototype,"loadSelectedIssueRelatedLinks",void 0),Object(At.b)([Object(Kt.b)()],e.prototype,"loadSubtasks",void 0),Object(At.b)([Object(Kt.b)()],e.prototype,"loadProjectConfig",void 0),Object(At.b)([Object(Kt.b)()],e.prototype,"updateFixVersions",void 0),Object(At.b)([Object(Kt.b)()],e.prototype,"updateOrganizationTitle",void 0),e})();var _t=s("AytR"),Zt=s("SYT+"),es=s("LvOF"),ts=s("jhN1");let ss=(()=>{class e{constructor(e,t,s,i){this.router=e,this.activatedRoute=t,this.titleService=s,this.store$=i,this.extendedFields=[],this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}ngOnInit(){this.reloadOnChange(),this.store$.select(e=>e.app.organization).pipe(Object(x.a)(e=>e)).subscribe(e=>this.store$.dispatch(new C(e)));const e=this.activatedRoute.params.pipe(Object(x.a)(e=>e&&e.issue&&e.issue.length>0),Object(te.a)(e=>e.issue)),t=this.store$.select(e=>e.app.projects);this.combined$=Object(P.a)(e,t).subscribe(([e,t])=>{this.titleService.setTitle(`${_t.a.appTitle}: ${e}`),this.extendedFields=t?Object(es.c)(t):[],this.store$.dispatch(new r({issue:e,extendedFields:this.extendedFields}))}),this.primaryIssue$=this.store$.select(e=>e.issue.primaryIssue).pipe(Object(x.a)(e=>e)).subscribe(e=>{this.primaryIssue=e,this.populateProjectConfig(),this.populateEpicChildren(),this.populateRelatedLinks(),this.buildTree()})}reloadOnChange(){this.currentProject$=this.store$.select(e=>e.app.currentProject).pipe(Object(x.a)(()=>this.primaryIssue)).subscribe(e=>{if(this.primaryIssue&&e){const t=V.find(e.standardIssueTypes,{name:this.primaryIssue.issueType});if(t){const s=V.union(t.list,V.filter(e.customFields,{name:"Epic Link"}));e.startdate&&s.push(e.startdate);const i=[];s.forEach(e=>{!V.find(this.extendedFields,{id:e.id})&&i.push(e)}),i.length>0&&(this.extendedFields=V.clone(s),this.store$.dispatch(new r({issue:this.primaryIssue.key,extendedFields:this.extendedFields})))}}}),this.updatedField$=this.store$.select(e=>e.issue.updatedField).pipe(Object(x.a)(e=>e&&this.primaryIssue)).subscribe(e=>{this.store$.dispatch(new r({issue:this.primaryIssue.key,extendedFields:this.extendedFields}))})}ngOnDestroy(){this.currentProject$&&this.currentProject$.unsubscribe(),this.updatedField$&&this.updatedField$.unsubscribe(),this.combined$&&this.combined$.unsubscribe(),this.primaryIssue$&&this.primaryIssue$.unsubscribe()}buildTree(){if(!0===this.primaryIssue.epicChildrenLoaded&&!0===this.primaryIssue.relatedLinksLoaded&&!0===this.primaryIssue.projectConfigLoaded){const e=Object(j.j)(this.primaryIssue.organization);let t=Object(j.k)(this.primaryIssue.projectConfig),s=this.primaryIssue.projectConfig.hierarchy?this.prepareHierarchyNodes():null;t=Object(j.c)(e,t),s=Object(j.c)(t,s),this.primaryIssue.expanded=!0,this.rootNode=Object(j.c)(s,this.primaryIssue),this.store$.dispatch(new u(this.rootNode))}}prepareHierarchyNodes(){const e={children:[]};if(this.primaryIssue.projectConfig.hierarchy.forEach(t=>{const s=V.find(this.primaryIssue.extendedFields,{id:t.id});s&&s.extendedValue&&s.extendedValue.length>0&&e.children.push(Object(j.i)(s))}),e.children.length>0){const t=e.children[0];return Object(j.f)(e.children,t),t}return null}populateEpicChildren(){this.primaryIssue.issueType===j.a.Epic?this.primaryIssue.epicChildrenLoaded?!V.find(this.primaryIssue.children,{issueType:j.a.EpicChildren})&&this.primaryIssue.epicChildren&&this.primaryIssue.epicChildren.length>0&&(this.primaryIssue.children=this.primaryIssue.children||[],this.primaryIssue.children.unshift(Object(j.h)(this.primaryIssue)),this.primaryIssue.expanded=!0):this.primaryIssue.epicChildrenLoading||this.store$.dispatch(new l(this.primaryIssue.key)):this.primaryIssue.epicChildrenLoaded=!0}populateRelatedLinks(){if(this.primaryIssue&&this.primaryIssue.relatedLinks&&this.primaryIssue.relatedLinks.length>0)if(this.primaryIssue.relatedLinksLoaded){if(0===V.filter(this.primaryIssue.children,{issueType:j.a.RelatedLink}).length){const e=Object(j.e)(this.primaryIssue.relatedLinks,this.primaryIssue.key);e&&(this.primaryIssue.children=this.primaryIssue.children||[],e.forEach(e=>this.primaryIssue.children.push(e)))}}else!this.primaryIssue.relatedLinksLoading&&this.primaryIssue.relatedLinks&&this.primaryIssue.relatedLinks.length>0&&this.store$.dispatch(new d(V.map(this.primaryIssue.relatedLinks,"key")));else this.primaryIssue.relatedLinksLoaded=!0}populateProjectConfig(){this.primaryIssue.projectConfigLoaded?this.primaryIssue.projectConfig&&this.store$.dispatch(new Zt.n(this.primaryIssue.projectConfig)):this.primaryIssue.project&&this.primaryIssue.project.key&&this.primaryIssue.project.key.length>0&&!this.primaryIssue.projectConfigLoading&&this.store$.dispatch(new p(this.primaryIssue.project.key))}nodeContextMenuSelect(e){console.log(e)}dragEnd(e){this.adjustPaneSize(e.sizes[0])}adjustPaneSize(e){this.leftPaneSize=e,this.columns[0].size=e,this.columns[1].size=100-e}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}return e.\u0275fac=function(t){return new(t||e)(W.Qb($.d),W.Qb($.a),W.Qb(ts.c),W.Qb(n.h))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-primary-issue-container"]],decls:2,vars:0,consts:[[1,"main-container"]],template:function(e,t){1&e&&(W.Wb(0,"div",0),W.Rb(1,"router-outlet"),W.Vb())},directives:[$.h],encapsulation:2}),e})();var is=s("yNBN"),ns=s("L6qz");function cs(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div"),W.Wb(1,"div",6),W.Rb(2,"fa-icon",7),W.Pc(3," Connection details are incomplete. "),W.Vb(),W.Wb(4,"a",8),W.ic("click",(function(){return W.Gc(e),W.kc(2).onShowSetup()})),W.Pc(5," Enter credentials "),W.Rb(6,"fa-icon",9),W.Vb(),W.Vb()}}const as=function(){return["fab","jira"]},os=function(){return{mode:"import"}};function rs(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div"),W.Wb(1,"div",10),W.Rb(2,"fa-icon",11),W.Pc(3," Please provide Jira connection details "),W.Vb(),W.Wb(4,"a",12),W.ic("click",(function(){return W.Gc(e),W.kc(2).onShowSetup()})),W.Pc(5," Manual setup "),W.Rb(6,"fa-icon",13),W.Vb(),W.Wb(7,"a",14),W.Rb(8,"fa-icon",15),W.Pc(9," Import config file "),W.Vb(),W.Vb()}2&e&&(W.Cb(2),W.rc("icon",W.uc(2,as)),W.Cb(5),W.rc("queryParams",W.uc(3,os)))}function ls(e,t){if(1&e&&(W.Wb(0,"div",2),W.Wb(1,"div",3),W.Nc(2,cs,7,0,"div",1),W.Nc(3,rs,10,4,"div",1),W.Vb(),W.Wb(4,"div",4),W.Wb(5,"ol"),W.Wb(6,"li"),W.Pc(7,"Setup the jira connection details"),W.Vb(),W.Wb(8,"li"),W.Pc(9,"Enter the Jira issue key"),W.Vb(),W.Wb(10,"li"),W.Pc(11,"Track purpose of issue"),W.Vb(),W.Vb(),W.Rb(12,"app-help-link",5),W.Vb(),W.Vb()),2&e){const e=W.kc();W.Cb(2),W.rc("ngIf",e.connectionDetails&&e.connectionDetails.serverUrl&&!e.connectionDetails.verified),W.Cb(1),W.rc("ngIf",!e.connectionDetails||!e.connectionDetails.serverUrl)}}function ds(e,t){1&e&&(W.Wb(0,"div"),W.Rb(1,"router-outlet"),W.Vb())}let us=(()=>{class e{constructor(e,t){this.messageService=e,this.store$=t,this.isOnlineMode=!1}ngOnInit(){this.store$.select(e=>e.app.mode).subscribe(e=>this.isOnlineMode=e&&e===Zt.e.Online),this.connectionDetailsSubscription=this.store$.select(e=>e.app.connectionDetails).subscribe(e=>this.connectionDetails=e)}ngOnDestroy(){this.connectionDetailsSubscription&&this.connectionDetailsSubscription.unsubscribe()}onShowSetup(){this.store$.dispatch(new Zt.k(!0))}}return e.\u0275fac=function(t){return new(t||e)(W.Qb(E.c),W.Qb(n.h))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-issue-home"]],decls:2,vars:2,consts:[["class","center-text custom-shadow p-3 bg-light",4,"ngIf"],[4,"ngIf"],[1,"center-text","custom-shadow","p-3","bg-light"],[1,"alert","bg-white"],[1,"text-left"],["tag","setup",1,"float-right"],[1,"mb-2"],["icon","exclamation-triangle",1,"text-warning"],[1,"btn","btn-sm","btn-primary","text-white","mt-2",3,"click"],["icon","chevron-right"],[1,"mb-3","alert-warning","p-2","rounded"],[1,"text-primary",3,"icon"],[1,"btn","btn-primary","btn-sm","text-white","mr-2",3,"click"],["icon","angle-right"],["routerLink","../configurations",1,"btn","btn-light","border","btn-sm",3,"queryParams"],["icon","file-import",1,"text-muted"]],template:function(e,t){1&e&&(W.Nc(0,ls,13,2,"div",0),W.Nc(1,ds,2,0,"div",1)),2&e&&(W.rc("ngIf",!(t.connectionDetails&&t.connectionDetails.verified)&&t.isOnlineMode),W.Cb(1),W.rc("ngIf",t.connectionDetails&&t.connectionDetails.verified||!1===t.isOnlineMode))},directives:[i.m,ns.a,F.a,$.f,$.h],encapsulation:2}),e})();function bs(e,t){1&e&&(W.Wb(0,"div",13),W.Pc(1," StoryPurpose is a set of visualization tools for agile teams that help ensure every story's purpose aligns with that of the organization "),W.Wb(2,"div",14),W.Wb(3,"a",15),W.Pc(4,"Learn more... "),W.Rb(5,"fa-icon",16),W.Vb(),W.Vb(),W.Vb())}function ps(e,t){1&e&&(W.Wb(0,"div",21),W.Wb(1,"ul",22),W.Wb(2,"li"),W.Wb(3,"b"),W.Pc(4,"StoryPurpose for EPIC: "),W.Vb(),W.Pc(5," Useful for visualizing all EPIC issues and how they span across various components/modules within the application. "),W.Vb(),W.Wb(6,"li",23),W.Wb(7,"b"),W.Pc(8,"StoryPurpose for Story: "),W.Vb(),W.Pc(9," Useful for visualizing a selected story in the context of other linked issues, highlighting dependencies and overall associated feature delivery pipeline. "),W.Vb(),W.Vb(),W.Vb())}function hs(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",24),W.Wb(1,"button",25),W.ic("click",(function(){W.Gc(e);const t=W.kc(2);return t.navigateToKey(t.key)})),W.Rb(2,"fa-icon",26),W.Vb(),W.Vb()}2&e&&(W.Cb(2),W.rc("fixedWidth",!0))}const gs=function(){return["far","question-circle"]};function fs(e,t){if(1&e){const e=W.Xb();W.Pc(0," Proceed by entering Jira issue key "),W.Wb(1,"button",3),W.ic("click",(function(){W.Gc(e);const t=W.kc();return t.showSingleIssueHelp=!t.showSingleIssueHelp})),W.Rb(2,"fa-icon",4),W.Vb(),W.Nc(3,ps,10,0,"div",17),W.Wb(4,"div",18),W.Wb(5,"input",19),W.ic("ngModelChange",(function(t){return W.Gc(e),W.kc().key=t}))("keydown.enter",(function(){W.Gc(e);const t=W.kc();return t.navigateToKey(t.key)}))("keydown.escape",(function(){return W.Gc(e),W.kc().key=""})),W.Vb(),W.Nc(6,hs,3,1,"div",20),W.Vb()}if(2&e){const e=W.kc();W.Cb(2),W.rc("icon",W.uc(5,gs)),W.Cb(1),W.rc("ngIf",e.showSingleIssueHelp),W.Cb(2),W.rc("ngModel",e.key)("appAutofocus",1===e.selectedTab),W.Cb(1),W.rc("ngIf",e.canNavigateToKey())}}function ms(e,t){1&e&&(W.Wb(0,"div",21),W.Wb(1,"ul",22),W.Wb(2,"li"),W.Wb(3,"b"),W.Pc(4,"Storyboard and timeline for related issues: "),W.Vb(),W.Pc(5," This provides flexibility to choose multiple relevant issues and view on a story map. "),W.Vb(),W.Vb(),W.Vb())}function ys(e,t){if(1&e){const e=W.Xb();W.Wb(0,"div",24),W.Wb(1,"button",25),W.ic("click",(function(){W.Gc(e);const t=W.kc(2);return t.navigateJql(t.query)})),W.Rb(2,"fa-icon",28),W.Vb(),W.Vb()}2&e&&(W.Cb(2),W.rc("fixedWidth",!0))}function Is(e,t){if(1&e){const e=W.Xb();W.Pc(0," Proceed by entering JQL "),W.Wb(1,"button",3),W.ic("click",(function(){W.Gc(e);const t=W.kc();return t.showJQLHelp=!t.showJQLHelp})),W.Rb(2,"fa-icon",4),W.Vb(),W.Nc(3,ms,6,0,"div",17),W.Wb(4,"div",18),W.Wb(5,"input",27),W.ic("ngModelChange",(function(t){return W.Gc(e),W.kc().query=t}))("keydown.enter",(function(){W.Gc(e);const t=W.kc();return t.navigateJql(t.query)}))("keydown.escape",(function(){return W.Gc(e),W.kc().query=""})),W.Vb(),W.Nc(6,ys,3,1,"div",20),W.Vb()}if(2&e){const e=W.kc();W.Cb(2),W.rc("icon",W.uc(5,gs)),W.Cb(1),W.rc("ngIf",e.showJQLHelp),W.Cb(2),W.rc("ngModel",e.query)("appAutofocus",2===e.selectedTab),W.Cb(1),W.rc("ngIf",e.canNavigateJql())}}let ks=(()=>{class e{constructor(e){this.router=e,this.selectedTab=1,this.showSingleIssueHelp=!1,this.showJQLHelp=!1,this.showStoryPurposeHelp=!1,this.key="",this.query="",this.navigateToKey=e=>this.router.navigate(["/browse",e.trim()]),this.canNavigateToKey=()=>this.key&&this.key.trim().length>0,this.navigateJql=e=>this.router.navigate(["/search/list"],{queryParams:{query:e}}),this.canNavigateJql=()=>this.query&&this.query.trim().length>0}}return e.\u0275fac=function(t){return new(t||e)(W.Qb($.d))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-issue-not-entered"]],decls:19,vars:8,consts:[[1,"center-text"],[1,"mb-3","font-weight-light"],["src","/assets/logo.png","height","32pt",1,"mr-1"],[1,"btn","btn-sm","btn-link","text-muted",3,"click"],[3,"icon"],["class","p-3 mb-3 bg-light text-left",4,"ngIf"],[1,"custom-shadow","p-4","rounded","text-left"],["ngbNav","",1,"nav-tabs",3,"activeId","destroyOnHide","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-3",3,"ngbNavOutlet"],[1,"p-3","mb-3","bg-light","text-left"],[1,"text-right"],["href","https://www.storypurpose.info","target","_blank",1,"small"],["icon","external-link-alt","size","sm"],["class","p-3 mt-1 mb-3 bg-light",4,"ngIf"],[1,"input-group","mt-2"],["type","text","name","key","placeholder","Epic or Story key",1,"form-control",3,"ngModel","appAutofocus","ngModelChange","keydown.enter","keydown.escape"],["class","input-group-append",4,"ngIf"],[1,"p-3","mt-1","mb-3","bg-light"],[1,"small","pl-3"],[1,"mt-3"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","border","border-left-0",3,"click"],["icon","chevron-right",3,"fixedWidth"],["type","text","name","query","placeholder","JQL",1,"form-control",3,"ngModel","appAutofocus","ngModelChange","keydown.enter","keydown.escape"],["icon","search",3,"fixedWidth"]],template:function(e,t){if(1&e&&(W.Wb(0,"div",0),W.Wb(1,"h4",1),W.Rb(2,"img",2),W.Pc(3," StoryPurpose for Jira "),W.Wb(4,"button",3),W.ic("click",(function(){return t.showStoryPurposeHelp=!t.showStoryPurposeHelp})),W.Rb(5,"fa-icon",4),W.Vb(),W.Vb(),W.Nc(6,bs,6,0,"div",5),W.Wb(7,"div",6),W.Wb(8,"ul",7,8),W.ic("activeIdChange",(function(e){return t.selectedTab=e})),W.Wb(10,"li",9),W.Wb(11,"a",10),W.Pc(12,"Epic/Story"),W.Vb(),W.Nc(13,fs,7,6,"ng-template",11),W.Vb(),W.Wb(14,"li",9),W.Wb(15,"a",10),W.Pc(16,"JQL"),W.Vb(),W.Nc(17,Is,7,6,"ng-template",11),W.Vb(),W.Vb(),W.Rb(18,"div",12),W.Vb(),W.Vb()),2&e){const e=W.Ec(9);W.Cb(5),W.rc("icon",W.uc(7,gs)),W.Cb(1),W.rc("ngIf",t.showStoryPurposeHelp),W.Cb(2),W.rc("activeId",t.selectedTab)("destroyOnHide",!1),W.Cb(2),W.rc("ngbNavItem",1),W.Cb(4),W.rc("ngbNavItem",2),W.Cb(4),W.rc("ngbNavOutlet",e)}},directives:[F.a,i.m,le.j,le.l,le.m,le.k,le.o,Z.b,Z.f,Z.i,de.a],encapsulation:2}),e})(),Cs=(()=>{class e{constructor(e,t){this.router=e,this.activatedRoute=t,this.router.events.subscribe(e=>{e instanceof $.b&&this.autoRedirect()})}ngOnInit(){this.autoRedirect()}autoRedirect(){0===this.activatedRoute.children.length&&this.router.navigate([this.activatedRoute.parent.snapshot.params.issue],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(t){return new(t||e)(W.Qb($.d),W.Qb($.a))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-selected-issue-home"]],decls:1,vars:0,template:function(e,t){1&e&&W.Rb(0,"router-outlet")},directives:[$.h],encapsulation:2}),e})();var vs=s("5fYs");function js(e,t){if(1&e&&W.Rb(0,"app-timeline-renderer",3),2&e){const e=W.kc();W.rc("timeline",e.timeline)("contentHeight",e.contentHeight)}}let Os=(()=>{class e extends ie{constructor(e,t){super(e,t),this.cdRef=e,this.store$=t}ngOnInit(){this.init(92),this.selectedIssue$=this.store$.select(e=>e.issue.selectedIssue).pipe(Object(x.a)(e=>e)).subscribe(e=>{e.projectConfig&&e.projectConfig.startdate&&!V.find(j.r,e.projectConfig.startdate.id)&&j.r.push(e.projectConfig.startdate.id),this.selectedIssue=V.pick(e,V.union(j.r,["children"])),this.store$.dispatch(new I(this.selectedIssue.children))}),this.timeline$=this.store$.select(e=>e.issue.timelineView).pipe(Object(x.a)(e=>e)).subscribe(e=>this.timeline=e)}ngOnDestroy(){this.destroy(),this.selectedIssue$&&this.selectedIssue$.unsubscribe(),this.timeline$&&this.timeline$.unsubscribe()}ngAfterViewInit(){this.afterViewInit()}}return e.\u0275fac=function(t){return new(t||e)(W.Qb(W.h),W.Qb(n.h))},e.\u0275cmp=W.Kb({type:e,selectors:[["app-timeline"]],features:[W.zb],decls:3,vars:1,consts:[[1,"selectedIssue"],["content",""],[3,"timeline","contentHeight",4,"ngIf"],[3,"timeline","contentHeight"]],template:function(e,t){1&e&&(W.Wb(0,"div",0,1),W.Nc(2,js,1,2,"app-timeline-renderer",2),W.Vb()),2&e&&(W.Cb(2),W.rc("ngIf",t.timeline))},directives:[i.m,vs.a],encapsulation:2}),e})();var Vs=s("EVgl");s.d(t,"IssueModule",(function(){return Ss}));const Ls=[{path:"",component:us,children:[{path:":issue",component:ss,children:[{path:"purpose",component:Cs,children:[{path:":selected",component:Le,children:[{path:"details",component:Y},{path:"workbench",component:Vt},{path:"storyboard",component:Qt},{path:"timeline",component:Os},{path:"",redirectTo:"details",pathMatch:"full"}]}]},{path:"",redirectTo:"purpose",pathMatch:"full"}]},{path:"",component:ks}]}];let Ss=(()=>{class e{}return e.\u0275mod=W.Ob({type:e}),e.\u0275inj=W.Nb({factory:function(t){return new(t||e)},imports:[[i.c,$.g,Z.c,X.b,N.b,Vs.c,is.a,Wt.b,ee.b,wt.b,le.g,le.c,le.n,le.u,F.c,R.a,_.a,n.j.forFeature("issue",L,{initialState:c}),Kt.c.forFeature([Yt]),$.g.forChild(Ls)]]}),e})()}}]);