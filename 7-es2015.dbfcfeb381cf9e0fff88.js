(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,s){"use strict";s.r(e);var i=s("ofXK"),n=s("kt0X"),a=s("l2bN"),r=s("6NWb"),c=s("tyNb"),o=s("sITn"),b=s("3Pt+"),u=s("jLSX"),l=s("EVgl"),h=s("LPYB"),d=(s("hSFZ"),s("/RsI")),p=s("6ElM");const g={queryContext:null,issuelist:null,viewmode:p.b.LIST};function m(t,e){switch(e.type){case p.a.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case p.a.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case p.a.SetIssuelist:return Object.assign(Object.assign({},t),{issuelist:e.payload});default:return t}}var f=s("1kSV"),y=s("LvDl"),v=s("pLZG"),I=s("lJxs"),w=s("krUz"),S=s("SYT+"),V=s("fXoL"),x=s("F2Ol");function k(t,e){1&t&&(V.Wb(0,"div",5),V.Kc(1," No Records found. "),V.Vb())}function C(t,e){1&t&&(V.Wb(0,"a",17),V.Rb(1,"fa-icon",18),V.Kc(2," Storyboard view "),V.Vb()),2&t&&(V.Cb(1),V.pc("fixedWidth",!0))}function O(t,e){1&t&&(V.Wb(0,"a",19),V.Rb(1,"fa-icon",20),V.Kc(2," Back to list view "),V.Vb()),2&t&&(V.Cb(1),V.pc("fixedWidth",!0))}function W(t,e){if(1&t&&(V.Wb(0,"div",14),V.Ic(1,C,3,1,"a",15),V.Ic(2,O,3,1,"a",16),V.Vb()),2&t){const t=V.kc(2);V.Cb(1),V.pc("ngIf",t.searchViewmode===t.localViewmode.LIST),V.Cb(1),V.pc("ngIf",t.searchViewmode===t.localViewmode.STORYBOARD)}}function j(t,e){if(1&t){const t=V.Xb();V.Wb(0,"div",6),V.Wb(1,"div",2),V.Wb(2,"div",7),V.Rb(3,"div",8),V.Wb(4,"div",9),V.Wb(5,"table",7),V.Wb(6,"div",10),V.Kc(7),V.Wb(8,"b"),V.Kc(9),V.Vb(),V.Vb(),V.Wb(10,"div",11),V.Wb(11,"ngb-pagination",12),V.ic("pageChange",(function(e){return V.Bc(t),V.kc().currentPageIndex=e}))("pageChange",(function(){return V.Bc(t),V.kc().onPageChange()})),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Ic(12,W,3,2,"div",13),V.Vb(),V.Vb(),V.Vb()}if(2&t){const t=V.kc();V.Cb(7),V.Nc(" ",t.issuelist.startAt+1," - ",t.issuelist.endAt," / "),V.Cb(2),V.Lc(t.issuelist.total),V.Cb(2),V.pc("maxSize",3)("page",t.currentPageIndex)("boundaryLinks",!0)("pageSize",t.issuelist.pageSize)("collectionSize",t.issuelist.total),V.Cb(1),V.pc("ngIf",t.issuelist&&t.issuelist.results&&t.issuelist.results.length>1)}}let q=(()=>{class t{constructor(t,e,s,i){this.router=t,this.activatedRoute=e,this.jiraService=s,this.store$=i,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0,this.canExecuteQuery=()=>this.query&&this.query.trim().length>0}ngOnInit(){this.localViewmode=p.b,this.searchViewmode$=this.store$.select(t=>t.search.viewmode).subscribe(t=>this.searchViewmode=t),this.store$.dispatch(new S.p(!0)),this.query$=this.store$.select(t=>t.app.query).pipe(Object(v.a)(t=>t&&t.length>0)).subscribe(t=>{this.query=t,this.executeQuery()}),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(v.a)(t=>t&&t.query&&t.query.length>0),Object(I.a)(t=>t.query)).subscribe(t=>this.store$.dispatch(new S.m(t))),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(v.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}parseQueryContext(t,e){if(t)return t.issueType!==w.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}executeQuery(){this.canExecuteQuery()&&this.jiraService.executeJql(this.query,this.currentPageIndex-1,50,["components","labels","fixVersions"],"issuelist.json").pipe(Object(I.a)(t=>({total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:y.map(t.issues,t=>Object(w.m)(t))}))).subscribe(t=>this.store$.dispatch(new p.c(t)))}onPageChange(){this.executeQuery()}}return t.\u0275fac=function(e){return new(e||t)(V.Qb(c.d),V.Qb(c.a),V.Qb(x.b),V.Qb(n.h))},t.\u0275cmp=V.Kb({type:t,selectors:[["app-result-container"]],decls:6,vars:2,consts:[[1,"main-container"],[1,"body-container"],[1,"container-fluid"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["class","pane-footer bg-light",4,"ngIf"],[1,"center-text","custom-shadow","alert-warning","p-4"],[1,"pane-footer","bg-light"],[1,"row"],[1,"col-md-2"],[1,"col-md-8"],[1,"col-md-3","pt-3","small"],[1,"col-md-9"],["size","sm",1,"float-right","mt-2",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"],["class","col-md-2 text-right pt-2",4,"ngIf"],[1,"col-md-2","text-right","pt-2"],["class","btn btn-brand btn-sm","routerLink","storyboard","queryParamsHandling","merge",4,"ngIf"],["class","btn btn-secondary btn-sm","routerLink","list","queryParamsHandling","merge",4,"ngIf"],["routerLink","storyboard","queryParamsHandling","merge",1,"btn","btn-brand","btn-sm"],["icon","map",3,"fixedWidth"],["routerLink","list","queryParamsHandling","merge",1,"btn","btn-secondary","btn-sm"],["icon","chevron-left",3,"fixedWidth"]],template:function(t,e){1&t&&(V.Wb(0,"div",0),V.Wb(1,"div",1),V.Wb(2,"div",2),V.Rb(3,"router-outlet"),V.Ic(4,k,2,0,"div",3),V.Vb(),V.Vb(),V.Ic(5,j,13,9,"div",4),V.Vb()),2&t&&(V.Cb(4),V.pc("ngIf",e.issuelist&&0===e.issuelist.total),V.Cb(1),V.pc("ngIf",e.issuelist&&e.issuelist.total>0))},directives:[c.h,i.l,f.q,c.f,r.a],encapsulation:2}),t})();const R=function(t,e){return["/browse",t,"purpose",e]};function $(t,e){if(1&t&&(V.Wb(0,"div",5),V.Wb(1,"a",6),V.Wb(2,"sub",7),V.Kc(3),V.Vb(),V.Rb(4,"fa-icon",8),V.Wb(5,"div"),V.Kc(6),V.Wb(7,"span",9),V.Kc(8),V.Vb(),V.Vb(),V.Vb(),V.Vb()),2&t){const t=e.$implicit;V.Cb(1),V.pc("routerLink",V.uc(5,R,t.key,t.key)),V.Cb(2),V.Nc("",t.issueType,": ",t.key,""),V.Cb(3),V.Mc(" ",t.title," "),V.Cb(2),V.Lc(t.status)}}function L(t,e){if(1&t&&(V.Wb(0,"div",3),V.Ic(1,$,9,8,"div",4),V.Vb()),2&t){const t=V.kc();V.Cb(1),V.pc("ngForOf",t.issuelist.results)}}let Q=(()=>{class t{constructor(t,e,s,i){this.router=t,this.activatedRoute=e,this.jiraService=s,this.store$=i,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0}ngOnInit(){this.store$.dispatch(new p.e(p.b.LIST)),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(v.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}return t.\u0275fac=function(e){return new(e||t)(V.Qb(c.d),V.Qb(c.a),V.Qb(x.b),V.Qb(n.h))},t.\u0275cmp=V.Kb({type:t,selectors:[["app-search-listview"]],decls:3,vars:1,consts:[[1,"row"],[1,"col-md-8","offset-md-2"],["class","p-3 bg-white",4,"ngIf"],[1,"p-3","bg-white"],["class","issue-list-item",4,"ngFor","ngForOf"],[1,"issue-list-item"],[1,"btn","btn-link","btn-sm","text-dark","text-left","w-100","pt-0",3,"routerLink"],[1,"text-primary","text-uppercase"],["icon","angle-right",1,"text-muted","float-right","mt-2"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&(V.Wb(0,"div",0),V.Wb(1,"div",1),V.Ic(2,L,2,1,"div",2),V.Vb(),V.Vb()),2&t&&(V.Cb(2),V.pc("ngIf",e.issuelist))},directives:[i.l,i.k,c.f,r.a],encapsulation:2}),t})();var P=s("iLqC"),T=s("Ewkv"),z=s("NGyg");function K(t,e){if(1&t){const t=V.Xb();V.Wb(0,"p-dialog",5),V.ic("visibleChange",(function(e){return V.Bc(t),V.kc(2).showStatistics=e})),V.Rb(1,"app-epic-statistics",6),V.Vb()}if(2&t){const t=V.kc(2);V.pc("visible",t.showStatistics),V.Cb(1),V.pc("statusStats",t.storyboardItem.statistics.status)("issueTypeStats",t.storyboardItem.statistics.issueTypes)("componentStats",t.storyboardItem.statistics.components)}}const N=function(){return["far","chart-bar"]};function A(t,e){if(1&t){const t=V.Xb();V.Wb(0,"div"),V.Wb(1,"button",1),V.ic("click",(function(){return V.Bc(t),V.kc().showStatistics=!0})),V.Rb(2,"fa-icon",2),V.Vb(),V.Rb(3,"app-storyboard-renderer",3),V.Ic(4,K,2,4,"p-dialog",4),V.Vb()}if(2&t){const t=V.kc();V.Cb(2),V.pc("icon",V.sc(3,N)),V.Cb(1),V.pc("storyboardItem",t.storyboardItem),V.Cb(1),V.pc("ngIf",t.storyboardItem.statistics)}}let B=(()=>{class t{constructor(t,e){this.store$=t,this.activatedRoute=e,this.showStatistics=!1}ngOnInit(){this.store$.dispatch(new p.e(p.b.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(v.a)(t=>t)).subscribe(t=>{this.storyboardItem.metadata=Object(P.b)(),console.log(t),this.storyboardItem.children=t.results,Object(P.c)(this.storyboardItem.metadata,Object(P.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(P.d)(this.storyboardItem)})}ngOnDestroy(){this.issuelist$&&this.issuelist$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V.Qb(n.h),V.Qb(c.a))},t.\u0275cmp=V.Kb({type:t,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"btn","btn-link","float-right","mt-1",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&V.Ic(0,A,5,4,"div",0),2&t&&V.pc("ngIf",e.storyboardItem)},directives:[i.l,r.a,T.a,d.a,z.a],encapsulation:2}),t})();s.d(e,"SearchModule",(function(){return D}));const X=[{path:"",component:q,children:[{path:"list",component:Q},{path:"storyboard",component:B}]}];let D=(()=>{class t{}return t.\u0275mod=V.Ob({type:t}),t.\u0275inj=V.Nb({factory:function(e){return new(e||t)},imports:[[i.c,c.g,b.c,a.b,r.c,u.b,l.a,d.b,h.b,f.i,o.a,n.i.forFeature("search",m,{initialState:g}),c.g.forChild(X)]]}),t})()}}]);