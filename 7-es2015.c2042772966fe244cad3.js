(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RmqX:function(t,e,s){"use strict";s.r(e);var i=s("ofXK"),a=s("kt0X"),c=s("l2bN"),n=s("6NWb"),r=s("tyNb"),o=s("sITn"),l=s("3Pt+"),u=s("jLSX"),b=s("fXoL"),d=(s("XNiG"),s("YyRF"),s("vxfF")),h=(s("R0Ic"),s("7zfz")),p=(s("t2ka"),s("xlun"));let g=(()=>{let t=class{};return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,h.e,d.d,p.b],h.e,d.d]}),t})(),f=(()=>{let t=class{};return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,g,l.c,h.e],g,l.c,h.e]}),t})(),m=(()=>{let t=class{};return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,f],h.e]}),t})();var S=s("LPYB"),y=(s("hSFZ"),s("/RsI")),v=s("j9Al");const I={LIST:"LIST",STORYBOARD:"STORYBOARD"},O={SwitchViewmode:Object(v.b)("[SwitchViewmode]"),SetQueryContext:Object(v.b)("[SetQueryContext]"),LoadSearchResults:Object(v.b)("[LoadSearchResults]"),LoadSearchResultsFailed:Object(v.b)("[LoadSearchResults] Failed"),LoadSearchResultsSuccess:Object(v.b)("[LoadSearchResults] Success"),LoadSavedSearchlist:Object(v.b)("[LoadSavedSearchlist]"),LoadSavedSearchlistFailed:Object(v.b)("[LoadSavedSearchlist] Failed"),LoadSavedSearchlistSuccess:Object(v.b)("[LoadSavedSearchlist] Success")};class w{constructor(t){this.payload=t,this.type=O.SwitchViewmode}}class j{constructor(t){this.payload=t,this.type=O.LoadSearchResults}}class k{constructor(t){this.payload=t,this.type=O.LoadSavedSearchlist}}const L={queryContext:null,issuelist:null,viewmode:I.LIST,savedSearchlist:null};var C=s("LvDl");function V(t,e){switch(e.type){case O.SwitchViewmode:return Object.assign(Object.assign({},t),{viewmode:e.payload});case O.SetQueryContext:return Object.assign(Object.assign({},t),{queryContext:e.payload});case O.LoadSearchResults:return Object.assign(Object.assign({},t),{issuelist:[]});case O.LoadSearchResultsSuccess:return Object.assign(Object.assign({},t),{issuelist:e.payload});case O.LoadSavedSearchlist:return Object.assign(Object.assign({},t),{savedSearchlist:[]});case O.LoadSavedSearchlistSuccess:{const s=C.map(e.payload,t=>C.pick(t,["id","name","jql"]));return Object.assign(Object.assign({},t),{savedSearchlist:s})}default:return t}}var x=s("1kSV"),R=s("pLZG"),W=s("lJxs"),z=s("krUz"),q=s("SYT+"),P=s("cdP3");const $=function(){return["/search/list"]},F=function(t){return{query:t}};function T(t,e){if(1&t&&(b.Wb(0,"div",3),b.Wb(1,"a",4),b.Kc(2),b.Vb(),b.Vb()),2&t){const t=e.$implicit;b.Cb(1),b.pc("routerLink",b.sc(3,$))("queryParams",b.tc(4,F,t.jql)),b.Cb(1),b.Mc(" ",t.name," ")}}function Q(t,e){if(1&t&&(b.Wb(0,"div",1),b.Ic(1,T,3,6,"div",2),b.Vb()),2&t){const t=b.kc();b.Cb(1),b.pc("ngForOf",t.searchlist)}}let N=(()=>{class t{constructor(t){this.store$=t}ngOnInit(){this.searchlist$=this.store$.select(t=>t.search.savedSearchlist).pipe(Object(R.a)(t=>t)).subscribe(t=>this.searchlist=t),this.store$.dispatch(new k(null))}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(a.h))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-favourite-searches"]],decls:3,vars:1,consts:[["class","list-group list-group-flush list-group-flush-compact",4,"ngIf"],[1,"list-group","list-group-flush","list-group-flush-compact"],["class","list-group-item border-0 pl-0",4,"ngFor","ngForOf"],[1,"list-group-item","border-0","pl-0"],[1,"text-muted",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis",3,"routerLink","queryParams"]],template:function(t,e){1&t&&(b.Wb(0,"h6"),b.Kc(1,"Favourite"),b.Vb(),b.Ic(2,Q,2,1,"div",0)),2&t&&(b.Cb(2),b.pc("ngIf",e.searchlist))},directives:[i.l,i.k,r.f],encapsulation:2}),t})();function K(t,e){1&t&&(b.Wb(0,"div"),b.Rb(1,"app-favourite-searches"),b.Vb())}function B(t,e){1&t&&(b.Wb(0,"div",11),b.Kc(1," No Records found. "),b.Vb())}function A(t,e){1&t&&(b.Wb(0,"a",19),b.Rb(1,"fa-icon",20),b.Kc(2," Storyboard view "),b.Vb()),2&t&&(b.Cb(1),b.pc("fixedWidth",!0))}function M(t,e){1&t&&(b.Wb(0,"a",21),b.Rb(1,"fa-icon",22),b.Kc(2," Back to list view "),b.Vb()),2&t&&(b.Cb(1),b.pc("fixedWidth",!0))}function X(t,e){if(1&t&&(b.Wb(0,"div",16),b.Ic(1,A,3,1,"a",17),b.Ic(2,M,3,1,"a",18),b.Vb()),2&t){const t=b.kc(2);b.Cb(1),b.pc("ngIf",t.searchViewmode===t.localViewmode.LIST),b.Cb(1),b.pc("ngIf",t.searchViewmode===t.localViewmode.STORYBOARD)}}function D(t,e){if(1&t){const t=b.Xb();b.Wb(0,"div",23),b.Wb(1,"ngb-pagination",24),b.ic("pageChange",(function(e){return b.Bc(t),b.kc(2).currentPageIndex=e}))("pageChange",(function(){return b.Bc(t),b.kc(2).onPageChange()})),b.Vb(),b.Vb()}if(2&t){const t=b.kc(2);b.Cb(1),b.pc("maxSize",3)("page",t.currentPageIndex)("boundaryLinks",!0)("pageSize",t.issuelist.pageSize)("collectionSize",t.issuelist.total)}}function Y(t,e){if(1&t&&(b.Wb(0,"div",12),b.Ic(1,X,3,2,"div",13),b.Ic(2,D,2,5,"div",14),b.Wb(3,"div",15),b.Kc(4),b.Wb(5,"b"),b.Kc(6),b.Vb(),b.Vb(),b.Vb()),2&t){const t=b.kc();b.Cb(1),b.pc("ngIf",t.issuelist&&t.issuelist.results&&t.issuelist.results.length>1),b.Cb(1),b.pc("ngIf",t.issuelist.total>t.issuelist.pageSize),b.Cb(2),b.Nc(" ",t.issuelist.startAt+1," - ",t.issuelist.endAt," / "),b.Cb(2),b.Lc(t.issuelist.total)}}let J=(()=>{class t{constructor(t,e,s){this.router=t,this.activatedRoute=e,this.store$=s,this.selectedTab=1,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0,this.canExecuteQuery=()=>this.query&&this.query.trim().length>0,this.leftPaneSize=20,this.columns=[{visible:!0,size:20},{visible:!0,size:80}]}ngOnInit(){this.localViewmode=I,this.searchViewmode$=this.store$.select(t=>t.search.viewmode).subscribe(t=>this.searchViewmode=t),this.store$.dispatch(new q.l(!0)),this.queryParams$=this.activatedRoute.queryParams.pipe(Object(R.a)(t=>t&&t.query&&t.query.length>0),Object(W.a)(t=>t.query)).subscribe(t=>{this.query=t,this.executeQuery()}),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(R.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}parseQueryContext(t,e){if(t)return t.issueType!==z.a.Organization&&e.push({key:t.issueType,value:t.key}),t.parent?this.parseQueryContext(t.parent,e):null}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}executeQuery(){this.canExecuteQuery()&&this.store$.dispatch(new j({query:this.query,currentPageIndex:this.currentPageIndex}))}onPageChange(){this.executeQuery()}dragEnd(t){this.adjustPaneSize(t.sizes[0])}adjustPaneSize(t){this.leftPaneSize=t,this.columns[0].size=t,this.columns[1].size=100-t}toggleFullscreen(){this.adjustPaneSize(0===this.leftPaneSize?20:0)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(r.d),b.Qb(r.a),b.Qb(a.h))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-result-container"]],decls:12,vars:7,consts:[[1,"main-container"],["direction","horizontal"],[1,"small","pt-2","pl-3",3,"size"],[4,"ngIf"],[3,"size"],[1,"body-container"],[1,"container-fluid"],["title","expand/collapse pane",1,"btn","btn-link","text-muted","float-left","pl-0",3,"click"],[3,"icon","fixedWidth"],["class","center-text custom-shadow alert-warning p-4",4,"ngIf"],["class","footer-container bg-light",4,"ngIf"],[1,"center-text","custom-shadow","alert-warning","p-4"],[1,"footer-container","bg-light"],["class","float-right pt-1 ml-2",4,"ngIf"],["class","float-right mt-1 mb-0",4,"ngIf"],[1,"pt-2","small","clearfix"],[1,"float-right","pt-1","ml-2"],["class","btn btn-brand btn-sm","routerLink","storyboard","queryParamsHandling","merge",4,"ngIf"],["class","btn btn-secondary btn-sm","routerLink","list","queryParamsHandling","merge",4,"ngIf"],["routerLink","storyboard","queryParamsHandling","merge",1,"btn","btn-brand","btn-sm"],["icon","map",3,"fixedWidth"],["routerLink","list","queryParamsHandling","merge",1,"btn","btn-secondary","btn-sm"],["icon","chevron-left",3,"fixedWidth"],[1,"float-right","mt-1","mb-0"],["size","sm",3,"maxSize","page","boundaryLinks","pageSize","collectionSize","pageChange"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Wb(1,"as-split",1),b.Wb(2,"as-split-area",2),b.Ic(3,K,2,0,"div",3),b.Vb(),b.Wb(4,"as-split-area",4),b.Wb(5,"div",5),b.Wb(6,"div",6),b.Wb(7,"button",7),b.ic("click",(function(){return e.toggleFullscreen()})),b.Rb(8,"fa-icon",8),b.Vb(),b.Rb(9,"router-outlet"),b.Ic(10,B,2,0,"div",9),b.Vb(),b.Vb(),b.Ic(11,Y,7,5,"div",10),b.Vb(),b.Vb(),b.Vb()),2&t&&(b.Cb(2),b.pc("size",e.columns[0].size),b.Cb(1),b.pc("ngIf",e.leftPaneSize>0),b.Cb(1),b.pc("size",e.columns[1].size),b.Cb(4),b.pc("icon",0===e.columns[0].size?"angle-double-right":"angle-double-left")("fixedWidth",!0),b.Cb(2),b.pc("ngIf",e.issuelist&&0===e.issuelist.total),b.Cb(1),b.pc("ngIf",e.issuelist&&e.issuelist.total>0))},directives:[P.c,P.b,i.l,n.a,r.h,N,r.f,x.q],encapsulation:2}),t})();const E=function(t,e){return["/browse",t,"purpose",e]};function G(t,e){if(1&t&&(b.Wb(0,"div",4),b.Wb(1,"a",5),b.Wb(2,"sub",6),b.Kc(3),b.Vb(),b.Rb(4,"fa-icon",7),b.Wb(5,"div",8),b.Kc(6),b.Wb(7,"span",9),b.Kc(8),b.Vb(),b.Vb(),b.Vb(),b.Vb()),2&t){const t=e.$implicit;b.Cb(1),b.pc("routerLink",b.uc(5,E,t.key,t.key)),b.Cb(2),b.Nc("",t.issueType,": ",t.key,""),b.Cb(3),b.Mc(" ",t.title," "),b.Cb(2),b.Lc(t.status)}}function H(t,e){if(1&t&&(b.Wb(0,"div",2),b.Ic(1,G,9,8,"div",3),b.Vb()),2&t){const t=b.kc();b.Cb(1),b.pc("ngForOf",t.issuelist.results)}}let Z=(()=>{class t{constructor(t,e,s){this.router=t,this.activatedRoute=e,this.store$=s,this.currentPageIndex=1,this.canNavigate=()=>this.issuelist&&this.issuelist.trim().length>0}ngOnInit(){this.store$.dispatch(new w(I.LIST)),this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(R.a)(t=>t)).subscribe(t=>this.issuelist=t)}ngOnDestroy(){}navigateTo(t){this.canNavigate()&&this.router.navigate(["/browse",t.trim()])}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(r.d),b.Qb(r.a),b.Qb(a.h))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-search-listview"]],decls:2,vars:1,consts:[[1,"container"],["class","p-3 bg-white",4,"ngIf"],[1,"p-3","bg-white"],["class","issue-list-item",4,"ngFor","ngForOf"],[1,"issue-list-item"],[1,"btn","btn-link","btn-sm","text-dark","text-left","w-100","pt-0",3,"routerLink"],[1,"text-primary","text-uppercase"],["icon","angle-right",1,"text-muted","float-right","mt-2"],[1,"text-no-wrap"],[1,"badge","badge-light","font-weight-normal"]],template:function(t,e){1&t&&(b.Wb(0,"div",0),b.Ic(1,H,2,1,"div",1),b.Vb()),2&t&&(b.Cb(1),b.pc("ngIf",e.issuelist))},directives:[i.l,i.k,r.f,n.a],encapsulation:2}),t})();var U=s("iLqC"),_=s("Ewkv"),tt=s("lVkt"),et=s("NGyg");function st(t,e){if(1&t){const t=b.Xb();b.Wb(0,"p-multiSelect",10),b.ic("ngModelChange",(function(e){return b.Bc(t),b.kc(2).selectedStatuses=e}))("onChange",(function(e){return b.Bc(t),b.kc(2).onSelectedStatusChange(e)})),b.Vb()}if(2&t){const t=b.kc(2);b.pc("options",t.statusLookup)("ngModel",t.selectedStatuses)}}function it(t,e){if(1&t){const t=b.Xb();b.Wb(0,"p-dialog",11),b.ic("visibleChange",(function(e){return b.Bc(t),b.kc(2).showStatistics=e})),b.Rb(1,"app-statistics",12),b.Vb()}if(2&t){const t=b.kc(2);b.pc("visible",t.showStatistics),b.Cb(1),b.pc("statusStats",t.storyboardItem.statistics.status)("issueTypeStats",t.storyboardItem.statistics.issueTypes)("componentStats",t.storyboardItem.statistics.components)}}const at=function(){return["far","chart-bar"]};function ct(t,e){if(1&t){const t=b.Xb();b.Wb(0,"div"),b.Wb(1,"div",1),b.Rb(2,"div",2),b.Wb(3,"div",3),b.Ic(4,st,1,2,"p-multiSelect",4),b.Vb(),b.Wb(5,"div",5),b.Wb(6,"button",6),b.ic("click",(function(){return b.Bc(t),b.kc().showStatistics=!0})),b.Rb(7,"fa-icon",7),b.Vb(),b.Vb(),b.Vb(),b.Rb(8,"app-storyboard-renderer",8),b.Ic(9,it,2,4,"p-dialog",9),b.Vb()}if(2&t){const t=b.kc();b.Cb(4),b.pc("ngIf",t.statusLookup&&t.statusLookup.length>0),b.Cb(3),b.pc("icon",b.sc(4,at)),b.Cb(1),b.pc("storyboardItem",t.storyboardItem),b.Cb(1),b.pc("ngIf",t.storyboardItem.statistics)}}let nt=(()=>{class t{constructor(t,e){this.activatedRoute=t,this.store$=e,this.selectedStatuses=[],this.statusLookup=[],this.showStatistics=!1,this.filterByStatus=(t,e)=>e&&e.length>0?C.filter(t,t=>void 0!==C.find(e,e=>e===t.status)):t}ngOnInit(){this.store$.dispatch(new w(I.STORYBOARD)),this.storyboardItem={query:null,children:[]},this.issuelist$=this.store$.select(t=>t.search.issuelist).pipe(Object(R.a)(t=>t)).subscribe(t=>{this.issuelist=t,this.plotStoryboard()})}ngOnDestroy(){this.issuelist$&&this.issuelist$.unsubscribe()}plotStoryboard(){const t=C.map(this.selectedStatuses,"key");this.storyboardItem.metadata=Object(U.b)(),this.storyboardItem.children=this.filterByStatus(this.issuelist.results,t),Object(U.c)(this.storyboardItem.metadata,Object(U.a)(this.storyboardItem.children)),this.storyboardItem.statistics=Object(U.d)(this.storyboardItem),this.storyboardItem.statistics&&this.statusLookup&&0===this.statusLookup.length&&(this.statusLookup=this.storyboardItem.statistics.status)}onSelectedStatusChange(t){this.plotStoryboard()}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(r.a),b.Qb(a.h))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-storyboard-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","mt-1","mb-1"],[1,"col-md-8"],[1,"col-md-3"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange",4,"ngIf"],[1,"col-md-1"],[1,"btn","btn-link",3,"click"],["size","lg",3,"icon"],[3,"storyboardItem"],["header","Statistics","position","topright","class","bg-light",3,"visible","visibleChange",4,"ngIf"],["styleClass","w-100","defaultLabel","Filter","optionLabel","key",3,"options","ngModel","ngModelChange","onChange"],["header","Statistics","position","topright",1,"bg-light",3,"visible","visibleChange"],[3,"statusStats","issueTypeStats","componentStats"]],template:function(t,e){1&t&&b.Ic(0,ct,10,5,"div",0),2&t&&b.pc("ngIf",e.storyboardItem)},directives:[i.l,n.a,_.a,tt.a,l.f,l.i,y.a,et.a],encapsulation:2}),t})();var rt=s("snw9"),ot=s("mrSG"),lt=s("eIep"),ut=s("JIr8"),bt=s("LRne"),dt=s("F2Ol");let ht=(()=>{class t{constructor(t,e){this.actions$=t,this.jiraService=e,this.loadSearchlist=this.actions$.pipe(Object(rt.d)(O.LoadSearchResults),Object(lt.a)(t=>this.jiraService.executeJql(t.payload.query,t.payload.currentPageIndex-1,50,z.l,"issuelist.json").pipe(Object(W.a)(t=>({total:t.total,startAt:t.startAt,endAt:t.startAt+t.maxResults<t.total?t.startAt+t.maxResults:t.total,pageSize:t.maxResults,results:C.map(t.issues,t=>Object(z.q)(t))}))).pipe(Object(W.a)(t=>({type:O.LoadSearchResultsSuccess,payload:t})),Object(ut.a)(()=>Object(bt.a)({type:O.LoadSearchResultsFailed}))))),this.loadSaveSearchlist=this.actions$.pipe(Object(rt.d)(O.LoadSavedSearchlist),Object(lt.a)(()=>this.jiraService.favouriteSearches("favourite-search.json").pipe(Object(W.a)(t=>({type:O.LoadSavedSearchlistSuccess,payload:t})),Object(ut.a)(()=>Object(bt.a)({type:O.LoadSavedSearchlistFailed})))))}}return t.\u0275fac=function(e){return new(e||t)(b.ec(rt.a),b.ec(dt.b))},t.\u0275prov=b.Mb({token:t,factory:t.\u0275fac}),Object(ot.b)([Object(rt.b)()],t.prototype,"loadSearchlist",void 0),Object(ot.b)([Object(rt.b)()],t.prototype,"loadSaveSearchlist",void 0),t})();s.d(e,"SearchModule",(function(){return gt}));const pt=[{path:"",component:J,children:[{path:"list",component:Z},{path:"storyboard",component:nt}]}];let gt=(()=>{class t{}return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[i.c,r.g,l.c,c.b,n.c,u.b,m,y.b,S.b,tt.b,P.a,x.i,o.a,a.j.forFeature("search",V,{initialState:L}),rt.c.forFeature([ht]),r.g.forChild(pt)]]}),t})()}}]);