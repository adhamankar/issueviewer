<nav class="navbar navbar-expand-lg navbar-dark"
  [ngClass]="{'bg-primary': !connectionDetails || !connectionDetails.offlineMode, 'bg-warning': connectionDetails && connectionDetails.offlineMode}">
  <a class="navbar-brand" href="#">
    <fa-icon icon="binoculars"></fa-icon> <b class="ml-1">Purpose</b>
  </a>

  <div class="form-inline mr-auto" *ngIf="connectionDetails">
    <app-issue-entry></app-issue-entry>
  </div>
  <ul class="navbar-nav">
    <li class="nav-item ">
      <a class="nav-link text-white mr-2" (click)="showCustomFieldSetup = true">
        <fa-icon icon="wrench" size="lg"></fa-icon>
      </a>
    </li>
    <li class="nav-item ">
      <a class="nav-link text-white" (click)="showConnectionDetailsSetup = true">
        <fa-icon icon="cog" size="lg"></fa-icon>
      </a>
    </li>
  </ul>
</nav>

<ngx-loading-bar color="#FF8000" height="4pt" [includeSpinner]="false"></ngx-loading-bar>

<p-toast position="bottom-right"></p-toast>

<p-sidebar [(visible)]="showConnectionDetailsSetup" styleClass="ui-sidebar-md" position="right">
  <app-connection-details (close)="connectionDetailsSetupCompleted()"></app-connection-details>
</p-sidebar>
<p-sidebar [(visible)]="showCustomFieldSetup" styleClass="ui-sidebar-md" position="right">
  <app-custom-fields (close)="customFieldSetupCompleted()"></app-custom-fields>
</p-sidebar>

<div *ngIf="missingConnectionDetails" class="center-text">
  <b>Graphical representation of jira Issues</b>

  <div class="alert bg-white m-3">
    <fa-icon icon="exclamation-triangle"></fa-icon>
    Connection details have not been set.
    <br>
    <a class="btn btn-sm btn-primary text-white mt-2" (click)="showConnectionDetailsSetup = true">
      Setup now <fa-icon icon="chevron-right"></fa-icon>
    </a>
  </div>
  <div class="text-left">
    <ol>
      <li>Setup the jira connection details</li>
      <li>Enter the Jira issue key</li>
      <li>Track purpose of issue</li>
    </ol>
  </div>
</div>

<div *ngIf="!missingConnectionDetails">
  <router-outlet> </router-outlet>
</div>